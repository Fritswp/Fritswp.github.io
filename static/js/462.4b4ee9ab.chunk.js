"use strict";(self.webpackChunkmy_react=self.webpackChunkmy_react||[]).push([[462],{6330:function(e,t,r){r.r(t);var s=r(4165),n=r(5861),a=r(9439),o=r(2791),l=r(673),c=r(2481),i=r(6635),u=(r(276),r(7689)),d=r(7386),m=r(184);t.default=function(){(0,u.UO)().customURL;var e=(0,o.useState)(null),t=(0,a.Z)(e,2),r=t[0],p=t[1],h=(0,o.useState)(""),x=(0,a.Z)(h,2),f=x[0],v=x[1],g=(0,o.useState)(""),j=(0,a.Z)(g,2),N=j[0],b=j[1],y=(0,o.useState)(null),w=(0,a.Z)(y,2),k=w[0],Z=w[1],L=(0,o.useState)(null),C=(0,a.Z)(L,2),U=(C[0],C[1],(0,o.useState)({text:"",type:""})),E=(0,a.Z)(U,2),R=E[0],S=(E[1],(0,o.useState)({text:"",type:""})),P=(0,a.Z)(S,2),I=P[0],M=P[1],B=(0,o.useState)(!1),A=(0,a.Z)(B,2),D=A[0],W=A[1],z=(0,o.useState)(""),J=(0,a.Z)(z,2),O=J[0],T=J[1],F=(0,o.useState)(""),V=(0,a.Z)(F,2),H=V[0],_=V[1],q=(0,o.useState)(""),G=(0,a.Z)(q,2),Q=G[0],K=G[1],X=(0,o.useState)(""),Y=(0,a.Z)(X,2),$=Y[0],ee=Y[1],te=(0,o.useState)(""),re=(0,a.Z)(te,2),se=re[0],ne=re[1],ae=(0,o.useState)(""),oe=(0,a.Z)(ae,2),le=oe[0],ce=oe[1],ie=(0,o.useState)(""),ue=(0,a.Z)(ie,2),de=ue[0],me=ue[1],pe=(0,o.useState)(null),he=(0,a.Z)(pe,2),xe=(he[0],he[1],(0,o.useState)("")),fe=(0,a.Z)(xe,2),ve=fe[0],ge=fe[1],je=(0,o.useState)(!1),Ne=(0,a.Z)(je,2),be=Ne[0],ye=Ne[1];(0,o.useEffect)((function(){var e=l.I8.onAuthStateChanged(function(){var e=(0,n.Z)((0,s.Z)().mark((function e(t){var r,n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return p(t),r=(0,c.JU)(l.RZ,"userProfiles",t.uid),e.next=5,(0,c.QT)(r);case 5:(n=e.sent).exists()?((a=n.data()).photoURL?Z(a.photoURL):Z(t.photoURL),v(a.firstName||t.displayName.split(" ")[0]||""),b(a.lastName||t.displayName.split(" ")[1]||""),T(a.address||""),_(a.city||""),K(a.county||""),ee(a.postcode||""),ne(a.mobileNumber||""),ce(a.role||""),me(t.email),ge(a.description)):(v(t.displayName.split(" ")[0]||""),b(t.displayName.split(" ")[1]||""),Z(t.photoURL),me(t.email)),e.next=18;break;case 9:T(""),_(""),K(""),ee(""),ne(""),Z(null),me(""),ce(""),ge("");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){e()}}),[]);var we=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(t),n=(0,c.JU)(l.RZ,"userProfiles",r.uid),e.next=4,(0,c.r7)(n,{photoURL:t});case 4:(0,i.ck)(r,{photoURL:t}).then((function(){console.log("Profile photo updated successfully")})).catch((function(e){console.error("Error updating profile photo:",e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=l.I8.currentUser,e.next=6,(0,i.ck)(t,{displayName:"".concat(f," ").concat(N),photoURL:t.photoURL});case 6:return n=(0,c.JU)(l.RZ,"userProfiles",r.uid),e.next=9,(0,c.pl)(n,{displayName:"".concat(f," ").concat(N),firstName:f,lastName:N,email:de,mobileNumber:document.getElementById("inputMobileNumber").value,role:document.getElementById("inputRole").value,address:document.getElementById("inputAddress").value,city:document.getElementById("inputCity").value,county:document.getElementById("inputCounty").value,postcode:document.getElementById("inputPostcode").value,description:document.getElementById("inputDescription").value,photoURL:k},{merge:!0});case 9:M({text:"Profile updated successfully",type:"success"}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),M({text:"Error updating profile: ".concat(e.t0.message),type:"error"}),setTimeout((function(){M({text:"",type:""})}),3e3);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),Ze=function(){console.log("Image clicked"),ye(!0)};return(0,m.jsxs)("div",{className:"profile-container",children:[(0,m.jsx)("div",{className:"container"}),(0,m.jsx)("div",{className:"profile-section",children:(0,m.jsx)("div",{className:"content profile-content ",children:(0,m.jsxs)("div",{className:"row g-3",children:[(0,m.jsx)("div",{className:"card-profile"}),(0,m.jsxs)("div",{className:"card-body",children:[(0,m.jsxs)("div",{className:"Profile-image position-relative",children:[!D&&k&&(0,m.jsxs)("div",{className:"position-relative",children:[(0,m.jsx)("img",{src:k,alt:"User Profile",className:"user-avatar large-avatar mb-3",onError:function(){return W(!0)},onClick:Ze,style:{cursor:"pointer"}}),(0,m.jsx)("div",{className:"svg-icon",onClick:Ze,children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:2,stroke:"white",className:"w-6 h-6",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})]}),D&&(0,m.jsx)("div",{className:"position-relative",children:(0,m.jsx)("img",{src:"".concat("","/images/arts/user.webp"),alt:"Custom 404 Image",className:"user-avatar large-avatar rounded-circle mb-3",onClick:Ze,style:{cursor:"pointer"}})})]}),(0,m.jsxs)("div",{children:["error"===R.type&&(0,m.jsx)("p",{className:"fw-light",style:{color:"red"},children:R.text}),"success"===R.type&&(0,m.jsx)("p",{className:"fw-light",style:{color:"green"},children:R.text}),"progress"===R.type&&(0,m.jsx)("p",{className:"fw-light",style:{color:"gray"},children:R.text})]}),(0,m.jsxs)("div",{className:"px-3",children:[(0,m.jsx)("div",{className:"card-title",children:"".concat(f," ").concat(N)}),(0,m.jsx)("div",{className:"text-muted card-subtitle h6",children:le})]})]}),(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)("h3",{children:"My Profile"}),(0,m.jsx)("hr",{})]}),(0,m.jsxs)("form",{className:"file-upload",children:[(0,m.jsx)("div",{className:"row mb-4 gx-4",children:(0,m.jsx)("div",{className:"col-xl-8 col-12",children:(0,m.jsx)("div",{className:"",children:(0,m.jsxs)("div",{className:"card-body card-profile",children:[(0,m.jsxs)("div",{className:"row g-3",children:[(0,m.jsx)("h4",{className:"mb-4",children:"General information"}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{className:"form-label",children:"First Name *"}),(0,m.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"","aria-label":"First name",value:f,onChange:function(e){return v(e.target.value)}})]}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,m.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"","aria-label":"Last name",value:N,onChange:function(e){return b(e.target.value)}})]}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{htmlFor:"inputEmail4",className:"form-label",children:"Email *"}),(0,m.jsx)("input",{type:"email",className:"form-control form-control-lg",id:"inputEmail4",value:r?r.email:"",readOnly:!0})]}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{className:"form-label",children:"Mobile number *"}),(0,m.jsx)("input",{id:"inputMobileNumber",type:"text",className:"form-control form-control-lg",placeholder:"Enter your Phone number","aria-label":"Phone number",value:se,onChange:function(e){return ne(e.target.value)}})]}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{className:"form-label",children:"Role/Expertise *"}),(0,m.jsx)("input",{id:"inputRole",type:"text",className:"form-control form-control-lg",placeholder:"Enter your role/expertise","aria-label":"your Role",value:le,onChange:function(e){return ce(e.target.value)}})]}),(0,m.jsxs)("div",{className:"col-md-12",children:[(0,m.jsx)("label",{className:"form-label",children:"Description of Expertise"}),(0,m.jsx)("textarea",{id:"inputDescription",type:"text",className:"form-control",rows:"4",placeholder:"Enter a brief description of your expertise or how you can help",value:ve,onChange:function(e){return ge(e.target.value)},style:{resize:"none"}})]})]}),(0,m.jsx)("div",{className:"py-5 rounded mt-4",children:(0,m.jsxs)("div",{className:"row g-3",children:[(0,m.jsx)("h4",{className:"mb-4 mt-0",children:"Address"}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{className:"form-label",children:"Address"}),(0,m.jsx)("input",{id:"inputAddress",type:"text",className:"form-control form-control-lg",placeholder:"Enter your home address",value:O,onChange:function(e){return T(e.target.value)}})]}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{className:"form-label",children:"City"}),(0,m.jsx)("input",{id:"inputCity",type:"text",className:"form-control form-control-lg",placeholder:"Enter City",value:H,onChange:function(e){return _(e.target.value)}})]}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{className:"form-label",children:"County"}),(0,m.jsx)("input",{id:"inputCounty",type:"text",className:"form-control form-control-lg",placeholder:"County",value:Q,onChange:function(e){return K(e.target.value)}})]}),(0,m.jsxs)("div",{className:"col-md-6",children:[(0,m.jsx)("label",{className:"form-label",children:"Postcode"}),(0,m.jsx)("input",{id:"inputPostcode",type:"text",className:"form-control form-control-lg",placeholder:"Postcode",value:$,onChange:function(e){return ee(e.target.value)}})]})]})}),(0,m.jsxs)("div",{className:"mt-3",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-primary mb-4",onClick:ke,children:"Update profile"}),(0,m.jsxs)("div",{children:["error"===I.type&&(0,m.jsx)("p",{className:"fw-light",style:{color:"red"},children:I.text}),"success"===I.type&&(0,m.jsx)("p",{className:"fw-light",style:{color:"green"},children:I.text})]})]})]})})})}),(0,m.jsx)("div",{className:"gap-3 d-md-flex justify-content-md-end text-center",children:(0,m.jsx)("button",{type:"button",className:"btn btn-danger",children:"Delete profile"})})]})]})})}),be&&(0,m.jsx)(d.Z,{setPhotoURL:Z,setImageLoadError:W,closeModal:function(){ye(!1)},photoURL:k,handleImageUpload:we,handleImageError:function(){W(!0)},user:r,collectionName:"userProfiles"})]})}},7386:function(e,t,r){var s=r(4165),n=r(5861),a=r(9439),o=r(2791),l=r(7005),c=r(276),i=r(2481),u=r(673),d=r(184);t.Z=function(e){var t=e.closeModal,r=e.photoURL,m=e.handleImageUpload,p=e.setPhotoURL,h=e.user,x=e.collectionName,f=(0,o.useState)(r),v=(0,a.Z)(f,2),g=v[0],j=v[1],N=(0,o.useState)(null),b=(0,a.Z)(N,2),y=b[0],w=b[1],k=(0,o.useState)(null),Z=(0,a.Z)(k,2),L=Z[0],C=Z[1],U=(0,o.useRef)(null),E=(0,o.useState)(null),R=(0,a.Z)(E,2),S=(R[0],R[1]),P=(0,o.useState)(!1),I=(0,a.Z)(P,2),M=I[0],B=I[1],A=(0,o.useState)({x:0,y:0}),D=(0,a.Z)(A,2),W=D[0],z=D[1],J=(0,o.useState)(1),O=(0,a.Z)(J,2),T=O[0],F=O[1],V=(0,o.useState)(null),H=(0,a.Z)(V,2),_=H[0],q=H[1],G=(0,o.useState)(!1),Q=(0,a.Z)(G,2),K=Q[0],X=Q[1],Y="".concat("","/images/arts/user.webp");(0,o.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]);var $=function(e){var t=e.target.files[0];if(t){w(t.name);var r=new FileReader;r.onload=function(e){j(e.target.result)},r.readAsDataURL(t)}},ee=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(){var t,a,o,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return console.error("Crop area not selected"),e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch(g).then((function(e){return e.blob()}));case 6:t=e.sent,a=document.createElement("canvas"),o=a.getContext("2d"),(l=new Image).onload=(0,n.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.width=_.width,a.height=_.height,o.drawImage(l,_.x,_.y,_.width,_.height,0,0,_.width,_.height),a.toBlob(function(){var e=(0,n.Z)((0,s.Z)().mark((function e(t){var a,o,l,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=(0,c.iH)(u.tO,"profileImages/".concat(y)),o={contentType:"image/jpeg"},!r||r===Y){e.next=7;break}return l=(0,c.iH)(u.tO,r),e.next=7,(0,c.oq)(l);case 7:(d=(0,c.B0)(a,t,o)).on("state_changed",(function(e){}),(function(e){console.error("Upload error:",e)}),(0,n.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Jt)(d.snapshot.ref);case 2:if(!(t=e.sent)){e.next=15;break}return e.next=6,(0,i.r7)(L,{photoURL:t});case 6:m(t),B(!0),X(!0),setTimeout((function(){X(!1)}),500),setTimeout((function(){B(!1)}),3e3),j(t),q(null),F(1),z({x:0,y:0});case 15:case"end":return e.stop()}}),e)})))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error uploading image:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),"image/jpeg");case 4:case"end":return e.stop()}}),e)}))),l.src=URL.createObjectURL(t),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error("Error handling upload:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||!h.uid){e.next=5;break}return t="".concat("","/images/arts/user.webp"),e.next=4,(0,i.r7)(L,{photoURL:t});case 4:p(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){U.current=document.createElement("input"),U.current.type="file",U.current.accept="image/*",U.current.addEventListener("change",$);var e=(0,i.JU)(u.RZ,x,h.uid);C(e);var t=(0,i.cf)(e,(function(e){var t;!function(e){j(e)}(null===(t=e.data())||void 0===t?void 0:t.photoURL)}));return function(){return t()}}),[h.uid,x]),(0,d.jsx)("div",{className:"modal-overlay",children:(0,d.jsxs)("div",{className:"modalcrop",children:[(0,d.jsxs)("div",{className:"top-section",children:[(0,d.jsx)("div",{style:{marginRight:"10px"},children:"Profile image"}),(0,d.jsx)("button",{className:"btn-crop",onClick:t,children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"white",strokeWidth:"1.5",className:"w-6 h-6 smaller-svg",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsx)("div",{className:K?"flash":""})," ",(0,d.jsx)("div",{className:"centerimage",children:g&&(0,d.jsx)(l.ZP,{ref:S,image:g,crop:W,zoom:T,onCropChange:z,onZoomChange:F,onCropComplete:function(e,t){q(t)},cropShape:"round",aspect:1})}),(0,d.jsxs)("div",{className:"button-section",children:[(0,d.jsx)("button",{className:"btn-crop",onClick:function(){return U.current.click()},children:(0,d.jsxs)("div",{className:"button-content",children:[(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"white",strokeWidth:"1.5",className:"w-6 h-6 smaller-svg",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),"New Photo"]})}),(0,d.jsxs)("div",{className:"success",children:[(0,d.jsx)("div",{className:"button-container",children:(0,d.jsx)("button",{className:"btn-crop",onClick:ee,children:(0,d.jsxs)("div",{className:"button-content",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"white",strokeWidth:"1.5",className:"w-6 h-6 smaller-svg",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),"Upload Photo"]})})}),M&&(0,d.jsx)("div",{className:"upload-success-icon",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#009E60",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})})]}),(0,d.jsx)("button",{className:"btn-crop",onClick:te,children:(0,d.jsxs)("div",{className:"button-content",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"white",strokeWidth:"1.5",className:"w-6 h-6 smaller-svg",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),"Delete Photo"]})})]})]})})}}}]);
//# sourceMappingURL=462.4b4ee9ab.chunk.js.map