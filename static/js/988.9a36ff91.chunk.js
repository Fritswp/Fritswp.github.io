"use strict";(self.webpackChunkmy_react=self.webpackChunkmy_react||[]).push([[988],{2988:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n(3433),r=n(4165),o=n(5861),a=n(9439),c=n(673),i=n(2481),l=n(5372),u=n(2383),d=n(2791),h=n(184),p=function(e){var t=e.isOpen,n=e.toggleOpen,s=e.onSessionClick,l=(0,d.useState)(!1),u=(0,a.Z)(l,2),p=u[0],m=u[1],f=(0,d.useState)(!1),x=(0,a.Z)(f,2),v=(x[0],x[1]),g=(0,d.useRef)(null),w=(0,d.useState)([]),b=(0,a.Z)(w,2),j=b[0],k=b[1],Z=(0,d.useState)(null),y=(0,a.Z)(Z,2),L=y[0],N=y[1],C=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,s,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=c.I8.currentUser)){e.next=13;break}return n=t.uid,s=(0,i.IO)((0,i.hJ)(c.RZ,"users",n,"discussions")),e.next=7,(0,i.PL)(s);case 7:o=e.sent,a=o.docs.map((function(e){return e.id})),k(a),console.log("Fetched sessions:",a),e.next=14;break;case 13:console.error("User not authenticated");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error fetching sessions from Firestore:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){t&&C()}),[t]);var S=function(){n(),m(!p)},E=function(e){g.current&&!g.current.contains(e.target)&&(n(),m(!1),v(!1))};return(0,d.useEffect)((function(){var e=window.innerWidth<=768;return t&&e?document.addEventListener("mousedown",E):document.removeEventListener("mousedown",E),function(){document.removeEventListener("mousedown",E)}}),[t]),(0,h.jsxs)("div",{ref:g,className:"chatbot-history ".concat(t?"chatbot-history-open":""),children:[(0,h.jsx)("span",{className:"svg-chatbot-history ".concat(t?"svg-chatbot-history-rotate-icon":""),"aria-hidden":"true",onClick:S,children:(0,h.jsx)("svg",{width:"8",height:"16",viewBox:"0 0 8 16",children:(0,h.jsx)("path",{d:"M0.772126 1.19065L0.153407 1.80934C0.00696973 1.95578 0.00696973 2.19322 0.153407 2.33969L5.80025 8L0.153407 13.6603C0.00696973 13.8067 0.00696973 14.0442 0.153407 14.1907L0.772126 14.8094C0.918563 14.9558 1.156 14.9558 1.30247 14.8094L7.84666 8.26519C7.99309 8.11875 7.99309 7.88131 7.84666 7.73484L1.30247 1.19065C1.156 1.04419 0.918563 1.04419 0.772126 1.19065Z"})})}),p&&(0,h.jsxs)("div",{className:"chatbot-previous",children:[(0,h.jsx)("div",{style:{display:"flex"},children:(0,h.jsxs)("button",{className:"chat-history-btn",children:[(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,h.jsx)("img",{src:"".concat("","/images/arts/TIO.webp"),alt:"TIO illustration",className:"me-1 very-small-avatar rounded-circle"}),(0,h.jsx)("p",{className:"font-weight-bold mb-0",style:{color:"white",marginLeft:"5px"},children:"Let's Chat"})]}),(0,h.jsx)("div",{className:"ms-auto",children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"white",width:"18",height:"18",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})})]})}),(0,h.jsx)("p",{className:"text-sm text-muted mt-3",children:"Sessions:"}),j.length>0&&(0,h.jsx)("ul",{className:"fade-ulist scroll-his",children:j.map((function(e){return(0,h.jsx)("li",{className:"fade-list".concat(e===L?" selected-session":""),onClick:function(){N(e),s(e),window.innerWidth<=768&&S()},children:e},e)}))})]})]})},m=function(e){var t=e.isOpen,n=e.toggleOpen,s=e.selectedTopic,i=(0,d.useState)(!1),l=(0,a.Z)(i,2),u=l[0],p=l[1],m=(0,d.useState)(!1),f=(0,a.Z)(m,2),x=f[0],v=f[1],g=(0,d.useState)([]),w=(0,a.Z)(g,2),b=w[0],j=w[1],k=(0,d.useRef)(null),Z=function(e){k.current&&!k.current.contains(e.target)&&(n(),p(!1),v(!1))};(0,d.useEffect)((function(){var e=window.innerWidth<=768;return t&&e?document.addEventListener("mousedown",Z):document.removeEventListener("mousedown",Z),function(){document.removeEventListener("mousedown",Z)}}),[t]);var y=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,s,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,c.hJ)(c.RZ,"expertApplications"),e.next=4,(0,c.PL)(n);case 4:return s=e.sent,o=[],a=t.name,s.forEach((function(e){var t=e.data();if(t&&t.labels&&t.labels.includes(a)&&t.displayName){var n={name:t.displayName,photoURL:t.photoURL||"".concat("","/images/arts/user.webp")};o.push(n)}})),e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(0),console.error("Error fetching experts:",e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.prev=1,console.log("Fetching experts for topic:",s),e.next=5,y(s);case 5:n=e.sent,console.log("Matching experts:",n),j(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Error fetching experts:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,s]),(0,h.jsxs)("div",{ref:k,className:"chatbot-expert ".concat(t?"chatbot-expert-open":""),children:[(0,h.jsx)("span",{className:"svg-chatbot-expert ".concat(t?"svg-chatbot-expert-rotate-icon":""),"aria-hidden":"true",onClick:function(){p(!u),v(!x),n()},children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",style:{marginLeft:"auto"},children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})})}),(0,h.jsx)("div",{children:(0,h.jsx)("h4",{children:"Experts"})}),b.map((function(e,t){return(0,h.jsxs)("button",{className:"chat-btn expert-btn text-left",children:[(0,h.jsx)("img",{src:e.photoURL,alt:"Avatar",className:"very-small-avatar rounded-circle"}),(0,h.jsx)("div",{children:(0,h.jsx)("p",{className:"font-weight-bold mb-0 text-start",children:e.name})})]},t)}))]})},f=function(e){var t=e.category,n=e.handleDropdownToggle,s=e.handleTopicSelection;return(0,h.jsxs)("label",{className:"chat-dropdown-model-button ",htmlFor:t.id,children:[t.svg,(0,h.jsx)("div",{className:"d-flex align-items-center",children:(0,h.jsxs)("div",{className:"d-flex flex-column align-items-start ps-3",children:[(0,h.jsx)("h5",{className:"m-0",children:t.name}),(0,h.jsx)("h6",{className:"text-muted text-start m-0",children:t.description})]})}),(0,h.jsxs)("div",{className:"flex-grow-1 d-flex justify-content-end",children:[(0,h.jsx)("input",{type:"radio",className:"form-check-input listboxes",id:t.id,name:"jobSuccess",onChange:function(){s(t),n()}}),(0,h.jsx)("label",{className:"form-check-label label-with-svg",htmlFor:t.id})]})]})},x=[{id:"computerOption",name:"Computer",description:"All your IT solutions",svg:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"})})},{id:"sportOption",name:"Sport",description:"Let Tio help you become fit",svg:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:[(0,h.jsx)("path",{d:"M9.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M6.44 3.752A.75.75 0 0 1 7 3.5h1.445c.742 0 1.32.643 1.243 1.38l-.43 4.083a1.8 1.8 0 0 1-.088.395l-.318.906.213.242a.8.8 0 0 1 .114.175l2 4.25a.75.75 0 1 1-1.357.638l-1.956-4.154-1.68-1.921A.75.75 0 0 1 6 8.96l.138-2.613-.435.489-.464 2.786a.75.75 0 1 1-1.48-.246l.5-3a.75.75 0 0 1 .18-.375l2-2.25Z"}),(0,h.jsx)("path",{d:"M6.25 11.745v-1.418l1.204 1.375.261.524a.8.8 0 0 1-.12.231l-2.5 3.25a.75.75 0 1 1-1.19-.914zm4.22-4.215-.494-.494.205-1.843.006-.067 1.124 1.124h1.44a.75.75 0 0 1 0 1.5H11a.75.75 0 0 1-.531-.22Z"})]})},{id:"foodCategory",name:"Food",description:"Ready to become head-chef?",svg:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:[(0,h.jsx)("path",{d:"M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6"}),(0,h.jsx)("path",{d:"M13.997 5.17a5 5 0 0 0-8.101-4.09A5 5 0 0 0 1.28 9.342a5 5 0 0 0 8.336 5.109 3.5 3.5 0 0 0 5.201-4.065 3.001 3.001 0 0 0-.822-5.216zm-1-.034a1 1 0 0 0 .668.977 2.001 2.001 0 0 1 .547 3.478 1 1 0 0 0-.341 1.113 2.5 2.5 0 0 1-3.715 2.905 1 1 0 0 0-1.262.152 4 4 0 0 1-6.67-4.087 1 1 0 0 0-.2-1 4 4 0 0 1 3.693-6.61 1 1 0 0 0 .8-.2 4 4 0 0 1 6.48 3.273z"})]})},{id:"healthCategory",name:"Health",description:"Here to help",svg:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:[(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.121 1.879a3 3 0 0 0-4.242 0L8.733 3.026l4.261 4.26 1.127-1.165a3 3 0 0 0 0-4.242M12.293 8 8.027 3.734 3.738 8.031 8 12.293zm-5.006 4.994L3.03 8.737 1.879 9.88a3 3 0 0 0 4.241 4.24l.006-.006 1.16-1.121ZM2.679 7.676l6.492-6.504a4 4 0 0 1 5.66 5.653l-1.477 1.529-5.006 5.006-1.523 1.472a4 4 0 0 1-5.653-5.66l.001-.002 1.505-1.492z"}),(0,h.jsx)("path",{d:"M5.56 7.646a.5.5 0 1 1-.706.708.5.5 0 0 1 .707-.707Zm1.415-1.414a.5.5 0 1 1-.707.707.5.5 0 0 1 .707-.707M8.39 4.818a.5.5 0 1 1-.708.707.5.5 0 0 1 .707-.707Zm0 5.657a.5.5 0 1 1-.708.707.5.5 0 0 1 .707-.707ZM9.803 9.06a.5.5 0 1 1-.707.708.5.5 0 0 1 .707-.707Zm1.414-1.414a.5.5 0 1 1-.706.708.5.5 0 0 1 .707-.707ZM6.975 9.06a.5.5 0 1 1-.707.708.5.5 0 0 1 .707-.707ZM8.39 7.646a.5.5 0 1 1-.708.708.5.5 0 0 1 .707-.708Zm1.413-1.414a.5.5 0 1 1-.707.707.5.5 0 0 1 .707-.707"})]})},{id:"workCategory",name:"Work",description:"New Job or career advice",svg:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})})},{id:"hobbiesCategory",name:"Hobbies",description:"Discover what's possible",svg:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:[(0,h.jsx)("path",{d:"M8 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m4 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M5.5 7a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"}),(0,h.jsx)("path",{d:"M16 8c0 3.15-1.866 2.585-3.567 2.07C11.42 9.763 10.465 9.473 10 10c-.603.683-.475 1.819-.351 2.92C9.826 14.495 9.996 16 8 16a8 8 0 1 1 8-8m-8 7c.611 0 .654-.171.655-.176.078-.146.124-.464.07-1.119-.014-.168-.037-.37-.061-.591-.052-.464-.112-1.005-.118-1.462-.01-.707.083-1.61.704-2.314.369-.417.845-.578 1.272-.618.404-.038.812.026 1.16.104.343.077.702.186 1.025.284l.028.008c.346.105.658.199.953.266.653.148.904.083.991.024C14.717 9.38 15 9.161 15 8a7 7 0 1 0-7 7"})]})}],v=function(e){var t=e.isDropdownOpen,n=e.handleDropdownToggle,s=e.onSelectTopic,r=(0,d.useRef)(null),o=(0,d.useState)(null),c=(0,a.Z)(o,2),i=c[0],l=c[1],u=function(e){l(e),s(e),n()};return(0,d.useEffect)((function(){var e=function(e){var s=document.querySelector(".pick-model");t&&r.current&&!s.contains(e.target)&&n()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[r,n,t]),(0,h.jsxs)("div",{className:"pick-model",children:[(0,h.jsx)("h4",{onClick:n,className:"pointer-cursor ".concat(t?"h4-dropdown-open":""),children:i?"Topic: ".concat(i.name):"Pick a Topic"}),(0,h.jsx)("span",{className:"svg-chatbot-model pointer-cursor ".concat(t?"svg-chatbot-model-rotate-icon":""),"aria-hidden":"true",onClick:n,children:(0,h.jsx)("svg",{width:"8",height:"16",viewBox:"0 0 8 16",children:(0,h.jsx)("path",{d:"M0.772126 1.19065L0.153407 1.80934C0.00696973 1.95578 0.00696973 2.19322 0.153407 2.33969L5.80025 8L0.153407 13.6603C0.00696973 13.8067 0.00696973 14.0442 0.153407 14.1907L0.772126 14.8094C0.918563 14.9558 1.156 14.9558 1.30247 14.8094L7.84666 8.26519C7.99309 8.11875 7.99309 7.88131 7.84666 7.73484L1.30247 1.19065C1.156 1.04419 0.918563 1.04419 0.772126 1.19065Z"})})}),(0,h.jsx)("div",{ref:r,className:"chat-dropdown-model ".concat(t?"show scroll-cat":""),children:x&&x.map((function(e){return(0,h.jsx)(f,{category:e,handleDropdownToggle:n,handleTopicSelection:u},e.id)}))})]})},g=function(){var e=(0,d.useState)(""),t=(0,a.Z)(e,2),n=t[0],f=t[1],x=(0,d.useState)("52px"),g=(0,a.Z)(x,2),w=g[0],b=g[1],j=(0,d.useRef)(null),k=(0,d.useState)([]),Z=(0,a.Z)(k,2),y=Z[0],L=Z[1],N=(0,d.useState)(!1),C=(0,a.Z)(N,2),S=C[0],E=C[1],M=(0,d.useState)(!1),T=(0,a.Z)(M,2),O=T[0],A=T[1],I=(0,d.useState)(!1),W=(0,a.Z)(I,2),D=W[0],H=W[1],R=(0,d.useRef)(null),U=(0,d.useState)(!1),B=(0,a.Z)(U,2),V=B[0],F=B[1],J=(0,d.useState)(!1),z=(0,a.Z)(J,2),P=z[0],K=(z[1],(0,d.useState)(null)),_=(0,a.Z)(K,2),q=_[0],Q=_[1],X=(0,d.useState)(null),Y=(0,a.Z)(X,2),G=Y[0],$=Y[1],ee=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var s,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching messages for userUid:",t,"and discussionId:",n),e.prev=1,s=(0,i.hJ)(c.RZ,"users",t,"discussions",n,"messages"),e.next=5,(0,i.PL)((0,i.IO)(s,(0,i.Xo)("createTime")));case 5:o=e.sent,a=o.docs.map((function(e){var t=e.data();return[{text:t.prompt,user:"user"},{text:t.response,user:"bot",isTyping:!1}]})).flat(),L(a),console.log("Fetched messages for discussionId:",n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Error fetching messages from Firestore:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Clicked session:",t),Q(t),e.next=4,ee(c.I8.currentUser.uid,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,a,u,d,p,m,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Sending message for discussionId:",q),F(!0),""===n.trim()){e.next=32;break}if(t=c.I8.currentUser.uid,e.prev=4,a=q){e.next=18;break}return a=n.split(" ")[0],e.next=10,(0,i.pl)((0,i.JU)(c.db,"users/".concat(t)),{});case 10:return u=(0,i.JU)(c.db,"users/".concat(t,"/discussions/").concat(a)),e.next=13,(0,i.QT)(u);case 13:if(e.sent.exists()){e.next=17;break}return e.next=17,(0,i.pl)(u,{});case 17:Q(a);case 18:return d=(0,i.JU)(c.db,"users/".concat(t,"/discussions/").concat(a)),p=(0,i.hJ)(d,"messages"),e.next=22,(0,i.ET)(p,{prompt:n});case 22:m=e.sent,f(""),se(),L((function(e){return[].concat((0,s.Z)(e),[{text:n,user:"user"},{text:"",user:"bot",isTyping:!0}])})),x=(0,i.cf)(m,function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,a,c,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=null===(n=t.data())||void 0===n?void 0:n.response)){e.next=15;break}x(),20,.1,a=o,c=(0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Math.max(5,20-.1*t),e.next=3,new Promise((function(e){return setTimeout(e,n)}));case 3:L((function(e){return[].concat((0,s.Z)(e.slice(0,-1)),[{text:(0,h.jsx)(l.U,{children:a.slice(0,t+1)}),user:"bot"}])}));case 4:case"end":return e.stop()}}),e)})),i=0;case 8:if(!(i<a.length)){e.next=13;break}return e.delegateYield(c(i),"t0",10);case 10:i++,e.next=8;break;case 13:F(!1),window.innerWidth<768&&j.current&&j.current.blur();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(4),console.error("Error handling and sending message:",e.t0);case 32:case"end":return e.stop()}}),e,null,[[4,29]])})));return function(){return e.apply(this,arguments)}}();window.addEventListener("beforeunload",(function(){sessionStorage.removeItem("currentDiscussionId")})),(0,d.useEffect)((function(){P&&fetchSessions()}),[P]);var se=function(){var e=j.current;if(e){e.style.height="52px";var t=Math.min(e.scrollHeight,200);e.style.height="".concat(t,"px")}};return(0,d.useEffect)((function(){se();var e=function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ne())},t=j.current;return t&&t.addEventListener("keydown",e),function(){t&&t.removeEventListener("keydown",e)}}),[y]),(0,d.useEffect)((function(){""===n&&b("52px")}),[n]),(0,d.useEffect)((function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)}),[y]),(0,h.jsxs)("div",{className:"Chatcontainer-model",children:[(0,h.jsx)(p,{isOpen:O,toggleOpen:function(){A(!O),H(!1)},onSessionClick:te}),(0,h.jsxs)("div",{className:"chat-display",children:[(0,h.jsx)(v,{isDropdownOpen:S,handleDropdownToggle:function(){console.log("Dropdown toggled"),E(!S)},onSelectTopic:function(e){$(e),console.log("Selected Topic:",e)}}),(0,h.jsxs)("div",{className:"chat-column chat-bot-upper-section",children:[(0,h.jsx)("div",{className:"chat-box chat-bot-section",ref:R,children:y.map((function(e,t){return(0,h.jsxs)("div",{className:"chat-bubble-bot ".concat("user"===e.user?"user-sent-bot":"bot"),children:["bot"===e.user&&(0,h.jsxs)("div",{className:"bot-message",children:[(0,h.jsx)("div",{className:"bot-avatar",children:(0,h.jsx)("img",{className:"bot-avatar",src:"".concat("","/images/arts/TIO.webp"),alt:"TIO-bot"})}),(0,h.jsxs)("div",{className:"bot-details",children:[(0,h.jsx)("div",{className:"bot-name",children:"TIO-bot"}),e.isTyping?(0,h.jsx)(u.Z,{}):(0,h.jsx)("div",{className:"chat-text",children:e.text})]})]}),"bot"!==e.user&&(0,h.jsx)("div",{className:"chat-text",children:e.text})]},t)}))}),(0,h.jsx)("div",{className:"chatui-container",children:(0,h.jsxs)("div",{className:"userui-input",children:[(0,h.jsx)("textarea",{value:n,onChange:function(e){f(e.target.value),se()},className:"scroll-col textarea-chat",style:{height:w},ref:j,placeholder:"Type a message...",autoComplete:"off",inputMode:"text",onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ne())},disabled:V}),(0,h.jsx)("button",{"aria-label":"Send Message",className:"svg-container send-btn",disabled:V,onClick:function(){return ne(q)},children:(0,h.jsx)("i",{className:"fas fa-paper-plane"})})]})})]})]}),(0,h.jsx)(m,{isOpen:D,toggleOpen:function(){H(!D),A(!1)},selectedTopic:G})]})}}}]);
//# sourceMappingURL=988.9a36ff91.chunk.js.map