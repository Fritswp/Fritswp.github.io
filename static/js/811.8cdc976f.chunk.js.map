{"version":3,"file":"static/js/811.8cdc976f.chunk.js","mappings":"4PA4GA,EAtGkB,SAAHA,GAAwD,IAAlDC,EAAeD,EAAfC,gBAAiBC,EAAcF,EAAdE,eAAgBC,EAASH,EAATG,UACpDC,GAA4CC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAjDI,EAAcF,EAAA,GAAEG,EAAiBH,EAAA,GACxCI,GAAkCL,EAAAA,EAAAA,WAAS,GAAKM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAzCE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GACxBG,GAAeC,EAAAA,EAAAA,QAAO,OAE5BC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAmB,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAL,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAF,EAAAC,KAAA,GAEpB3B,EAAgB,CAAD0B,EAAAE,KAAA,SAC6G,OAAxHN,GAAwBO,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,QAASC,EAAAA,GAAKC,YAAYC,IAAK,cAAejC,EAAiB,YAAW0B,EAAAE,KAAA,GAC/FM,EAAAA,EAAAA,KAAQC,EAAAA,EAAAA,IAAMb,GAAuBc,EAAAA,EAAAA,IAAQ,gBAAgB,KAAD,EAArFb,EAAgBG,EAAAW,KAChBb,EAAeD,EAAiBe,KAAKC,KAAI,SAACC,GAC9C,IAAAC,EAA6BD,EAAIE,OACjC,MAAO,CAAEC,OADKF,EAANE,OACSC,SADOH,EAARG,SAElB,IACApC,EAAkBgB,GAClBZ,GAAa,GACbiC,QAAQC,IAAI,qCAAsC9C,EAAiBwB,GAAc,QAAAE,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAqB,GAAArB,EAAA,SAGnFmB,QAAQG,MAAM,uCAAsCtB,EAAAqB,IACpDnC,GAAa,GAAO,yBAAAc,EAAAuB,OAAA,GAAA5B,EAAA,mBAEvB,kBAjBwB,OAAAJ,EAAAiC,MAAA,KAAAC,UAAA,KAmBzBnC,GACF,GAAG,CAAChB,KAEJe,EAAAA,EAAAA,YAAU,WACR,IAAMqC,EAAqB,SAACC,GACtBxC,EAAayC,UAAYzC,EAAayC,QAAQC,SAASF,EAAMG,SAE/DvD,GAEJ,EAEA,OADAwD,SAASC,iBAAiB,YAAaN,GAChC,WACLK,SAASE,oBAAoB,YAAaP,EAC5C,CACF,GAAG,CAACnD,IAEJ,IAAM2D,EAAmB,eAAAC,GAAA3C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA0C,IAAA,IAAAC,EAAA,OAAA5C,EAAAA,EAAAA,KAAAM,MAAA,SAAAuC,GAAA,cAAAA,EAAArC,KAAAqC,EAAApC,MAAA,OAG2E,OAH3EoC,EAAArC,KAAA,EAGlBoC,GAAgBvB,EAAAA,EAAAA,IAAIV,EAAAA,GAAW,QAASC,EAAAA,GAAKC,YAAYC,IAAK,cAAejC,GAAgBgE,EAAApC,KAAA,GAC7FqC,EAAAA,EAAAA,IAAUF,GAAe,KAAD,EAC9BlB,QAAQC,IAAI,sBAAuB9C,GACnCC,IACAC,IACAgE,eAAeF,EAAApC,KAAA,iBAAAoC,EAAArC,KAAA,GAAAqC,EAAAjB,GAAAiB,EAAA,SAEfnB,QAAQG,MAAM,6BAA4BgB,EAAAjB,IAAS,yBAAAiB,EAAAf,OAAA,GAAAa,EAAA,mBAEtD,kBAZwB,OAAAD,EAAAX,MAAA,KAAAC,UAAA,KAgBzB,OAEEgB,EAAAA,EAAAA,KAAA,OAAKC,IAAKvD,EAAgBwD,UAAU,qBAAoBC,UACxDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wBAAuBC,SAAA,EACpCH,EAAAA,EAAAA,KAAA,OAAKE,UAAU,cAAaC,UAC1BH,EAAAA,EAAAA,KAAA,UAAQK,QAASvE,EAAeqE,UAC9BH,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BC,KAAK,OAAOC,QAAQ,YAAYC,YAAa,IAAKC,MAAM,QAAQC,OAAO,eAAeT,UAAU,UAASC,UAC/IH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,gCAK3Dd,EAAAA,EAAAA,KAAA,MAAAG,SAAI,wBACJH,EAAAA,EAAAA,KAAA,OAAKE,UAAU,cACfF,EAAAA,EAAAA,KAAA,KAAAG,SAAG,2HAGHH,EAAAA,EAAAA,KAAA,OAAKE,UAAU,8BAA6BC,SACzC3D,GACCwD,EAAAA,EAAAA,KAACe,EAAAA,EAAa,IAEd3E,EAAegC,KAAI,SAAC4C,EAASC,GAAK,OAChCb,EAAAA,EAAAA,MAAA,OAAiBF,UAAU,eAAcC,SAAA,EACvCH,EAAAA,EAAAA,KAAA,UAAAG,UACEH,EAAAA,EAAAA,KAACkB,EAAAA,EAAa,CAAAf,SAAEa,EAAQxC,YAG1BwB,EAAAA,EAAAA,KAACkB,EAAAA,EAAa,CAAAf,SAAEa,EAAQvC,YACxBuB,EAAAA,EAAAA,KAAA,OAAKE,UAAU,eANPe,EAOJ,OAIZjB,EAAAA,EAAAA,KAAA,OAAKE,UAAU,aAAYC,UAC3BH,EAAAA,EAAAA,KAAA,UAAQE,UAAU,gBAAgBG,QAASZ,EAAoBU,UAC/DH,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BI,MAAO,UAAUH,KAAK,OAAOC,QAAQ,YAAYC,YAAa,EAAGE,OAAO,eAAeQ,OAAO,KAAKC,MAAM,KAAIjB,UACzJH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,4aAOvD,EC4QA,EAhXoB,SAAHlF,GAAoF,IAA9EyF,EAAMzF,EAANyF,OAAQC,EAAU1F,EAAV0F,WAAYC,EAAc3F,EAAd2F,eAAgBC,EAAiB5F,EAAjB4F,kBAAmB3F,EAAeD,EAAfC,gBAC5EG,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApDyF,EAAcvF,EAAA,GAAEwF,EAAiBxF,EAAA,GACxCI,GAA0CL,EAAAA,EAAAA,WAAS,GAAMM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAnCqF,GAAFpF,EAAA,GAAkBA,EAAA,IAChCqF,GAAiBjF,EAAAA,EAAAA,QAAO,MAC9BkF,GAAgC5F,EAAAA,EAAAA,UAAS,IAAG6F,GAAA3F,EAAAA,EAAAA,GAAA0F,EAAA,GAA3BE,GAAFD,EAAA,GAAaA,EAAA,IAC5BE,GAA8C/F,EAAAA,EAAAA,WAAS,GAAMgG,GAAA9F,EAAAA,EAAAA,GAAA6F,EAAA,GAAtDE,EAAeD,EAAA,GAAEE,EAAkBF,EAAA,GAC1CG,GAAkDnG,EAAAA,EAAAA,WAAS,GAAKoG,GAAAlG,EAAAA,EAAAA,GAAAiG,EAAA,GAAzDE,EAAiBD,EAAA,GAAEE,EAAoBF,EAAA,GAE9CG,GAA0DvG,EAAAA,EAAAA,UAAS,MAAKwG,GAAAtG,EAAAA,EAAAA,GAAAqG,EAAA,GAAjEE,EAAqBD,EAAA,GAAEE,EAAwBF,EAAA,GAEhDG,EAAsB,SAACC,GAC3B,IAAMC,EAAQ,IAAIC,KAClBD,EAAME,SAAS,EAAG,EAAG,EAAG,GAExB,IAAMC,EAAY,IAAIF,KACtBE,EAAUC,QAAQD,EAAUE,UAAY,GACxCF,EAAUD,SAAS,EAAG,EAAG,EAAG,GAE5B,IAAMI,EAAkB,CACtBN,MAAO,GACPG,UAAW,GACXI,WAAY,IAgBd,OAbAR,EAASS,SAAQ,SAACC,GAChB,IAAMC,EAAc,IAAIT,KAAiC,IAA5BQ,EAAQE,UAAUC,SAC/CF,EAAYR,SAAS,EAAG,EAAG,EAAG,GAE1BQ,EAAYG,YAAcb,EAAMa,UAClCP,EAAgBN,MAAMc,KAAKL,GAClBC,EAAYG,YAAcV,EAAUU,UAC7CP,EAAgBH,UAAUW,KAAKL,GAE/BH,EAAgBC,WAAWO,KAAKL,EAEpC,IAEOH,CACT,EAGAS,GAA8C5H,EAAAA,EAAAA,UAAS,CACrD6G,MAAO,GACPG,UAAW,GACXI,WAAY,KACZS,GAAA3H,EAAAA,EAAAA,GAAA0H,EAAA,GAJKT,EAAeU,EAAA,GAAEC,EAAkBD,EAAA,IAO1ClH,EAAAA,EAAAA,YAAU,WACJyE,GAEF2C,GAEJ,GAAG,CAAC3C,IAIJ,IAAM2C,EAAa,eAAAlH,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAA+G,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAArH,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEY,GAFZF,EAAAC,KAAA,IAEZyG,EAAOrG,EAAAA,GAAKC,aACT,CAADN,EAAAE,KAAA,SAML,OALKyG,EAAUD,EAAKnG,IAEfqG,GAAInG,EAAAA,EAAAA,KACRN,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,QAASuG,EAAS,gBACxCjG,EAAAA,EAAAA,IAAQ,YAAa,SACtBV,EAAAE,KAAA,GAEsBM,EAAAA,EAAAA,IAAQoG,GAAG,KAAD,EAA3BC,EAAQ7G,EAAAW,KACRmG,EAAcD,EAASjG,KAAKC,KAAI,SAACC,GAAG,MAAM,CAC9CiG,GAAIjG,EAAIiG,GACRb,UAAWpF,EAAIE,OAAOkF,UACvB,IACD1B,EAAYsC,GAEZN,EAAmBnB,EAAoByB,IAEvC3F,QAAQC,IAAI,oBAAqB0F,GAE7BA,EAAYE,OAAS,GACQF,EAAY,GAAGC,GAGhD/B,GAAqB,GAAOhF,EAAAE,KAAA,iBAE5BiB,QAAQG,MAAM,0BACd0D,GAAqB,GAAO,QAAAhF,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAqB,GAAArB,EAAA,SAG9BmB,QAAQG,MAAM,0CAAyCtB,EAAAqB,IACvD2D,GAAqB,GAAO,yBAAAhF,EAAAuB,OAAA,GAAA5B,EAAA,mBAE/B,kBAnCkB,OAAAJ,EAAAiC,MAAA,KAAAC,UAAA,KAuCbe,EAAe,WACnByB,IACA9C,QAAQC,IAAI,+BACZ4C,EAAe,KACjB,GAEA3E,EAAAA,EAAAA,YAAU,WACJyE,GACF2C,GAEJ,GAAG,CAAC3C,IAEJ,IAAMmD,EAAiB,WACrBlD,IACAI,GAAmBD,EACrB,EAEMxC,EAAqB,SAACC,IAExB0C,EAAezC,SACdyC,EAAezC,QAAQC,SAASF,EAAMG,SACZ,QAAzBH,EAAMG,OAAOoF,SAAqBvC,IAEpCZ,IACAI,GAAkB,GAClBC,GAAiB,GAErB,GAEA/E,EAAAA,EAAAA,YAAU,WACR,IAAM8H,EAAWC,OAAOC,YAAc,IAMtC,OALIvD,GAAUqD,EACZpF,SAASC,iBAAiB,YAAaN,GAEvCK,SAASE,oBAAoB,YAAaP,GAErC,WACLK,SAASE,oBAAoB,YAAaP,EAC5C,CACF,GAAG,CAACoC,EAAQa,IAmBZ,OANAtF,EAAAA,EAAAA,YAAU,WACJyE,GACF2C,GAEJ,GAAG,CAAC3C,KAGFjB,EAAAA,EAAAA,MAAA,OAAKH,IAAK2B,EAAgB1B,UAAS,mBAAA2E,OAAqBxD,EAAS,uBAAyB,IAAKlB,SAAA,EAE7FH,EAAAA,EAAAA,KAAA,QAAME,UAAS,uBAAA2E,OAAyBxD,EAAS,kCAAoC,IAAM,cAAY,OAAOhB,QAASmE,EAAerE,UACpIH,EAAAA,EAAAA,KAAA,OAAKoB,MAAM,IAAID,OAAO,KAAKX,QAAQ,WAAUL,UAC3CH,EAAAA,EAAAA,KAAA,QAAMc,EAAE,qXAGXO,IACCjB,EAAAA,EAAAA,MAAA0E,EAAAA,SAAA,CAAA3E,SAAA,EAEAC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mBAAkBC,SAAA,EAC/BH,EAAAA,EAAAA,KAAA,OAAK+E,MAAO,CAAEC,QAAS,QAAS7E,UAC9BC,EAAAA,EAAAA,MAAA,UACEF,UAAU,mBACVG,QAAS,WACPN,IACI4E,OAAOC,YAAc,KACvBJ,GAEJ,EAAErE,SAAA,EAEFC,EAAAA,EAAAA,MAAA,OAAK2E,MAAO,CAAEC,QAAS,OAAQC,WAAY,UAAW9E,SAAA,EACpDH,EAAAA,EAAAA,KAAA,OAAKkF,IAAG,GAAAL,OAAKM,GAAsB,yBAAyBC,IAAI,mBAAmBlF,UAAU,2CAC7FF,EAAAA,EAAAA,KAAA,KAAGE,UAAU,wBAAwB6E,MAAO,CAAErE,MAAO,QAAS2E,WAAY,OAAQlF,SAAC,mBAErFH,EAAAA,EAAAA,KAAA,OAAKE,UAAU,UAASC,UACtBH,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BC,KAAK,OAAOC,QAAQ,YAAYC,YAAa,IAAKE,OAAO,QAAQS,MAAM,KAAKD,OAAO,KAAIhB,UAC7HH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,+QAK7Dd,EAAAA,EAAAA,KAAA,OAAKE,UAAU,oBAAmBC,SACrCmC,GACCtC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,oBAAmBC,UAChCH,EAAAA,EAAAA,KAACe,EAAAA,EAAa,OAGlBX,EAAAA,EAAAA,MAAA0E,EAAAA,SAAA,CAAA3E,SAAA,CAELiD,EAAgBN,MAAMyB,OAAS,IAC9BnE,EAAAA,EAAAA,MAAA0E,EAAAA,SAAA,CAAA3E,SAAA,EACEH,EAAAA,EAAAA,KAAA,KAAGE,UAAU,0BAAyBC,SAAC,YACvCH,EAAAA,EAAAA,KAAA,MAAIE,UAAU,uBAAsBC,SACjCiD,EAAgBN,MAAM1E,KAAI,SAACmF,GAAO,OACjCnD,EAAAA,EAAAA,MAAA,MACEF,UAAS,YAAA2E,OAActB,EAAQe,KAAOzI,EAAkB,oBAAsB,IAE9EwE,QAAS,WACPkB,EAAegC,EAAQe,IACnBK,OAAOC,YAAc,KACvBJ,GAEJ,EAAErE,SAAA,CAEKoD,EAAQe,IACTlE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4BAA2BC,SAAA,EAC1CC,EAAAA,EAAAA,MAAA,OACdE,MAAM,6BACNc,MAAM,KACND,OAAO,KACPX,QAAQ,YACRD,KAAK,OACLI,OAAO,QACPF,YAAY,IACZG,cAAc,QACdC,eAAe,QACfR,QAAS,SAACiF,GAERA,EAAEC,kBAEF5C,EAAyBY,EAAQe,IACjCnC,GAAmB,EACrB,EAAEhC,SAAA,EAGFH,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,KAAKC,GAAG,KAAKC,EAAE,OAC1B1F,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,KAAKC,GAAG,KAAKC,EAAE,OAC1B1F,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,IAAIC,GAAG,KAAKC,EAAE,UAI3B1F,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BC,KAAK,OAAOC,QAAQ,YAAYC,YAAa,IAAKE,OAAO,QAAQS,MAAM,KAAKD,OAAO,KAAIhB,UAC/HH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,4VApCtCyC,EAAQe,GAwCJ,SAOlBlB,EAAgBH,UAAUsB,OAAS,IAClCnE,EAAAA,EAAAA,MAAA0E,EAAAA,SAAA,CAAA3E,SAAA,EACEH,EAAAA,EAAAA,KAAA,KAAGE,UAAU,0BAAyBC,SAAC,gBACvCH,EAAAA,EAAAA,KAAA,MAAIE,UAAU,uBAAsBC,SACjCiD,EAAgBH,UAAU7E,KAAI,SAACmF,GAAO,OACrCnD,EAAAA,EAAAA,MAAA,MACEF,UAAS,YAAA2E,OAActB,EAAQe,KAAOzI,EAAkB,oBAAsB,IAE9EwE,QAAS,WACPkB,EAAegC,EAAQe,IACnBK,OAAOC,YAAc,KACvBJ,GAEJ,EAAErE,SAAA,CAEMoD,EAAQe,IACTlE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4BAA2BC,SAAA,EAC1CC,EAAAA,EAAAA,MAAA,OACfE,MAAM,6BACNc,MAAM,KACND,OAAO,KACPX,QAAQ,YACRD,KAAK,OACLI,OAAO,QACPF,YAAY,IACZG,cAAc,QACdC,eAAe,QACfR,QAAS,SAACiF,GAERA,EAAEC,kBAEF5C,EAAyBY,EAAQe,IACjCnC,GAAmB,EACrB,EAAEhC,SAAA,EAEFH,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,KAAKC,GAAG,KAAKC,EAAE,OAC1B1F,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,KAAKC,GAAG,KAAKC,EAAE,OAC1B1F,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,IAAIC,GAAG,KAAKC,EAAE,UAI1B1F,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BC,KAAK,OAAOC,QAAQ,YAAYC,YAAa,IAAKE,OAAO,QAAQS,MAAM,KAAKD,OAAO,KAAIhB,UAC/HH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,4VAnCvCyC,EAAQe,GAuCH,SAMnBlB,EAAgBC,WAAWkB,OAAS,IACnCnE,EAAAA,EAAAA,MAAA0E,EAAAA,SAAA,CAAA3E,SAAA,EACEH,EAAAA,EAAAA,KAAA,KAAGE,UAAU,0BAAyBC,SAAC,iBACvCH,EAAAA,EAAAA,KAAA,MAAIE,UAAU,uBAAsBC,SACjCiD,EAAgBC,WAAWjF,KAAI,SAACmF,GAAO,OACtCnD,EAAAA,EAAAA,MAAA,MACEF,UAAS,YAAA2E,OAActB,EAAQe,KAAOzI,EAAkB,oBAAsB,IAE9EwE,QAAS,WACPkB,EAAegC,EAAQe,IACnBK,OAAOC,YAAc,KACvBJ,GAEJ,EAAErE,SAAA,CAEIoD,EAAQe,IACTlE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4BAA2BC,SAAA,EAC1CC,EAAAA,EAAAA,MAAA,OACbE,MAAM,6BACNc,MAAM,KACND,OAAO,KACPX,QAAQ,YACRD,KAAK,OACLI,OAAO,QACPF,YAAY,IACZG,cAAc,QACdC,eAAe,QACfR,QAAS,SAACiF,GAERA,EAAEC,kBAEF5C,EAAyBY,EAAQe,IACjCnC,GAAmB,EACrB,EAAEhC,SAAA,EAEFH,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,KAAKC,GAAG,KAAKC,EAAE,OAC1B1F,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,KAAKC,GAAG,KAAKC,EAAE,OAC1B1F,EAAAA,EAAAA,KAAA,UAAQwF,GAAG,IAAIC,GAAG,KAAKC,EAAE,UAI3B1F,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BC,KAAK,OAAOC,QAAQ,YAAYC,YAAa,IAAKE,OAAO,QAAQS,MAAM,KAAKD,OAAO,KAAIhB,UAC/HH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,4VAnCtCyC,EAAQe,GAuCL,iBAUjBpC,IACClC,EAAAA,EAAAA,KAAC2F,EAAS,CAAC9J,gBAAiB6G,EAAuB5G,eA1N5B,WACrBqG,GAAmB,GAEnBT,GAAkB,GAClBC,GAAiB,GACjB5B,GACF,SA2NF,E,oBCxNA,EAtJkB,SAAHnE,GAAuH,IAAjHgK,EAAShK,EAATgK,UAAWC,EAAWjK,EAAXiK,YAAaC,EAAQlK,EAARkK,SAAUC,EAAMnK,EAANmK,OAAQC,EAAWpK,EAAXoK,YAAaC,EAAYrK,EAAZqK,aAAcC,EAAUtK,EAAVsK,WAAYC,EAAOvK,EAAPuK,QAAStK,EAAeD,EAAfC,gBACvGuK,GAAWC,EAAAA,EAAAA,MACjBrK,GAA4CC,EAAAA,EAAAA,UAAS,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAnDsK,EAAcpK,EAAA,GAAEqK,EAAiBrK,EAAA,IAGxCU,EAAAA,EAAAA,YAAU,WACR,IAAM4J,EAAc5I,EAAAA,GAAK6I,oBAAmB,SAACxC,GACvCA,GACFsC,EAAkBtC,EAAKnG,KACvBY,QAAQC,IAAI,iCAAkCsF,EAAKnG,OAEnDY,QAAQG,MAAM,0CACd0H,EAAkB,MAEtB,IACA,OAAO,WACLC,GACF,CACF,GAAG,CAAC3K,IAEJ,IAAM6K,EAAqB,eAAA5J,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAyJ,EAAAC,EAAA,OAAA5J,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAF,EAAAC,KAAA,EAErByI,GAAiBK,GAAmBzK,EAAe,CAAA0B,EAAAE,KAAA,cAChD,IAAIoJ,MAAM,yEAAyE,KAAD,EAS1F,OALMC,EAAY,GAAAjC,OAAMyB,EAAc,KAAAzB,OAAIoB,GAGpCW,GAAkBvI,EAAAA,EAAAA,KAAIX,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,uBAAwBmJ,GAE1EvJ,EAAAE,KAAA,GACMsJ,EAAAA,EAAAA,IAAOH,EAAiB,CAC5B/K,gBAAAA,EACAyK,eAAAA,EACAL,aAAAA,IAEC,KAAD,EAGFG,EAAS,QAAS,CAChBY,MAAO,CACLf,aAAAA,EACApK,gBAAAA,EACAyK,eAAAA,KAIJ5H,QAAQC,IAAI,sCAAsCpB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAqB,GAAArB,EAAA,SAElDmB,QAAQG,MAAM,oCAAqCtB,EAAAqB,GAAMoC,SAAS,yBAAAzD,EAAAuB,OAAA,GAAA5B,EAAA,mBAErE,kBAjC0B,OAAAJ,EAAAiC,MAAA,KAAAC,UAAA,KAoCrBiI,EAAkB,SAAC/H,GACL,WAAdA,EAAMgI,KACRf,GAEJ,EAYA,OAVAvJ,EAAAA,EAAAA,YAAU,WAKR,OAJIgJ,GACFtG,SAASC,iBAAiB,UAAW0H,GAGhC,WACL3H,SAASE,oBAAoB,UAAWyH,EAC1C,CACF,GAAG,CAACrB,IAGFA,IAEJxF,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EAClBH,EAAAA,EAAAA,KAAA,OAAKE,UAAU,kCAAiCC,UACpDC,EAAAA,EAAAA,MAAA,UAAQC,QAAS8F,EAAQhG,SAAA,CAAC,sBAAkBH,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BC,KAAK,OAAOC,QAAQ,YAAYC,YAAa,IAAKC,MAAM,QAAQC,OAAO,eAAeT,UAAU,UAASC,UACvLH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,iCAKrDV,EAAAA,EAAAA,MAAA,MAAIF,UAAU,aAAYC,SAAA,CAAC,IAAE0F,MAE7BzF,EAAAA,EAAAA,MAAA,MAAIF,UAAU,aAAYC,SAAA,CAAC,cAAY+F,MAE/ClG,EAAAA,EAAAA,KAAA,OAAKmH,KAAMrB,EAAU5F,UAAU,cAAaC,UAC1CH,EAAAA,EAAAA,KAAA,OACEkF,IAAKY,EACLV,IAAI,gBACJlF,UAAU,0FAKNE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBC,SAAA,EAChCH,EAAAA,EAAAA,KAAA,MAAIE,UAAU,aAAe6E,MAAO,CAAEC,QAAS,UAAW7E,SAAC,aACrEH,EAAAA,EAAAA,KAAA,KAAG+E,MAAO,CAAEC,QAAS,UAAW7E,SAAE6F,QAIxB5F,EAAAA,EAAAA,MAAA,OAAK2E,MAAO,CAAEqC,aAAc,SAAUC,UAAW,UAAWlH,SAAA,EAE5DC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,wBAAuBC,SAAA,CAAC,WAAS4F,EAAOuB,KAAK,SACjEvB,GAAUA,EAAO3H,KAAI,SAAC2H,GAAM,OAC3B/F,EAAAA,EAAAA,KAAA,UAEEuH,KAAK,SACLrH,UAAU,mDAAkDC,SAE3D4F,GAJIA,EAKE,QAKL/F,EAAAA,EAAAA,KAAA,WAGAI,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gCAA+BC,SAAA,EAC9CH,EAAAA,EAAAA,KAACwH,EAAAA,GAAI,CAACC,GAAG,QAAQT,MAAO,CAAEf,aAAAA,EAAcpK,gBAAAA,GAAmBwE,QAASqG,EAAsBvG,UAEtFC,EAAAA,EAAAA,MAAA,UAAQmH,KAAK,SAASrH,UAAU,6DAA4DC,SAAA,EAE1FH,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BE,QAAQ,YAAYD,KAAK,eAAea,MAAM,KAAKlB,UAAU,uBAAsBC,UACzHH,EAAAA,EAAAA,KAAA,QAAM0H,SAAS,UAAU5G,EAAE,ybAAyb6G,SAAS,eAE/d3H,EAAAA,EAAAA,KAAA,QAAME,UAAU,OAAMC,SAAC,kBAGzBC,EAAAA,EAAAA,MAAA,UAAQmH,KAAK,SAASrH,UAAU,+DAA8DC,SAAA,EAE9FH,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BE,QAAQ,YAAYD,KAAK,eAAea,MAAM,KAAKlB,UAAU,uBAAsBC,UACvHH,EAAAA,EAAAA,KAAA,QAAMc,EAAE,8VAEXd,EAAAA,EAAAA,KAAA,QAAME,UAAU,OAAMC,SAAC,oBAYpC,E,UC0JA,EA7SoB,SAAHvE,GAAkF,IAA5EyF,EAAMzF,EAANyF,OAAQC,EAAU1F,EAAV0F,WAAYsG,EAAahM,EAAbgM,cAAiC/L,GAAFD,EAAhBiM,iBAAiCjM,EAAfC,iBAC1EG,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApDyF,EAAcvF,EAAA,GAAEwF,EAAiBxF,EAAA,GACxCI,GAA0CL,EAAAA,EAAAA,WAAS,GAAMM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAlDwL,EAAavL,EAAA,GAAEoF,EAAgBpF,EAAA,GACtCsF,GAA8C5F,EAAAA,EAAAA,UAAS,IAAG6F,GAAA3F,EAAAA,EAAAA,GAAA0F,EAAA,GAAnDkG,EAAejG,EAAA,GAAEkG,EAAkBlG,EAAA,GACpCmG,GAAiBtL,EAAAA,EAAAA,QAAO,MAC9BqF,GAAkC/F,EAAAA,EAAAA,WAAS,GAAMgG,GAAA9F,EAAAA,EAAAA,GAAA6F,EAAA,GAA1C4D,EAAS3D,EAAA,GAAEiG,EAAYjG,EAAA,GAE9BG,GAA0CnG,EAAAA,EAAAA,WAAS,GAAMoG,GAAAlG,EAAAA,EAAAA,GAAAiG,EAAA,GAAlD+F,EAAa9F,EAAA,GAAE+F,EAAgB/F,EAAA,GACtCG,GAA4CvG,EAAAA,EAAAA,UAAS,MAAKwG,GAAAtG,EAAAA,EAAAA,GAAAqG,EAAA,GAAnC6F,GAAF5F,EAAA,GAAmBA,EAAA,IACxCoB,GAAgD5H,EAAAA,EAAAA,WAAS,GAAK6H,GAAA3H,EAAAA,EAAAA,GAAA0H,EAAA,GAAvDyE,EAAgBxE,EAAA,GAAEyE,EAAmBzE,EAAA,GAC5C0E,GAA0CvM,EAAAA,EAAAA,WAAS,GAAMwM,GAAAtM,EAAAA,EAAAA,GAAAqM,EAAA,GAAlDE,EAAaD,EAAA,GAAEE,EAAgBF,EAAA,GACtCG,GAA4C3M,EAAAA,EAAAA,UAAS,IAAG4M,GAAA1M,EAAAA,EAAAA,GAAAyM,EAAA,GAAjDE,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GAElCG,EAAuB,WAC3BZ,GAAiB,GACjBO,GAAiB,GACjBT,EAAa,KACf,EAEMe,EAAmB,SAAChI,GACxBiH,EAAajH,EACf,EAEMiI,EAAoB,SAACC,EAAYlI,GACjCA,IAAU2E,IACZyC,EAAkBc,GAClBR,GAAkBD,GAClBN,GAAiB,GAErB,EAEMgB,EAAmB,WAClBV,GAAkBP,IACrBC,GAAiB,GACjBF,EAAa,MAEjB,EAQMjJ,GAAqB,SAACC,GACtB+I,EAAe9I,UAAY8I,EAAe9I,QAAQC,SAASF,EAAMG,UACnEiC,IACAI,GAAkB,GAClBC,GAAiB,GAErB,GAEA/E,EAAAA,EAAAA,YAAU,WACR,IAAM8H,EAAWC,OAAOC,YAAc,IAMtC,OALIvD,GAAUqD,EACZpF,SAASC,iBAAiB,YAAaN,IAEvCK,SAASE,oBAAoB,YAAaP,IAErC,WACLK,SAASE,oBAAoB,YAAaP,GAC5C,CACF,GAAG,CAACoC,KAEJzE,EAAAA,EAAAA,YAAU,WACR,IAAMyM,EAAoB,eAAAvM,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAoM,EAAA,OAAAtM,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WACvB4D,EAAO,CAAD9D,EAAAE,KAAA,SAEoB,GAFpBF,EAAAC,KAAA,EAEN+K,GAAoB,IAGhBX,EAAc,CAADrK,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EACC8L,GAA2B3B,EAAe/L,GAAiB,KAAD,EAA1EyN,EAAO/L,EAAAW,KAAAX,EAAAE,KAAA,oBACE5B,EAAgB,CAAD0B,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GACR+L,GAAmB3N,GAAiB,KAAD,GAAnDyN,EAAO/L,EAAAW,KAAA,QAGT8J,EAAmBsB,GAAW,IAAI/L,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAqB,GAAArB,EAAA,SAElCmB,QAAQG,MAAM,0BAAyBtB,EAAAqB,IAAS,QAGa,OAHbrB,EAAAC,KAAA,GAEhD+K,GAAoB,GACpBQ,EAAkBU,MAAM1B,EAAgBxD,QAAQhE,MAAK,IAAQhD,EAAAmM,OAAA,6BAAAnM,EAAAuB,OAAA,GAAA5B,EAAA,yBAIlE,kBArByB,OAAAJ,EAAAiC,MAAA,KAAAC,UAAA,KAuB1BqK,GACF,GAAG,CAAChI,EAAQuG,EAAe/L,IAE3B,IAAM2N,GAAkB,eAAA9J,GAAA3C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA0C,EAAO9D,GAAe,IAAA8N,EAAAC,EAAA9L,EAAA+L,EAAAzM,EAAA0M,EAAAC,EAAA,OAAA/M,EAAAA,EAAAA,KAAAM,MAAA,SAAAuC,GAAA,cAAAA,EAAArC,KAAAqC,EAAApC,MAAA,OAEwB,OAFxBoC,EAAArC,KAAA,EAEvCmM,GAAoBjM,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,sBAAqBkC,EAAApC,KAAA,GACzCM,EAAAA,EAAAA,IAAQ4L,GAAmB,KAAD,EAEkD,OAFlGC,EAAa/J,EAAA3B,KACbJ,EAAMF,EAAAA,GAAKC,YAAYC,IACvB+L,GAAqBnM,EAAAA,EAAAA,IAAWC,EAAAA,GAAU,SAADkH,OAAW/G,EAAG,iBAAA+G,OAAgBhJ,EAAe,cAAYgE,EAAApC,KAAA,GACzEM,EAAAA,EAAAA,IAAQ8L,GAAoB,KAAD,EA0CvD,OA1CGzM,EAAgByC,EAAA3B,KAChB6J,EAAkB,GAClBgC,EAAmB,IAAIC,IAE7B5M,EAAiBkG,SAAQ,SAAC2G,GACxB,IAAMC,EAAcD,EAAW1L,OACvBC,EAAqB0L,EAArB1L,OAAQC,EAAayL,EAAbzL,SAEhBmL,EAActG,SAAQ,SAACjF,GACrB,IAAME,EAAOF,EAAIE,OACjB,GAAIA,GAAQA,EAAKsH,cAAgBkE,EAAiBI,IAAI9L,EAAIiG,IAAK,CAC7D,IAAM6E,EAAa,CACjBiB,KAAM7L,EAAKsH,YACXC,SAAUvH,EAAKuH,UAAQ,GAAAjB,OAAOM,GAAsB,0BACpDY,OAAQxH,EAAK8L,UAAY,GACzBrE,YAAazH,EAAKyH,YAClBsE,KAAM/L,EAAK+L,KACXpE,WAAY3H,EAAK2H,WACjBD,aAAc5H,EAAIiG,IAKdiG,EAAc,CAClBC,KAHoB,CAAC,OAAQ,aAAc,cAAe,UAI1DC,cAAc,EACdC,gBAAgB,EAChBC,UAAW,IAGPC,EAAO,IAAIC,EAAAA,EAAK,CAACtM,GAAOgM,GAExBO,EAAejP,GAAmB0C,EAAK2H,WAAW6E,cAAcC,SAASnP,EAAgBkP,eACzFE,EAAczM,GAAUoM,EAAKM,OAAO1M,GAAQ+F,OAAS,EACrD4G,EAAgB1M,GAAYmM,EAAKM,OAAOzM,GAAU8F,OAAS,GAE7DuG,GAAgBG,GAAeE,KACjCpD,EAAgBnE,KAAKuF,GACrBY,EAAiBqB,IAAI/M,EAAIiG,IAE7B,CACF,GACF,IAAGzE,EAAAwL,OAAA,SAEItD,GAAe,QAE+C,OAF/ClI,EAAArC,KAAA,GAAAqC,EAAAjB,GAAAiB,EAAA,SAEtBnB,QAAQG,MAAM,+CAA8CgB,EAAAjB,IAASiB,EAAAwL,OAAA,SAC9D,IAAE,yBAAAxL,EAAAf,OAAA,GAAAa,EAAA,mBAEZ,gBAvDuB2L,GAAA,OAAA5L,EAAAX,MAAA,KAAAC,UAAA,KAyDlBuK,GAA0B,eAAAgC,GAAAxO,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAuO,EAAO5D,EAAeC,GAAgB,IAAA8B,EAAAC,EAAA6B,EAAA,OAAAzO,EAAAA,EAAAA,KAAAM,MAAA,SAAAoO,GAAA,cAAAA,EAAAlO,KAAAkO,EAAAjO,MAAA,OAEA,OAFAiO,EAAAlO,KAAA,EAE/DmM,GAAoBjM,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,sBAAqB+N,EAAAjO,KAAA,GACzCM,EAAAA,EAAAA,IAAQ4L,GAAmB,KAAD,EAkCnD,OAlCGC,EAAa8B,EAAAxN,KACb6J,EAAkB,GAExB6B,EAActG,SAAQ,SAACjF,GACrB,IAAME,EAAOF,EAAIE,OACjB,GAAIA,GAAQA,EAAKsH,YAAa,CAC5B,IAAMsD,EAAa,CACjBiB,KAAM7L,EAAKsH,YACXC,SAAUvH,EAAKuH,UAAQ,GAAAjB,OAAOM,GAAsB,0BACpDY,OAAQxH,EAAK8L,UAAY,GACzBrE,YAAazH,EAAKyH,YAClBsE,KAAM/L,EAAK+L,KACXpE,WAAY3H,EAAK2H,WACjBD,aAAc5H,EAAIiG,IAGdqH,EAAgB,CAAC,OAAQ,aAAc,WAAY,cAAe,WAGrE9D,GAAoB8D,EAAcC,MAAK,SAAAC,GAAK,OAC3CtN,EAAKsN,IACkB,kBAAhBtN,EAAKsN,IACZtN,EAAKsN,GAAOd,cAAcC,SAASnD,EAAiBkD,cAAc,KAEnEnD,GAAiB+D,EAAcC,MAAK,SAAAC,GAAK,OACxCtN,EAAKsN,IACkB,kBAAhBtN,EAAKsN,IACZtN,EAAKsN,GAAOd,cAAcC,SAASpD,EAAcwC,KAAKW,cAAc,MAEpEnD,IAAkBC,IAEpBE,EAAgBnE,KAAKuF,EAEzB,CACF,IAAGuC,EAAAL,OAAA,SAEItD,GAAe,QAE6C,OAF7C2D,EAAAlO,KAAA,GAAAkO,EAAA9M,GAAA8M,EAAA,SAEtBhN,QAAQG,MAAM,6CAA4C6M,EAAA9M,IAAS8M,EAAAL,OAAA,SAC5D,IAAE,yBAAAK,EAAA5M,OAAA,GAAA0M,EAAA,mBAEZ,gBA5C+BM,EAAAC,GAAA,OAAAR,EAAAxM,MAAA,KAAAC,UAAA,KA8ChC,OACEoB,EAAAA,EAAAA,MAAA,OAAKH,IAAKgI,EAAgB/H,UAAS,kBAAA2E,OAAoBxD,EAAS,sBAAwB,IAAKlB,SAAA,EAC3FH,EAAAA,EAAAA,KAAA,QAAME,UAAS,sBAAA2E,OAAwBxD,EAAS,iCAAmC,IAAM,cAAY,OAAOhB,QA9JzF,WACrBqB,GAAmBD,GACnBE,GAAkBmG,GAClBxG,GACF,EA0JwInB,UAClIH,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BI,MAAM,UAAUH,KAAK,OAAOC,QAAQ,YAAYC,YAAa,EAAGE,OAAO,eAAeQ,OAAO,KAAKC,MAAM,KAAK2D,MAAO,CAAEM,WAAY,QAASlF,UACjLH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,yPAGxDO,IACCjB,EAAAA,EAAAA,MAAA0E,EAAAA,SAAA,CAAA3E,SAAA,EACEH,EAAAA,EAAAA,KAAA,OAAAG,UACEH,EAAAA,EAAAA,KAAA,MAAAG,SAAI,cAELmI,EACCQ,EAAe1K,KAAI,SAAC5B,EAAWyE,GAAK,OAClCzE,GAAYwD,EAAAA,EAAAA,KAACe,EAAAA,EAAa,GAAME,IAC9Bb,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEH,EAAAA,EAAAA,KAAA,UACEE,UAAS,iCAAA2E,OAAmCsD,GAAiBlH,IAAU2E,EAAY,kBAAoB,IACvGoG,aAAc,kBAAM/C,EAAiBhI,EAAM,EAC3CgL,aAAc7C,EACd/I,QAAS,kBAAM6I,EAAkBnB,EAAgB9G,GAAQA,EAAM,EAACd,UAEhEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qBAAoBC,SAAA,EACjCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oDAAmDC,SAAA,EAChEH,EAAAA,EAAAA,KAAA,OACEkF,IAAK6C,EAAgB9G,GAAO6E,SAC5BV,IAAI,SACJlF,UAAU,sCAEZF,EAAAA,EAAAA,KAAA,OAAKE,UAAU,OAAMC,UACnBH,EAAAA,EAAAA,KAAA,KAAGE,UAAU,mCAAkCC,SAAE4H,EAAgB9G,GAAOmJ,YAG3ErC,EAAgB9G,GAAO8E,SACtB/F,EAAAA,EAAAA,KAAA,OAAKE,UAAU,kBAAiBC,UAC9BC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,wBAAuBC,SAAA,CAAC,WAAS4H,EAAgB9G,GAAO8E,OAAOuB,KAAK,gBAKxFa,IACCnI,EAAAA,EAAAA,KAACkM,EAAS,CACRtG,UAAW3E,IAAU2E,EACrBC,YAAakC,EAAgB9G,GAAOmJ,KACpCtE,SAAUiC,EAAgB9G,GAAO6E,SACjCC,OAAQgC,EAAgB9G,GAAO8E,OAC/BC,YAAa+B,EAAgB9G,GAAO+E,YACpCsE,KAAMvC,EAAgB9G,GAAOqJ,KAC7BpE,WAAY6B,EAAgB9G,GAAOiF,WACnCD,aAAc8B,EAAgB9G,GAAOgF,aACrCpK,gBAAiBA,EACjBsK,QAAS6C,MApCL/H,EAwCX,IAGH8G,EAAgB3J,KAAI,SAAC+K,EAAYlI,GAAK,OACpCb,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEH,EAAAA,EAAAA,KAAA,UACEE,UAAS,iCAAA2E,OAAmCsD,GAAiBlH,IAAU2E,EAAY,kBAAoB,IACvGoG,aAAc,kBAAM/C,EAAiBhI,EAAM,EAC3CgL,aAAc7C,EACd/I,QAAS,kBAAM6I,EAAkBC,EAAYlI,EAAM,EAACd,UAEpDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qBAAoBC,SAAA,EACjCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oDAAmDC,SAAA,EAChEH,EAAAA,EAAAA,KAAA,OACEkF,IAAKiE,EAAWrD,SAChBV,IAAI,SACJlF,UAAU,sCAEZF,EAAAA,EAAAA,KAAA,OAAKE,UAAU,OAAMC,UACnBH,EAAAA,EAAAA,KAAA,KAAGE,UAAU,mCAAkCC,SAAEgJ,EAAWiB,YAG/DjB,EAAWpD,SACV/F,EAAAA,EAAAA,KAAA,OAAKE,UAAU,kBAAiBC,UAC9BC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,wBAAuBC,SAAA,CAAC,WAASgJ,EAAWpD,OAAOuB,KAAK,gBAK5Ea,IACCnI,EAAAA,EAAAA,KAACkM,EAAS,CACRtG,UAAW3E,IAAU2E,EACrBC,YAAasD,EAAWiB,KACxBtE,SAAUqD,EAAWrD,SACrBC,OAAQoD,EAAWpD,OACnBC,YAAamD,EAAWnD,YACxBsE,KAAMnB,EAAWmB,KACjBpE,WAAYiD,EAAWjD,WACvBD,aAAckD,EAAWlD,aACzBpK,gBAAiBA,EACjBsK,QAAS6C,MApCL/H,EAuCJ,SAOpB,ECjPQkL,EAAa,SAAHrP,GAAkE,IAA5DsP,EAAQtP,EAARsP,SAAUC,EAAoBvP,EAApBuP,qBAAsBC,EAAoBxP,EAApBwP,qBAMpD,OACElM,EAAAA,EAAAA,MAAA,SAAOF,UAAU,8BAA8BqM,QAASH,EAAS9H,GAAGnE,SAAA,CACjEiM,EAASI,KACVxM,EAAAA,EAAAA,KAAA,OAAKE,UAAU,4BAA2BC,UACxCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,4CAA2CC,SAAA,EACxDH,EAAAA,EAAAA,KAAA,MAAIE,UAAU,MAAKC,SAAEiM,EAAShC,QAC9BpK,EAAAA,EAAAA,KAAA,MAAIE,UAAU,4BAA2BC,SAAEiM,EAASpG,oBAGxD5F,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCC,SAAA,EACrDH,EAAAA,EAAAA,KAAA,SACEuH,KAAK,QACLrH,UAAU,6BACVoE,GAAI8H,EAAS9H,GACb8F,KAAK,aACLqC,SApBkB,WACxBH,EAAqBF,GACrBC,GACF,KAmBMrM,EAAAA,EAAAA,KAAA,SAAOE,UAAU,kCAAkCqM,QAASH,EAAS9H,UAI7E,EAEQoI,EAAa,CACf,CACApI,GAAI,iBACJ8F,KAAM,WACNpE,YAAa,wBACbwG,KACIxM,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BI,MAAM,UAAUH,KAAK,OAAOC,QAAQ,YAAYC,YAAa,EAAGE,OAAO,eAAeQ,OAAO,KAAKC,MAAM,KAAIjB,UACpJH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,oRAIzD,CACAwD,GAAI,cACJ8F,KAAM,QACNpE,YAAa,8BACbwG,KACIpM,EAAAA,EAAAA,MAAA,OAAKE,MAAM,6BAA6BI,MAAM,UAAUH,KAAK,OAAOC,QAAQ,YAAYC,YAAa,EAAGE,OAAO,eAAeQ,OAAO,KAAKC,MAAM,KAAIjB,SAAA,EACpJH,EAAAA,EAAAA,KAAA,QAAMc,EAAE,4VACRd,EAAAA,EAAAA,KAAA,QAAMc,EAAE,2MAIZ,CACAwD,GAAI,eACJ8F,KAAM,OACNpE,YAAa,6BACbwG,KACIpM,EAAAA,EAAAA,MAAA,OAAKE,MAAM,6BAA6BI,MAAM,UAAUH,KAAK,OAAOC,QAAQ,YAAYC,YAAa,EAAGE,OAAO,eAAeQ,OAAO,KAAKC,MAAM,KAAIjB,SAAA,EACpJH,EAAAA,EAAAA,KAAA,QAAMc,EAAE,uCACRd,EAAAA,EAAAA,KAAA,QAAMc,EAAE,uWAIZ,CACAwD,GAAI,iBACJ8F,KAAM,SACNpE,YAAa,eACbwG,KACIpM,EAAAA,EAAAA,MAAA,OAAKE,MAAM,6BAA6BI,MAAM,UAAUH,KAAK,OAAOC,QAAQ,YAAYC,YAAa,EAAGE,OAAO,eAAeQ,OAAO,KAAKC,MAAM,KAAIjB,SAAA,EACpJH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,iVACrDd,EAAAA,EAAAA,KAAA,QAAMc,EAAE,2dAIZ,CACAwD,GAAI,eACJ8F,KAAM,OACNpE,YAAa,2BACbwG,KACIxM,EAAAA,EAAAA,KAAA,OAAKM,MAAM,6BAA6BI,MAAM,UAAUH,KAAK,OAAOC,QAAQ,YAAYC,YAAa,EAAGE,OAAO,eAAeQ,OAAO,KAAKC,MAAM,KAAIjB,UACpJH,EAAAA,EAAAA,KAAA,QAAMY,cAAc,QAAQC,eAAe,QAAQC,EAAE,mlBAIzD,CACAwD,GAAI,kBACJ8F,KAAM,UACNpE,YAAa,2BACbwG,KACIpM,EAAAA,EAAAA,MAAA,OAAKE,MAAM,6BAA6BI,MAAM,UAAUH,KAAK,OAAOC,QAAQ,YAAYC,YAAa,EAAGE,OAAO,eAAeQ,OAAO,KAAKC,MAAM,KAAIjB,SAAA,EACpJH,EAAAA,EAAAA,KAAA,QAAMc,EAAE,yKACRd,EAAAA,EAAAA,KAAA,QAAMc,EAAE,0dAMhB,EA9JgB,SAAHlF,GAAiE,IAA3D6F,EAAc7F,EAAd6F,eAAgB4K,EAAoBzQ,EAApByQ,qBAAsBM,EAAa/Q,EAAb+Q,cACrDC,GAAcjQ,EAAAA,EAAAA,QAAO,MAC3BX,GAA0CC,EAAAA,EAAAA,UAAS,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAjD4L,EAAa1L,EAAA,GAAE2Q,EAAgB3Q,EAAA,GAEhCoQ,EAAuB,SAACQ,GAC5BD,EAAiBC,GACjBH,EAAcG,GACdT,GACF,EAqBA,OAlBAzP,EAAAA,EAAAA,YAAU,WACR,IAAMqC,EAAqB,SAACC,GAC1B,IAAM6N,EAAezN,SAAS0N,cAAc,eAE1CvL,GACAmL,EAAYzN,UACX4N,EAAa3N,SAASF,EAAMG,SAG7BgN,GAEJ,EAEA,OADA/M,SAASC,iBAAiB,YAAaN,GAChC,WACLK,SAASE,oBAAoB,YAAaP,EAC5C,CACF,GAAG,CAAC2N,EAAaP,EAAsB5K,KAGrCrB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBH,EAAAA,EAAAA,KAAA,MACEK,QAASgM,EACTnM,UAAS,kBAAA2E,OAAoBpD,EAAiB,mBAAqB,IAAKtB,SAEvEyH,EAAa,UAAA/C,OAAa+C,EAAcwC,MAAS,kBAEpDpK,EAAAA,EAAAA,KAAA,QACEE,UAAS,oCAAA2E,OAAsCpD,EAAiB,gCAAkC,IAClG,cAAY,OACZpB,QAASgM,EAAqBlM,UAE9BH,EAAAA,EAAAA,KAAA,OAAKoB,MAAM,IAAID,OAAO,KAAKX,QAAQ,WAAUL,UAC3CH,EAAAA,EAAAA,KAAA,QAAMc,EAAE,sXAGZd,EAAAA,EAAAA,KAAA,OAAKC,IAAK2M,EAAa1M,UAAS,uBAAA2E,OAAyBpD,EAAiB,kBAAoB,IAAKtB,SAChGuM,GAAcA,EAAWtO,KAAI,SAACgO,GAAQ,OACrCpM,EAAAA,EAAAA,KAACmM,EAAU,CAETC,SAAUA,EACVC,qBAAsBA,EACtBC,qBAAsBA,GAHjBF,EAAS9H,GAId,QAOZ,E,UC4QA,EAhUsB,WACpB,IAAAtI,GAA8BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAnCgF,EAAO9E,EAAA,GAAE+Q,EAAU/Q,EAAA,GAC1BI,GAA4CL,EAAAA,EAAAA,UAAS,QAAOM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAArD4Q,EAAc3Q,EAAA,GAAE4Q,EAAiB5Q,EAAA,GAClC6Q,GAAczQ,EAAAA,EAAAA,QAAO,MAC3BkF,GAAwC5F,EAAAA,EAAAA,UAAS,IAAG6F,GAAA3F,EAAAA,EAAAA,GAAA0F,EAAA,GAA7CwL,EAAYvL,EAAA,GAAEwL,EAAexL,EAAA,GAEpCE,GAA4C/F,EAAAA,EAAAA,WAAS,GAAMgG,GAAA9F,EAAAA,EAAAA,GAAA6F,EAAA,GAApDP,EAAcQ,EAAA,GAAEP,EAAiBO,EAAA,GACxCG,GAA0CnG,EAAAA,EAAAA,WAAS,GAAMoG,GAAAlG,EAAAA,EAAAA,GAAAiG,EAAA,GAAlDmL,EAAalL,EAAA,GAAEmL,EAAgBnL,EAAA,GACtCG,GAA0CvG,EAAAA,EAAAA,WAAS,GAAMwG,GAAAtG,EAAAA,EAAAA,GAAAqG,EAAA,GAAlDiL,EAAahL,EAAA,GAAEiL,EAAgBjL,EAAA,GAChCkL,GAAmBhR,EAAAA,EAAAA,QAAO,MAChCkH,GAA8C5H,EAAAA,EAAAA,WAAS,GAAM6H,GAAA3H,EAAAA,EAAAA,GAAA0H,EAAA,GAAtD+J,EAAe9J,EAAA,GAAE+J,EAAkB/J,EAAA,GAC1C0E,GAA4BvM,EAAAA,EAAAA,WAAS,GAAMwM,GAAAtM,EAAAA,EAAAA,GAAAqM,EAAA,GAApCnH,EAAMoH,EAAA,GACbG,GADwBH,EAAA,IACsBxM,EAAAA,EAAAA,UAAS,OAAK4M,GAAA1M,EAAAA,EAAAA,GAAAyM,EAAA,GAArD/M,EAAegN,EAAA,GAAEiF,EAAkBjF,EAAA,GAC1CkF,GAA0C9R,EAAAA,EAAAA,UAAS,MAAK+R,GAAA7R,EAAAA,EAAAA,GAAA4R,EAAA,GAAjDnG,EAAaoG,EAAA,GAAEnB,GAAgBmB,EAAA,GACtCC,IAAwChS,EAAAA,EAAAA,UAAS,MAAKiS,IAAA/R,EAAAA,EAAAA,GAAA8R,GAAA,GAAjCE,IAAFD,GAAA,GAAiBA,GAAA,IAE9BE,GAAa,eAAAxS,GAAAmB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOgH,EAASmK,GAAY,IAAAlR,EAAAC,EAAAC,EAAA,OAAAL,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAGgE,OAFhHiB,QAAQC,IAAI,iCAAkCuF,EAAS,oBAAqBmK,GAAc9Q,EAAAC,KAAA,EAElFL,GAAwBO,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,QAASuG,EAAS,cAAemK,EAAc,YAAW9Q,EAAAE,KAAA,GAC/EM,EAAAA,EAAAA,KAAQC,EAAAA,EAAAA,IAAMb,GAAuBc,EAAAA,EAAAA,IAAQ,gBAAgB,KAAD,EAArFb,EAAgBG,EAAAW,KAChBb,EAAeD,EAAiBe,KAAKC,KAAI,SAACC,GAC9C,IAAAC,EAA6BD,EAAIE,OAAzBC,EAAMF,EAANE,OAAQC,EAAQH,EAARG,SAChB,MAAO,CACL,CAAE6P,MAAMtO,EAAAA,EAAAA,KAACkB,EAAAA,EAAa,CAAAf,SAAE3B,IAAyByF,KAAM,QACvD,CAAEqK,MAAMtO,EAAAA,EAAAA,KAACkB,EAAAA,EAAa,CAAAf,SAAE1B,IAA2BwF,KAAM,MAAOsK,UAAU,GAE9E,IAAGC,OACHlB,EAAgBjQ,GAChBqB,QAAQC,IAAI,qCAAsC0P,GAAc9Q,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAqB,GAAArB,EAAA,SAEhEmB,QAAQG,MAAM,0CAAyCtB,EAAAqB,IAAS,yBAAArB,EAAAuB,OAAA,GAAA5B,EAAA,mBAEnE,gBAjBkBoO,EAAAQ,GAAA,OAAAlQ,EAAAmD,MAAA,KAAAC,UAAA,KAmBbyP,GAAiB,eAAA3R,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAuO,IAAA,IAAA1N,EAAA4Q,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA/R,EAAAsG,EAAA0L,EAAA3I,EAAA,OAAAxJ,EAAAA,EAAAA,KAAAM,MAAA,SAAA8R,GAAA,cAAAA,EAAA5R,KAAA4R,EAAA3R,MAAA,OAEC,GADzBiB,QAAQC,IAAI,oCAAqC9C,GACjDgS,GAAmB,GAEI,KAAnB7M,EAAQqO,OAAa,CAAAD,EAAA3R,KAAA,SAQmB,GAPpCK,EAAMF,EAAAA,GAAKC,YAAYC,IAAGsR,EAAA5R,KAAA,EAG1BkR,EAAsB7S,EACpB8S,GAAQW,EAAAA,EAAAA,GAAItO,GAAS2N,QACLA,EAAMY,QAAQC,IAAI,SAASC,QAAO,SAAAC,GAAI,MAAa,YAATA,CAAkB,IACpEf,EAAMgB,QAAQH,IAAI,SACdxO,EAAQ4O,MAAM,KAAK,GAEhClB,EAAoB,CAADU,EAAA3R,KAAA,SAY0C,OAX1DkR,GAAQW,EAAAA,EAAAA,GAAItO,GAAS2N,QACrBkB,EAAgBlB,EAAMY,QAAQC,IAAI,SAASC,QAAO,SAAAC,GAAI,MAAa,YAATA,CAAkB,IAC5EC,EAAQhB,EAAMgB,QAAQH,IAAI,UAGhCd,EAAsB,GAAA7J,QAAAiL,EAAAA,EAAAA,GAAID,IAAaC,EAAAA,EAAAA,GAAKH,IAAOrI,KAAK,MAC/B+H,SACjBU,EAAY/O,EAAQ4O,MAAM,KAAK,GACrClB,EAAsBqB,EAAUV,QAGlC3Q,QAAQC,IAAI,mCAAmC,SAADkG,OAAW/G,IAAOsR,EAAA3R,KAAA,IAC1DsJ,EAAAA,EAAAA,KAAO1I,EAAAA,EAAAA,IAAI2R,EAAAA,GAAG,SAADnL,OAAW/G,IAAQ,CAAC,GAAG,KAAD,GAGsB,OADzDoR,GAAa7Q,EAAAA,EAAAA,IAAI2R,EAAAA,GAAG,SAADnL,OAAW/G,EAAG,iBAAA+G,OAAgB6J,IACvDhQ,QAAQC,IAAI,iCAAkCuQ,EAAWe,MAAMb,EAAA3R,KAAA,IAC7ByS,EAAAA,EAAAA,IAAOhB,GAAY,KAAD,GAA3B,GAAAE,EAAAlR,KAEAiS,SAAS,CAADf,EAAA3R,KAAA,SAEI,OADnCiB,QAAQC,IAAI,uCAAwCuQ,EAAWe,MACzDxM,GAAY2M,EAAAA,EAAAA,MAAiBhB,EAAA3R,KAAA,IAC7BsJ,EAAAA,EAAAA,IAAOmI,EAAY,CAAEzL,UAAAA,IAAa,KAAD,GAGzC0K,GAAgBO,GAChB2B,GAA4B3B,GAE5B4B,eAAeC,QAAQ,sBAAuB7B,GAAqB,QAKlC,OAF7BQ,GAAa7Q,EAAAA,EAAAA,IAAI2R,EAAAA,GAAG,SAADnL,OAAW/G,EAAG,iBAAA+G,OAAgB6J,IACjDvR,GAAwBO,EAAAA,EAAAA,IAAWwR,EAAY,YAC/CzL,GAAY2M,EAAAA,EAAAA,MAAiBhB,EAAA3R,KAAA,IACJ+S,EAAAA,EAAAA,IAAOrT,EAAuB,CAAEqB,OAAQwC,EAASyC,UAAAA,IAAa,KAAD,GAAtF0L,EAAgBC,EAAAlR,KAEtBQ,QAAQC,IAAI,+BAAgCuQ,EAAWe,MAEvDhD,EAAW,IACXwD,KACAnD,GAAgB,SAACoD,GAAgB,SAAA7L,QAAAiL,EAAAA,EAAAA,GAC5BY,GAAgB,CACnB,CAAEpC,KAAMtN,EAASiD,KAAM,QACvB,CAAEqK,KAAM,GAAIrK,KAAM,MAAOsK,UAAU,IAAM,IAGrC/H,GAAcmK,EAAAA,EAAAA,IAAWxB,EAAgB,eAAAzP,GAAA3C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA0C,EAAOiR,GAAW,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAjU,EAAAA,EAAAA,KAAAM,MAAA,SAAAoO,GAAA,cAAAA,EAAAlO,KAAAkO,EAAAjO,MAAA,OACb,KAA9CqT,EAAmC,QAArBD,EAAGD,EAAYrS,cAAM,IAAAsS,OAAA,EAAlBA,EAAoBpS,UACxB,CAADiN,EAAAjO,KAAA,SAChB+I,IAC2B,GACD,GACpBuK,EAAuBD,EAAcE,GAAAhU,EAAAA,EAAAA,KAAAC,MAAA,SAAA+T,EAAAC,GAAA,IAAAC,EAAC,OAADlU,EAAAA,EAAAA,KAAAM,MAAA,SAAAuC,GAAA,cAAAA,EAAArC,KAAAqC,EAAApC,MAAA,OAEyC,OAA5EyT,EAAqBC,KAAKC,IAAI,EAJX,GACD,GAGoCH,GAAsBpR,EAAApC,KAAA,EAC5E,IAAI4T,SAAQ,SAACC,GAAO,OAAKC,WAAWD,EAASJ,EAAmB,IAAE,KAAD,EACvE5D,GAAgB,SAACoD,GAAgB,SAAA7L,QAAAiL,EAAAA,EAAAA,GAC5BY,EAAiBc,MAAM,GAAI,IAAE,CAChC,CACElD,MAAMtO,EAAAA,EAAAA,KAACkB,EAAAA,EAAa,CAAAf,SAAE4Q,EAAqBS,MAAM,EAAGP,EAAI,KACxDhN,KAAM,QACP,IACA,wBAAApE,EAAAf,OAAA,GAAAkS,EAAA,IATIC,EAAI,EAAE,KAAD,OAAEA,EAAIF,EAAqBxM,QAAM,CAAAmH,EAAAjO,KAAA,gBAAAiO,EAAA+F,cAAAT,EAAAC,GAAA,iBAAEA,IAAGvF,EAAAjO,KAAA,gBAWpDoQ,GAAmB,GACflJ,OAAOC,WAAa,KAAOwI,EAAYjO,SACzCiO,EAAYjO,QAAQuS,OACrB,yBAAAhG,EAAA5M,OAAA,GAAAa,EAAA,KAEJ,gBAAAoM,GAAA,OAAArM,EAAAX,MAAA,KAAAC,UAAE,CAAF,CAvB8C,IAwB/C8O,EAAmBY,GAAsBU,EAAA3R,KAAA,iBAAA2R,EAAA5R,KAAA,GAAA4R,EAAAxQ,GAAAwQ,EAAA,SAEzC1Q,QAAQG,MAAM,sCAAqCuQ,EAAAxQ,IAAS,yBAAAwQ,EAAAtQ,OAAA,GAAA0M,EAAA,mBAGjE,kBAzFsB,OAAA1O,EAAAiC,MAAA,KAAAC,UAAA,KA2FjB2S,GAAkB,eAAApG,GAAAxO,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA2U,EAAOvD,GAAY,OAAArR,EAAAA,EAAAA,KAAAM,MAAA,SAAAuU,GAAA,cAAAA,EAAArU,KAAAqU,EAAApU,MAAA,OAKa,OAJzDiB,QAAQC,IAAI,mBAAoB0P,GAChCP,EAAmBO,GAGnBiC,eAAeC,QAAQ,mBAAoBlC,GAAcwD,EAAApU,KAAA,EAEnD2Q,GAAcxQ,EAAAA,GAAKC,YAAYC,IAAKuQ,GAAc,KAAD,mBAAAwD,EAAA/S,OAAA,GAAA8S,EAAA,KACxD,gBARuBE,GAAA,OAAAvG,EAAAxM,MAAA,KAAAC,UAAA,KAWlBqR,GAA2B,eAAA0B,GAAAhV,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAA+U,EAAOC,GAAS,OAAAjV,EAAAA,EAAAA,KAAAM,MAAA,SAAA4U,GAAA,cAAAA,EAAA1U,KAAA0U,EAAAzU,MAAA,OAEI,OADtDqQ,EAAmBmE,GACnB3B,eAAeC,QAAQ,mBAAoB0B,GAAWC,EAAAzU,KAAA,EAChD2Q,GAAc6D,GAAW,KAAD,mBAAAC,EAAApT,OAAA,GAAAkT,EAAA,KAC/B,gBAJgCG,GAAA,OAAAJ,EAAAhT,MAAA,KAAAC,UAAA,KAQjC2F,OAAOpF,iBAAiB,gBAAgB,WACxC+Q,eAAe8B,WAAW,sBAC1B,KAEAxV,EAAAA,EAAAA,YAAU,WACR,IAAMyV,EAAqB,eAAAC,GAAAvV,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAsV,IAAA,OAAAvV,EAAAA,EAAAA,KAAAM,MAAA,SAAAkV,GAAA,cAAAA,EAAAhV,KAAAgV,EAAA/U,MAAA,OAC5B,IACMG,EAAAA,GAAKC,YACkByS,eAAemC,QAAQ,qBAI9C/T,QAAQC,IAAI,gCAGdD,QAAQC,IAAI,yBAEhB,CAAE,MAAOE,GACPH,QAAQG,MAAM,qCAAsCA,EACtD,CAAC,wBAAA2T,EAAA1T,OAAA,GAAAyT,EAAA,KACF,kBAf0B,OAAAD,EAAAvT,MAAA,KAAAC,UAAA,KAiB3BqT,IACIhR,GACF2C,eAEJ,GAAG,CAAC3C,IAKJ,IAoBMoP,GAAuB,WAC3B,IAAMiC,EAAWtF,EAAYjO,QAC7B,GAAIuT,EAAU,CACZA,EAAS3N,MAAM5D,OAAS,OACxB,IAAMwR,EAAYxB,KAAKyB,IAAIF,EAASG,aAnMd,KAoMtBH,EAAS3N,MAAM5D,OAAM,GAAA0D,OAAM8N,EAAS,KACtC,CACF,GAOA/V,EAAAA,EAAAA,YAAU,WACR6T,KACA,IAAMqC,EAAgB,SAAC5T,GACH,UAAdA,EAAMgI,KAAoBhI,EAAM6T,WAClC7T,EAAM8T,iBACNvE,KAEJ,EAEMwE,EAAkB7F,EAAYjO,QAIpC,OAHI8T,GACFA,EAAgB1T,iBAAiB,UAAWuT,GAEvC,WACDG,GACFA,EAAgBzT,oBAAoB,UAAWsT,EAEnD,CACF,GAAG,CAACzF,KAEJzQ,EAAAA,EAAAA,YAAU,WACQ,KAAZoE,GACFmM,EAAkB,OAEtB,GAAG,CAACnM,KAEJpE,EAAAA,EAAAA,YAAU,WACJ+Q,EAAiBxO,UACnBwO,EAAiBxO,QAAQ+T,UAAYvF,EAAiBxO,QAAQ0T,aAElE,GAAG,CAACxF,IASJ,OACEjN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sBAAqBC,SAAA,EACxCH,EAAAA,EAAAA,KAACmT,EAAW,CAAC9R,OAAQkM,EAAejM,WAtEZ,WACpBkM,GAAkBD,GAClBG,GAAiB,EACnB,EAmE6DnM,eAAgBoQ,GAAoB9V,gBAAiBA,EAAkB2F,kBAT1G,WACxB8L,EAAgB,GAClB,KAQFlN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,eAAcC,SAAA,EAC7BH,EAAAA,EAAAA,KAACoT,EAAW,CAAC3R,eAAgBA,EAAgB4K,qBAhDd,WAC3B3N,QAAQC,IAAI,oBACZ+C,GAAmBD,EACrB,EA6CuFkL,cA7E1D,SAACG,GAC5BD,GAAiBC,GACjBpO,QAAQC,IAAI,kBAAmBmO,EACjC,KA4EA1M,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qCAAoCC,SAAA,EACnDH,EAAAA,EAAAA,KAAA,OAAKE,UAAU,4BAA6BD,IAAK0N,EAAiBxN,SACjEkN,EAAajP,KAAI,SAACiV,EAAapS,GAAK,OACrCb,EAAAA,EAAAA,MAAA,OAAiBF,UAAS,mBAAA2E,OAA0C,SAArBwO,EAAYpP,KAAkB,gBAAkB,OAAQ9D,SAAA,CAC/E,QAArBkT,EAAYpP,OACX7D,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BH,EAAAA,EAAAA,KAAA,OAAKE,UAAU,aAAYC,UACzBH,EAAAA,EAAAA,KAAA,OACEE,UAAU,aACVgF,IAAG,GAAAL,OAAKM,GAAsB,yBAC9BC,IAAI,eAGRhF,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BH,EAAAA,EAAAA,KAAA,OAAKE,UAAU,WAAUC,SAAC,YACzBkT,EAAY9E,UACXvO,EAAAA,EAAAA,KAACe,EAAAA,EAAa,KAEdf,EAAAA,EAAAA,KAAA,OAAKE,UAAU,YAAWC,SAAEkT,EAAY/E,aAK1B,QAArB+E,EAAYpP,OAAkBjE,EAAAA,EAAAA,KAAA,OAAKE,UAAU,YAAWC,SAAEkT,EAAY/E,SApB/DrN,EAqBJ,OAIFjB,EAAAA,EAAAA,KAAA,OAAKE,UAAU,mBAAkBC,UAC/BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,eAAcC,SAAA,EAC7BH,EAAAA,EAAAA,KAAA,YACNsT,MAAOtS,EACPyL,SAhG4B,SAACnH,GAC3B2H,EAAW3H,EAAEjG,OAAOiU,OACpB7C,IACF,EA8FAvQ,UAAU,2BACV6E,MAAO,CAAE5D,OAAQ+L,GACjBjN,IAAKmN,EACLmG,YAAY,oBACZC,aAAa,MACbC,UAAU,OACVC,UAAW,SAACpO,GACI,UAAVA,EAAE4B,KAAoB5B,EAAEyN,WAC1BzN,EAAE0N,iBACFvE,KAEJ,EACAkF,SAAU/F,KAEF5N,EAAAA,EAAAA,KAAA,UACA,aAAW,eACXE,UAAU,yBACVyT,SAAU/F,EACpBvN,QAAS,kBAAMoO,GAAkB5S,EAAgB,EAACsE,UAExCH,EAAAA,EAAAA,KAAA,KAAGE,UAAU,qCAMvBF,EAAAA,EAAAA,KAAC4T,EAAW,CAACvS,OAAQoM,EAAenM,WAhIZ,WACpBoM,GAAkBD,GAClBD,GAAiB,EACnB,EA6H6D5F,cAAeA,EAAe/L,gBAAiBA,MAI9G,C","sources":["ChatBot/sharechat.js","ChatBot/ChatHistory.js","ChatBot/ExpertBox.js","ChatBot/ChatExperts.js","ChatBot/TopicPicker.js","ChatBot/ChatInterface.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { collection, getDocs, query, orderBy, doc, deleteDoc } from 'firebase/firestore';\nimport { firestore, auth } from '../firebase';\nimport ReactMarkdown from 'react-markdown';\nimport LoadingCircle from '../components/LoadingCircle';\n\nconst ShareChat = ({ selectedSession, closeShareChat, resetChat }) => {\n  const [sharedChatData, setSharedChatData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const shareChatRef = useRef(null);\n\n  useEffect(() => {\n    const fetchSharedChatData = async () => {\n      try {\n        if (selectedSession) {\n          const messagesCollectionRef = collection(firestore, 'users', auth.currentUser.uid, 'discussions', selectedSession, 'messages');\n          const messagesSnapshot = await getDocs(query(messagesCollectionRef, orderBy('createTime')));\n          const messagesData = messagesSnapshot.docs.map((doc) => {\n            const { prompt, response } = doc.data();\n            return { prompt, response };\n          });\n          setSharedChatData(messagesData);\n          setIsLoading(false);\n          console.log('Fetched messages for discussionId:', selectedSession, messagesData);\n        }\n      } catch (error) {\n        console.error('Error fetching shared chat messages:', error);\n        setIsLoading(false);\n      }\n    };\n\n    fetchSharedChatData();\n  }, [selectedSession]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (shareChatRef.current && !shareChatRef.current.contains(event.target)) {\n        // Clicked outside the ShareChat component\n        closeShareChat();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [closeShareChat]);\n\n  const handleDeleteSession = async () => {\n    try {\n      // Delete the selectedSession document from Firestore\n      const sessionDocRef = doc(firestore, 'users', auth.currentUser.uid, 'discussions', selectedSession);\n      await deleteDoc(sessionDocRef);\n      console.log('Discussion deleted:', selectedSession);\n      closeShareChat(); // Close the ShareChat component after deletion\n      resetChat(); // Reset the chat by setting selectedSession to null\n      startNewChat(); \n    } catch (error) {\n      console.error('Error deleting discussion:', error);\n    }\n  };\n  \n\n\n  return (\n\n    <div ref={shareChatRef}   className=\"blurred-background\">\n    <div className=\"white-box-chathistory\">\n      <div className=\"go-back-svg\">\n        <button onClick={closeShareChat}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} color=\"black\" stroke=\"currentColor\" className=\"w-6 h-6\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n\n      <h2>Share link to Chat</h2>\n      <div className='divider '></div>\n      <p>\n        Messages you send after creating your link won't be shared. Anyone with the URL will be able to view the shared chat.\n      </p>\n      <div className=\"shared-chat scroll-cat mb-5\">\n        {isLoading ? (\n          <LoadingCircle />\n        ) : (\n          sharedChatData.map((message, index) => (\n            <div key={index} className=\"chat-message\">\n              <strong>\n                <ReactMarkdown>{message.prompt}</ReactMarkdown>\n\n              </strong>\n              <ReactMarkdown>{message.response}</ReactMarkdown>\n              <div className='divider '></div>\n            </div>\n          ))\n        )}\n      </div>\n      <div className='delete-svg' >\n      <button className='delete-button' onClick={handleDeleteSession}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" color= '#212529' fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1} stroke=\"currentColor\" height=\"25\" width=\"25\">\n  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\" />\n</svg>\n</button>\n</div>\n    </div>\n    </div>\n  );\n};\n\nexport default ShareChat;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { auth, firestore } from '../firebase';\nimport { collection, query, orderBy, getDocs } from 'firebase/firestore';\nimport ShareChat from './sharechat';\nimport LoadingCircle from '../components/LoadingCircle';\n\nconst ChatHistory = ({ isOpen, toggleOpen, onSessionClick, resetChatMessages, selectedSession }) => {\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const [isIconRotated, setIsIconRotated] = useState(false);\n  const chatHistoryRef = useRef(null);\n  const [sessions, setSessions] = useState([]);\n  const [isShareChatOpen, setIsShareChatOpen] = useState(false);\n  const [isLoadingSessions, setIsLoadingSessions] = useState(true);\n\n  const [selectedSessionForSVG, setSelectedSessionForSVG] = useState(null);\n\n  const groupSessionsByDate = (sessions) => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n  \n    const yesterday = new Date();\n    yesterday.setDate(yesterday.getDate() - 1);\n    yesterday.setHours(0, 0, 0, 0);\n  \n    const groupedSessions = {\n      today: [],\n      yesterday: [],\n      previously: [],\n    };\n  \n    sessions.forEach((session) => {\n      const sessionDate = new Date(session.timestamp.seconds * 1000);\n      sessionDate.setHours(0, 0, 0, 0);\n  \n      if (sessionDate.getTime() === today.getTime()) {\n        groupedSessions.today.push(session);\n      } else if (sessionDate.getTime() === yesterday.getTime()) {\n        groupedSessions.yesterday.push(session);\n      } else {\n        groupedSessions.previously.push(session);\n      }\n    });\n  \n    return groupedSessions;\n  };\n  \n  \n  const [groupedSessions, setGroupedSessions] = useState({\n    today: [],\n    yesterday: [],\n    previously: [],\n  });\n  \n\n  useEffect(() => {\n    if (isOpen) {\n      // Fetch sessions from Firestore when the dropdown is open\n      fetchSessions();\n    }\n  }, [isOpen]);\n\n\n\n  const fetchSessions = async () => {\n    try {\n      const user = auth.currentUser;\n      if (user) {\n        const userUid = user.uid;\n\n        const q = query(\n          collection(firestore, 'users', userUid, 'discussions'),\n          orderBy('timestamp', 'desc')\n        );\n\n        const snapshot = await getDocs(q);\n        const sessionData = snapshot.docs.map((doc) => ({\n          id: doc.id,\n          timestamp: doc.data().timestamp,\n        }));\n        setSessions(sessionData);\n\n        setGroupedSessions(groupSessionsByDate(sessionData));\n\n        console.log('Fetched sessions:', sessionData);\n\n        if (sessionData.length > 0) {\n          const newlyCreatedDiscussion = sessionData[0].id;\n        }\n\n        setIsLoadingSessions(false);\n      } else {\n        console.error('User not authenticated');\n        setIsLoadingSessions(false);\n      }\n    } catch (error) {\n      console.error('Error fetching sessions from Firestore:', error);\n      setIsLoadingSessions(false);\n    }\n  };\n\n\n\n  const startNewChat = () => {\n    resetChatMessages();\n    console.log('Discussion set to undefined');\n    onSessionClick(null);\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchSessions();\n    }\n  }, [isOpen]);\n\n  const toggleDropdown = () => {\n    toggleOpen();\n    setIsDropdownOpen(!isDropdownOpen); // Toggle the button visibility when dropdown is opened/closed\n  };\n\n  const handleClickOutside = (event) => {\n    if (\n      chatHistoryRef.current &&\n      !chatHistoryRef.current.contains(event.target) &&\n      !(event.target.tagName === \"svg\" && isShareChatOpen)\n    ) {\n      toggleOpen();\n      setIsDropdownOpen(false);\n      setIsIconRotated(false);\n    }\n  };\n  \n  useEffect(() => {\n    const isMobile = window.innerWidth <= 768;\n    if (isOpen && isMobile) {\n      document.addEventListener('mousedown', handleClickOutside);\n    } else {\n      document.removeEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen, isShareChatOpen]); // Add isShareChatOpen as a dependency\n  \n\n\n\n  const closeShareChat = () => {\n    setIsShareChatOpen(false);\n\n    setIsDropdownOpen(false);\n    setIsIconRotated(false);\n    startNewChat(); \n  };\n  \n  useEffect(() => {\n    if (isOpen) {\n      fetchSessions();\n    }\n  }, [isOpen]);\n\n  return (\n    <div ref={chatHistoryRef} className={`chatbot-history ${isOpen ? 'chatbot-history-open' : ''}`}>\n     \n      <span className={`svg-chatbot-history ${isOpen ? 'svg-chatbot-history-rotate-icon' : ''}`} aria-hidden=\"true\" onClick={toggleDropdown}>\n        <svg width=\"8\" height=\"16\" viewBox=\"0 0 8 16\">\n          <path d=\"M0.772126 1.19065L0.153407 1.80934C0.00696973 1.95578 0.00696973 2.19322 0.153407 2.33969L5.80025 8L0.153407 13.6603C0.00696973 13.8067 0.00696973 14.0442 0.153407 14.1907L0.772126 14.8094C0.918563 14.9558 1.156 14.9558 1.30247 14.8094L7.84666 8.26519C7.99309 8.11875 7.99309 7.88131 7.84666 7.73484L1.30247 1.19065C1.156 1.04419 0.918563 1.04419 0.772126 1.19065Z\"></path>\n        </svg>\n      </span>\n      {isOpen && (\n        <>\n   \n        <div className='chatbot-previous'>\n          <div style={{ display: 'flex' }}>\n            <button\n              className=\"chat-history-btn\"\n              onClick={() => {\n                startNewChat();\n                if (window.innerWidth <= 768) {\n                  toggleDropdown();\n                }\n              }}\n            >\n              <div style={{ display: 'flex', alignItems: 'center' }}>\n                <img src={`${process.env.PUBLIC_URL}/images/arts/TIO.webp`} alt=\"TIO illustration\" className=\"me-1 very-small-avatar rounded-circle\" />\n                <p className=\"font-weight-bold mb-0\" style={{ color: 'white', marginLeft: '5px' }}>Let's Chat</p>\n              </div>\n              <div className='ms-auto'>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"white\" width=\"18\" height=\"18\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\" />\n                </svg>\n              </div>\n            </button>\n          </div>\n          <div className=\"content-container\">\n      {isLoadingSessions ? (\n        <div className=\"loading-container\">\n          <LoadingCircle />\n        </div>\n      ) : (\n      <>\n\n{groupedSessions.today.length > 0 && (\n  <>\n    <p className=\"text-sm text-muted mt-3\">Today:</p>\n    <ul className=\"fade-ulist no-scroll\">\n      {groupedSessions.today.map((session) => (\n        <li\n          className={`fade-list${session.id === selectedSession ? ' selected-session' : ''}`}\n          key={session.id}\n          onClick={() => {\n            onSessionClick(session.id);\n            if (window.innerWidth <= 768) {\n              toggleDropdown();\n            }\n          }}\n        >\n                {session.id}\n                <div className=\"svg-chathistory-container\">\n                <svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  stroke=\"white\"\n  strokeWidth=\"2\"\n  strokeLinecap=\"round\"\n  strokeLinejoin=\"round\"\n  onClick={(e) => {\n    // Prevent toggleDropdown when clicking on the SVG\n    e.stopPropagation();\n    // Set the selected session for SVG click\n    setSelectedSessionForSVG(session.id);\n    setIsShareChatOpen(true);\n  }}\n>\n\n  <circle cx=\"12\" cy=\"12\" r=\"1\"></circle>\n  <circle cx=\"19\" cy=\"12\" r=\"1\"></circle>\n  <circle cx=\"5\" cy=\"12\" r=\"1\"></circle>\n</svg>\n\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"white\" width=\"18\" height=\"18\">\n<path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776\" />\n</svg>\n</div>\n\n              </li>\n              \n              ))}\n              </ul>\n            </>\n          )}\n\n{groupedSessions.yesterday.length > 0 && (\n  <>\n    <p className=\"text-sm text-muted mt-3\">Yesterday:</p>\n    <ul className=\"fade-ulist no-scroll\">\n      {groupedSessions.yesterday.map((session) => (\n        <li\n          className={`fade-list${session.id === selectedSession ? ' selected-session' : ''}`}\n          key={session.id}\n          onClick={() => {\n            onSessionClick(session.id);\n            if (window.innerWidth <= 768) {\n              toggleDropdown();\n            }\n          }}\n        >\n                 {session.id}\n                 <div className=\"svg-chathistory-container\">\n                 <svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  stroke=\"white\"\n  strokeWidth=\"2\"\n  strokeLinecap=\"round\"\n  strokeLinejoin=\"round\"\n  onClick={(e) => {\n    // Prevent toggleDropdown when clicking on the SVG\n    e.stopPropagation();\n    // Set the selected session for SVG click\n    setSelectedSessionForSVG(session.id);\n    setIsShareChatOpen(true);\n  }}\n>\n  <circle cx=\"12\" cy=\"12\" r=\"1\"></circle>\n  <circle cx=\"19\" cy=\"12\" r=\"1\"></circle>\n  <circle cx=\"5\" cy=\"12\" r=\"1\"></circle>\n</svg>\n\n \n <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"white\" width=\"18\" height=\"18\">\n <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776\" />\n </svg>\n </div>\n \n               </li>\n               \n               ))}\n               </ul>\n             </>\n           )}\n{groupedSessions.previously.length > 0 && (\n  <>\n    <p className=\"text-sm text-muted mt-3\">Previously:</p>\n    <ul className=\"fade-ulist no-scroll\">\n      {groupedSessions.previously.map((session) => (\n        <li\n          className={`fade-list${session.id === selectedSession ? ' selected-session' : ''}`}\n          key={session.id}\n          onClick={() => {\n            onSessionClick(session.id);\n            if (window.innerWidth <= 768) {\n              toggleDropdown();\n            }\n          }}\n        >\n               {session.id}\n               <div className=\"svg-chathistory-container\">\n               <svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  width=\"24\"\n  height=\"24\"\n  viewBox=\"0 0 24 24\"\n  fill=\"none\"\n  stroke=\"white\"\n  strokeWidth=\"2\"\n  strokeLinecap=\"round\"\n  strokeLinejoin=\"round\"\n  onClick={(e) => {\n    // Prevent toggleDropdown when clicking on the SVG\n    e.stopPropagation();\n    // Set the selected session for SVG click\n    setSelectedSessionForSVG(session.id);\n    setIsShareChatOpen(true);\n  }}\n>\n  <circle cx=\"12\" cy=\"12\" r=\"1\"></circle>\n  <circle cx=\"19\" cy=\"12\" r=\"1\"></circle>\n  <circle cx=\"5\" cy=\"12\" r=\"1\"></circle>\n</svg>\n\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"white\" width=\"18\" height=\"18\">\n<path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776\" />\n</svg>\n</div>\n\n             </li>\n                 ))}\n                 </ul>\n               </>\n            \n             )}\n             </>\n           )}\n        </div>\n   </div>\n{isShareChatOpen && (\n  <ShareChat selectedSession={selectedSessionForSVG} closeShareChat={closeShareChat} />\n)}  \n\n</>\n      )}\n    </div>\n  );\n};\n\n\nexport default ChatHistory;","import React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { auth, firestore } from '../firebase';\nimport { collection, doc, setDoc } from 'firebase/firestore';\n\nconst ExpertBox = ({ isHovered, displayName, photoURL, skills, description, otherUserUID, occupation, onClose, selectedSession }) => {\n  const navigate = useNavigate();\n  const [currentUserUID, setCurrentUserUID] = useState(null);\n  const discussionID = selectedSession;\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        setCurrentUserUID(user.uid);\n        console.log('Current User UID in ExpertBox:', user.uid);\n      } else {\n        console.error('User is not authenticated in ExpertBox');\n        setCurrentUserUID(null);\n      }\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [selectedSession]);\n\n  const handleChatButtonClick = async () => {\n    try {\n      if (!otherUserUID || !currentUserUID || !selectedSession) {\n        throw new Error('otherUserUID, currentUserUID, or selectedSession is undefined or null');\n      }\n  \n      // Combine currentUserUID and otherUserUID to create a unique discussionID\n      const discussionID = `${currentUserUID}_${otherUserUID}`;\n  \n      // Create a new document in the sharedConversations collection\n      const conversationRef = doc(collection(firestore, 'sharedConversations'), discussionID);\n      \n      // Use setDoc to create or update the document with the desired data\n      await setDoc(conversationRef, {\n        selectedSession,\n        currentUserUID,\n        otherUserUID,\n        // Add other fields as needed\n      });\n  \n      // Navigate to the chat page\n      navigate('/chat', {\n        state: {\n          otherUserUID,\n          selectedSession,\n          currentUserUID,\n        },\n      });\n  \n      console.log('New document created successfully.');\n    } catch (error) {\n      console.error('Error handling chat button click:', error.message);\n    }\n  };\n  \n\n  const handleEscapeKey = (event) => {\n    if (event.key === 'Escape') {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    if (isHovered) {\n      document.addEventListener('keydown', handleEscapeKey);\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleEscapeKey);\n    };\n  }, [isHovered]);\n\n  return (\n    isHovered && (\n      \n<div className=\"white-box\" >\n        <div className=\"go-back-svg go-back-svg-padding\">\n    <button onClick={onClose}>                  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} color=\"black\" stroke=\"currentColor\" className=\"w-6 h-6\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n        </svg>\n      </button>\n    </div>\n\n          <h5 className=\"card-title\"> {displayName}</h5>\n  \n          <h5 className=\"card-title\">Expertise: {occupation}</h5>\n          \n  <div href={photoURL} className=\"d-md-inline\">\n    <img\n      src={photoURL}\n      alt=\"Profile Photo\"\n      className=\"searchimage card-img user-avatar large-avatar rounded-circle mb-2 mx-md-auto mx-0 \" \n    />\n  </div>\n  \n\n          <div className=\"about-container\">\n          <h5 className=\"card-title\"   style={{ display: 'inline' }}>About: </h5> \n<p style={{ display: 'inline' }}>{description}</p>\n</div>\n         \n\n          <div style={{ marginBottom: '0.4rem', marginTop: '0.4rem' }}>\n     \n          <p className=\"font-weight-bold mb-0\">Skills: {skills.join(', ')}</p>\n  {skills && skills.map((skills) => (\n    <button\n      key={skills}\n      type=\"button\"\n      className=\" containerhover keyword-container mb-2 mx-1 pb-1\"\n    >\n      {skills}\n    </button>\n  ))}\n\n</div>\n\n        <div>\n       \n        </div>\n        <div className=\"d-flex justify-content-center\">\n        <Link to=\"/chat\" state={{ otherUserUID, selectedSession }} onClick={handleChatButtonClick}>\n\n            <button type=\"button\" className=\"btn btn-primary btn-sm rounded-pill btncard pb-1 mb-2 mx-1\" >\n             \n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"25\" className=\"me-2 svg-inline--fa \">\n                <path fillRule=\"evenodd\" d=\"M4.804 21.644A6.707 6.707 0 006 21.75a6.721 6.721 0 003.583-1.029c.774.182 1.584.279 2.417.279 5.322 0 9.75-3.97 9.75-9 0-5.03-4.428-9-9.75-9s-9.75 3.97-9.75 9c0 2.409 1.025 4.587 2.674 6.192.232.226.277.428.254.543a3.73 3.73 0 01-.814 1.686.75.75 0 00.44 1.223zM8.25 10.875a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25zM10.875 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875-1.125a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z\" clipRule=\"evenodd\" />\n              </svg>\n              <span className=\"me-2\">Message</span> \n            </button>\n            </Link>\n            <button type=\"button\" className=\"btn btn-secondary btn-sm rounded-pill btncard pb-1 mb-2 mx-1\" >\n             \n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"25\" className=\"me-2 svg-inline--fa \">\n                <path d=\"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z\" />\n              </svg>\n             <span className=\"me-2\">Connect</span> \n           </button>\n           \n        \n          </div>\n      </div>\n\n\n\n   \n    )\n  );\n};\n\nexport default ExpertBox;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { firestore, collection, auth, getDocs } from \"../firebase\"; \nimport ExpertBox from './ExpertBox';\nimport LoadingCircle from '../components/LoadingCircle';\nimport Fuse from 'fuse.js';\n\nconst ChatExperts = ({ isOpen, toggleOpen, selectedTopic, firstUserMessage, selectedSession }) => {\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const [isIconRotated, setIsIconRotated] = useState(false);\n  const [matchingExperts, setMatchingExperts] = useState([]);\n  const chatExpertsRef = useRef(null);\n  const [isHovered, setIsHovered] = useState(false);\n\n  const [showExpertBox, setShowExpertBox] = useState(false);\n  const [selectedExpert, setSelectedExpert] = useState(null);\n  const [isLoadingExperts, setIsLoadingExperts] = useState(true);\n  const [buttonClicked, setButtonClicked] = useState(false);\n  const [loadingExperts, setLoadingExperts] = useState([]);\n\n  const handleExpertBoxClose = () => {\n    setShowExpertBox(false);\n    setButtonClicked(false);\n    setIsHovered(null);\n  };\n\n  const handleMouseEnter = (index) => {\n    setIsHovered(index);\n  };\n\n  const handleButtonClick = (expertInfo, index) => {\n    if (index === isHovered) {\n      setSelectedExpert(expertInfo);\n      setButtonClicked(!buttonClicked);\n      setShowExpertBox(true);\n    }\n  };\n\n  const handleMouseLeave = () => {\n    if (!buttonClicked && !showExpertBox) {\n      setShowExpertBox(false);\n      setIsHovered(null);\n    }\n  };\n\n  const toggleDropdown = () => {\n    setIsDropdownOpen(!isDropdownOpen);\n    setIsIconRotated(!isIconRotated);\n    toggleOpen();\n  };\n\n  const handleClickOutside = (event) => {\n    if (chatExpertsRef.current && !chatExpertsRef.current.contains(event.target)) {\n      toggleOpen();\n      setIsDropdownOpen(false);\n      setIsIconRotated(false);\n    }\n  };\n\n  useEffect(() => {\n    const isMobile = window.innerWidth <= 768;\n    if (isOpen && isMobile) {\n      document.addEventListener('mousedown', handleClickOutside);\n    } else {\n      document.removeEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n\n  useEffect(() => {\n    const fetchMatchingExperts = async () => {\n      if (isOpen) {\n        try {\n          setIsLoadingExperts(true);\n          let experts;\n  \n          if (selectedTopic) {\n            experts = await getMatchingExpertsForTopic(selectedTopic, selectedSession);\n          } else if (selectedSession) {\n            experts = await getMatchingExperts(selectedSession);\n          }\n  \n          setMatchingExperts(experts || []);\n        } catch (error) {\n          console.error(\"Error fetching experts:\", error);\n        } finally {\n          setIsLoadingExperts(false);\n          setLoadingExperts(Array(matchingExperts.length).fill(false));\n        }\n        \n      }\n    };\n\n    fetchMatchingExperts();\n  }, [isOpen, selectedTopic, selectedSession]);\n\n  const getMatchingExperts = async (selectedSession) => {\n    try {\n      const expertsCollection = collection(firestore, \"expertApplications\");\n      const querySnapshot = await getDocs(expertsCollection);\n      const uid = auth.currentUser.uid;\n      const messagesCollection = collection(firestore, `users/${uid}/discussions/${selectedSession}/messages`);\n      const messagesSnapshot = await getDocs(messagesCollection);\n      const matchingExperts = [];\n      const processedExperts = new Set();\n\n      messagesSnapshot.forEach((messageDoc) => {\n        const messageData = messageDoc.data();\n        const { prompt, response } = messageData;\n\n        querySnapshot.forEach((doc) => {\n          const data = doc.data();\n          if (data && data.displayName && !processedExperts.has(doc.id)) {\n            const expertInfo = {\n              name: data.displayName,\n              photoURL: data.photoURL || `${process.env.PUBLIC_URL}/images/arts/user.webp`,\n              skills: data.keywords || [],\n              description: data.description,\n              city: data.city,\n              occupation: data.occupation,\n              otherUserUID: doc.id,\n            };\n\n            const fieldsToCheck = ['city', 'occupation', 'description', 'labels'];\n\n            const fuseOptions = {\n              keys: fieldsToCheck,\n              includeScore: true,\n              includeMatches: true,\n              threshold: 0.7,\n            };\n\n            const fuse = new Fuse([data], fuseOptions);\n\n            const sessionMatch = selectedSession && data.occupation.toLowerCase().includes(selectedSession.toLowerCase());\n            const promptMatch = prompt && fuse.search(prompt).length > 0;\n            const responseMatch = response && fuse.search(response).length > 0;\n\n            if (sessionMatch || promptMatch || responseMatch) {\n              matchingExperts.push(expertInfo);\n              processedExperts.add(doc.id);\n            }\n          }\n        });\n      });\n\n      return matchingExperts;\n    } catch (error) {\n      console.error(\"Error fetching experts for selected session:\", error);\n      return [];\n    }\n  };\n\n  const getMatchingExpertsForTopic = async (selectedTopic, firstUserMessage) => {\n    try {\n      const expertsCollection = collection(firestore, \"expertApplications\");\n      const querySnapshot = await getDocs(expertsCollection);\n      const matchingExperts = [];\n  \n      querySnapshot.forEach((doc) => {\n        const data = doc.data();\n        if (data && data.displayName) {\n          const expertInfo = {\n            name: data.displayName,\n            photoURL: data.photoURL || `${process.env.PUBLIC_URL}/images/arts/user.webp`,\n            skills: data.keywords || [],\n            description: data.description,\n            city: data.city,\n            occupation: data.occupation,\n            otherUserUID: doc.id,\n          };\n  \n          const fieldsToCheck = ['city', 'occupation', 'keywords', 'description', 'labels'];\n  \n          if (\n            (firstUserMessage && fieldsToCheck.some(field => \n              data[field] &&\n              typeof data[field] === 'string' &&\n              data[field].toLowerCase().includes(firstUserMessage.toLowerCase())\n            )) ||\n            (selectedTopic && fieldsToCheck.some(field => \n              data[field] &&\n              typeof data[field] === 'string' &&\n              data[field].toLowerCase().includes(selectedTopic.name.toLowerCase())\n            )) ||\n            (!selectedTopic && !firstUserMessage)\n          ) {\n            matchingExperts.push(expertInfo);\n          }\n        }\n      });\n  \n      return matchingExperts;\n    } catch (error) {\n      console.error(\"Error fetching experts for selected topic:\", error);\n      return [];\n    }\n  };\n  \n  return (\n    <div ref={chatExpertsRef} className={`chatbot-expert ${isOpen ? 'chatbot-expert-open' : ''}`}>\n      <span className={`svg-chatbot-expert ${isOpen ? 'svg-chatbot-expert-rotate-icon' : ''}`} aria-hidden=\"true\" onClick={toggleDropdown}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" color='#212529' fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1} stroke=\"currentColor\" height=\"25\" width=\"25\" style={{ marginLeft: 'auto' }}>\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18\" />\n        </svg>\n      </span>\n      {isOpen && (\n        <>\n          <div>\n            <h4>Experts</h4>\n          </div>\n          {isLoadingExperts ? (\n            loadingExperts.map((isLoading, index) => (\n              isLoading ? <LoadingCircle key={index} /> : (\n                <div key={index}>\n                  <button\n                    className={`chat-btn expert-btn text-left ${showExpertBox && index === isHovered ? 'open-expert-box' : ''}`}\n                    onMouseEnter={() => handleMouseEnter(index)}\n                    onMouseLeave={handleMouseLeave}\n                    onClick={() => handleButtonClick(matchingExperts[index], index)}\n                  >\n                    <div className='d-flex flex-column'>\n                      <div className='d-flex align-items-center justify-content-between'>\n                        <img\n                          src={matchingExperts[index].photoURL}\n                          alt=\"Avatar\"\n                          className=\"very-small-avatar rounded-circle\"\n                        />\n                        <div className=\"ml-2\">\n                          <p className=\"font-weight-bold mb-0 text-start\">{matchingExperts[index].name}</p>\n                        </div>\n                      </div>\n                      {matchingExperts[index].skills && (\n                        <div className=\"text-start mt-2\">\n                          <p className=\"font-weight-bold mb-0\">Skills: {matchingExperts[index].skills.join(', ')}</p>\n                        </div>\n                      )}\n                    </div>\n                  </button>\n                  {showExpertBox && (\n                    <ExpertBox\n                      isHovered={index === isHovered}\n                      displayName={matchingExperts[index].name}\n                      photoURL={matchingExperts[index].photoURL}\n                      skills={matchingExperts[index].skills}\n                      description={matchingExperts[index].description}\n                      city={matchingExperts[index].city}\n                      occupation={matchingExperts[index].occupation}\n                      otherUserUID={matchingExperts[index].otherUserUID}\n                      selectedSession={selectedSession} \n                      onClose={handleExpertBoxClose}\n                    />\n                  )}\n                </div>\n              )\n            ))\n          ) : (\n            matchingExperts.map((expertInfo, index) => (\n              <div key={index}>\n                <button\n                  className={`chat-btn expert-btn text-left ${showExpertBox && index === isHovered ? 'open-expert-box' : ''}`}\n                  onMouseEnter={() => handleMouseEnter(index)}\n                  onMouseLeave={handleMouseLeave}\n                  onClick={() => handleButtonClick(expertInfo, index)}\n                >\n                  <div className='d-flex flex-column'>\n                    <div className='d-flex align-items-center justify-content-between'>\n                      <img\n                        src={expertInfo.photoURL}\n                        alt=\"Avatar\"\n                        className=\"very-small-avatar rounded-circle\"\n                      />\n                      <div className=\"ml-2\">\n                        <p className=\"font-weight-bold mb-0 text-start\">{expertInfo.name}</p>\n                      </div>\n                    </div>\n                    {expertInfo.skills && (\n                      <div className=\"text-start mt-2\">\n                        <p className=\"font-weight-bold mb-0\">Skills: {expertInfo.skills.join(', ')}</p>\n                      </div>\n                    )}\n                  </div>\n                </button>\n                {showExpertBox && (\n                  <ExpertBox\n                    isHovered={index === isHovered}\n                    displayName={expertInfo.name}\n                    photoURL={expertInfo.photoURL}\n                    skills={expertInfo.skills}\n                    description={expertInfo.description}\n                    city={expertInfo.city}\n                    occupation={expertInfo.occupation}\n                    otherUserUID={expertInfo.otherUserUID}\n                    selectedSession={selectedSession} \n                    onClose={handleExpertBoxClose}\n                  />\n                )}\n              </div>\n            ))\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ChatExperts;\n","import React, { useRef, useState, useEffect } from 'react';\n\nconst TopicPicker = ({ isDropdownOpen, handleDropdownToggle, onSelectTopic }) => {\n  const dropdownRef = useRef(null);\n  const [selectedTopic, setSelectedTopic] = useState(null);\n\n  const handleTopicSelection = (topic) => {\n    setSelectedTopic(topic);\n    onSelectTopic(topic);\n    handleDropdownToggle();\n  };\n  \n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      const pickModelDiv = document.querySelector('.pick-model');\n      if (\n        isDropdownOpen &&\n        dropdownRef.current &&\n        !pickModelDiv.contains(event.target)\n      ) {\n        // Clicked outside the entire pick-model, close the dropdown\n        handleDropdownToggle();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [dropdownRef, handleDropdownToggle, isDropdownOpen]);\n  \n  return (\n    <div className=\"pick-model\">\n      <h4\n        onClick={handleDropdownToggle}\n        className={`pointer-cursor ${isDropdownOpen ? 'h4-dropdown-open' : ''}`}\n      >\n        {selectedTopic ? `Topic: ${selectedTopic.name}` : 'Pick a Topic'}\n      </h4>\n      <span\n        className={`svg-chatbot-model pointer-cursor ${isDropdownOpen ? 'svg-chatbot-model-rotate-icon' : ''}`}\n        aria-hidden=\"true\"\n        onClick={handleDropdownToggle}\n      >\n        <svg width=\"8\" height=\"16\" viewBox=\"0 0 8 16\">\n          <path d=\"M0.772126 1.19065L0.153407 1.80934C0.00696973 1.95578 0.00696973 2.19322 0.153407 2.33969L5.80025 8L0.153407 13.6603C0.00696973 13.8067 0.00696973 14.0442 0.153407 14.1907L0.772126 14.8094C0.918563 14.9558 1.156 14.9558 1.30247 14.8094L7.84666 8.26519C7.99309 8.11875 7.99309 7.88131 7.84666 7.73484L1.30247 1.19065C1.156 1.04419 0.918563 1.04419 0.772126 1.19065Z\"></path>\n        </svg>\n      </span>\n      <div ref={dropdownRef} className={`chat-dropdown-model ${isDropdownOpen ? 'show scroll-cat' : ''}`}>\n        {categories && categories.map((category) => (\n          <TopicLabel\n            key={category.id}\n            category={category}\n            handleDropdownToggle={handleDropdownToggle}\n            handleTopicSelection={handleTopicSelection}\n          />\n        ))}\n      </div>\n    </div>\n  );\n  \n  \n};\n  \n  const TopicLabel = ({ category, handleDropdownToggle, handleTopicSelection }) => {\n    const handleRadioChange = () => {\n      handleTopicSelection(category);\n      handleDropdownToggle();\n    };\n  \n    return (\n      <label className=\"chat-dropdown-model-button \" htmlFor={category.id}>\n        {category.svg} \n        <div className=\"d-flex align-items-center\">\n          <div className=\"d-flex flex-column align-items-start ps-3\">\n            <h5 className=\"m-0\">{category.name}</h5>\n            <h6 className=\"text-muted text-start m-0\">{category.description}</h6>\n          </div>\n        </div>\n        <div className=\"flex-grow-1 d-flex justify-content-end\">\n          <input\n            type=\"radio\"\n            className=\"form-check-input listboxes\"\n            id={category.id}\n            name=\"jobSuccess\"\n            onChange={handleRadioChange}\n          />\n          <label className=\"form-check-label label-with-svg\" htmlFor={category.id}></label>\n        </div>\n      </label>\n    );\n  };\n  \n    const categories = [\n        {\n        id: 'computerOption',\n        name: 'Computer',\n        description: 'All your IT solutions',\n        svg: (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" color=\"#212529\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1} stroke=\"currentColor\" height=\"25\" width=\"25\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25\" />\n            </svg>\n        ),\n        },\n        {\n        id: 'sportOption',\n        name: 'Sport',\n        description: \"Let Tio help you become fit\",\n        svg: (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" color='#212529' fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1} stroke=\"currentColor\" height=\"25\" width=\"25\">\n            <path d=\"M9.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M6.44 3.752A.75.75 0 0 1 7 3.5h1.445c.742 0 1.32.643 1.243 1.38l-.43 4.083a1.8 1.8 0 0 1-.088.395l-.318.906.213.242a.8.8 0 0 1 .114.175l2 4.25a.75.75 0 1 1-1.357.638l-1.956-4.154-1.68-1.921A.75.75 0 0 1 6 8.96l.138-2.613-.435.489-.464 2.786a.75.75 0 1 1-1.48-.246l.5-3a.75.75 0 0 1 .18-.375l2-2.25Z\"/>\n            <path d=\"M6.25 11.745v-1.418l1.204 1.375.261.524a.8.8 0 0 1-.12.231l-2.5 3.25a.75.75 0 1 1-1.19-.914zm4.22-4.215-.494-.494.205-1.843.006-.067 1.124 1.124h1.44a.75.75 0 0 1 0 1.5H11a.75.75 0 0 1-.531-.22Z\"/>\n            </svg>\n        ),\n        },\n        {\n        id: 'foodCategory',\n        name: 'Food',\n        description: 'Ready to become head-chef?',\n        svg: (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" color='#212529' fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1} stroke=\"currentColor\" height=\"25\" width=\"25\">\n            <path d=\"M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6\"/>\n            <path d=\"M13.997 5.17a5 5 0 0 0-8.101-4.09A5 5 0 0 0 1.28 9.342a5 5 0 0 0 8.336 5.109 3.5 3.5 0 0 0 5.201-4.065 3.001 3.001 0 0 0-.822-5.216zm-1-.034a1 1 0 0 0 .668.977 2.001 2.001 0 0 1 .547 3.478 1 1 0 0 0-.341 1.113 2.5 2.5 0 0 1-3.715 2.905 1 1 0 0 0-1.262.152 4 4 0 0 1-6.67-4.087 1 1 0 0 0-.2-1 4 4 0 0 1 3.693-6.61 1 1 0 0 0 .8-.2 4 4 0 0 1 6.48 3.273z\"/>\n            </svg>\n        ),\n        },\n        {\n        id: 'healthCategory',\n        name: 'Health',\n        description: 'Here to help',\n        svg: (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" color='#212529' fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1} stroke=\"currentColor\" height=\"25\" width=\"25\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M14.121 1.879a3 3 0 0 0-4.242 0L8.733 3.026l4.261 4.26 1.127-1.165a3 3 0 0 0 0-4.242M12.293 8 8.027 3.734 3.738 8.031 8 12.293zm-5.006 4.994L3.03 8.737 1.879 9.88a3 3 0 0 0 4.241 4.24l.006-.006 1.16-1.121ZM2.679 7.676l6.492-6.504a4 4 0 0 1 5.66 5.653l-1.477 1.529-5.006 5.006-1.523 1.472a4 4 0 0 1-5.653-5.66l.001-.002 1.505-1.492z\"/>\n            <path d=\"M5.56 7.646a.5.5 0 1 1-.706.708.5.5 0 0 1 .707-.707Zm1.415-1.414a.5.5 0 1 1-.707.707.5.5 0 0 1 .707-.707M8.39 4.818a.5.5 0 1 1-.708.707.5.5 0 0 1 .707-.707Zm0 5.657a.5.5 0 1 1-.708.707.5.5 0 0 1 .707-.707ZM9.803 9.06a.5.5 0 1 1-.707.708.5.5 0 0 1 .707-.707Zm1.414-1.414a.5.5 0 1 1-.706.708.5.5 0 0 1 .707-.707ZM6.975 9.06a.5.5 0 1 1-.707.708.5.5 0 0 1 .707-.707ZM8.39 7.646a.5.5 0 1 1-.708.708.5.5 0 0 1 .707-.708Zm1.413-1.414a.5.5 0 1 1-.707.707.5.5 0 0 1 .707-.707\"/>\n            </svg>\n        ),\n        },\n        {\n        id: 'workCategory',\n        name: 'Work',\n        description: 'New Job or career advice',\n        svg: (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" color='#212529' fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1} stroke=\"currentColor\" height=\"25\" width=\"25\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z\" />\n            </svg>\n        ),\n        },\n        {\n        id: 'hobbiesCategory',\n        name: 'Hobbies',\n        description: \"Discover what's possible\",\n        svg: (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" color='#212529' fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1} stroke=\"currentColor\" height=\"25\" width=\"25\">\n            <path d=\"M8 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m4 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M5.5 7a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3\"/>\n            <path d=\"M16 8c0 3.15-1.866 2.585-3.567 2.07C11.42 9.763 10.465 9.473 10 10c-.603.683-.475 1.819-.351 2.92C9.826 14.495 9.996 16 8 16a8 8 0 1 1 8-8m-8 7c.611 0 .654-.171.655-.176.078-.146.124-.464.07-1.119-.014-.168-.037-.37-.061-.591-.052-.464-.112-1.005-.118-1.462-.01-.707.083-1.61.704-2.314.369-.417.845-.578 1.272-.618.404-.038.812.026 1.16.104.343.077.702.186 1.025.284l.028.008c.346.105.658.199.953.266.653.148.904.083.991.024C14.717 9.38 15 9.161 15 8a7 7 0 1 0-7 7\"/>\n            </svg>\n        ),\n        },\n    ];\n    \n    export default TopicPicker;","import { auth, db, firestore } from '../firebase';\nimport { collection, doc, setDoc, addDoc, getDoc, onSnapshot, getDocs, query, orderBy, serverTimestamp } from 'firebase/firestore';\nimport ReactMarkdown from 'react-markdown';\nimport LoadingCircle from '../components/LoadingCircle';\nimport React, { useState, useEffect, useRef } from 'react';\nimport ChatHistory from './ChatHistory';\nimport ChatExperts from './ChatExperts';\nimport TopicPicker from './TopicPicker.js';\nimport nlp from 'compromise/three';\n\nconst ChatInterface = () => {\n  const [message, setMessage] = useState('');\n  const [textareaHeight, setTextareaHeight] = useState('52px');\n  const textareaRef = useRef(null);\n  const [chatMessages, setChatMessages] = useState([]);\n  const maxTextareaHeight = 200;\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const [isHistoryOpen, setIsHistoryOpen] = useState(false);\n  const [isExpertsOpen, setIsExpertsOpen] = useState(false);\n  const chatContainerRef = useRef(null);\n  const [isBotResponding, setIsBotResponding] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedSession, setSelectedSession] = useState(null);  \n  const [selectedTopic, setSelectedTopic] = useState(null); \n  const [sessionToUse, setSessionToUse] = useState(null);\n\n  const fetchMessages = async (userUid, discussionId) => {\n    console.log('Fetching messages for userUid:', userUid, 'and discussionId:', discussionId);\n    try {\n      const messagesCollectionRef = collection(firestore, 'users', userUid, 'discussions', discussionId, 'messages');\n      const messagesSnapshot = await getDocs(query(messagesCollectionRef, orderBy('createTime')));\n      const messagesData = messagesSnapshot.docs.map((doc) => {\n        const { prompt, response } = doc.data();\n        return [\n          { text: <ReactMarkdown>{prompt}</ReactMarkdown>, user: 'user' },\n          { text: <ReactMarkdown>{response}</ReactMarkdown>, user: 'bot', isTyping: false },\n        ];\n      }).flat();\n      setChatMessages(messagesData);\n      console.log('Fetched messages for discussionId:', discussionId);\n    } catch (error) {\n      console.error('Error fetching messages from Firestore:', error);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    console.log('Sending message for discussionId:', selectedSession);\n    setIsBotResponding(true);\n\n    if (message.trim() !== '') {\n      const uid = auth.currentUser.uid;\n\n      try {\n        let currentSessionToUse = selectedSession;\n        const terms = nlp(message).terms();\n        const filteredNouns = terms.nouns().out('array').filter(term => term !== 'pronoun');\n        const verbs = terms.verbs().out('array');\n        const firstWord = message.split(' ')[0];\n\n        if (!currentSessionToUse) {\n          const terms = nlp(message).terms();\n          const filteredNouns = terms.nouns().out('array').filter(term => term !== 'pronoun');\n          const verbs = terms.verbs().out('array');\n\n          // Use the first word of the user's input if the filtered result is empty\n          currentSessionToUse = [...filteredNouns, ...verbs].join(' ');\n          if (!currentSessionToUse.trim()) {\n            const firstWord = message.split(' ')[0];\n            currentSessionToUse = firstWord.trim();\n          }\n\n          console.log('Creating/Updating user document:', `users/${uid}`);\n          await setDoc(doc(db, `users/${uid}`), {});\n\n          const userDocRef = doc(db, `users/${uid}/discussions/${currentSessionToUse}`);\n          console.log('Checking if discussion exists:', userDocRef.path);\n          const discussionsSnapshot = await getDoc(userDocRef);\n\n          if (!discussionsSnapshot.exists()) {\n            console.log('Discussion does not exist, creating:', userDocRef.path);\n            const timestamp = serverTimestamp();\n            await setDoc(userDocRef, { timestamp });\n          }\n\n          setSessionToUse(currentSessionToUse);\n          setSelectedAndFetchMessages(currentSessionToUse);\n\n          sessionStorage.setItem('currentDiscussionId', currentSessionToUse);\n        }\n\n        const userDocRef = doc(db, `users/${uid}/discussions/${currentSessionToUse}`);\n        const messagesCollectionRef = collection(userDocRef, 'messages');\n        const timestamp = serverTimestamp();\n        const botMessageDocRef = await addDoc(messagesCollectionRef, { prompt: message, timestamp });\n\n        console.log('Message added to discussion:', userDocRef.path);\n\n        setMessage('');\n        handleTextareaResize();\n        setChatMessages((prevChatMessages) => [\n          ...prevChatMessages,\n          { text: message, user: 'user' },\n          { text: '', user: 'bot', isTyping: true },\n        ]);\n\n        const unsubscribe = onSnapshot(botMessageDocRef, async (docSnapshot) => {\n          const rawBotResponse = docSnapshot.data()?.response;\n          if (rawBotResponse) {\n            unsubscribe();\n            const initialTypingSpeed = 20;\n            const speedIncreaseRate = 0.1;\n            const formattedBotResponse = rawBotResponse;\n            for (let i = 0; i < formattedBotResponse.length; i++) {\n              const currentTypingSpeed = Math.max(5, initialTypingSpeed - i * speedIncreaseRate);\n              await new Promise((resolve) => setTimeout(resolve, currentTypingSpeed));\n              setChatMessages((prevChatMessages) => [\n                ...prevChatMessages.slice(0, -1),\n                {\n                  text: <ReactMarkdown>{formattedBotResponse.slice(0, i + 1)}</ReactMarkdown>,\n                  user: 'bot',\n                },\n              ]);\n            }\n            setIsBotResponding(false);\n            if (window.innerWidth < 768 && textareaRef.current) {\n              textareaRef.current.blur();\n            }\n          }\n        });\n        setSelectedSession(currentSessionToUse); // Highlight the current session in ChatHistory\n      } catch (error) {\n        console.error('Error handling and sending message:', error);\n      }\n    }\n  };\n\n  const handleSessionClick = async (discussionId) => {\n    console.log('Clicked session:', discussionId);\n    setSelectedSession(discussionId);\n\n    // Store the selected session in sessionStorage\n    sessionStorage.setItem('lastDiscussionId', discussionId);\n\n    await fetchMessages(auth.currentUser.uid, discussionId);\n  };\n\n  \n  const setSelectedAndFetchMessages = async (sessionId) => {\n    setSelectedSession(sessionId);\n    sessionStorage.setItem('lastDiscussionId', sessionId);\n    await fetchMessages(sessionId); // Add a function to fetch messages for the selected session\n  };\n  \n  \n\n  window.addEventListener('beforeunload', () => {\n  sessionStorage.removeItem('currentDiscussionId');\n  });\n\n  useEffect(() => {\n    const fetchLastDiscussionId = async () => {\n      try {\n        if (auth.currentUser) {\n          const lastDiscussionId = sessionStorage.getItem('lastDiscussionId');\n  \n          if (lastDiscussionId) {\n          } else {\n            console.log('No last discussion ID found.');\n          }\n        } else {\n          console.log('No user authenticated.');\n        }\n      } catch (error) {\n        console.error('Error fetching last discussion ID:', error);\n      }\n    };\n  \n    fetchLastDiscussionId(); \n    if (isOpen) {\n      fetchSessions();\n    }\n  }, [isOpen]);\n  \n  \n  \n\n  const handleTopicSelection = (topic) => {\n    setSelectedTopic(topic);\n    console.log('Selected Topic:', topic); \n  };\n  \n  const toggleHistory = () => {\n    setIsHistoryOpen(!isHistoryOpen);\n    setIsExpertsOpen(false);\n  };\n\n  const toggleExperts = () => {\n    setIsExpertsOpen(!isExpertsOpen);\n    setIsHistoryOpen(false);\n  };\n\n  const handleMessageChange = (e) => {\n    setMessage(e.target.value);\n    handleTextareaResize();\n  };\n\n  const handleTextareaResize = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = '52px';\n      const newHeight = Math.min(textarea.scrollHeight, maxTextareaHeight);\n      textarea.style.height = `${newHeight}px`;\n    }\n  };\n\n  const handleDropdownToggle = () => {\n    console.log('Dropdown toggled');\n    setIsDropdownOpen(!isDropdownOpen);\n  };\n  \n  useEffect(() => {\n    handleTextareaResize();\n    const handleKeyDown = (event) => {\n      if (event.key === 'Enter' && !event.shiftKey) {\n        event.preventDefault();\n        handleSendMessage();\n      }\n    };\n  \n    const textareaElement = textareaRef.current;\n    if (textareaElement) {\n      textareaElement.addEventListener('keydown', handleKeyDown);\n    }\n    return () => {\n      if (textareaElement) {\n        textareaElement.removeEventListener('keydown', handleKeyDown);\n      }\n    };\n  }, [chatMessages]);\n  \n  useEffect(() => {\n    if (message === '') {\n      setTextareaHeight('52px');\n    }\n  }, [message]);\n\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  const resetChatMessages = () => {\n    setChatMessages([]);\n  };\n\n  \n  \n  \n  return (\n    <div className=\"Chatcontainer-model\">\n<ChatHistory isOpen={isHistoryOpen} toggleOpen={toggleHistory} onSessionClick={handleSessionClick} selectedSession={selectedSession}  resetChatMessages={resetChatMessages}/>\n<div className='chat-display'>\n<TopicPicker isDropdownOpen={isDropdownOpen} handleDropdownToggle={handleDropdownToggle} onSelectTopic={handleTopicSelection} />\n        {/* Other components or content in your chat-display */}\n  <div className='chat-column chat-bot-upper-section'>\n  <div className=\"chat-box chat-bot-section\"  ref={chatContainerRef}>\n  {chatMessages.map((chatMessage, index) => (\n  <div key={index} className={`chat-bubble-bot ${chatMessage.user === 'user' ? 'user-sent-bot' : 'bot'}`}>\n    {chatMessage.user === 'bot' && (\n      <div className=\"bot-message\">\n        <div className=\"bot-avatar\">\n          <img\n            className=\"bot-avatar\"\n            src={`${process.env.PUBLIC_URL}/images/arts/TIO.webp`}\n            alt=\"TIO-bot\"\n          />\n        </div>\n        <div className=\"bot-details\">\n          <div className=\"bot-name\">TIO-bot</div>\n          {chatMessage.isTyping ? (\n            <LoadingCircle />\n          ) : (\n            <div className=\"chat-text\">{chatMessage.text}</div>\n          )}\n        </div>\n      </div>\n    )}\n    {chatMessage.user !== 'bot' && <div className=\"chat-text\">{chatMessage.text}</div>}\n  </div>\n))}\n\n      </div>\n      <div className=\"chatui-container\">\n        <div className=\"userui-input\" >\n        <textarea\n  value={message}\n  onChange={handleMessageChange}\n  className=\"scroll-col textarea-chat\"\n  style={{ height: textareaHeight }} // Set the height dynamically\n  ref={textareaRef}\n  placeholder=\"Type a message...\"\n  autoComplete=\"off\"\n  inputMode=\"text\"\n  onKeyDown={(e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  }}\n  disabled={isBotResponding} \n/>\n          <button\n          aria-label=\"Send Message\"\n          className=\"svg-container send-btn\"\n          disabled={isBotResponding}\nonClick={() => handleSendMessage(selectedSession)}\n        >\n          <i className=\"fas fa-paper-plane\"></i>\n        </button>\n        </div>\n        </div>\n        </div>\n        </div>\n<ChatExperts isOpen={isExpertsOpen} toggleOpen={toggleExperts} selectedTopic={selectedTopic} selectedSession={selectedSession} />\n      </div>\n      \n  );\n};\n\nexport default ChatInterface;"],"names":["_ref","selectedSession","closeShareChat","resetChat","_useState","useState","_useState2","_slicedToArray","sharedChatData","setSharedChatData","_useState3","_useState4","isLoading","setIsLoading","shareChatRef","useRef","useEffect","fetchSharedChatData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","messagesCollectionRef","messagesSnapshot","messagesData","wrap","_context","prev","next","collection","firestore","auth","currentUser","uid","getDocs","query","orderBy","sent","docs","map","doc","_doc$data","data","prompt","response","console","log","t0","error","stop","apply","arguments","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleDeleteSession","_ref3","_callee2","sessionDocRef","_context2","deleteDoc","startNewChat","_jsx","ref","className","children","_jsxs","onClick","xmlns","fill","viewBox","strokeWidth","color","stroke","strokeLinecap","strokeLinejoin","d","LoadingCircle","message","index","ReactMarkdown","height","width","isOpen","toggleOpen","onSessionClick","resetChatMessages","isDropdownOpen","setIsDropdownOpen","setIsIconRotated","chatHistoryRef","_useState5","_useState6","setSessions","_useState7","_useState8","isShareChatOpen","setIsShareChatOpen","_useState9","_useState10","isLoadingSessions","setIsLoadingSessions","_useState11","_useState12","selectedSessionForSVG","setSelectedSessionForSVG","groupSessionsByDate","sessions","today","Date","setHours","yesterday","setDate","getDate","groupedSessions","previously","forEach","session","sessionDate","timestamp","seconds","getTime","push","_useState13","_useState14","setGroupedSessions","fetchSessions","user","userUid","q","snapshot","sessionData","id","length","toggleDropdown","tagName","isMobile","window","innerWidth","concat","_Fragment","style","display","alignItems","src","process","alt","marginLeft","e","stopPropagation","cx","cy","r","ShareChat","isHovered","displayName","photoURL","skills","description","otherUserUID","occupation","onClose","navigate","useNavigate","currentUserUID","setCurrentUserUID","unsubscribe","onAuthStateChanged","handleChatButtonClick","_discussionID","conversationRef","Error","discussionID","setDoc","state","handleEscapeKey","key","href","marginBottom","marginTop","join","type","Link","to","fillRule","clipRule","selectedTopic","firstUserMessage","isIconRotated","matchingExperts","setMatchingExperts","chatExpertsRef","setIsHovered","showExpertBox","setShowExpertBox","setSelectedExpert","isLoadingExperts","setIsLoadingExperts","_useState15","_useState16","buttonClicked","setButtonClicked","_useState17","_useState18","loadingExperts","setLoadingExperts","handleExpertBoxClose","handleMouseEnter","handleButtonClick","expertInfo","handleMouseLeave","fetchMatchingExperts","experts","getMatchingExpertsForTopic","getMatchingExperts","Array","finish","expertsCollection","querySnapshot","messagesCollection","_matchingExperts","processedExperts","Set","messageDoc","messageData","has","name","keywords","city","fuseOptions","keys","includeScore","includeMatches","threshold","fuse","Fuse","sessionMatch","toLowerCase","includes","promptMatch","search","responseMatch","add","abrupt","_x","_ref4","_callee3","_matchingExperts2","_context3","fieldsToCheck","some","field","_x2","_x3","onMouseEnter","onMouseLeave","ExpertBox","TopicLabel","category","handleDropdownToggle","handleTopicSelection","htmlFor","svg","onChange","categories","onSelectTopic","dropdownRef","setSelectedTopic","topic","pickModelDiv","querySelector","setMessage","textareaHeight","setTextareaHeight","textareaRef","chatMessages","setChatMessages","isHistoryOpen","setIsHistoryOpen","isExpertsOpen","setIsExpertsOpen","chatContainerRef","isBotResponding","setIsBotResponding","setSelectedSession","_useState19","_useState20","_useState21","_useState22","setSessionToUse","fetchMessages","discussionId","text","isTyping","flat","handleSendMessage","currentSessionToUse","terms","_terms","_filteredNouns","_verbs","_firstWord","_userDocRef","_timestamp","userDocRef","botMessageDocRef","_context4","trim","nlp","nouns","out","filter","term","verbs","split","filteredNouns","_toConsumableArray","firstWord","db","path","getDoc","exists","serverTimestamp","setSelectedAndFetchMessages","sessionStorage","setItem","addDoc","handleTextareaResize","prevChatMessages","onSnapshot","docSnapshot","_docSnapshot$data","rawBotResponse","formattedBotResponse","_loop","i","currentTypingSpeed","Math","max","Promise","resolve","setTimeout","slice","delegateYield","blur","handleSessionClick","_callee4","_context5","_x4","_ref5","_callee5","sessionId","_context6","_x5","removeItem","fetchLastDiscussionId","_ref6","_callee6","_context7","getItem","textarea","newHeight","min","scrollHeight","handleKeyDown","shiftKey","preventDefault","textareaElement","scrollTop","ChatHistory","TopicPicker","chatMessage","value","placeholder","autoComplete","inputMode","onKeyDown","disabled","ChatExperts"],"sourceRoot":""}