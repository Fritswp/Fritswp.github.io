{"version":3,"file":"static/js/247.2743452c.chunk.js","mappings":"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","sources":["../node_modules/classnames/index.js","../node_modules/advanced-cropper/service/interactions.js","../node_modules/advanced-cropper/utils/index.js","../node_modules/advanced-cropper/constants/index.js","../node_modules/advanced-cropper/state/setCoordinates.js","../node_modules/advanced-cropper/types/index.js","../node_modules/advanced-cropper/service/utils.js","../node_modules/advanced-cropper/service/sizeRestrictions.js","../node_modules/advanced-cropper/service/helpers.js","../node_modules/advanced-cropper/state/copyState.js","../node_modules/advanced-cropper/service/approximateSize.js","../node_modules/advanced-cropper/service/fitVisibleArea.js","../node_modules/advanced-cropper/algorithms/moveCoordinatesAlgorithm.js","../node_modules/advanced-cropper/service/fitCoordinates.js","../node_modules/advanced-cropper/state/setVisibleArea.js","../node_modules/advanced-cropper/state/createState.js","../node_modules/advanced-cropper/state/moveCoordinates.js","../node_modules/advanced-cropper/algorithms/resizeCoordinatesAlgorithm.js","../node_modules/advanced-cropper/state/resizeCoordinates.js","../node_modules/advanced-cropper/state/setBoundary.js","../node_modules/advanced-cropper/state/transformImage.js","../node_modules/advanced-cropper/algorithms/rotateImageAlgorithm.js","../node_modules/advanced-cropper/algorithms/flipImageAlgorithm.js","../node_modules/advanced-cropper/algorithms/transformImageAlgorithm.js","../node_modules/advanced-cropper/state/reconcileState.js","../node_modules/advanced-cropper/service/normalize.js","../node_modules/advanced-cropper/instance/AbstractCropperInstance.js","../node_modules/advanced-cropper/defaults/defaultSize.js","../node_modules/advanced-cropper/defaults/defaultSizeRestrictions.js","../node_modules/advanced-cropper/defaults/defaultPosition.js","../node_modules/advanced-cropper/defaults/index.js","../node_modules/advanced-cropper/defaults/defaultAreaPositionRestrictions.js","../node_modules/advanced-cropper/defaults/defaultAreaSizeRestrictions.js","../node_modules/advanced-cropper/defaults/defaultPositionRestrictions.js","../node_modules/advanced-cropper/defaults/defaultVisibleArea.js","../node_modules/advanced-cropper/image/index.js","../node_modules/advanced-cropper/boundary/index.js","../node_modules/advanced-cropper/defaults/defaultBoundary.js","../node_modules/advanced-cropper/canvas/index.js","../node_modules/advanced-cropper/animation/index.js","../node_modules/advanced-cropper/service/imageTransforms.js","../node_modules/advanced-cropper/defaults/defaultStencilConstraints.js","../node_modules/advanced-cropper/extensions/stencil-size/index.js","../node_modules/react-advanced-cropper/src/deprecated/hybridAutoZoom.ts","../node_modules/react-advanced-cropper/src/hooks/useDeprecationWarning.ts","../node_modules/react-advanced-cropper/src/hooks/useUpdateEffect.ts","../node_modules/react-advanced-cropper/src/hooks/useFirstMountState.ts","../node_modules/react-advanced-cropper/src/instance/CropperInstance.ts","../node_modules/react-advanced-cropper/src/hooks/useForceRerender.ts","../node_modules/react-advanced-cropper/src/hooks/useCropperInstance.ts","../node_modules/react-advanced-cropper/src/hooks/usePersistentFunction.ts","../node_modules/react-advanced-cropper/src/hooks/useWindowResize.ts","../node_modules/react-advanced-cropper/src/hooks/useAbstractCropper.ts","../node_modules/react-advanced-cropper/src/hooks/useStateWithCallback.ts","../node_modules/react-advanced-cropper/src/hooks/useCropperImage.ts","../node_modules/react-advanced-cropper/src/hooks/useCropperAutoReconcile.ts","../node_modules/react-advanced-cropper/src/components/service/StretchableBoundary.tsx","../node_modules/react-advanced-cropper/src/components/service/CropperFade.tsx","../node_modules/react-advanced-cropper/src/components/service/CropperWrapper.tsx","../node_modules/react-advanced-cropper/src/service/events.ts","../node_modules/react-advanced-cropper/src/components/service/CropperBackgroundImage.tsx","../node_modules/react-advanced-cropper/src/components/service/CropperCanvas.tsx","../node_modules/react-advanced-cropper/src/components/service/DraggableElement.tsx","../node_modules/react-advanced-cropper/src/components/service/LineWrapper.tsx","../node_modules/react-advanced-cropper/src/components/lines/SimpleLine.tsx","../node_modules/react-advanced-cropper/src/components/service/HandlerWrapper.tsx","../node_modules/react-advanced-cropper/src/components/handlers/SimpleHandler.tsx","../node_modules/react-advanced-cropper/src/components/service/BoundingBox.tsx","../node_modules/react-advanced-cropper/src/components/service/StencilOverlay.tsx","../node_modules/react-advanced-cropper/src/components/service/ArtificialTransition.tsx","../node_modules/react-advanced-cropper/src/hooks/useTransition.ts","../node_modules/react-advanced-cropper/src/components/service/StencilWrapper.tsx","../node_modules/react-advanced-cropper/src/components/service/StencilGrid.tsx","../node_modules/react-advanced-cropper/src/components/stencils/RectangleStencil.tsx","../node_modules/react-advanced-cropper/src/components/service/TransformableImage.tsx","../node_modules/react-advanced-cropper/src/service/cropper.ts","../node_modules/react-advanced-cropper/src/components/service/CropperBackgroundWrapper.tsx","../node_modules/react-advanced-cropper/src/hooks/useRotateImageOptions.ts","../node_modules/react-advanced-cropper/src/hooks/useScaleImageOptions.ts","../node_modules/react-advanced-cropper/src/hooks/useMoveImageOptions.ts","../node_modules/react-advanced-cropper/src/components/AbstractCropper.tsx","../node_modules/react-advanced-cropper/src/service/constants.ts","../node_modules/react-advanced-cropper/src/hooks/useAbstractCropperProps.ts","../node_modules/react-advanced-cropper/src/components/croppers/FixedCropper.tsx","../node_modules/react-advanced-cropper/src/components/croppers/Cropper.tsx","../node_modules/react-advanced-cropper/src/components/stencils/CircleStencil.tsx","../node_modules/react-advanced-cropper/src/components/service/CropperSource.tsx","../node_modules/react-advanced-cropper/src/components/helpers/CropperPreviewWrapper.tsx","../node_modules/react-advanced-cropper/src/components/helpers/CropperPreviewBackground.tsx","../node_modules/react-advanced-cropper/src/components/helpers/CropperPreview.tsx"],"sourcesContent":["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","function hasInteractions(interactions) {\n    return (interactions.moveCoordinates ||\n        interactions.resizeCoordinates ||\n        interactions.transformImage.move ||\n        interactions.transformImage.rotate ||\n        interactions.transformImage.flip ||\n        interactions.transformImage.scale);\n}\nfunction getEmptyInteractions() {\n    return {\n        moveCoordinates: false,\n        resizeCoordinates: false,\n        transformImage: {\n            rotate: false,\n            move: false,\n            scale: false,\n            flip: false,\n        },\n    };\n}\n\nexport { getEmptyInteractions, hasInteractions };\n","function getDirectionNames(hDirection, vDirection) {\n    var camelCase, snakeCase;\n    if (hDirection && vDirection) {\n        camelCase = \"\" + hDirection + vDirection[0].toUpperCase() + vDirection.slice(1);\n        snakeCase = hDirection + \"-\" + vDirection;\n    }\n    else {\n        camelCase = hDirection || vDirection;\n        snakeCase = hDirection || vDirection;\n    }\n    return { camelCase: camelCase, snakeCase: snakeCase };\n}\nfunction isBlob(url) {\n    return /^blob:/.test(url);\n}\nfunction isDataUrl(url) {\n    return /^data:/.test(url);\n}\nfunction isLocal(url) {\n    return isBlob(url) || isDataUrl(url);\n}\nfunction isCrossOriginURL(url) {\n    if (isLocal(url)) {\n        return false;\n    }\n    var pageLocation = window.location;\n    var URL_HOST_PATTERN = /(\\w+:)?(?:\\/\\/)([\\w.-]+)?(?::(\\d+))?\\/?/;\n    var urlMatch = URL_HOST_PATTERN.exec(url) || [];\n    var urlparts = {\n        protocol: urlMatch[1] || '',\n        host: urlMatch[2] || '',\n        port: urlMatch[3] || '',\n    };\n    var defaultPort = function (protocol) {\n        if (protocol === 'http') {\n            return 80;\n        }\n        else {\n            return 433;\n        }\n    };\n    var portOf = function (location) {\n        return location.port || defaultPort((location.protocol || pageLocation.protocol));\n    };\n    return !((!urlparts.protocol && !urlparts.host && !urlparts.port) ||\n        Boolean(urlparts.protocol &&\n            urlparts.protocol == pageLocation.protocol &&\n            urlparts.host &&\n            urlparts.host == pageLocation.host &&\n            urlparts.host &&\n            portOf(urlparts) == portOf(pageLocation)));\n}\nfunction isArray(value) {\n    return Array.isArray(value);\n}\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\nfunction isUndefined(obj) {\n    return obj === undefined;\n}\nvar isObject = function (term) {\n    return term !== null && typeof term === 'object';\n};\n// TODO: add the typing\nfunction getOptions(options, defaultScheme, falseScheme) {\n    if (falseScheme === void 0) { falseScheme = {}; }\n    var result = {};\n    if (isObject(options)) {\n        Object.keys(defaultScheme).forEach(function (key) {\n            if (isUndefined(options[key])) {\n                result[key] = defaultScheme[key];\n            }\n            else if (isObject(defaultScheme[key])) {\n                if (isObject(options[key])) {\n                    result[key] = getOptions(options[key], defaultScheme[key], falseScheme[key]);\n                }\n                else {\n                    result[key] = options[key] ? defaultScheme[key] : falseScheme[key];\n                }\n            }\n            else if (defaultScheme[key] === true || defaultScheme[key] === false) {\n                result[key] = Boolean(options[key]);\n            }\n            else {\n                result[key] = options[key];\n            }\n        });\n        return result;\n    }\n    else {\n        if (options) {\n            return defaultScheme;\n        }\n        else {\n            return falseScheme;\n        }\n    }\n}\nfunction parseNumber(number) {\n    var parsedNumber = Number(number);\n    if (Number.isNaN(parsedNumber)) {\n        return number;\n    }\n    else {\n        return parsedNumber;\n    }\n}\nfunction isBoolean(value) {\n    return value === true || value === false;\n}\nfunction isNumber(value) {\n    return typeof value === 'number';\n}\nfunction isString(value) {\n    return typeof value === 'string';\n}\nfunction isNaN(value) {\n    return value !== value;\n}\nfunction isNumeric(value) {\n    return ((isNumber(value) && !isNaN(value)) ||\n        (isString(value) && !Number.isNaN(parseFloat(value)) && isFinite(parseFloat(value))));\n}\nfunction distance(firstPoint, secondPoint) {\n    return Math.sqrt(Math.pow(firstPoint.left - secondPoint.left, 2) + Math.pow(firstPoint.top - secondPoint.top, 2));\n}\nfunction isRoughlyEqual(a, b, tolerance) {\n    if (tolerance === void 0) { tolerance = 1e-3; }\n    return Math.abs(b - a) < tolerance;\n}\nfunction isGreater(a, b, tolerance) {\n    return isRoughlyEqual(a, b, tolerance) ? false : a > b;\n}\nfunction isLower(a, b, tolerance) {\n    return isRoughlyEqual(a, b, tolerance) ? false : a < b;\n}\nfunction isArrayBufferLike(value) {\n    return value instanceof ArrayBuffer;\n}\nfunction getCloserAngle(reference, angle) {\n    var turnsCount = Math.floor(reference / 360);\n    var firstCandidate = turnsCount * 360 + angle;\n    var secondCandidate = (turnsCount + 1) * 360 + angle;\n    if (Math.abs(firstCandidate - reference) < Math.abs(secondCandidate - reference)) {\n        return firstCandidate;\n    }\n    else {\n        return secondCandidate;\n    }\n}\nfunction sign(value) {\n    var number = +value;\n    if (number === 0 || isNaN(number)) {\n        return number;\n    }\n    return number > 0 ? 1 : -1;\n}\nfunction promiseTimeout(timeout) {\n    return new Promise(function (resolve) {\n        setTimeout(function () {\n            resolve();\n        }, timeout);\n    });\n}\n// Not performant, small function to reduce the code amount\nfunction deepClone(obj) {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    var result = {};\n    if (Array.isArray(obj)) {\n        result = obj.map(function (item) { return deepClone(item); });\n    }\n    else {\n        Object.keys(obj).forEach(function (key) {\n            return (result[key] = deepClone(obj[key]));\n        });\n    }\n    return result;\n}\nfunction deepCompare(a, b, tolerance) {\n    if (tolerance === void 0) { tolerance = 1e-3; }\n    if (isNumber(a) && isNumber(b) && isRoughlyEqual(a, b, tolerance))\n        return true;\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        if (a.constructor !== b.constructor)\n            return false;\n        var length_1, i = void 0;\n        if (Array.isArray(a)) {\n            length_1 = a.length;\n            if (length_1 != b.length)\n                return false;\n            for (i = length_1; i-- !== 0;)\n                if (!deepCompare(a[i], b[i], tolerance))\n                    return false;\n            return true;\n        }\n        if (a.valueOf !== Object.prototype.valueOf)\n            return a.valueOf() === b.valueOf();\n        if (a.toString !== Object.prototype.toString)\n            return a.toString() === b.toString();\n        var keys = Object.keys(a);\n        length_1 = keys.length;\n        if (length_1 !== Object.keys(b).length)\n            return false;\n        for (i = length_1; i-- !== 0;)\n            if (!Object.prototype.hasOwnProperty.call(b, keys[i]))\n                return false;\n        for (i = length_1; i-- !== 0;) {\n            var key = keys[i];\n            if (!deepCompare(a[key], b[key], tolerance))\n                return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\nfunction isWheelEvent(event) {\n    return 'deltaX' in event;\n}\nfunction isTouchEvent(event) {\n    return 'touches' in event;\n}\nfunction isMouseEvent(event) {\n    return 'buttons' in event;\n}\nfunction emptyCoordinates() {\n    return {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0,\n    };\n}\nfunction isCardinalDirection(value) {\n    return value === 'west' || value === 'south' || value === 'north' || value === 'east';\n}\nfunction isOrdinalDirection(value) {\n    return (isCardinalDirection(value) ||\n        value === 'westNorth' ||\n        value === 'westSouth' ||\n        value === 'eastNorth' ||\n        value === 'eastSouth');\n}\nfunction debounce(callback, delay) {\n    var timestamp;\n    var timeout;\n    function later() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var last = Date.now() - timestamp;\n        var delayValue = isFunction(delay) ? delay() : delay || 0;\n        if (last < delayValue && last >= 0) {\n            timeout = setTimeout(function () { return later.apply(void 0, args); }, delayValue - last);\n        }\n        else {\n            callback.apply(void 0, args);\n        }\n    }\n    function result() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        timestamp = Date.now();\n        timeout = setTimeout(function () { return later.apply(void 0, args); }, isFunction(delay) ? delay() : delay || 0);\n    }\n    result.clear = function () {\n        clearTimeout(timeout);\n    };\n    return result;\n}\n\nexport { debounce, deepClone, deepCompare, distance, emptyCoordinates, getCloserAngle, getDirectionNames, getOptions, isArray, isArrayBufferLike, isBlob, isBoolean, isCardinalDirection, isCrossOriginURL, isDataUrl, isFunction, isGreater, isLocal, isLower, isMouseEvent, isNaN, isNumber, isNumeric, isObject, isOrdinalDirection, isRoughlyEqual, isString, isTouchEvent, isUndefined, isWheelEvent, parseNumber, promiseTimeout, sign };\n","var ALL_DIRECTIONS = ['left', 'right', 'top', 'bottom'];\nvar HORIZONTAL_DIRECTIONS = ['left', 'right'];\nvar VERTICAL_DIRECTIONS = ['top', 'bottom'];\n\nexport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS };\n","import { __assign } from 'tslib';\nimport { emptyCoordinates, isUndefined } from '../utils/index.js';\nimport { mergePositionRestrictions, coordinatesToPositionRestrictions, applyScale, maxScale, applyMove, inverseMove, fitToPositionRestrictions } from '../service/utils.js';\nimport { getAspectRatio, getSizeRestrictions, getPositionRestrictions, getAreaSizeRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport { approximateSize } from '../service/approximateSize.js';\nimport { fitVisibleArea } from '../service/fitVisibleArea.js';\nimport { moveCoordinatesAlgorithm } from '../algorithms/moveCoordinatesAlgorithm.js';\n\nvar SetCoordinatesMode;\n(function (SetCoordinatesMode) {\n    SetCoordinatesMode[\"limit\"] = \"limit\";\n    SetCoordinatesMode[\"zoom\"] = \"zoom\";\n    SetCoordinatesMode[\"unsafe\"] = \"unsafe\";\n})(SetCoordinatesMode || (SetCoordinatesMode = {}));\nfunction setCoordinates(state, settings, transform, \n// If you set mode to `false`, the coordinates can leave the visible area\nmode) {\n    if (mode === void 0) { mode = true; }\n    var currentMode = mode === false ? SetCoordinatesMode.unsafe : mode === true ? SetCoordinatesMode.zoom : mode;\n    var aspectRatio = getAspectRatio(state, settings);\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    if (state.visibleArea && currentMode === SetCoordinatesMode.limit) {\n        sizeRestrictions = __assign(__assign({}, sizeRestrictions), { minWidth: Math.min(state.visibleArea.width, sizeRestrictions.minWidth), minHeight: Math.min(state.visibleArea.height, sizeRestrictions.minHeight), maxWidth: Math.min(state.visibleArea.width, sizeRestrictions.maxWidth), maxHeight: Math.min(state.visibleArea.height, sizeRestrictions.maxHeight) });\n    }\n    var positionRestrictions = getPositionRestrictions(state, settings);\n    if (state.visibleArea && currentMode === SetCoordinatesMode.limit) {\n        positionRestrictions = mergePositionRestrictions(positionRestrictions, coordinatesToPositionRestrictions(state.visibleArea));\n    }\n    var move = function (prevCoordinates, newCoordinates) {\n        return moveCoordinatesAlgorithm(prevCoordinates, {\n            left: newCoordinates.left - (prevCoordinates.left || 0),\n            top: newCoordinates.top - (prevCoordinates.top || 0),\n        }, positionRestrictions);\n    };\n    var resize = function (prevCoordinates, newCoordinates) {\n        var coordinates = __assign(__assign(__assign({}, prevCoordinates), approximateSize({\n            width: newCoordinates.width,\n            height: newCoordinates.height,\n            sizeRestrictions: sizeRestrictions,\n            aspectRatio: aspectRatio,\n        })), { left: 0, top: 0 });\n        return move(coordinates, {\n            left: prevCoordinates.left || 0,\n            top: prevCoordinates.top || 0,\n        });\n    };\n    var coordinates = state.coordinates ? __assign({}, state.coordinates) : emptyCoordinates();\n    var transforms = Array.isArray(transform) ? transform : [transform];\n    transforms.forEach(function (transform) {\n        var changes;\n        if (typeof transform === 'function') {\n            changes = transform(__assign(__assign({}, state), { coordinates: coordinates }), settings);\n        }\n        else {\n            changes = transform;\n        }\n        if (changes) {\n            if (!isUndefined(changes.width) || !isUndefined(changes.height)) {\n                coordinates = resize(coordinates, __assign(__assign({}, coordinates), changes));\n            }\n            if (!isUndefined(changes.left) || !isUndefined(changes.top)) {\n                coordinates = move(coordinates, __assign(__assign({}, coordinates), changes));\n            }\n        }\n    });\n    var result = __assign(__assign({}, copyState(state)), { coordinates: coordinates });\n    if (result.visibleArea && currentMode === SetCoordinatesMode.zoom) {\n        var widthIntersections = Math.max(0, result.coordinates.width - result.visibleArea.width);\n        var heightIntersections = Math.max(0, result.coordinates.height - result.visibleArea.height);\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        var scale = widthIntersections > heightIntersections\n            ? result.coordinates.width / result.visibleArea.width\n            : result.coordinates.height / result.visibleArea.height;\n        if (scale > 1) {\n            result.visibleArea = applyScale(result.visibleArea, Math.min(scale, maxScale(result.visibleArea, areaSizeRestrictions)));\n        }\n        result.visibleArea = applyMove(result.visibleArea, inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea))));\n        return fitVisibleArea(result, settings);\n    }\n    else {\n        return result;\n    }\n}\n\nexport { SetCoordinatesMode, setCoordinates };\n","var ImageRestriction;\n(function (ImageRestriction) {\n    ImageRestriction[\"fillArea\"] = \"fillArea\";\n    ImageRestriction[\"fitArea\"] = \"fitArea\";\n    ImageRestriction[\"stencil\"] = \"stencil\";\n    ImageRestriction[\"none\"] = \"none\";\n})(ImageRestriction || (ImageRestriction = {}));\nvar Priority;\n(function (Priority) {\n    Priority[\"coordinates\"] = \"coordinates\";\n    Priority[\"visibleArea\"] = \"visibleArea\";\n})(Priority || (Priority = {}));\n\nexport { ImageRestriction, Priority };\n","import { __assign } from 'tslib';\nimport { ALL_DIRECTIONS } from '../constants/index.js';\nimport { isLower, isGreater, isNumber, isNumeric, isUndefined, isFunction } from '../utils/index.js';\n\nfunction diff(firstObject, secondObject) {\n    return {\n        left: firstObject.left - secondObject.left,\n        top: firstObject.top - secondObject.top,\n    };\n}\nfunction getCenter(object) {\n    return {\n        left: object.left + object.width / 2,\n        top: object.top + object.height / 2,\n    };\n}\nfunction getOppositeSide(side) {\n    return {\n        left: 'right',\n        top: 'bottom',\n        right: 'left',\n        bottom: 'top',\n    }[side];\n}\nfunction sizeDistance(a, b) {\n    return Math.pow(a.width - b.width, 2) + Math.pow(a.height - b.height, 2);\n}\nfunction applyDirections(coordinates, directions) {\n    return {\n        left: coordinates.left - directions.left,\n        top: coordinates.top - directions.top,\n        width: coordinates.width + directions.left + directions.right,\n        height: coordinates.height + directions.top + directions.bottom,\n    };\n}\nfunction inverseMove(directions) {\n    return {\n        left: -directions.left,\n        top: -directions.top,\n    };\n}\nfunction applyMove(object, move) {\n    return __assign(__assign({}, object), { left: object.left + move.left, top: object.top + move.top });\n}\nfunction coordinatesToPositionRestrictions(coordinates) {\n    return {\n        left: coordinates.left,\n        top: coordinates.top,\n        right: coordinates.left + coordinates.width,\n        bottom: coordinates.top + coordinates.height,\n    };\n}\nfunction applyScale(object, factor, center, progress) {\n    if (factor !== 1) {\n        if ('left' in object || 'top' in object) {\n            if (center) {\n                var currentCenter = getCenter(object);\n                return {\n                    width: object.width * factor,\n                    height: object.height * factor,\n                    left: object.left +\n                        (object.width * (1 - factor)) / 2 +\n                        (center.left - currentCenter.left) * (progress || 1 - factor),\n                    top: object.top +\n                        (object.height * (1 - factor)) / 2 +\n                        (center.top - currentCenter.top) * (progress || 1 - factor),\n                };\n            }\n            else {\n                return {\n                    width: object.width * factor,\n                    height: object.height * factor,\n                    left: object.left + (object.width * (1 - factor)) / 2,\n                    top: object.top + (object.height * (1 - factor)) / 2,\n                };\n            }\n        }\n        else {\n            return {\n                width: object.width * factor,\n                height: object.height * factor,\n            };\n        }\n    }\n    else {\n        return object;\n    }\n}\nfunction ratio(object) {\n    return object.width / object.height;\n}\nfunction maxScale(size, restrictions) {\n    return Math.min(restrictions.maxWidth ? restrictions.maxWidth / size.width : Infinity, restrictions.maxHeight ? restrictions.maxHeight / size.height : Infinity);\n}\nfunction minScale(size, restrictions) {\n    return Math.max(restrictions.minWidth ? restrictions.minWidth / size.width : 0, restrictions.minHeight ? restrictions.minHeight / size.height : 0);\n}\nfunction getBrokenRatio(currentAspectRatio, aspectRatio) {\n    var ratioBroken;\n    if (aspectRatio.minimum && isLower(currentAspectRatio, aspectRatio.minimum)) {\n        ratioBroken = aspectRatio.minimum;\n    }\n    else if (aspectRatio.maximum && isGreater(currentAspectRatio, aspectRatio.maximum)) {\n        ratioBroken = aspectRatio.maximum;\n    }\n    return ratioBroken;\n}\nfunction fitToSizeRestrictions(coordinates, sizeRestrictions) {\n    var aspectRatio = ratio(coordinates);\n    var scale = 1;\n    if (sizeRestrictions.minWidth > 0 && sizeRestrictions.minHeight > 0) {\n        if (aspectRatio > sizeRestrictions.minWidth / sizeRestrictions.minHeight) {\n            if (coordinates.height < sizeRestrictions.minHeight) {\n                scale = sizeRestrictions.minHeight / coordinates.height;\n            }\n        }\n        else {\n            if (coordinates.width < sizeRestrictions.minWidth) {\n                scale = sizeRestrictions.minWidth / coordinates.width;\n            }\n        }\n    }\n    else if (sizeRestrictions.minWidth > 0) {\n        if (coordinates.width < sizeRestrictions.minWidth) {\n            scale = sizeRestrictions.minWidth / coordinates.width;\n        }\n    }\n    else if (sizeRestrictions.minHeight > 0) {\n        if (coordinates.height < sizeRestrictions.minHeight) {\n            scale = sizeRestrictions.minHeight / coordinates.height;\n        }\n    }\n    if (sizeRestrictions.maxWidth < Infinity && sizeRestrictions.maxHeight < Infinity) {\n        if (aspectRatio > sizeRestrictions.maxWidth / sizeRestrictions.maxHeight) {\n            if (coordinates.width > sizeRestrictions.maxWidth) {\n                scale = sizeRestrictions.maxWidth / coordinates.width;\n            }\n        }\n        else {\n            if (coordinates.height > sizeRestrictions.maxHeight) {\n                scale = sizeRestrictions.maxHeight / coordinates.height;\n            }\n        }\n    }\n    else if (sizeRestrictions.maxWidth < Infinity) {\n        if (coordinates.width > sizeRestrictions.maxWidth) {\n            scale = sizeRestrictions.maxWidth / coordinates.width;\n        }\n    }\n    else if (sizeRestrictions.maxHeight < Infinity) {\n        if (coordinates.height > sizeRestrictions.maxHeight) {\n            scale = sizeRestrictions.maxHeight / coordinates.height;\n        }\n    }\n    return scale;\n}\nfunction getIntersections(object, positionRestrictions) {\n    var intersections = {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n    };\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var areaLimit = positionRestrictions[direction];\n        var objectLimit = coordinatesToPositionRestrictions(object)[direction];\n        if (areaLimit !== undefined && objectLimit !== undefined) {\n            if (direction === 'left' || direction === 'top') {\n                intersections[direction] = Math.max(0, areaLimit - objectLimit);\n            }\n            else {\n                intersections[direction] = Math.max(0, objectLimit - areaLimit);\n            }\n        }\n        else {\n            intersections[direction] = 0;\n        }\n    });\n    return intersections;\n}\nfunction resizeToSizeRestrictions(coordinates, sizeRestrictions) {\n    return applyScale(coordinates, fitToSizeRestrictions(coordinates, sizeRestrictions));\n}\nfunction rotateSize(size, angle) {\n    var radians = (angle * Math.PI) / 180;\n    return {\n        width: Math.abs(size.width * Math.cos(radians)) + Math.abs(size.height * Math.sin(radians)),\n        height: Math.abs(size.width * Math.sin(radians)) + Math.abs(size.height * Math.cos(radians)),\n    };\n}\nfunction rotatePoint(point, angle, anchor) {\n    var radians = (angle * Math.PI) / 180;\n    if (anchor) {\n        return {\n            left: (point.left - anchor.left) * Math.cos(radians) -\n                (point.top - anchor.top) * Math.sin(radians) +\n                anchor.left,\n            top: (point.left - anchor.left) * Math.sin(radians) +\n                (point.top - anchor.top) * Math.cos(radians) +\n                anchor.top,\n        };\n    }\n    else {\n        return {\n            left: point.left * Math.cos(radians) - point.top * Math.sin(radians),\n            top: point.left * Math.sin(radians) + point.top * Math.cos(radians),\n        };\n    }\n}\nfunction positionToSizeRestrictions(positionRestrictions) {\n    return {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: positionRestrictions.right !== undefined && positionRestrictions.left !== undefined\n            ? positionRestrictions.right - positionRestrictions.left\n            : Infinity,\n        maxHeight: positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined\n            ? positionRestrictions.bottom - positionRestrictions.top\n            : Infinity,\n    };\n}\nfunction mergePositionRestrictions(a, b) {\n    var restrictions = {};\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var firstDirection = a[direction];\n        var secondDirection = b[direction];\n        if (firstDirection !== undefined && secondDirection !== undefined) {\n            if (direction === 'left' || direction === 'top') {\n                restrictions[direction] = Math.max(firstDirection, secondDirection);\n            }\n            else {\n                restrictions[direction] = Math.min(firstDirection, secondDirection);\n            }\n        }\n        else if (secondDirection !== undefined) {\n            restrictions[direction] = secondDirection;\n        }\n        else if (firstDirection !== undefined) {\n            restrictions[direction] = firstDirection;\n        }\n    });\n    return restrictions;\n}\nfunction fitToPositionRestrictions(coordinates, positionRestrictions) {\n    var directions = {\n        left: 0,\n        top: 0,\n    };\n    var intersection = getIntersections(coordinates, positionRestrictions);\n    if (intersection.left && intersection.left > 0) {\n        directions.left = intersection.left;\n    }\n    else if (intersection.right && intersection.right > 0) {\n        directions.left = -intersection.right;\n    }\n    if (intersection.top && intersection.top > 0) {\n        directions.top = intersection.top;\n    }\n    else if (intersection.bottom && intersection.bottom > 0) {\n        directions.top = -intersection.bottom;\n    }\n    return directions;\n}\nfunction moveToPositionRestrictions(coordinates, positionRestrictions) {\n    return applyMove(coordinates, fitToPositionRestrictions(coordinates, positionRestrictions));\n}\nfunction aspectRatioIntersection(main, subset) {\n    if (!subset) {\n        return main;\n    }\n    else if (!main) {\n        return subset;\n    }\n    else {\n        return {\n            minimum: Math.min(main.maximum, Math.max(main.minimum, subset.minimum)),\n            maximum: Math.max(main.minimum, Math.min(main.maximum, subset.maximum)),\n        };\n    }\n}\nfunction createAspectRatio(aspectRatio) {\n    if (aspectRatio === void 0) { aspectRatio = {}; }\n    if (isNumber(aspectRatio)) {\n        return {\n            minimum: aspectRatio,\n            maximum: aspectRatio,\n        };\n    }\n    else {\n        return {\n            minimum: isNumeric(aspectRatio.minimum) ? aspectRatio.minimum : 0,\n            maximum: isNumeric(aspectRatio.maximum) ? aspectRatio.maximum : Infinity,\n        };\n    }\n}\nfunction getTransitionStyle(transitions) {\n    return transitions ? transitions.timingFunction + \" \" + (transitions.active ? transitions.duration : 0) + \"ms\" : 'none';\n}\nfunction isConsistentSize(size, restrictions) {\n    return ((isUndefined(restrictions.maxWidth) || !isGreater(size.width, restrictions.maxWidth)) &&\n        (isUndefined(restrictions.maxHeight) || !isGreater(size.height, restrictions.maxHeight)) &&\n        (isUndefined(restrictions.minHeight) || !isLower(size.height, restrictions.minHeight)) &&\n        (isUndefined(restrictions.minWidth) || !isLower(size.width, restrictions.minWidth)));\n}\nfunction isConsistentPosition(coordinates, restrictions) {\n    return ((isUndefined(restrictions.left) || !isLower(coordinates.left, restrictions.left)) &&\n        (isUndefined(restrictions.top) || !isLower(coordinates.top, restrictions.top)) &&\n        (isUndefined(restrictions.right) || !isGreater(coordinates.left + coordinates.width, restrictions.right)) &&\n        (isUndefined(restrictions.bottom) || !isGreater(coordinates.top + coordinates.height, restrictions.bottom)));\n}\nfunction getCloserSize(candidates, reference, sizeRestrictions, aspectRatio) {\n    var traverse = function (ignoreMinimum) {\n        return candidates.reduce(function (minimum, size) {\n            var _a = isFunction(sizeRestrictions)\n                ? sizeRestrictions(size)\n                : sizeRestrictions, maxHeight = _a.maxHeight, maxWidth = _a.maxWidth, minWidth = _a.minWidth, minHeight = _a.minHeight;\n            var preparedAspectRatio = createAspectRatio(isFunction(aspectRatio) ? aspectRatio(size) : aspectRatio);\n            var preparedSizeRestrictions = ignoreMinimum\n                ? { maxWidth: maxWidth, maxHeight: maxHeight }\n                : { maxWidth: maxWidth, maxHeight: maxHeight, minWidth: minWidth, minHeight: minHeight };\n            if (isConsistentSize(size, preparedSizeRestrictions) &&\n                !getBrokenRatio(ratio(size), preparedAspectRatio) &&\n                size.width &&\n                size.height) {\n                return !minimum || isLower(sizeDistance(size, reference), sizeDistance(minimum, reference))\n                    ? size\n                    : minimum;\n            }\n            else {\n                return minimum;\n            }\n        }, null);\n    };\n    return traverse() || traverse(true);\n}\n\nexport { applyDirections, applyMove, applyScale, aspectRatioIntersection, coordinatesToPositionRestrictions, createAspectRatio, diff, fitToPositionRestrictions, fitToSizeRestrictions, getBrokenRatio, getCenter, getCloserSize, getIntersections, getOppositeSide, getTransitionStyle, inverseMove, isConsistentPosition, isConsistentSize, maxScale, mergePositionRestrictions, minScale, moveToPositionRestrictions, positionToSizeRestrictions, ratio, resizeToSizeRestrictions, rotatePoint, rotateSize, sizeDistance };\n","import { __assign } from 'tslib';\nimport { isFunction, isNumeric, parseNumber } from '../utils/index.js';\nimport { ratio } from './utils.js';\nimport { getPositionRestrictions } from './helpers.js';\n\nfunction reconcileSizeRestrictions(sizeRestrictions) {\n    var restrictions = __assign({}, sizeRestrictions);\n    // Process the border cases when minimum height / width larger than maximum height / width\n    if (restrictions.minWidth > restrictions.maxWidth) {\n        restrictions.minWidth = restrictions.maxWidth;\n    }\n    if (restrictions.minHeight > restrictions.maxHeight) {\n        restrictions.minHeight = restrictions.maxHeight;\n    }\n    return restrictions;\n}\nfunction mergeSizeRestrictions(a, b) {\n    var first = a;\n    var second = __assign({ minWidth: 0, minHeight: 0, maxWidth: Infinity, maxHeight: Infinity }, b);\n    return reconcileSizeRestrictions({\n        maxHeight: Math.min(first.maxHeight, second.maxHeight),\n        minHeight: Math.max(first.minHeight, second.minHeight),\n        maxWidth: Math.min(first.maxWidth, second.maxWidth),\n        minWidth: Math.max(first.minWidth, second.minWidth),\n    });\n}\nfunction calculateSizeRestrictions(state, settings) {\n    var sizeRestrictions = isFunction(settings.sizeRestrictions)\n        ? settings.sizeRestrictions(state, settings)\n        : settings.sizeRestrictions;\n    var positionRestrictions = getPositionRestrictions(state, settings);\n    // User can forget to set some of restrictions, so we should initialize them by default values\n    var restrictions = {\n        minWidth: isNumeric(sizeRestrictions.minWidth) ? parseNumber(sizeRestrictions.minWidth) : 0,\n        minHeight: isNumeric(sizeRestrictions.minHeight) ? parseNumber(sizeRestrictions.minHeight) : 0,\n        maxWidth: isNumeric(sizeRestrictions.maxWidth) ? parseNumber(sizeRestrictions.maxWidth) : Infinity,\n        maxHeight: isNumeric(sizeRestrictions.maxHeight) ? parseNumber(sizeRestrictions.maxHeight) : Infinity,\n    };\n    // The situation, when stencil can't be positioned in cropper due to positionRestrictions should be avoided\n    if (positionRestrictions.left !== undefined && positionRestrictions.right !== undefined) {\n        restrictions.maxWidth = Math.min(restrictions.maxWidth, positionRestrictions.right - positionRestrictions.left);\n    }\n    if (positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined) {\n        restrictions.maxHeight = Math.min(restrictions.maxHeight, positionRestrictions.bottom - positionRestrictions.top);\n    }\n    return reconcileSizeRestrictions(restrictions);\n}\nfunction calculateAreaSizeRestrictions(state, settings) {\n    var sizeRestrictions = isFunction(settings.areaSizeRestrictions)\n        ? settings.areaSizeRestrictions(state, settings)\n        : settings.areaSizeRestrictions;\n    if (sizeRestrictions.maxWidth < Infinity && sizeRestrictions.maxHeight < Infinity) {\n        if (ratio(state.boundary) > sizeRestrictions.maxWidth / sizeRestrictions.maxHeight) {\n            sizeRestrictions.maxHeight = sizeRestrictions.maxWidth / ratio(state.boundary);\n        }\n        else {\n            sizeRestrictions.maxWidth = sizeRestrictions.maxHeight * ratio(state.boundary);\n        }\n    }\n    return reconcileSizeRestrictions(sizeRestrictions);\n}\n\nexport { calculateAreaSizeRestrictions, calculateSizeRestrictions, mergeSizeRestrictions, reconcileSizeRestrictions };\n","import { __assign } from 'tslib';\nimport { isFunction, emptyCoordinates, isNumber, isBoolean } from '../utils/index.js';\nimport { createAspectRatio, rotateSize, moveToPositionRestrictions, getBrokenRatio, ratio, isConsistentSize, isConsistentPosition } from './utils.js';\nimport { calculateAreaSizeRestrictions, calculateSizeRestrictions } from './sizeRestrictions.js';\n\nfunction isInitializedState(state) {\n    return Boolean(state && state.visibleArea && state.coordinates);\n}\nfunction getAreaSizeRestrictions(state, settings) {\n    return calculateAreaSizeRestrictions(state, settings);\n}\nfunction getAreaPositionRestrictions(state, settings) {\n    return isFunction(settings.areaPositionRestrictions)\n        ? settings.areaPositionRestrictions(state, settings)\n        : settings.areaPositionRestrictions;\n}\nfunction getSizeRestrictions(state, settings) {\n    return calculateSizeRestrictions(state, settings);\n}\nfunction getPositionRestrictions(state, settings) {\n    return isFunction(settings.positionRestrictions)\n        ? settings.positionRestrictions(state, settings)\n        : settings.positionRestrictions;\n}\nfunction getCoefficient(state) {\n    return state.visibleArea ? state.visibleArea.width / state.boundary.width : 0;\n}\nfunction getStencilCoordinates(state) {\n    if (isInitializedState(state)) {\n        var _a = state.coordinates, width = _a.width, height = _a.height, left = _a.left, top_1 = _a.top;\n        var coefficient = getCoefficient(state);\n        return {\n            width: width / coefficient,\n            height: height / coefficient,\n            left: (left - state.visibleArea.left) / coefficient,\n            top: (top_1 - state.visibleArea.top) / coefficient,\n        };\n    }\n    else {\n        return emptyCoordinates();\n    }\n}\nfunction getAspectRatio(state, settings) {\n    return createAspectRatio(isFunction(settings.aspectRatio) ? settings.aspectRatio(state, settings) : settings.aspectRatio);\n}\nfunction getDefaultCoordinates(state, settings) {\n    return isFunction(settings.defaultCoordinates)\n        ? settings.defaultCoordinates(state, settings)\n        : settings.defaultCoordinates;\n}\nfunction getDefaultVisibleArea(state, settings) {\n    return isFunction(settings.defaultVisibleArea)\n        ? settings.defaultVisibleArea(state, settings)\n        : settings.defaultVisibleArea;\n}\nfunction getDefaultTransforms(state, settings) {\n    var transforms = __assign(__assign({}, state.transforms), { flip: __assign({}, state.transforms.flip) });\n    if (settings.defaultTransforms) {\n        var defaultTransforms = isFunction(settings.defaultTransforms)\n            ? settings.defaultTransforms(state, settings)\n            : settings.defaultTransforms;\n        if (isNumber(defaultTransforms.rotate)) {\n            transforms.rotate = defaultTransforms.rotate;\n        }\n        if (defaultTransforms.flip) {\n            if (isBoolean(defaultTransforms.flip.horizontal)) {\n                transforms.flip.horizontal = defaultTransforms.flip.horizontal;\n            }\n            if (isBoolean(defaultTransforms.flip.vertical)) {\n                transforms.flip.vertical = defaultTransforms.flip.vertical;\n            }\n        }\n    }\n    return transforms;\n}\nfunction getTransformedImageSize(state) {\n    if (state.imageSize && state.imageSize.width && state.imageSize.height) {\n        return rotateSize(state.imageSize, state.transforms.rotate);\n    }\n    else {\n        return {\n            width: 0,\n            height: 0,\n        };\n    }\n}\nfunction getMinimumSize(state) {\n    // The magic number is the approximation of the handler size\n    // Temporary solution that should be improved in the future\n    return state.coordinates\n        ? Math.min(state.coordinates.width, state.coordinates.height, 20 * getCoefficient(state))\n        : 1;\n}\nfunction getRoundedCoordinates(state, settings) {\n    if (isInitializedState(state)) {\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        var positionRestrictions = getPositionRestrictions(state, settings);\n        var roundCoordinates = {\n            width: Math.round(state.coordinates.width),\n            height: Math.round(state.coordinates.height),\n            left: Math.round(state.coordinates.left),\n            top: Math.round(state.coordinates.top),\n        };\n        if (roundCoordinates.width > sizeRestrictions.maxWidth) {\n            roundCoordinates.width = Math.floor(state.coordinates.width);\n        }\n        else if (roundCoordinates.width < sizeRestrictions.minWidth) {\n            roundCoordinates.width = Math.ceil(state.coordinates.width);\n        }\n        if (roundCoordinates.height > sizeRestrictions.maxHeight) {\n            roundCoordinates.height = Math.floor(state.coordinates.height);\n        }\n        else if (roundCoordinates.height < sizeRestrictions.minHeight) {\n            roundCoordinates.height = Math.ceil(state.coordinates.height);\n        }\n        return moveToPositionRestrictions(roundCoordinates, positionRestrictions);\n    }\n    else {\n        return null;\n    }\n}\nfunction isConsistentState(state, settings) {\n    if (isInitializedState(state)) {\n        return (!getBrokenRatio(ratio(state.coordinates), getAspectRatio(state, settings)) &&\n            isConsistentSize(state.visibleArea, getAreaSizeRestrictions(state, settings)) &&\n            isConsistentSize(state.coordinates, getSizeRestrictions(state, settings)) &&\n            isConsistentPosition(state.visibleArea, getAreaPositionRestrictions(state, settings)) &&\n            isConsistentPosition(state.coordinates, getPositionRestrictions(state, settings)));\n    }\n    else {\n        return true;\n    }\n}\n\nexport { getAreaPositionRestrictions, getAreaSizeRestrictions, getAspectRatio, getCoefficient, getDefaultCoordinates, getDefaultTransforms, getDefaultVisibleArea, getMinimumSize, getPositionRestrictions, getRoundedCoordinates, getSizeRestrictions, getStencilCoordinates, getTransformedImageSize, isConsistentState, isInitializedState };\n","import { deepClone } from '../utils/index.js';\n\nfunction copyState(state) {\n    return deepClone(state);\n}\n\nexport { copyState };\n","import { getCloserSize, createAspectRatio, resizeToSizeRestrictions } from './utils.js';\n\n// Limitations:\n// 1. Assume that maximum width and height always larger than minimum width and height\n// 2. Assume that aspectRatio.minimum < aspectRatio.maximum\n// If you break this limitations function could return null!\nfunction approximateSize(params) {\n    var width = params.width, height = params.height;\n    var sizeRestrictions = params.sizeRestrictions || {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: Infinity,\n        maxHeight: Infinity,\n    };\n    var aspectRatio = createAspectRatio(params.aspectRatio);\n    var coordinates = {\n        width: Math.max(sizeRestrictions.minWidth, Math.min(sizeRestrictions.maxWidth, width)),\n        height: Math.max(sizeRestrictions.minHeight, Math.min(sizeRestrictions.maxHeight, height)),\n    };\n    var candidates = [coordinates];\n    if (aspectRatio) {\n        [aspectRatio.minimum, aspectRatio.maximum].forEach(function (ratio) {\n            if (ratio) {\n                candidates.push({ width: coordinates.width, height: coordinates.width / ratio }, { width: coordinates.height * ratio, height: coordinates.height });\n            }\n        });\n    }\n    // Resize the candidates as much as possible to prevent breaking minimum size\n    candidates = candidates.map(function (candidate) { return resizeToSizeRestrictions(candidate, sizeRestrictions); });\n    // TODO: fix the type of return value\n    return getCloserSize(candidates, { width: width, height: height }, sizeRestrictions, aspectRatio);\n}\n\nexport { approximateSize };\n","import { __assign } from 'tslib';\nimport { ratio, applyMove, diff, getCenter, moveToPositionRestrictions } from './utils.js';\nimport { getAreaSizeRestrictions, getAreaPositionRestrictions } from './helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from './approximateSize.js';\n\nfunction fitVisibleArea(state, settings) {\n    var result = copyState(state);\n    if (state.visibleArea) {\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        // Fit the visible area to its size restrictions and boundary aspect ratio:\n        result.visibleArea = __assign(__assign({}, state.visibleArea), approximateSize({\n            width: state.visibleArea.width,\n            height: state.visibleArea.height,\n            aspectRatio: {\n                minimum: ratio(result.boundary),\n                maximum: ratio(result.boundary),\n            },\n            sizeRestrictions: areaSizeRestrictions,\n        }));\n        // Return the visible area to previous center\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(state.visibleArea), getCenter(result.visibleArea)));\n        // Fit the visible area to positions restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n    }\n    return result;\n}\n\nexport { fitVisibleArea };\n","import 'tslib';\nimport { moveToPositionRestrictions, applyMove } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction moveCoordinatesAlgorithm(coordinates, directions, positionRestrictions) {\n    var movedCoordinates = applyMove(coordinates, directions);\n    return positionRestrictions ? moveToPositionRestrictions(movedCoordinates, positionRestrictions) : movedCoordinates;\n}\n\nexport { moveCoordinatesAlgorithm };\n","import { __assign } from 'tslib';\nimport { applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from './utils.js';\nimport { getAspectRatio, getSizeRestrictions, getPositionRestrictions } from './helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from './approximateSize.js';\n\nfunction fitCoordinates(state, settings) {\n    if (state.coordinates) {\n        var result = copyState(state);\n        var aspectRatio = getAspectRatio(state, settings);\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        // Fit the size of coordinates to existing size restrictions and visible area\n        result.coordinates = __assign(__assign({}, state.coordinates), approximateSize({\n            width: state.coordinates.width,\n            height: state.coordinates.height,\n            aspectRatio: aspectRatio,\n            sizeRestrictions: state.visibleArea\n                ? {\n                    maxWidth: Math.min(state.visibleArea.width, sizeRestrictions.maxWidth),\n                    maxHeight: Math.min(state.visibleArea.height, sizeRestrictions.maxHeight),\n                    minHeight: Math.min(state.visibleArea.height, sizeRestrictions.minHeight),\n                    minWidth: Math.min(state.visibleArea.width, sizeRestrictions.minWidth),\n                }\n                : sizeRestrictions,\n        }));\n        // Return the coordinates to the previous center\n        result.coordinates = applyMove(result.coordinates, diff(getCenter(state.coordinates), getCenter(result.coordinates)));\n        // Fit the coordinates to position restrictions and visible area\n        result.coordinates = moveToPositionRestrictions(result.coordinates, state.visibleArea\n            ? mergePositionRestrictions(coordinatesToPositionRestrictions(state.visibleArea), getPositionRestrictions(result, settings))\n            : getPositionRestrictions(result, settings));\n        return result;\n    }\n    return state;\n}\n\nexport { fitCoordinates };\n","import { __assign } from 'tslib';\nimport { copyState } from './copyState.js';\nimport { fitCoordinates } from '../service/fitCoordinates.js';\nimport { fitVisibleArea } from '../service/fitVisibleArea.js';\n\nfunction setVisibleArea(state, settings, visibleArea, \n// If you set safe to `false`, the coordinates will be able to leave the visible area\nsafe) {\n    if (safe === void 0) { safe = true; }\n    var result = __assign(__assign({}, copyState(state)), { visibleArea: visibleArea });\n    // There is no possibility to break visible area limitations.\n    result = fitVisibleArea(result, settings);\n    if (safe) {\n        result = fitCoordinates(result, settings);\n    }\n    return result;\n}\n\nexport { setVisibleArea };\n","import 'tslib';\nimport { getDefaultTransforms, getDefaultVisibleArea, getDefaultCoordinates } from '../service/helpers.js';\nimport { Priority } from '../types/index.js';\nimport { setCoordinates, SetCoordinatesMode } from './setCoordinates.js';\nimport { setVisibleArea } from './setVisibleArea.js';\n\nfunction createState(options, settings) {\n    var _a, _b, _c, _d, _e;\n    var boundary = options.boundary, image = options.image;\n    var state = {\n        boundary: {\n            width: boundary.width,\n            height: boundary.height,\n        },\n        imageSize: {\n            width: image.width,\n            height: image.height,\n        },\n        transforms: {\n            rotate: ((_a = image.transforms) === null || _a === void 0 ? void 0 : _a.rotate) || 0,\n            flip: {\n                horizontal: ((_c = (_b = image.transforms) === null || _b === void 0 ? void 0 : _b.flip) === null || _c === void 0 ? void 0 : _c.horizontal) || false,\n                vertical: ((_e = (_d = image.transforms) === null || _d === void 0 ? void 0 : _d.flip) === null || _e === void 0 ? void 0 : _e.vertical) || false,\n            },\n        },\n        visibleArea: null,\n        coordinates: null,\n    };\n    if (settings.defaultTransforms) {\n        state.transforms = getDefaultTransforms(state, settings);\n    }\n    if (settings.priority === Priority.visibleArea) {\n        state = setVisibleArea(state, settings, getDefaultVisibleArea(state, settings), false);\n        state = setCoordinates(state, settings, getDefaultCoordinates(state, settings), SetCoordinatesMode.limit);\n    }\n    else {\n        state = setCoordinates(state, settings, getDefaultCoordinates(state, settings), SetCoordinatesMode.unsafe);\n        state = setVisibleArea(state, settings, getDefaultVisibleArea(state, settings), true);\n    }\n    return state;\n}\n\nexport { createState };\n","import 'tslib';\nimport { applyMove, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\n\nfunction moveCoordinates(state, settings, directions) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        result.coordinates = applyMove(result.coordinates, directions);\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\n\nexport { moveCoordinates };\n","import { __assign } from 'tslib';\nimport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS } from '../constants/index.js';\nimport { isGreater, isRoughlyEqual } from '../utils/index.js';\nimport { moveToPositionRestrictions, applyDirections, getIntersections, getOppositeSide, ratio, getBrokenRatio, applyMove, diff } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { moveCoordinatesAlgorithm } from './moveCoordinatesAlgorithm.js';\n\nfunction fitDirections(_a) {\n    var coordinates = _a.coordinates, directions = _a.directions, positionRestrictions = _a.positionRestrictions, sizeRestrictions = _a.sizeRestrictions, preserveRatio = _a.preserveRatio, allowedDirections = _a.allowedDirections, _b = _a.compensate, compensate = _b === void 0 ? true : _b;\n    var fittedDirections = __assign({}, directions);\n    var currentWidth = applyDirections(coordinates, fittedDirections).width;\n    var currentHeight = applyDirections(coordinates, fittedDirections).height;\n    // Prevent strange resizes when the width or height of stencil becomes smaller than 0\n    if (currentWidth < 0) {\n        if (fittedDirections.left < 0 && fittedDirections.right < 0) {\n            fittedDirections.left =\n                -(coordinates.width - sizeRestrictions.minWidth) / (fittedDirections.left / fittedDirections.right);\n            fittedDirections.right =\n                -(coordinates.width - sizeRestrictions.minWidth) / (fittedDirections.right / fittedDirections.left);\n        }\n        else if (fittedDirections.left < 0) {\n            fittedDirections.left = -(coordinates.width - sizeRestrictions.minWidth);\n        }\n        else if (fittedDirections.right < 0) {\n            fittedDirections.right = -(coordinates.width - sizeRestrictions.minWidth);\n        }\n    }\n    if (currentHeight < 0) {\n        if (fittedDirections.top < 0 && fittedDirections.bottom < 0) {\n            fittedDirections.top =\n                -(coordinates.height - sizeRestrictions.minHeight) / (fittedDirections.top / fittedDirections.bottom);\n            fittedDirections.bottom =\n                -(coordinates.height - sizeRestrictions.minHeight) / (fittedDirections.bottom / fittedDirections.top);\n        }\n        else if (fittedDirections.top < 0) {\n            fittedDirections.top = -(coordinates.height - sizeRestrictions.minHeight);\n        }\n        else if (fittedDirections.bottom < 0) {\n            fittedDirections.bottom = -(coordinates.height - sizeRestrictions.minHeight);\n        }\n    }\n    // Prevent breaking limits\n    var breaks = getIntersections(applyDirections(coordinates, fittedDirections), positionRestrictions);\n    var canBeCompensated = ALL_DIRECTIONS.every(function (direction) {\n        return !isGreater(breaks[getOppositeSide(direction)], 0) || allowedDirections[direction];\n    });\n    if (compensate && canBeCompensated) {\n        if (breaks.left && breaks.left > 0 && breaks.right === 0) {\n            fittedDirections.right += breaks.left;\n            fittedDirections.left -= breaks.left;\n        }\n        else if (breaks.right && breaks.right > 0 && breaks.left === 0) {\n            fittedDirections.left += breaks.right;\n            fittedDirections.right -= breaks.right;\n        }\n        if (breaks.top && breaks.top > 0 && breaks.bottom === 0) {\n            fittedDirections.bottom += breaks.top;\n            fittedDirections.top -= breaks.top;\n        }\n        else if (breaks.bottom && breaks.bottom > 0 && breaks.top === 0) {\n            fittedDirections.top += breaks.bottom;\n            fittedDirections.bottom -= breaks.bottom;\n        }\n        breaks = getIntersections(applyDirections(coordinates, fittedDirections), positionRestrictions);\n    }\n    var maxResize = {\n        width: Infinity,\n        height: Infinity,\n        left: Infinity,\n        right: Infinity,\n        top: Infinity,\n        bottom: Infinity,\n    };\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var intersection = breaks[direction];\n        if (intersection && fittedDirections[direction]) {\n            maxResize[direction] = Math.max(0, 1 - intersection / fittedDirections[direction]);\n        }\n    });\n    if (preserveRatio) {\n        var multiplier_1 = Math.min.apply(Math, ALL_DIRECTIONS.map(function (direction) { return maxResize[direction]; }));\n        if (multiplier_1 !== Infinity) {\n            ALL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= multiplier_1;\n            });\n        }\n    }\n    else {\n        ALL_DIRECTIONS.forEach(function (direction) {\n            if (maxResize[direction] !== Infinity) {\n                fittedDirections[direction] *= maxResize[direction];\n            }\n        });\n    }\n    currentWidth = applyDirections(coordinates, fittedDirections).width;\n    currentHeight = applyDirections(coordinates, fittedDirections).height;\n    if (fittedDirections.right + fittedDirections.left) {\n        if (currentWidth > sizeRestrictions.maxWidth) {\n            maxResize.width =\n                (sizeRestrictions.maxWidth - coordinates.width) / (fittedDirections.right + fittedDirections.left);\n        }\n        else if (currentWidth < sizeRestrictions.minWidth) {\n            maxResize.width =\n                (sizeRestrictions.minWidth - coordinates.width) / (fittedDirections.right + fittedDirections.left);\n        }\n    }\n    if (fittedDirections.bottom + fittedDirections.top) {\n        if (currentHeight > sizeRestrictions.maxHeight) {\n            maxResize.height =\n                (sizeRestrictions.maxHeight - coordinates.height) / (fittedDirections.bottom + fittedDirections.top);\n        }\n        else if (currentHeight < sizeRestrictions.minHeight) {\n            maxResize.height =\n                (sizeRestrictions.minHeight - coordinates.height) / (fittedDirections.bottom + fittedDirections.top);\n        }\n    }\n    if (preserveRatio) {\n        var multiplier_2 = Math.min(maxResize.width, maxResize.height);\n        if (multiplier_2 !== Infinity) {\n            ALL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= multiplier_2;\n            });\n        }\n    }\n    else {\n        if (maxResize.width !== Infinity) {\n            HORIZONTAL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= maxResize.width;\n            });\n        }\n        if (maxResize.height !== Infinity) {\n            VERTICAL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= maxResize.height;\n            });\n        }\n    }\n    return fittedDirections;\n}\nfunction distributeOverlap(overlap, first, second) {\n    if (isRoughlyEqual(first + second, 0)) {\n        return overlap / 2;\n    }\n    else if (isRoughlyEqual(first, 0)) {\n        return 0;\n    }\n    else if (isRoughlyEqual(second, 0)) {\n        return overlap;\n    }\n    else {\n        return overlap * Math.abs(first / (first + second));\n    }\n}\nfunction resizeCoordinatesAlgorithm(coordinates, directions, options, limitations) {\n    var aspectRatio = limitations.aspectRatio, positionRestrictions = limitations.positionRestrictions, sizeRestrictions = limitations.sizeRestrictions;\n    var actualCoordinates = __assign({}, coordinates);\n    directions = __assign({}, directions);\n    var allowedDirections = options.allowedDirections || {\n        left: true,\n        right: true,\n        bottom: true,\n        top: true,\n    };\n    // It's possible that coordinates can be smaller than minimum width or minimum height. In this case\n    // corresponding resize should be blocked\n    if (coordinates.width < sizeRestrictions.minWidth) {\n        directions.left = 0;\n        directions.right = 0;\n    }\n    if (coordinates.height < sizeRestrictions.minHeight) {\n        directions.top = 0;\n        directions.bottom = 0;\n    }\n    ALL_DIRECTIONS.forEach(function (direction) {\n        if (!allowedDirections[direction]) {\n            directions[direction] = 0;\n        }\n    });\n    // 1. First step: determine the safe and desired area\n    directions = fitDirections({\n        coordinates: actualCoordinates,\n        directions: directions,\n        sizeRestrictions: sizeRestrictions,\n        positionRestrictions: positionRestrictions,\n        allowedDirections: allowedDirections,\n    });\n    // 2. Second step: fix desired box to correspondent to aspect ratio\n    var currentWidth = applyDirections(actualCoordinates, directions).width;\n    var currentHeight = applyDirections(actualCoordinates, directions).height;\n    // Checks ratio:\n    var ratioBroken = options.preserveAspectRatio\n        ? ratio(actualCoordinates)\n        : getBrokenRatio(currentWidth / currentHeight, aspectRatio);\n    if (ratioBroken) {\n        var respectDirection = options.respectDirection;\n        if (respectDirection !== 'width' && respectDirection !== 'height') {\n            if (actualCoordinates.width >= actualCoordinates.height || ratioBroken === 1) {\n                respectDirection = 'width';\n            }\n            else {\n                respectDirection = 'height';\n            }\n        }\n        if (respectDirection === 'width') {\n            var overlapHeight = currentWidth / ratioBroken - actualCoordinates.height;\n            if (allowedDirections.top && allowedDirections.bottom) {\n                var top_1 = directions.top, bottom = directions.bottom;\n                directions.bottom = distributeOverlap(overlapHeight, bottom, top_1);\n                directions.top = distributeOverlap(overlapHeight, top_1, bottom);\n            }\n            else if (allowedDirections.bottom) {\n                directions.bottom = overlapHeight;\n            }\n            else if (allowedDirections.top) {\n                directions.top = overlapHeight;\n            }\n            else if (allowedDirections.right) {\n                directions.right = 0;\n            }\n            else if (allowedDirections.left) {\n                directions.left = 0;\n            }\n        }\n        else if (respectDirection === 'height') {\n            var overlapWidth = actualCoordinates.width - currentHeight * ratioBroken;\n            if (allowedDirections.left && allowedDirections.right) {\n                var left = directions.left, right = directions.right;\n                directions.left = -distributeOverlap(overlapWidth, left, right);\n                directions.right = -distributeOverlap(overlapWidth, right, left);\n            }\n            else if (allowedDirections.left) {\n                directions.left = -overlapWidth;\n            }\n            else if (allowedDirections.right) {\n                directions.right = -overlapWidth;\n            }\n            else if (allowedDirections.top) {\n                directions.top = 0;\n            }\n            else if (allowedDirections.bottom) {\n                directions.bottom = 0;\n            }\n        }\n        // 3. Third step: check if desired box with correct aspect ratios break some limits and fit to this conditions\n        directions = fitDirections({\n            directions: directions,\n            coordinates: actualCoordinates,\n            sizeRestrictions: sizeRestrictions,\n            positionRestrictions: positionRestrictions,\n            preserveRatio: true,\n            compensate: options.compensate,\n            allowedDirections: allowedDirections,\n        });\n    }\n    // 4. Check if ratio broken (temporary):\n    currentWidth = applyDirections(actualCoordinates, directions).width;\n    currentHeight = applyDirections(actualCoordinates, directions).height;\n    ratioBroken = options.preserveAspectRatio\n        ? ratio(actualCoordinates)\n        : getBrokenRatio(currentWidth / currentHeight, aspectRatio);\n    if (ratioBroken && isGreater(Math.abs(ratioBroken - currentWidth / currentHeight), 0)) {\n        ALL_DIRECTIONS.forEach(function (direction) {\n            directions[direction] = 0;\n        });\n    }\n    return moveCoordinatesAlgorithm({\n        width: coordinates.width + directions.right + directions.left,\n        height: coordinates.height + directions.top + directions.bottom,\n        left: coordinates.left,\n        top: coordinates.top,\n    }, {\n        left: -directions.left,\n        top: -directions.top,\n    }, positionRestrictions);\n}\nfunction anchorToMassPoint(coordinates, anchor) {\n    var plainAnchor = anchor.toLowerCase();\n    return {\n        left: coordinates.left +\n            coordinates.width * (plainAnchor.indexOf('west') !== -1 ? 1 : plainAnchor.indexOf('east') !== -1 ? 0 : 0.5),\n        top: coordinates.top +\n            coordinates.height *\n                (plainAnchor.indexOf('north') !== -1 ? 1 : plainAnchor.indexOf('south') !== -1 ? 0 : 0.5),\n    };\n}\nfunction anchorToAllowedDirections(anchor) {\n    var plainAnchor = anchor.toLowerCase();\n    return {\n        left: plainAnchor.indexOf('east') === -1,\n        top: plainAnchor.indexOf('south') === -1,\n        right: plainAnchor.indexOf('west') === -1,\n        bottom: plainAnchor.indexOf('north') === -1,\n    };\n}\nfunction anchorMoveToResizeDirections(anchor, directions) {\n    var plainAnchor = anchor.toLowerCase();\n    var normalizedDirections = {\n        left: plainAnchor.indexOf('west') === -1 ? directions.left : -directions.left,\n        top:  -directions.top,\n        right: directions.left,\n        bottom: directions.top,\n    };\n    if (['north', 'south', 'center'].every(function (el) { return plainAnchor.indexOf(el) === -1; })) {\n        normalizedDirections.top = 0;\n        normalizedDirections.bottom = 0;\n    }\n    if (['west', 'east', 'center'].every(function (el) { return plainAnchor.indexOf(el) === -1; })) {\n        normalizedDirections.left = 0;\n        normalizedDirections.right = 0;\n    }\n    var allowedDirections = anchorToAllowedDirections(anchor);\n    ALL_DIRECTIONS.forEach(function (direction) {\n        if (!allowedDirections[direction]) {\n            normalizedDirections[direction] = 0;\n        }\n    });\n    return normalizedDirections;\n}\nfunction anchoredResizeCoordinatesAlgorithm(coordinates, anchor, directions, options, limitations) {\n    var reference = options.reference;\n    var resizeDirections = anchorMoveToResizeDirections(anchor, directions);\n    var allowedDirections = anchorToAllowedDirections(anchor);\n    var result = resizeCoordinatesAlgorithm(coordinates, resizeDirections, __assign(__assign({}, options), { allowedDirections: allowedDirections }), limitations);\n    if (reference) {\n        // Move the result to anchor\n        result = applyMove(result, diff(anchorToMassPoint(reference, anchor), anchorToMassPoint(result, anchor)));\n    }\n    return moveToPositionRestrictions(result, limitations.positionRestrictions);\n}\n\nexport { anchorMoveToResizeDirections, anchorToAllowedDirections, anchoredResizeCoordinatesAlgorithm, fitDirections, resizeCoordinatesAlgorithm };\n","import { __assign } from 'tslib';\nimport { mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { getMinimumSize, getSizeRestrictions, isInitializedState, getPositionRestrictions, getAspectRatio } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { anchoredResizeCoordinatesAlgorithm } from '../algorithms/resizeCoordinatesAlgorithm.js';\n\nfunction resizeCoordinates(state, settings, anchor, directions, options) {\n    var minimumSize = getMinimumSize(state);\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    return isInitializedState(state)\n        ? __assign(__assign({}, copyState(state)), { coordinates: anchoredResizeCoordinatesAlgorithm(state.coordinates, anchor, directions, options, {\n                positionRestrictions: mergePositionRestrictions(getPositionRestrictions(state, settings), coordinatesToPositionRestrictions(state.visibleArea)),\n                sizeRestrictions: {\n                    maxWidth: Math.min(sizeRestrictions.maxWidth, state.visibleArea.width),\n                    maxHeight: Math.min(sizeRestrictions.maxHeight, state.visibleArea.height),\n                    minWidth: Math.max(Math.min(sizeRestrictions.minWidth, state.visibleArea.width), minimumSize),\n                    minHeight: Math.max(Math.min(sizeRestrictions.minHeight, state.visibleArea.height), minimumSize),\n                },\n                aspectRatio: getAspectRatio(state, settings),\n            }) }) : state;\n}\n\nexport { resizeCoordinates };\n","import { __assign } from 'tslib';\nimport { ratio, applyScale, resizeToSizeRestrictions, inverseMove, fitToPositionRestrictions, coordinatesToPositionRestrictions, applyMove, moveToPositionRestrictions } from '../service/utils.js';\nimport { getSizeRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { fitCoordinates } from '../service/fitCoordinates.js';\n\nfunction setBoundary(state, settings, boundary) {\n    var result = __assign(__assign({}, copyState(state)), { boundary: boundary });\n    if (result.visibleArea && result.coordinates && state.visibleArea) {\n        // Scale visible area size to fit new boundary:\n        result.visibleArea.height = result.visibleArea.width / ratio(boundary);\n        result.visibleArea.top += (state.visibleArea.height - result.visibleArea.height) / 2;\n        // Scale visible area to prevent overlap coordinates (and its minimum size)\n        var sizeRestrictions = getSizeRestrictions(result, settings);\n        if (Math.max(sizeRestrictions.minHeight, result.coordinates.height) - result.visibleArea.height > 0 ||\n            Math.max(sizeRestrictions.minWidth, result.coordinates.width) - result.visibleArea.width > 0) {\n            result.visibleArea = applyScale(result.visibleArea, Math.max(Math.max(sizeRestrictions.minHeight, result.coordinates.height) / result.visibleArea.height, Math.max(sizeRestrictions.minWidth, result.coordinates.width) / result.visibleArea.width));\n        }\n        // Scale visible area to prevent overlap area restrictions\n        result.visibleArea = resizeToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n        // Move visible are to prevent moving of the coordinates:\n        var move = inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea)));\n        if (result.visibleArea.width < result.coordinates.width) {\n            move.left = 0;\n        }\n        if (result.visibleArea.height < result.coordinates.height) {\n            move.top = 0;\n        }\n        result.visibleArea = applyMove(result.visibleArea, move);\n        // Move visible area to prevent overlap the area restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        result = fitCoordinates(result, settings);\n    }\n    return result;\n}\n\nexport { setBoundary };\n","import 'tslib';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { rotateImageAlgorithm } from '../algorithms/rotateImageAlgorithm.js';\nimport { flipImageAlgorithm } from '../algorithms/flipImageAlgorithm.js';\nimport { transformImageAlgorithm } from '../algorithms/transformImageAlgorithm.js';\n\nfunction transformImage(state, settings, transform) {\n    if (transform.rotate) {\n        state = rotateImageAlgorithm(state, settings, transform.rotate);\n    }\n    if (transform.flip) {\n        state = flipImageAlgorithm(state, settings, transform.flip.horizontal, transform.flip.vertical);\n    }\n    if (transform.move || transform.scale) {\n        state = transformImageAlgorithm(state, settings, transform);\n    }\n    return state;\n}\n\nexport { transformImage };\n","import { __assign } from 'tslib';\nimport { isNumber } from '../utils/index.js';\nimport { rotatePoint, getCenter, diff, resizeToSizeRestrictions, moveToPositionRestrictions, applyMove } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport { isInitializedState, getTransformedImageSize, getSizeRestrictions, getAspectRatio, getAreaSizeRestrictions, getPositionRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction rotateImageAlgorithm(state, settings, rotate) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var angle = isNumber(rotate) ? rotate : rotate.angle;\n        var imageCenter = rotatePoint(getCenter(__assign({ left: 0, top: 0 }, getTransformedImageSize(state))), angle);\n        result.transforms.rotate += angle;\n        result.coordinates = __assign(__assign({}, approximateSize({\n            sizeRestrictions: getSizeRestrictions(result, settings),\n            aspectRatio: getAspectRatio(result, settings),\n            width: result.coordinates.width,\n            height: result.coordinates.height,\n        })), rotatePoint(getCenter(result.coordinates), angle));\n        var center = !isNumber(rotate) && rotate.center ? rotate.center : getCenter(state.coordinates);\n        var shift = diff(getCenter(state.coordinates), rotatePoint(getCenter(state.coordinates), angle, center));\n        var imageSize = getTransformedImageSize(result);\n        result.coordinates.left -= imageCenter.left - imageSize.width / 2 + result.coordinates.width / 2 - shift.left;\n        result.coordinates.top -= imageCenter.top - imageSize.height / 2 + result.coordinates.height / 2 - shift.top;\n        // Check that visible area doesn't break the area restrictions:\n        result.visibleArea = resizeToSizeRestrictions(result.visibleArea, mergeSizeRestrictions(getAreaSizeRestrictions(result, settings), {\n            minWidth: result.coordinates.width,\n            minHeight: result.coordinates.height,\n        }));\n        result.coordinates = moveToPositionRestrictions(result.coordinates, getPositionRestrictions(result, settings));\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(result.coordinates), getCenter(state.coordinates)));\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        return result;\n    }\n    return state;\n}\n\nexport { rotateImageAlgorithm };\n","import 'tslib';\nimport { rotatePoint, getCenter, applyMove, diff, moveToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getTransformedImageSize, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction flipImageAlgorithm(state, settings, horizontal, vertical) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var rotate = state.transforms.rotate;\n        var imageSize = getTransformedImageSize(state);\n        var changed = {\n            horizontal: horizontal,\n            vertical: vertical,\n        };\n        if (changed.horizontal || changed.vertical) {\n            var imageCenter = rotatePoint({\n                left: imageSize.width / 2,\n                top: imageSize.height / 2,\n            }, -rotate);\n            var oldCenter = rotatePoint(getCenter(result.coordinates), -rotate);\n            var newCenter = rotatePoint({\n                left: changed.horizontal ? imageCenter.left - (oldCenter.left - imageCenter.left) : oldCenter.left,\n                top: changed.vertical ? imageCenter.top - (oldCenter.top - imageCenter.top) : oldCenter.top,\n            }, rotate);\n            result.coordinates = applyMove(result.coordinates, diff(newCenter, getCenter(result.coordinates)));\n            oldCenter = rotatePoint(getCenter(result.visibleArea), -rotate);\n            newCenter = rotatePoint({\n                left: changed.horizontal ? imageCenter.left - (oldCenter.left - imageCenter.left) : oldCenter.left,\n                top: changed.vertical ? imageCenter.top - (oldCenter.top - imageCenter.top) : oldCenter.top,\n            }, rotate);\n            result.visibleArea = applyMove(result.visibleArea, diff(newCenter, getCenter(result.visibleArea)));\n            result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        }\n        if (changed.horizontal) {\n            result.transforms.flip.horizontal = !state.transforms.flip.horizontal;\n        }\n        if (changed.vertical) {\n            result.transforms.flip.vertical = !state.transforms.flip.vertical;\n        }\n        return result;\n    }\n    return state;\n}\n\nexport { flipImageAlgorithm };\n","import 'tslib';\nimport { isNumber, isRoughlyEqual } from '../utils/index.js';\nimport { applyMove, maxScale, positionToSizeRestrictions, minScale, applyScale, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions, getCenter, inverseMove, fitToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getSizeRestrictions, getPositionRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction transformImageAlgorithm(state, settings, transform) {\n    var _a;\n    var _b = transform.scale, scale = _b === void 0 ? 1 : _b, _c = transform.move, move = _c === void 0 ? {} : _c;\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        // It's reversed because zooming in the image is actually zooming out visible area\n        var scaleFactor = 1 / (isNumber(scale) ? scale : scale.factor);\n        var scaleCenter = !isNumber(scale) ? scale.center : undefined;\n        var isAllowedScale = !isRoughlyEqual(scaleFactor, 1);\n        var areaScale = 1;\n        var stencilScale = 1;\n        result.visibleArea = applyMove(result.visibleArea, {\n            left: move.left || 0,\n            top: move.top || 0,\n        });\n        var sizeRestrictions = getSizeRestrictions(result, settings);\n        var positionRestrictions = getPositionRestrictions(result, settings);\n        var areaSizeRestrictions = getAreaSizeRestrictions(result, settings);\n        var scaleRestrictions = {\n            stencil: {\n                minimum: Math.max(sizeRestrictions.minWidth ? sizeRestrictions.minWidth / result.coordinates.width : 0, sizeRestrictions.minHeight ? sizeRestrictions.minHeight / result.coordinates.height : 0),\n                maximum: Math.min(sizeRestrictions.maxWidth ? sizeRestrictions.maxWidth / result.coordinates.width : Infinity, sizeRestrictions.maxHeight ? sizeRestrictions.maxHeight / result.coordinates.height : Infinity, maxScale(result.coordinates, positionToSizeRestrictions(positionRestrictions))),\n            },\n            area: {\n                maximum: maxScale(result.visibleArea, areaSizeRestrictions),\n                minimum: minScale(result.visibleArea, areaSizeRestrictions),\n            },\n        };\n        // If there is scaling then begin scale\n        if (scaleFactor && isAllowedScale) {\n            // Determine scale factor\n            if (scaleFactor < 1) {\n                stencilScale = Math.max(scaleFactor, Math.max(scaleRestrictions.area.minimum, scaleRestrictions.stencil.minimum));\n                if (stencilScale > 1) {\n                    stencilScale = 1;\n                }\n            }\n            else if (scaleFactor > 1) {\n                stencilScale = Math.min(scaleFactor, Math.min(scaleRestrictions.area.maximum, scaleRestrictions.stencil.maximum));\n                if (stencilScale < 1) {\n                    stencilScale = 1;\n                }\n            }\n        }\n        if (stencilScale) {\n            // Resize stencil with area as much as possible\n            result.visibleArea = applyScale(result.visibleArea, stencilScale, scaleCenter);\n        }\n        var relativeCoordinates = {\n            left: state.coordinates.left - state.visibleArea.left,\n            right: state.visibleArea.width + state.visibleArea.left - (state.coordinates.width + state.coordinates.left),\n            top: state.coordinates.top - state.visibleArea.top,\n            bottom: state.visibleArea.height + state.visibleArea.top - (state.coordinates.height + state.coordinates.top),\n        };\n        // Move the area to fit to the coordinates limits:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, {\n            left: positionRestrictions.left !== undefined\n                ? positionRestrictions.left - relativeCoordinates.left * stencilScale\n                : undefined,\n            top: positionRestrictions.top !== undefined\n                ? positionRestrictions.top - relativeCoordinates.top * stencilScale\n                : undefined,\n            bottom: positionRestrictions.bottom !== undefined\n                ? positionRestrictions.bottom + relativeCoordinates.bottom * stencilScale\n                : undefined,\n            right: positionRestrictions.right !== undefined\n                ? positionRestrictions.right + relativeCoordinates.right * stencilScale\n                : undefined,\n        });\n        // But the more important to fit are to the area restrictions, so we should fit it to that restrictions:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        // Set the same coordinates of stencil inside visible area\n        result.coordinates.width = result.coordinates.width * stencilScale;\n        result.coordinates.height = result.coordinates.height * stencilScale;\n        result.coordinates.left = result.visibleArea.left + relativeCoordinates.left * stencilScale;\n        result.coordinates.top = result.visibleArea.top + relativeCoordinates.top * stencilScale;\n        // Move the coordinates to prevent the intersection with visible area and position restrictions\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), positionRestrictions));\n        // Resize only area if stencil can't be resized and stencil resize is disabled\n        if (isAllowedScale && scaleFactor && ((_a = settings.transformImage) === null || _a === void 0 ? void 0 : _a.adjustStencil)) {\n            if (scaleFactor > 1) {\n                areaScale = Math.min(scaleRestrictions.area.maximum, scaleFactor) / stencilScale;\n            }\n            else if (scaleFactor < 1) {\n                areaScale = Math.max(result.coordinates.height / result.visibleArea.height, result.coordinates.width / result.visibleArea.width, scaleFactor / stencilScale);\n            }\n            if (areaScale !== 1) {\n                result.visibleArea = applyScale(result.visibleArea, areaScale, scaleFactor > 1 ? scaleCenter : getCenter(result.coordinates));\n                // Move to prevent the breaking of the area restrictions:\n                result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n                // Move to prevent the intersection with coordinates:\n                result.visibleArea = applyMove(result.visibleArea, inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea))));\n            }\n        }\n        return result;\n    }\n    return state;\n}\n\nexport { transformImageAlgorithm };\n","import { __assign } from 'tslib';\nimport { getBrokenRatio, ratio, applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport { isInitializedState, getAspectRatio, getSizeRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions, getPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction reconcileState(state, settings) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var aspectRatio = getAspectRatio(state, settings);\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        // Fit the size of coordinates to existing size restrictions and visible area\n        var brokenRatio = getBrokenRatio(ratio(state.coordinates), aspectRatio);\n        var desiredSize = brokenRatio\n            ? {\n                height: state.coordinates.height,\n                width: state.coordinates.height * brokenRatio,\n            }\n            : state.coordinates;\n        result.coordinates = __assign(__assign({}, result.coordinates), approximateSize({\n            width: desiredSize.width,\n            height: desiredSize.height,\n            aspectRatio: aspectRatio,\n            sizeRestrictions: mergeSizeRestrictions(areaSizeRestrictions, sizeRestrictions),\n        }));\n        // Return the coordinates to the previous center\n        result.coordinates = applyMove(result.coordinates, diff(getCenter(state.coordinates), getCenter(result.coordinates)));\n        var scaleModifier = Math.max(result.coordinates.width / result.visibleArea.width, result.coordinates.height / result.visibleArea.height, 1);\n        // Fit the visible area to its size restrictions and boundary aspect ratio:\n        result.visibleArea = __assign(__assign({}, state.visibleArea), approximateSize({\n            width: state.visibleArea.width * scaleModifier,\n            height: state.visibleArea.height * scaleModifier,\n            aspectRatio: {\n                minimum: ratio(result.boundary),\n                maximum: ratio(result.boundary),\n            },\n            sizeRestrictions: areaSizeRestrictions,\n        }));\n        // Return the visible area to previous center\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(state.visibleArea), getCenter(result.visibleArea)));\n        // Fit the visible area to positions restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        // Fit the coordinates to position restrictions and visible area\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\n\nexport { reconcileState };\n","import { isNumber } from '../utils/index.js';\nimport { getCoefficient } from './helpers.js';\n\nfunction normalizeResizeDirections(state, directions) {\n    var coefficient = getCoefficient(state);\n    return {\n        left: isNumber(directions.left) ? directions.left * coefficient : 0,\n        top: isNumber(directions.top) ? directions.top * coefficient : 0,\n        right: isNumber(directions.right) ? directions.right * coefficient : 0,\n        bottom: isNumber(directions.bottom) ? directions.bottom * coefficient : 0,\n    };\n}\nfunction normalizeCenter(state, center) {\n    var coefficient = getCoefficient(state);\n    if (state.visibleArea) {\n        return {\n            left: center.left * coefficient + state.visibleArea.left,\n            top: center.top * coefficient + state.visibleArea.top,\n        };\n    }\n    return center;\n}\nfunction normalizeFlip(state, flip) {\n    if (state) {\n        var normalizedAngle = Math.abs(state.transforms.rotate % 180);\n        if (normalizedAngle <= 45 || normalizedAngle >= 135) {\n            return flip;\n        }\n        else {\n            return {\n                horizontal: flip.vertical,\n                vertical: flip.horizontal,\n            };\n        }\n    }\n    return flip;\n}\nfunction fillMoveDirections(directions) {\n    return {\n        left: isNumber(directions.left) ? directions.left : 0,\n        top: isNumber(directions.top) ? directions.top : 0,\n    };\n}\nfunction fillResizeDirections(directions) {\n    return {\n        left: isNumber(directions.left) ? directions.left : 0,\n        top: isNumber(directions.top) ? directions.top : 0,\n        right: isNumber(directions.right) ? directions.right : 0,\n        bottom: isNumber(directions.bottom) ? directions.bottom : 0,\n    };\n}\nfunction normalizeMoveDirections(state, directions) {\n    var coefficient = getCoefficient(state);\n    return {\n        left: isNumber(directions.left) ? directions.left * coefficient : 0,\n        top: isNumber(directions.top) ? directions.top * coefficient : 0,\n    };\n}\nfunction normalizeImageTransform(state, transform) {\n    if (transform.scale) {\n        transform.scale = {\n            factor: isNumber(transform.scale) ? transform.scale : transform.scale.factor,\n            center: !isNumber(transform.scale) && transform.scale.center\n                ? normalizeCenter(state, transform.scale.center)\n                : undefined,\n        };\n    }\n    if (transform.rotate) {\n        transform.rotate = {\n            angle: isNumber(transform.rotate) ? transform.rotate : transform.rotate.angle,\n            center: !isNumber(transform.rotate) && transform.rotate.center\n                ? normalizeCenter(state, transform.rotate.center)\n                : undefined,\n        };\n    }\n    if (transform.move) {\n        transform.move = normalizeMoveDirections(state, transform.move);\n    }\n    return transform;\n}\n\nexport { fillMoveDirections, fillResizeDirections, normalizeCenter, normalizeFlip, normalizeImageTransform, normalizeMoveDirections, normalizeResizeDirections };\n","import { __assign, __rest, __spreadArrays } from 'tslib';\nimport { getOptions, deepClone, debounce, isArray, isFunction, deepCompare, isUndefined, isObject } from '../utils/index.js';\nimport { getCoefficient, isConsistentState, getStencilCoordinates, getRoundedCoordinates } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport { setCoordinates, SetCoordinatesMode } from '../state/setCoordinates.js';\nimport { setVisibleArea } from '../state/setVisibleArea.js';\nimport { createState } from '../state/createState.js';\nimport { moveCoordinates } from '../state/moveCoordinates.js';\nimport { resizeCoordinates } from '../state/resizeCoordinates.js';\nimport { setBoundary } from '../state/setBoundary.js';\nimport { transformImage } from '../state/transformImage.js';\nimport { reconcileState } from '../state/reconcileState.js';\nimport { normalizeImageTransform, normalizeFlip, normalizeMoveDirections, fillMoveDirections, normalizeResizeDirections, fillResizeDirections } from '../service/normalize.js';\nimport { hasInteractions } from '../service/interactions.js';\n\nfunction runCallback(callback, getInstance) {\n    if (callback && getInstance) {\n        var instance = getInstance();\n        if (instance) {\n            callback(instance);\n        }\n    }\n}\nfunction runCallbacks(callbacks, getInstance) {\n    callbacks.forEach(function (callback) {\n        runCallback(callback, getInstance);\n    });\n}\nvar AbstractCropperInstance = /** @class */ (function () {\n    function AbstractCropperInstance() {\n        var _this = this;\n        this.getTransitions = function () {\n            var data = _this.getData();\n            var transitions = _this.getProps().transitions;\n            return __assign(__assign({}, getOptions(transitions, {\n                timingFunction: 'ease-in-out',\n                duration: 350,\n            })), { active: data.transitions });\n        };\n        this.getInteractions = function () {\n            var interactions = _this.getData().interactions;\n            return deepClone(interactions);\n        };\n        this.hasInteractions = function () {\n            var interactions = _this.getData().interactions;\n            return hasInteractions(interactions);\n        };\n        this.startTransitions = function () {\n            var _a = _this.getProps(), onTransitionsStart = _a.onTransitionsStart, onUpdate = _a.onUpdate, getInstance = _a.getInstance;\n            var _b = _this.getData(), transitions = _b.transitions, data = __rest(_b, [\"transitions\"]);\n            _this.setData(__assign(__assign({}, data), { transitions: true }));\n            if (!transitions) {\n                runCallbacks([onTransitionsStart, onUpdate], getInstance);\n            }\n            _this.endTransitions();\n        };\n        this.endTransitions = debounce(function () {\n            var _a = _this.getProps(), onTransitionsEnd = _a.onTransitionsEnd, onUpdate = _a.onUpdate, getInstance = _a.getInstance;\n            _this.setData(__assign(__assign({}, _this.getData()), { transitions: false }));\n            runCallbacks([onTransitionsEnd, onUpdate], getInstance);\n        }, function () {\n            return _this.getTransitions().duration;\n        });\n        this.applyPostProcess = function (action, state) {\n            var _a = _this.getProps(), settings = _a.settings, postProcess = _a.postProcess;\n            var name = action.name, _b = action.interaction, interaction = _b === void 0 ? false : _b, _c = action.transitions, transitions = _c === void 0 ? false : _c, _d = action.immediately, immediately = _d === void 0 ? false : _d;\n            var preparedAction = {\n                name: name,\n                interaction: interaction,\n                transitions: transitions,\n                immediately: immediately,\n            };\n            if (isArray(postProcess)) {\n                return postProcess.reduce(function (processedState, p) { return p(processedState, settings, preparedAction); }, state);\n            }\n            else if (isFunction(postProcess)) {\n                return postProcess(state, settings, preparedAction);\n            }\n            else {\n                return state;\n            }\n        };\n        this.updateState = function (modifier, options, callbacks) {\n            if (options === void 0) { options = {}; }\n            if (callbacks === void 0) { callbacks = []; }\n            var _a = options.transitions, transitions = _a === void 0 ? false : _a;\n            var _b = _this.getProps(), onTransitionsStart = _b.onTransitionsStart, getInstance = _b.getInstance, onChange = _b.onChange, onUpdate = _b.onUpdate, settings = _b.settings;\n            var previousData = _this.getData();\n            var state = isFunction(modifier) ? modifier(previousData.state, settings) : modifier;\n            var tolerance = state ? 1e-3 * getCoefficient(state) : 1e-3;\n            var somethingChanged = !deepCompare(previousData.state, state, tolerance);\n            var affectTransitionProperties = [\n                'coordinates',\n                'boundary',\n                'visibleArea',\n                'imageSize',\n                'transforms',\n            ].some(function (property) { var _a; return !deepCompare((_a = previousData.state) === null || _a === void 0 ? void 0 : _a[property], state === null || state === void 0 ? void 0 : state[property], tolerance); });\n            var currentData = previousData;\n            if (somethingChanged) {\n                if (transitions && affectTransitionProperties) {\n                    _this.endTransitions();\n                }\n                currentData = __assign(__assign({}, currentData), { state: copyState(state), transitions: transitions && affectTransitionProperties });\n                _this.setData(currentData);\n                runCallback(onChange, getInstance);\n            }\n            if (currentData.transitions && !previousData.transitions) {\n                runCallback(onTransitionsStart, getInstance);\n            }\n            runCallbacks(__spreadArrays(callbacks, [onUpdate]), getInstance);\n        };\n        this.setInteractions = function (interactions) {\n            var _a = _this.getProps(), onInteractionStart = _a.onInteractionStart, onInteractionEnd = _a.onInteractionEnd, getInstance = _a.getInstance;\n            var previousInteractions = _this.getInteractions();\n            var currentInteractions = __assign(__assign({}, previousInteractions), interactions);\n            if (!deepCompare(previousInteractions, currentInteractions)) {\n                _this.setData(__assign(__assign({}, _this.getData()), { interactions: currentInteractions }));\n            }\n            if (hasInteractions(previousInteractions) !== hasInteractions(currentInteractions)) {\n                if (!hasInteractions(previousInteractions)) {\n                    runCallback(onInteractionStart, getInstance);\n                }\n                else {\n                    var state_1 = _this.getData().state;\n                    _this.updateState(function () {\n                        return state_1 &&\n                            _this.applyPostProcess({\n                                name: 'interactionEnd',\n                                immediately: true,\n                                transitions: true,\n                            }, state_1);\n                    }, {\n                        transitions: true,\n                    }, [onInteractionEnd]);\n                }\n            }\n        };\n        this.resetState = function (boundary, image) {\n            _this.updateState(_this.createDefaultState(boundary, image));\n        };\n        this.clear = function () {\n            _this.updateState(null);\n        };\n        this.reconcileState = function (options) {\n            if (options === void 0) { options = {}; }\n            var _a = _this.getProps(), reconcileStateAlgorithm = _a.reconcileStateAlgorithm, settings = _a.settings;\n            var state = _this.getData().state;\n            var _b = options.transitions, transitions = _b === void 0 ? false : _b;\n            if (state && !isConsistentState(state, settings)) {\n                var reconciledState = (reconcileStateAlgorithm || reconcileState)(state, settings);\n                reconciledState = _this.applyPostProcess({\n                    name: 'reconcileState',\n                    immediately: true,\n                    transitions: transitions,\n                }, reconciledState);\n                _this.updateState(reconciledState, {\n                    transitions: transitions,\n                });\n            }\n        };\n        this.transformImage = function (transform, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.immediately, immediately = _c === void 0 ? false : _c, _d = options.normalize, normalize = _d === void 0 ? true : _d;\n            var _e = _this.getProps(), transformImageAlgorithm = _e.transformImageAlgorithm, onTransformImage = _e.onTransformImage, onTransformImageEnd = _e.onTransformImageEnd, settings = _e.settings;\n            var state = _this.getData().state;\n            var callbacks = [];\n            if (state) {\n                if (normalize) {\n                    transform = normalizeImageTransform(state, transform);\n                }\n                var result = _this.applyPostProcess({\n                    name: 'transformImage',\n                    transitions: transitions,\n                    immediately: immediately,\n                }, (transformImageAlgorithm || transformImage)(state, settings, transform));\n                callbacks.push(onTransformImage);\n                if (interaction) {\n                    _this.setInteractions({\n                        transformImage: {\n                            rotate: !isUndefined(transform.rotate),\n                            flip: !isUndefined(transform.flip),\n                            scale: !isUndefined(transform.scale),\n                            move: !isUndefined(transform.move),\n                        },\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({\n                        name: 'transformImageEnd',\n                        transitions: transitions,\n                        immediately: true,\n                    }, result);\n                    callbacks.push(onTransformImageEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.transformImageEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.immediately, immediately = _a === void 0 ? true : _a, _b = options.transitions, transitions = _b === void 0 ? true : _b;\n            var state = _this.getData().state;\n            var onTransformImageEnd = _this.getProps().onTransformImageEnd;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'transformImageEnd', immediately: immediately, transitions: transitions }, state); }, {\n                transitions: transitions,\n            }, [onTransformImageEnd]);\n            _this.setInteractions({\n                transformImage: {\n                    rotate: false,\n                    flip: false,\n                    scale: false,\n                    move: false,\n                },\n            });\n        };\n        this.zoomImage = function (scale, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                scale: scale,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.moveImage = function (left, top, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                move: {\n                    left: left,\n                    top: top,\n                },\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.flipImage = function (horizontal, vertical, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? true : _d;\n            var state = _this.getState();\n            var flip = {\n                horizontal: horizontal,\n                vertical: vertical,\n            };\n            _this.transformImage({\n                flip: state && normalize ? normalizeFlip(state, flip) : flip,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions });\n        };\n        this.rotateImage = function (rotate, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                rotate: rotate,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.reset = function (boundary, image) {\n            _this.resetState(boundary, image);\n        };\n        this.setState = function (modifier, options) {\n            if (options === void 0) { options = {}; }\n            var settings = _this.getSettings();\n            var state = _this.getData().state;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b, _c = options.interaction, interaction = _c === void 0 ? false : _c, _d = options.postprocess, postprocess = _d === void 0 ? false : _d;\n            var newState = modifier && (isFunction(modifier) ? modifier(state, settings) : __assign(__assign({}, state), modifier));\n            _this.updateState(function () {\n                return postprocess\n                    ? newState &&\n                        _this.applyPostProcess({\n                            name: 'setState',\n                            immediately: immediately,\n                            transitions: transitions,\n                            interaction: interaction,\n                        }, newState)\n                    : newState;\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setCoordinates = function (transforms, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), setCoordinatesAlgorithm = _a.setCoordinatesAlgorithm, settings = _a.settings;\n            var _b = options.transitions, transitions = _b === void 0 ? true : _b, _c = options.immediately, immediately = _c === void 0 ? true : _c;\n            _this.updateState(function () {\n                return state &&\n                    _this.applyPostProcess({\n                        name: 'setCoordinates',\n                        immediately: immediately,\n                        transitions: transitions,\n                    }, (setCoordinatesAlgorithm || setCoordinates)(state, settings, transforms, SetCoordinatesMode.zoom));\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setVisibleArea = function (visibleArea, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b;\n            var state = _this.getData().state;\n            var _c = _this.getProps(), setVisibleAreaAlgorithm = _c.setVisibleAreaAlgorithm, settings = _c.settings;\n            _this.updateState(function () {\n                return state &&\n                    _this.applyPostProcess({ name: 'setVisibleArea', immediately: immediately, transitions: transitions }, (setVisibleAreaAlgorithm || setVisibleArea)(state, settings, visibleArea));\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setBoundary = function (boundary, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), setBoundaryAlgorithm = _a.setBoundaryAlgorithm, settings = _a.settings;\n            var _b = options.transitions, transitions = _b === void 0 ? false : _b, _c = options.immediately, immediately = _c === void 0 ? true : _c;\n            if (boundary) {\n                _this.updateState(function () {\n                    return state &&\n                        _this.applyPostProcess({ name: 'setBoundary', immediately: immediately, transitions: transitions }, (setBoundaryAlgorithm || setBoundary)(state, settings, boundary));\n                });\n            }\n            else {\n                _this.updateState(null);\n            }\n        };\n        this.moveCoordinates = function (directions, options) {\n            if (options === void 0) { options = {}; }\n            var data = _this.getData();\n            var _a = _this.getProps(), moveCoordinatesAlgorithm = _a.moveCoordinatesAlgorithm, onMove = _a.onMove, onMoveEnd = _a.onMoveEnd, settings = _a.settings;\n            var _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? false : _c, _d = options.immediately, immediately = _d === void 0 ? false : _d, _e = options.normalize, normalize = _e === void 0 ? true : _e;\n            var callbacks = [];\n            if (!data.transitions && data.state) {\n                var normalizedDirections = normalize\n                    ? normalizeMoveDirections(data.state, directions)\n                    : fillMoveDirections(directions);\n                var result = _this.applyPostProcess({ name: 'moveCoordinates', interaction: interaction, immediately: immediately, transitions: transitions }, (moveCoordinatesAlgorithm || moveCoordinates)(data.state, settings, normalizedDirections));\n                callbacks.push(onMove);\n                if (interaction) {\n                    _this.setInteractions({\n                        moveCoordinates: true,\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({ name: 'moveCoordinatesEnd', interaction: interaction, immediately: immediately, transitions: transitions }, result);\n                    callbacks.push(onMoveEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.moveCoordinatesEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var onMoveEnd = _this.getProps().onMoveEnd;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'moveCoordinatesEnd', transitions: transitions, immediately: immediately }, state); }, {\n                transitions: transitions,\n            }, [onMoveEnd]);\n            _this.setInteractions({\n                moveCoordinates: false,\n            });\n        };\n        this.resizeCoordinates = function (anchor, directions, parameters, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), resizeCoordinatesAlgorithm = _a.resizeCoordinatesAlgorithm, onResize = _a.onResize, onResizeEnd = _a.onResizeEnd, settings = _a.settings;\n            var _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? false : _c, _d = options.immediately, immediately = _d === void 0 ? false : _d, _e = options.normalize, normalize = _e === void 0 ? true : _e;\n            var transitionsOptions = _this.getTransitions();\n            if (!transitionsOptions.active && state) {\n                var callbacks = [];\n                var normalizedDirections = normalize\n                    ? normalizeResizeDirections(state, directions)\n                    : fillResizeDirections(directions);\n                var result = _this.applyPostProcess({ name: 'resizeCoordinates', interaction: interaction, immediately: immediately, transitions: transitions }, (resizeCoordinatesAlgorithm || resizeCoordinates)(state, settings, anchor, normalizedDirections, isObject(parameters) ? parameters : {}));\n                callbacks.push(onResize);\n                if (interaction) {\n                    _this.setInteractions({\n                        resizeCoordinates: true,\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({ name: 'resizeCoordinatesEnd', interaction: interaction, immediately: immediately, transitions: transitions }, result);\n                    callbacks.push(onResizeEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.resizeCoordinatesEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var onResizeEnd = _this.getProps().onResizeEnd;\n            var state = _this.getData().state;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'resizeCoordinatesEnd', transitions: transitions, immediately: immediately }, state); }, {\n                transitions: transitions,\n            }, [onResizeEnd]);\n            _this.setInteractions({\n                resizeCoordinates: false,\n            });\n        };\n        this.getStencilCoordinates = function () {\n            var state = _this.getData().state;\n            return getStencilCoordinates(state);\n        };\n        this.getCoordinates = function (options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var settings = _this.getProps().settings;\n            if (state && state.coordinates) {\n                var _a = options.round, round = _a === void 0 ? true : _a;\n                if (round) {\n                    return getRoundedCoordinates(state, settings);\n                }\n                else {\n                    return __assign({}, state.coordinates);\n                }\n            }\n            else {\n                return null;\n            }\n        };\n        this.getVisibleArea = function () {\n            var state = _this.getData().state;\n            if (state === null || state === void 0 ? void 0 : state.visibleArea) {\n                return __assign({}, state.visibleArea);\n            }\n            else {\n                return null;\n            }\n        };\n        this.getSettings = function () {\n            var settings = _this.getProps().settings;\n            return __assign({}, settings);\n        };\n        this.getState = function () {\n            var state = _this.getData().state;\n            return copyState(state);\n        };\n        this.getTransforms = function () {\n            var state = _this.getData().state;\n            return state\n                ? deepClone(state.transforms)\n                : {\n                    rotate: 0,\n                    flip: {\n                        horizontal: false,\n                        vertical: false,\n                    },\n                };\n        };\n        this.createDefaultState = function (boundary, image) {\n            var _a = _this.getProps(), createStateAlgorithm = _a.createStateAlgorithm, settings = _a.settings;\n            return _this.applyPostProcess({\n                name: 'createState',\n                immediately: true,\n                transitions: false,\n            }, (createStateAlgorithm || createState)({\n                image: image,\n                boundary: boundary,\n            }, settings));\n        };\n        this.isConsistent = function () {\n            var state = _this.getData().state;\n            var settings = _this.getProps().settings;\n            return state ? isConsistentState(state, settings) : true;\n        };\n    }\n    return AbstractCropperInstance;\n}());\n\nexport { AbstractCropperInstance };\n","import { __assign } from 'tslib';\nimport { positionToSizeRestrictions, ratio } from '../service/utils.js';\nimport { getSizeRestrictions, getAspectRatio, getPositionRestrictions } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction defaultSize(state, settings) {\n    var imageSize = state.imageSize, visibleArea = state.visibleArea;\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    var aspectRatio = getAspectRatio(state, settings);\n    var area;\n    if (visibleArea) {\n        area = visibleArea;\n    }\n    else {\n        var sizeRestrictions_1 = positionToSizeRestrictions(getPositionRestrictions(state, settings));\n        area = {\n            width: Math.max(sizeRestrictions_1.minWidth, Math.min(sizeRestrictions_1.maxWidth, imageSize.width)),\n            height: Math.max(sizeRestrictions_1.minHeight, Math.min(sizeRestrictions_1.maxHeight, imageSize.height)),\n        };\n    }\n    var optimalRatio = Math.min(aspectRatio.maximum || Infinity, Math.max(aspectRatio.minimum || 0, ratio(area)));\n    var size = area.width < area.height\n        ? {\n            width: area.width * 0.8,\n            height: (area.width * 0.8) / optimalRatio,\n        }\n        : {\n            height: area.height * 0.8,\n            width: area.height * 0.8 * optimalRatio,\n        };\n    return approximateSize(__assign(__assign({}, size), { aspectRatio: aspectRatio, sizeRestrictions: sizeRestrictions }));\n}\n\nexport { defaultSize };\n","import { isNumeric, parseNumber } from '../utils/index.js';\n\nfunction retrieveSizeRestrictions(settings) {\n    return {\n        minWidth: isNumeric(settings.minWidth) ? parseNumber(settings.minWidth) : 0,\n        minHeight: isNumeric(settings.minHeight) ? parseNumber(settings.minHeight) : 0,\n        maxWidth: isNumeric(settings.maxWidth) ? parseNumber(settings.maxWidth) : Infinity,\n        maxHeight: isNumeric(settings.maxHeight) ? parseNumber(settings.maxHeight) : Infinity,\n    };\n}\nfunction pixelsRestrictions(state, settings) {\n    return retrieveSizeRestrictions(settings);\n}\n\nexport { pixelsRestrictions, retrieveSizeRestrictions };\n","import 'tslib';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultPosition(state) {\n    var visibleArea = state.visibleArea, coordinates = state.coordinates;\n    var area = visibleArea || getTransformedImageSize(state);\n    return {\n        left: (visibleArea ? visibleArea.left : 0) + area.width / 2 - (coordinates ? coordinates.width / 2 : 0),\n        top: (visibleArea ? visibleArea.top : 0) + area.height / 2 - (coordinates ? coordinates.height / 2 : 0),\n    };\n}\n\nexport { defaultPosition };\n","import { __assign } from 'tslib';\nimport { isFunction } from '../utils/index.js';\nimport { mergePositionRestrictions, createAspectRatio } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { defaultPositionRestrictions } from './defaultPositionRestrictions.js';\nexport { defaultPositionRestrictions } from './defaultPositionRestrictions.js';\nimport { defaultVisibleArea } from './defaultVisibleArea.js';\nexport { defaultVisibleArea } from './defaultVisibleArea.js';\nimport { defaultSize } from './defaultSize.js';\nexport { defaultSize } from './defaultSize.js';\nimport { pixelsRestrictions } from './defaultSizeRestrictions.js';\nexport { pixelsRestrictions, retrieveSizeRestrictions } from './defaultSizeRestrictions.js';\nimport { defaultPosition } from './defaultPosition.js';\nexport { defaultPosition } from './defaultPosition.js';\nimport { defaultAreaPositionRestrictions } from './defaultAreaPositionRestrictions.js';\nexport { defaultAreaPositionRestrictions } from './defaultAreaPositionRestrictions.js';\nimport { defaultAreaSizeRestrictions } from './defaultAreaSizeRestrictions.js';\nexport { defaultAreaSizeRestrictions } from './defaultAreaSizeRestrictions.js';\nexport { fillBoundary, fitBoundary } from './defaultBoundary.js';\nexport { defaultStencilConstraints } from './defaultStencilConstraints.js';\n\nfunction withDefaultSizeRestrictions(sizeRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(sizeRestrictions) ? sizeRestrictions(state, basicSettings) : sizeRestrictions;\n        return mergeSizeRestrictions(pixelsRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultPositionRestrictions(positionRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(positionRestrictions)\n            ? positionRestrictions(state, basicSettings)\n            : positionRestrictions;\n        return mergePositionRestrictions(defaultPositionRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultAreaPositionRestrictions(areaPositionRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(areaPositionRestrictions)\n            ? areaPositionRestrictions(state, basicSettings)\n            : areaPositionRestrictions;\n        return mergePositionRestrictions(defaultAreaPositionRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultAreaSizeRestrictions(areaSizeRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(areaSizeRestrictions)\n            ? areaSizeRestrictions(state, basicSettings)\n            : areaSizeRestrictions;\n        return mergeSizeRestrictions(defaultAreaSizeRestrictions(state, basicSettings), value);\n    };\n}\nfunction createDefaultSettings(params) {\n    return __assign(__assign({}, params), { sizeRestrictions: function (state, basicSettings) {\n            var restrictions;\n            if (params.sizeRestrictions) {\n                restrictions = isFunction(params.sizeRestrictions)\n                    ? params.sizeRestrictions(state, basicSettings)\n                    : params.sizeRestrictions;\n            }\n            else {\n                restrictions = pixelsRestrictions(state, basicSettings);\n            }\n            return restrictions;\n        }, areaPositionRestrictions: function (state, basicSettings) {\n            if (params.areaPositionRestrictions) {\n                return isFunction(params.areaPositionRestrictions)\n                    ? params.areaPositionRestrictions(state, basicSettings)\n                    : params.areaPositionRestrictions;\n            }\n            else {\n                return defaultAreaPositionRestrictions(state, basicSettings);\n            }\n        }, areaSizeRestrictions: function (state, basicSettings) {\n            if (params.areaSizeRestrictions) {\n                return isFunction(params.areaSizeRestrictions)\n                    ? params.areaSizeRestrictions(state, basicSettings)\n                    : params.areaSizeRestrictions;\n            }\n            else {\n                return defaultAreaSizeRestrictions(state, basicSettings);\n            }\n        }, positionRestrictions: function (state, basicSettings) {\n            if (params.positionRestrictions) {\n                return isFunction(params.positionRestrictions)\n                    ? params.positionRestrictions(state, basicSettings)\n                    : params.positionRestrictions;\n            }\n            else {\n                return defaultPositionRestrictions(state, basicSettings);\n            }\n        }, defaultCoordinates: function (state, basicSettings) {\n            if (params.defaultCoordinates) {\n                return isFunction(params.defaultCoordinates)\n                    ? params.defaultCoordinates(state, basicSettings)\n                    : params.defaultCoordinates;\n            }\n            else {\n                var defaultSizeAlgorithm = params.defaultSize;\n                if (!defaultSizeAlgorithm) {\n                    defaultSizeAlgorithm = defaultSize;\n                }\n                var size = isFunction(defaultSizeAlgorithm)\n                    ? defaultSizeAlgorithm(state, basicSettings)\n                    : defaultSizeAlgorithm;\n                var defaultPositionAlgorithm_1 = params.defaultPosition || defaultPosition;\n                return [\n                    size,\n                    function (state) { return (__assign({}, (isFunction(defaultPositionAlgorithm_1)\n                        ? defaultPositionAlgorithm_1(state, basicSettings)\n                        : defaultPositionAlgorithm_1))); },\n                ];\n            }\n        }, defaultVisibleArea: function (state, basicSettings) {\n            if (params.defaultVisibleArea) {\n                return isFunction(params.defaultVisibleArea)\n                    ? params.defaultVisibleArea(state, basicSettings)\n                    : params.defaultVisibleArea;\n            }\n            else {\n                return defaultVisibleArea(state, basicSettings);\n            }\n        }, aspectRatio: function (state, basicSettings) {\n            return createAspectRatio(isFunction(params.aspectRatio) ? params.aspectRatio(state, basicSettings) : params.aspectRatio);\n        } });\n}\n\nexport { createDefaultSettings, withDefaultAreaPositionRestrictions, withDefaultAreaSizeRestrictions, withDefaultPositionRestrictions, withDefaultSizeRestrictions };\n","import 'tslib';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport { ImageRestriction } from '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultAreaPositionRestrictions(state, settings) {\n    var visibleArea = state.visibleArea, boundary = state.boundary;\n    var imageRestriction = settings.imageRestriction;\n    var imageSize = getTransformedImageSize(state);\n    var restrictions = {};\n    if (imageRestriction === ImageRestriction.fillArea) {\n        restrictions = {\n            left: 0,\n            top: 0,\n            right: imageSize.width,\n            bottom: imageSize.height,\n        };\n    }\n    else if (imageRestriction === ImageRestriction.fitArea) {\n        if (ratio(boundary) > ratio(imageSize)) {\n            restrictions = {\n                top: 0,\n                bottom: imageSize.height,\n            };\n            if (visibleArea) {\n                if (visibleArea.width > imageSize.width) {\n                    restrictions.left = -(visibleArea.width - imageSize.width) / 2;\n                    restrictions.right = imageSize.width - restrictions.left;\n                }\n                else {\n                    restrictions.left = 0;\n                    restrictions.right = imageSize.width;\n                }\n            }\n        }\n        else {\n            restrictions = {\n                left: 0,\n                right: imageSize.width,\n            };\n            if (visibleArea) {\n                if (visibleArea.height > imageSize.height) {\n                    restrictions.top = -(visibleArea.height - imageSize.height) / 2;\n                    restrictions.bottom = imageSize.height - restrictions.top;\n                }\n                else {\n                    restrictions.top = 0;\n                    restrictions.bottom = imageSize.height;\n                }\n            }\n        }\n    }\n    return restrictions;\n}\n\nexport { defaultAreaPositionRestrictions };\n","import 'tslib';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport { ImageRestriction } from '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultAreaSizeRestrictions(state, settings) {\n    var boundary = state.boundary;\n    var imageRestriction = settings.imageRestriction;\n    var imageSize = getTransformedImageSize(state);\n    var restrictions = {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: Infinity,\n        maxHeight: Infinity,\n    };\n    if (imageRestriction === ImageRestriction.fillArea) {\n        restrictions.maxWidth = imageSize.width;\n        restrictions.maxHeight = imageSize.height;\n    }\n    else if (imageRestriction === ImageRestriction.fitArea) {\n        if (ratio(boundary) > ratio(imageSize)) {\n            restrictions.maxHeight = imageSize.height;\n            restrictions.maxWidth = imageSize.height * ratio(boundary);\n        }\n        else {\n            restrictions.maxWidth = imageSize.width;\n            restrictions.maxHeight = imageSize.width / ratio(boundary);\n        }\n    }\n    return restrictions;\n}\n\nexport { defaultAreaSizeRestrictions };\n","import 'tslib';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultPositionRestrictions(state, settings) {\n    var imageSize = getTransformedImageSize(state);\n    var limits = {};\n    if (settings.imageRestriction && settings.imageRestriction !== 'none') {\n        limits = {\n            left: 0,\n            top: 0,\n            right: imageSize.width,\n            bottom: imageSize.height,\n        };\n    }\n    return limits;\n}\n\nexport { defaultPositionRestrictions };\n","import { __assign } from 'tslib';\nimport { ratio, resizeToSizeRestrictions, getIntersections, coordinatesToPositionRestrictions, moveToPositionRestrictions } from '../service/utils.js';\nimport { getTransformedImageSize, getAreaSizeRestrictions } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultVisibleArea(state, settings) {\n    var coordinates = state.coordinates, boundary = state.boundary;\n    var imageSize = getTransformedImageSize(state);\n    var boundaryRatio = ratio(boundary);\n    if (coordinates) {\n        // Visible area will try to fit reference:\n        var reference = {\n            height: Math.max(coordinates.height, imageSize.height),\n            width: Math.max(coordinates.width, imageSize.width),\n        };\n        var visibleArea = {\n            left: 0,\n            top: 0,\n            width: ratio(reference) > boundaryRatio ? reference.width : reference.height * boundaryRatio,\n            height: ratio(reference) > boundaryRatio ? reference.width / boundaryRatio : reference.height,\n        };\n        // Visible area should correspond its restrictions:\n        visibleArea = resizeToSizeRestrictions(visibleArea, getAreaSizeRestrictions(state, settings));\n        // Visible area will try to center stencil:\n        visibleArea.left = coordinates.left + coordinates.width / 2 - visibleArea.width / 2;\n        visibleArea.top = coordinates.top + coordinates.height / 2 - visibleArea.height / 2;\n        // TODO: Controversial behavior:\n        // If the coordinates are beyond image visible area will be allowed to be beyond image alike:\n        var coordinatesIntersection = getIntersections(coordinates, coordinatesToPositionRestrictions(__assign({ left: 0, top: 0 }, imageSize)));\n        var restrictions = {};\n        if (!coordinatesIntersection.left && !coordinatesIntersection.right && visibleArea.width <= imageSize.width) {\n            restrictions.left = 0;\n            restrictions.right = imageSize.width;\n        }\n        if (!coordinatesIntersection.top && !coordinatesIntersection.bottom && visibleArea.height <= imageSize.height) {\n            restrictions.top = 0;\n            restrictions.bottom = imageSize.height;\n        }\n        return moveToPositionRestrictions(visibleArea, restrictions);\n    }\n    else {\n        var imageRatio = ratio(imageSize);\n        var areaProperties = {\n            height: imageRatio < boundaryRatio ? imageSize.height : imageSize.width / boundaryRatio,\n            width: imageRatio < boundaryRatio ? imageSize.height * boundaryRatio : imageSize.width,\n        };\n        return {\n            left: imageSize.width / 2 - areaProperties.width / 2,\n            top: imageSize.height / 2 - areaProperties.height / 2,\n            width: areaProperties.width,\n            height: areaProperties.height,\n        };\n    }\n}\n\nexport { defaultVisibleArea };\n","import { __assign } from 'tslib';\nimport { isCrossOriginURL, isBlob, isLocal } from '../utils/index.js';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize, getCoefficient } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nvar XHR_DONE = 4;\nfunction base64ToArrayBuffer(base64) {\n    base64 = base64.replace(/^data:([^;]+);base64,/gim, '');\n    var binary = atob(base64);\n    var len = binary.length;\n    var buffer = new ArrayBuffer(len);\n    var view = new Uint8Array(buffer);\n    for (var i = 0; i < len; i++) {\n        view[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n}\nfunction objectURLToBlob(url, callback) {\n    var http = new XMLHttpRequest();\n    http.open('GET', url, true);\n    http.responseType = 'blob';\n    http.onload = function () {\n        if (this.status == 200 || this.status === 0) {\n            callback(this.response);\n        }\n    };\n    http.send();\n}\nfunction getTransforms(orientation) {\n    var result = {\n        flip: {\n            horizontal: false,\n            vertical: false,\n        },\n        rotate: 0,\n    };\n    if (orientation) {\n        switch (orientation) {\n            case 2:\n                result.flip.horizontal = true;\n                break;\n            case 3:\n                result.rotate = -180;\n                break;\n            case 4:\n                result.flip.vertical = true;\n                break;\n            case 5:\n                result.rotate = 90;\n                result.flip.vertical = true;\n                break;\n            case 6:\n                result.rotate = 90;\n                break;\n            case 7:\n                result.rotate = 90;\n                result.flip.horizontal = true;\n                break;\n            case 8:\n                result.rotate = -90;\n                break;\n        }\n    }\n    return result;\n}\nfunction getImageData(img) {\n    return new Promise(function (resolve, reject) {\n        try {\n            if (img) {\n                if (/^data:/i.test(img)) {\n                    // Data URL\n                    resolve(base64ToArrayBuffer(img));\n                }\n                else if (/^blob:/i.test(img)) {\n                    // Blob\n                    var fileReader_1 = new FileReader();\n                    fileReader_1.onload = function (e) {\n                        var _a;\n                        resolve((_a = e.target) === null || _a === void 0 ? void 0 : _a.result);\n                    };\n                    objectURLToBlob(img, function (blob) {\n                        fileReader_1.readAsArrayBuffer(blob);\n                    });\n                }\n                else {\n                    // Simple URL\n                    var http_1 = new XMLHttpRequest();\n                    http_1.onreadystatechange = function () {\n                        if (http_1.readyState !== XHR_DONE)\n                            return;\n                        if (http_1.status === 200 || http_1.status === 0) {\n                            resolve(http_1.response);\n                        }\n                        else {\n                            reject('Warning: could not load an image to parse its orientation');\n                        }\n                    };\n                    http_1.onprogress = function () {\n                        // Abort the request directly if it not a JPEG image for better performance\n                        if (http_1.getResponseHeader('content-type') !== 'image/jpeg') {\n                            http_1.abort();\n                        }\n                    };\n                    http_1.withCredentials = false;\n                    http_1.open('GET', img, true);\n                    http_1.responseType = 'arraybuffer';\n                    http_1.send(null);\n                }\n            }\n            else {\n                reject('Error: the image is empty');\n            }\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n}\nfunction getStyleTransforms(transforms) {\n    var _a = transforms.rotate, rotate = _a === void 0 ? 0 : _a, _b = transforms.flip, flip = _b === void 0 ? { horizontal: false, vertical: false } : _b, _c = transforms.scale, scale = _c === void 0 ? 1 : _c;\n    return \" rotate(\" + rotate + \"deg) scaleX(\" + scale * (flip.horizontal ? -1 : 1) + \") scaleY(\" + scale * (flip.vertical ? -1 : 1) + \")\";\n}\nfunction getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    var i;\n    for (i = start, length += start; i < length; i++) {\n        str += String.fromCharCode(dataView.getUint8(i));\n    }\n    return str;\n}\nfunction resetAndGetOrientation(arrayBuffer) {\n    try {\n        var dataView = new DataView(arrayBuffer);\n        var orientation_1;\n        var exifIDCode = void 0;\n        var tiffOffset = void 0;\n        var littleEndian = void 0;\n        var app1Start = void 0;\n        var ifdStart = void 0;\n        // Only handle JPEG image (start by 0xFFD8)\n        if (dataView.getUint8(0) === 0xff && dataView.getUint8(1) === 0xd8) {\n            var length_1 = dataView.byteLength;\n            var offset = 2;\n            while (offset + 1 < length_1) {\n                if (dataView.getUint8(offset) === 0xff && dataView.getUint8(offset + 1) === 0xe1) {\n                    app1Start = offset;\n                    break;\n                }\n                offset++;\n            }\n        }\n        if (app1Start) {\n            exifIDCode = app1Start + 4;\n            tiffOffset = app1Start + 10;\n            if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n                var endianness = dataView.getUint16(tiffOffset);\n                littleEndian = endianness === 0x4949;\n                if (littleEndian || endianness === 0x4d4d /* bigEndian */) {\n                    if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002a) {\n                        var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n                        if (firstIFDOffset >= 0x00000008) {\n                            ifdStart = tiffOffset + firstIFDOffset;\n                        }\n                    }\n                }\n            }\n        }\n        if (ifdStart) {\n            var length_2 = dataView.getUint16(ifdStart, littleEndian);\n            for (var i = 0; i < length_2; i++) {\n                var offset = ifdStart + i * 12 + 2;\n                if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n                    // 8 is the offset of the current tag's value\n                    offset += 8;\n                    // Get the original orientation value\n                    orientation_1 = dataView.getUint16(offset, littleEndian);\n                    // Override the orientation with its default value\n                    dataView.setUint16(offset, 1, littleEndian);\n                    break;\n                }\n            }\n        }\n        return orientation_1;\n    }\n    catch (error) {\n        return null;\n    }\n}\nfunction arrayBufferToDataURL(arrayBuffer) {\n    var chunks = [];\n    // Chunk Typed Array for better performance\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n    while (uint8.length > 0) {\n        var value = uint8.subarray(0, chunkSize);\n        chunks.push(String.fromCharCode.apply(null, (Array.from ? Array.from(value) : value.slice())));\n        uint8 = uint8.subarray(chunkSize);\n    }\n    return \"data:image/jpeg;base64,\" + btoa(chunks.join(''));\n}\nfunction getImage(_a) {\n    var src = _a.src, _b = _a.arrayBuffer, arrayBuffer = _b === void 0 ? null : _b, _c = _a.orientation, orientation = _c === void 0 ? null : _c;\n    var options = {\n        src: src,\n        arrayBuffer: arrayBuffer,\n        revoke: false,\n        transforms: {\n            flip: {\n                horizontal: false,\n                vertical: false,\n            },\n            rotate: 0,\n        },\n    };\n    if (arrayBuffer && orientation && orientation > 1) {\n        if (isBlob(src) || !isLocal(src)) {\n            options.src = URL.createObjectURL(new Blob([arrayBuffer]));\n            options.revoke = true;\n        }\n        else {\n            options.src = arrayBufferToDataURL(arrayBuffer);\n        }\n    }\n    else {\n        options.src = src;\n    }\n    if (orientation) {\n        options.transforms = getTransforms(orientation);\n    }\n    return options;\n}\nfunction parseImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    var checkOrientation = settings.checkOrientation, parse = settings.parse;\n    return new Promise(function (resolve) {\n        if (checkOrientation || parse) {\n            getImageData(src)\n                .then(function (data) {\n                var orientation = resetAndGetOrientation(data);\n                resolve(getImage(data\n                    ? { src: src, arrayBuffer: data, orientation: orientation }\n                    : { src: src, arrayBuffer: null, orientation: null }));\n            })\n                .catch(function (error) {\n                console.warn(error);\n                resolve(getImage({ src: src }));\n            });\n        }\n        else {\n            resolve(getImage({ src: src }));\n        }\n    });\n}\nfunction createImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    return new Promise(function (resolve, reject) {\n        var image = document.createElement('img');\n        if (settings.crossOrigin) {\n            image.crossOrigin = settings.crossOrigin !== true ? settings.crossOrigin : 'anonymous';\n        }\n        image.src = src;\n        image.style.visibility = 'hidden';\n        image.style.position = 'fixed';\n        document.body.appendChild(image);\n        if (image.complete) {\n            resolve(image);\n            document.body.removeChild(image);\n        }\n        else {\n            image.addEventListener('load', function () {\n                resolve(image);\n                document.body.removeChild(image);\n            });\n            image.addEventListener('error', function () {\n                reject(null);\n                document.body.removeChild(image);\n            });\n        }\n    });\n}\nfunction loadImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    return parseImage(src, __assign(__assign({}, settings), { crossOrigin: isCrossOriginURL(src) && settings.crossOrigin })).then(function (options) {\n        return new Promise(function (resolve, reject) {\n            createImage(options.src, settings)\n                .then(function (image) {\n                resolve(__assign(__assign({}, options), { width: image.naturalWidth, height: image.naturalHeight }));\n            })\n                .catch(function () {\n                reject(null);\n            });\n        });\n    });\n}\nfunction getImageStyle(image, state, area, coefficient, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    var optimalImageSize = image.width > image.height\n        ? {\n            width: Math.min(512, image.width),\n            height: Math.min(512, image.width) / (image.width / image.height),\n        }\n        : {\n            height: Math.min(512, image.height),\n            width: Math.min(512, image.height) * (image.width / image.height),\n        };\n    var actualImageSize = getTransformedImageSize(state);\n    var imageTransforms = {\n        rotate: state.transforms.rotate,\n        flip: {\n            horizontal: state.transforms.flip.horizontal,\n            vertical: state.transforms.flip.vertical,\n        },\n        translateX: area.left / coefficient,\n        translateY: area.top / coefficient,\n        scale: 1 / coefficient,\n    };\n    var compensations = {\n        rotate: {\n            left: (optimalImageSize.width - actualImageSize.width) / (2 * coefficient),\n            top: (optimalImageSize.height - actualImageSize.height) / (2 * coefficient),\n        },\n        scale: {\n            left: ((1 - 1 / coefficient) * optimalImageSize.width) / 2,\n            top: ((1 - 1 / coefficient) * optimalImageSize.height) / 2,\n        },\n    };\n    var transforms = __assign(__assign({}, imageTransforms), { scale: imageTransforms.scale * (image.width / optimalImageSize.width) });\n    var result = {\n        width: optimalImageSize.width + \"px\",\n        height: optimalImageSize.height + \"px\",\n        left: '0px',\n        top: '0px',\n        transition: 'none',\n        transform: \"translate3d(\" + (-compensations.rotate.left - compensations.scale.left - imageTransforms.translateX) + \"px, \" + (-compensations.rotate.top - compensations.scale.top - imageTransforms.translateY) + \"px, 0px)\" + getStyleTransforms(transforms),\n        willChange: 'none',\n    };\n    if (transitions && transitions.active) {\n        result.willChange = 'transform';\n        result.transition = transitions.duration + \"ms \" + transitions.timingFunction;\n    }\n    return result;\n}\nfunction getBackgroundStyle(image, state, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    if (image && state && state.visibleArea) {\n        return getImageStyle(image, state, state.visibleArea, getCoefficient(state), transitions);\n    }\n    else {\n        return {};\n    }\n}\nfunction getPreviewStyle(image, state, size, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    if (image && state && state.visibleArea && state.coordinates) {\n        return getImageStyle(image, state, state.coordinates, ratio(state.coordinates) > ratio(size)\n            ? state.coordinates.width / size.width\n            : state.coordinates.height / size.height, transitions);\n    }\n    else {\n        return {};\n    }\n}\n\nexport { createImage, getBackgroundStyle, getImageStyle, getPreviewStyle, getStyleTransforms, loadImage };\n","function stretchCropperBoundary(boundary, stretcher, size) {\n    // Reset stretcher\n    stretcher.style.width = \"0px\";\n    stretcher.style.height = \"0px\";\n    // Try to fit the size by width:\n    stretcher.style.width = Math.max(boundary.clientWidth, size.width) + \"px\";\n    // After that try to fit the size by height and resulted width:\n    var ratio = size.width / size.height;\n    stretcher.style.height = Math.max(boundary.clientHeight, stretcher.clientWidth / ratio) + \"px\";\n    stretcher.style.width = stretcher.clientHeight * ratio + \"px\";\n}\nfunction stretchPreviewBoundary(boundary, stretcher, size) {\n    // Reset stretcher\n    stretcher.style.width = \"0px\";\n    stretcher.style.height = \"0px\";\n    // Try to fit the size by width:\n    stretcher.style.width = Math.max(boundary.getBoundingClientRect().width, size.width) + \"px\";\n    // After that try to fit the size by height and resulted width:\n    var ratio = size.width / size.height;\n    stretcher.style.height = Math.max(boundary.getBoundingClientRect().height, stretcher.getBoundingClientRect().width / ratio) + \"px\";\n    stretcher.style.width = stretcher.getBoundingClientRect().height * ratio + \"px\";\n    if (stretcher.clientWidth / stretcher.clientHeight > boundary.clientWidth / boundary.clientHeight) {\n        if (stretcher.clientWidth > boundary.clientWidth) {\n            stretcher.style.width = boundary.clientWidth + \"px\";\n            stretcher.style.height = boundary.clientWidth / ratio + \"px\";\n        }\n    }\n    else {\n        if (stretcher.clientHeight > boundary.clientHeight) {\n            stretcher.style.height = boundary.clientHeight + \"px\";\n            stretcher.style.width = boundary.clientHeight * ratio + \"px\";\n        }\n    }\n}\n\nexport { stretchCropperBoundary, stretchPreviewBoundary };\n","function fitBoundary(boundary, size) {\n    var areaHeight = boundary.clientHeight;\n    var areaWidth = boundary.clientWidth;\n    var currentHeight = areaHeight;\n    var currentWidth = (size.width * areaHeight) / size.height;\n    if (currentWidth > areaWidth) {\n        currentWidth = areaWidth;\n        currentHeight = (size.height * areaWidth) / size.width;\n    }\n    return {\n        width: currentWidth,\n        height: currentHeight,\n    };\n}\nfunction fillBoundary(boundary) {\n    var _a = boundary.getBoundingClientRect(), width = _a.width, height = _a.height;\n    return {\n        width: width,\n        height: height,\n    };\n}\n\nexport { fillBoundary, fitBoundary };\n","import { __assign } from 'tslib';\nimport { isNumeric } from '../utils/index.js';\nimport { rotateSize, rotatePoint, getCenter } from '../service/utils.js';\nimport { isInitializedState } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction prepareSource(canvas, image, _a) {\n    var rotate = _a.rotate, flip = _a.flip;\n    var originalSize = {\n        width: 'naturalWidth' in image ? image.naturalWidth : image.width,\n        height: 'naturalHeight' in image ? image.naturalHeight : image.height,\n    };\n    var transformedSize = rotateSize(originalSize, rotate);\n    var ctx = canvas.getContext('2d');\n    canvas.height = transformedSize.height;\n    canvas.width = transformedSize.width;\n    if (ctx) {\n        ctx.save();\n        // Rotation:\n        var canvasCenter = rotatePoint(getCenter(__assign({ left: 0, top: 0 }, originalSize)), rotate);\n        ctx.translate(-(canvasCenter.left - transformedSize.width / 2), -(canvasCenter.top - transformedSize.height / 2));\n        ctx.rotate((rotate * Math.PI) / 180);\n        // Reflection;\n        ctx.translate(flip.horizontal ? originalSize.width : 0, flip.vertical ? originalSize.height : 0);\n        ctx.scale(flip.horizontal ? -1 : 1, flip.vertical ? -1 : 1);\n        ctx.drawImage(image, 0, 0, originalSize.width, originalSize.height);\n        ctx.restore();\n    }\n    return canvas;\n}\nfunction updateCanvas(canvas, source, coordinates, resultSize, options) {\n    canvas.width = resultSize ? resultSize.width : coordinates.width;\n    canvas.height = resultSize ? resultSize.height : coordinates.height;\n    var ctx = canvas.getContext('2d');\n    if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if (options) {\n            if (options.imageSmoothingEnabled) {\n                ctx.imageSmoothingEnabled = options.imageSmoothingEnabled;\n            }\n            if (options.imageSmoothingQuality) {\n                ctx.imageSmoothingQuality = options.imageSmoothingQuality;\n            }\n            if (options.fillColor) {\n                ctx.fillStyle = options.fillColor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n                ctx.save();\n            }\n        }\n        var offsetX = coordinates.left < 0 ? -coordinates.left : 0;\n        var offsetY = coordinates.top < 0 ? -coordinates.top : 0;\n        ctx.drawImage(source, coordinates.left + offsetX, coordinates.top + offsetY, coordinates.width, coordinates.height, offsetX, offsetY, canvas.width, canvas.height);\n    }\n    return canvas;\n}\nfunction drawCroppedArea(state, image, resultCanvas, spareCanvas, options) {\n    if (isInitializedState(state)) {\n        var transforms = state.transforms, coordinates = state.coordinates;\n        var imageTransformed = transforms.rotate !== 0 || transforms.flip.horizontal || transforms.flip.vertical;\n        var source = imageTransformed ? prepareSource(spareCanvas, image, transforms) : image;\n        var params = __assign({ minWidth: 0, minHeight: 0, maxWidth: Infinity, maxHeight: Infinity, maxArea: Infinity, imageSmoothingEnabled: true, imageSmoothingQuality: 'high', fillColor: 'transparent' }, options);\n        var firstNumeric = function (array) { return array.find(function (el) { return isNumeric(el); }); };\n        var size = approximateSize({\n            sizeRestrictions: {\n                minWidth: firstNumeric([params.width, params.minWidth]) || 0,\n                minHeight: firstNumeric([params.height, params.minHeight]) || 0,\n                maxWidth: firstNumeric([params.width, params.maxWidth]) || Infinity,\n                maxHeight: firstNumeric([params.height, params.maxHeight]) || Infinity,\n            },\n            width: coordinates.width,\n            height: coordinates.height,\n            aspectRatio: {\n                minimum: coordinates.width / coordinates.height,\n                maximum: coordinates.width / coordinates.height,\n            },\n        });\n        if (params.maxArea && size.width * size.height > params.maxArea) {\n            var scale = Math.sqrt(params.maxArea / (size.width * size.height));\n            size = {\n                width: Math.round(scale * size.width),\n                height: Math.round(scale * size.height),\n            };\n        }\n        return updateCanvas(resultCanvas, source, coordinates, size, params);\n    }\n    else {\n        return null;\n    }\n}\n\nexport { drawCroppedArea, prepareSource, updateCanvas };\n","var timingFunctions = {\n    linear: function (t) {\n        return t;\n    },\n    'ease-in': function (t) {\n        return Math.pow(t, 1.675);\n    },\n    'ease-out': function (t) {\n        return 1 - Math.pow(1 - t, 1.675);\n    },\n    'ease-in-out': function (t) {\n        return 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1);\n    },\n};\nvar Animation = /** @class */ (function () {\n    function Animation() {\n        this.active = false;\n    }\n    Animation.prototype.start = function (animation) {\n        var _a;\n        this.onStart = animation.onStart;\n        this.onProgress = animation.onProgress;\n        this.onStop = animation.onStop;\n        if (!this.active) {\n            (_a = this.onStart) === null || _a === void 0 ? void 0 : _a.call(this);\n        }\n        if (this.id) {\n            window.cancelAnimationFrame(this.id);\n        }\n        this.startTime = performance.now();\n        this.timingFunction = animation.timingFunction;\n        this.endTime = this.startTime + animation.duration;\n        this.active = true;\n        this.animate();\n    };\n    Animation.prototype.animate = function () {\n        var _this = this;\n        if (this.startTime && this.endTime) {\n            var timingFunction = timingFunctions[this.timingFunction];\n            if (!timingFunction) {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.warn(\"[Animation] The timing function '\" + timingFunction + \"' is not supported. Available timing function: 'linear', 'ease-in', 'ease-in-out', 'ease-out'. Reset to 'ease-out'.\");\n                }\n                timingFunction = timingFunctions['ease-out'];\n            }\n            var percent = 1 - (this.endTime - performance.now()) / (this.endTime - this.startTime);\n            var progress = Math.min(1, timingFunction(percent));\n            if (this.onProgress) {\n                this.onProgress(progress);\n            }\n            if (percent < 1) {\n                this.id = window.requestAnimationFrame(function () { return _this.animate(); });\n            }\n            else {\n                this.stop();\n            }\n        }\n        else {\n            this.stop();\n        }\n    };\n    Animation.prototype.stop = function () {\n        this.active = false;\n        if (this.id) {\n            window.cancelAnimationFrame(this.id);\n        }\n        if (this.onStop) {\n            this.onStop();\n        }\n    };\n    return Animation;\n}());\n\nexport { Animation };\n","import { isRoughlyEqual, sign, distance } from '../utils/index.js';\n\nfunction calculateGeometricProperties(touches, container) {\n    var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top;\n    var centerMass = { left: 0, top: 0 };\n    var spread = 0;\n    touches.forEach(function (touch) {\n        centerMass.left += (touch.clientX - left) / touches.length;\n        centerMass.top += (touch.clientY - top) / touches.length;\n    });\n    touches.forEach(function (touch) {\n        spread += distance({ left: centerMass.left, top: centerMass.top }, { left: touch.clientX - left, top: touch.clientY - top });\n    });\n    return { centerMass: centerMass, spread: spread, count: touches.length };\n}\nfunction touchesToImageTransform(touches, previousTouches, container, options) {\n    if (options === void 0) { options = {}; }\n    var move, scale, rotate;\n    if (previousTouches.length === 1 && touches.length === 1) {\n        if (options.move) {\n            move = {\n                left: previousTouches[0].clientX - touches[0].clientX,\n                top: previousTouches[0].clientY - touches[0].clientY,\n            };\n        }\n    }\n    else if (touches.length > 1) {\n        var previousProperties = calculateGeometricProperties(previousTouches, container);\n        var properties = calculateGeometricProperties(touches, container);\n        if (options.rotate && previousTouches.length === 2 && touches.length === 2) {\n            var diffs = {\n                left: [\n                    touches[0].clientX - touches[1].clientX,\n                    previousTouches[0].clientX - previousTouches[1].clientX,\n                ],\n                top: [touches[0].clientY - touches[1].clientY, previousTouches[0].clientY - previousTouches[1].clientY],\n            };\n            var y = diffs.left[0] * diffs.top[1] - diffs.left[1] * diffs.top[0];\n            var x = diffs.left[0] * diffs.left[1] + diffs.top[0] * diffs.top[1];\n            if (!isRoughlyEqual(x, 0) && !isRoughlyEqual(y, 0)) {\n                var radians = Math.atan2(y, x);\n                var angle = -(radians * 180) / Math.PI;\n                rotate = {\n                    center: properties.centerMass,\n                    angle: angle,\n                };\n            }\n        }\n        if (options.move) {\n            move = {\n                left: previousProperties.centerMass.left - properties.centerMass.left,\n                top: previousProperties.centerMass.top - properties.centerMass.top,\n            };\n        }\n        if (options.scale) {\n            scale = {\n                factor: properties.spread / previousProperties.spread,\n                center: properties.centerMass,\n            };\n        }\n    }\n    return {\n        move: move,\n        scale: scale,\n        rotate: rotate,\n    };\n}\nfunction wheelEventToImageTransform(event, container, ratio) {\n    if (ratio === void 0) { ratio = 0.1; }\n    var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top;\n    var factor = 1 - ratio * sign((event.deltaY || event.detail || event.wheelDelta));\n    var center = {\n        left: event.clientX - left,\n        top: event.clientY - top,\n    };\n    return { scale: { factor: factor, center: center } };\n}\n\nexport { touchesToImageTransform, wheelEventToImageTransform };\n","import 'tslib';\nimport { isFunction } from '../utils/index.js';\nimport { createAspectRatio } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultStencilConstraints(rawSettings, stencilProps) {\n    if (!rawSettings.aspectRatio) {\n        return {\n            aspectRatio: createAspectRatio(isFunction(stencilProps.aspectRatio) ? stencilProps.aspectRatio() : stencilProps.aspectRatio),\n        };\n    }\n    return {};\n}\n\nexport { defaultStencilConstraints };\n","import { __assign } from 'tslib';\nimport { isFunction } from '../../utils/index.js';\nimport { aspectRatioIntersection, createAspectRatio, ratio, applyScale, fitToSizeRestrictions, applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../../service/utils.js';\nimport { getAreaSizeRestrictions, getSizeRestrictions, getAspectRatio, isInitializedState, getAreaPositionRestrictions } from '../../service/helpers.js';\nimport { copyState } from '../../state/copyState.js';\nimport '../../types/index.js';\nimport '../../state/setCoordinates.js';\nimport { approximateSize } from '../../service/approximateSize.js';\nimport { defaultStencilConstraints } from '../../defaults/defaultStencilConstraints.js';\n\nfunction fixedStencilConstraints(rawSettings, stencilOptions) {\n    var defaultConstraints = defaultStencilConstraints({}, stencilOptions);\n    return {\n        stencilSize: function (state, settings) {\n            var previousSize = isFunction(rawSettings.stencilSize)\n                ? rawSettings.stencilSize(state, settings)\n                : rawSettings.stencilSize;\n            return approximateSize(__assign(__assign({}, previousSize), { aspectRatio: aspectRatioIntersection(defaultConstraints.aspectRatio, createAspectRatio(ratio(previousSize))) }));\n        },\n    };\n}\nfunction getStencilSize(state, settings) {\n    var boundary = state.boundary;\n    var size = isFunction(settings.stencilSize) ? settings.stencilSize(state, settings) : settings.stencilSize;\n    if (size.width > boundary.width || size.height > boundary.height) {\n        size = approximateSize({\n            sizeRestrictions: {\n                maxWidth: boundary.width,\n                maxHeight: boundary.height,\n                minWidth: 0,\n                minHeight: 0,\n            },\n            width: size.width,\n            height: size.height,\n            aspectRatio: {\n                minimum: ratio(size),\n                maximum: ratio(size),\n            },\n        });\n    }\n    return size;\n}\nfunction sizeRestrictions(state, settings) {\n    var stencilSize = getStencilSize(state, __assign(__assign({}, settings), { stencilSize: settings.stencilSize }));\n    var areaRestrictions = getAreaSizeRestrictions(state, settings);\n    return {\n        maxWidth: (areaRestrictions.maxWidth * stencilSize.width) / state.boundary.width,\n        maxHeight: (areaRestrictions.maxHeight * stencilSize.height) / state.boundary.height,\n        minWidth: 0,\n        minHeight: 0,\n    };\n}\nfunction defaultSize(state, settings) {\n    var imageSize = state.imageSize, visibleArea = state.visibleArea, boundary = state.boundary;\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    var aspectRatio = getAspectRatio(state, settings);\n    var stencilSize = isFunction(settings.stencilSize) ? settings.stencilSize(state, settings) : settings.stencilSize;\n    var area = (visibleArea || imageSize);\n    var height, width;\n    if (ratio(area) > ratio(boundary)) {\n        height = (stencilSize.height * area.height) / boundary.height;\n        width = height * ratio(stencilSize);\n    }\n    else {\n        width = (stencilSize.width * area.width) / boundary.width;\n        height = width / ratio(stencilSize);\n    }\n    return approximateSize({\n        width: width,\n        height: height,\n        aspectRatio: aspectRatio,\n        sizeRestrictions: sizeRestrictions,\n    });\n}\nfunction aspectRatio(state, settings) {\n    var value = ratio(getStencilSize(state, settings));\n    return {\n        minimum: value,\n        maximum: value,\n    };\n}\nfunction fixedStencilAlgorithm(state, settings) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var stencil = getStencilSize(state, settings);\n        // First of all try to resize visible area as much as possible:\n        result.visibleArea = applyScale(result.visibleArea, (result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width));\n        // Check that visible area doesn't break the area restrictions:\n        var scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n        if (scale !== 1) {\n            result.visibleArea = applyScale(result.visibleArea, scale);\n            result.coordinates = applyScale(result.coordinates, scale);\n        }\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(result.coordinates), getCenter(result.visibleArea)));\n        // Center stencil in visible area:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getAreaPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\nfunction fixedStencil(state, settings, action) {\n    if (action && action.immediately) {\n        return fixedStencilAlgorithm(state, settings);\n    }\n    return state;\n}\n\nexport { aspectRatio, defaultSize, fixedStencil, fixedStencilAlgorithm, fixedStencilConstraints, getStencilSize, sizeRestrictions };\n","import {\n\tapplyMove,\n\tapplyScale,\n\tdiff,\n\tfitToSizeRestrictions,\n\tgetAreaPositionRestrictions,\n\tgetAreaSizeRestrictions,\n\tgetCenter,\n\tgetPositionRestrictions,\n\tisInitializedState,\n\tmergePositionRestrictions,\n\tmoveToPositionRestrictions,\n\tratio,\n\tcoordinatesToPositionRestrictions,\n} from 'advanced-cropper/service';\nimport { CoreSettings, CropperState, PostprocessAction, Size } from 'advanced-cropper';\nimport { copyState } from 'advanced-cropper/state';\n\nexport function hybridStencilAutoZoomAlgorithm(state: CropperState, settings: CoreSettings): CropperState {\n\tif (isInitializedState(state)) {\n\t\tconst result = copyState(state);\n\n\t\t// Checks that coordinates has the same ratio that coordinates:\n\t\tconst stencil: Size = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\n\t\tif (ratio(result.boundary) > ratio(result.coordinates)) {\n\t\t\tstencil.height = result.boundary.height * 0.8;\n\t\t\tstencil.width = stencil.height * ratio(result.coordinates);\n\t\t} else {\n\t\t\tstencil.width = result.boundary.width * 0.8;\n\t\t\tstencil.height = stencil.width * ratio(result.coordinates);\n\t\t}\n\n\t\t// First of all try to resize visible area as much as possible:\n\t\tresult.visibleArea = applyScale(\n\t\t\tresult.visibleArea,\n\t\t\t(result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width),\n\t\t);\n\n\t\t// Check that visible area doesn't break the area restrictions:\n\t\tconst scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n\n\t\tresult.visibleArea = applyScale(result.visibleArea, scale);\n\n\t\tif (scale !== 1) {\n\t\t\tstencil.height /= scale;\n\t\t\tstencil.width /= scale;\n\t\t}\n\n\t\tresult.visibleArea = applyMove(\n\t\t\tresult.visibleArea,\n\t\t\tdiff(getCenter(result.coordinates), getCenter(result.visibleArea)),\n\t\t);\n\n\t\t// Center stencil in visible area:\n\t\tresult.visibleArea = moveToPositionRestrictions(\n\t\t\tresult.visibleArea,\n\t\t\tgetAreaPositionRestrictions(result, settings),\n\t\t);\n\n\t\tresult.coordinates = moveToPositionRestrictions(\n\t\t\tresult.coordinates,\n\t\t\tmergePositionRestrictions(\n\t\t\t\tcoordinatesToPositionRestrictions(result.visibleArea),\n\t\t\t\tgetPositionRestrictions(result, settings),\n\t\t\t),\n\t\t);\n\n\t\treturn result;\n\t}\n\treturn state;\n}\n\nexport function hybridStencilAutoZoom(\n\tstate: CropperState,\n\tsettings: CoreSettings,\n\taction: PostprocessAction,\n): CropperState {\n\tif (action.immediately) {\n\t\treturn hybridStencilAutoZoomAlgorithm(state, settings);\n\t}\n\treturn state;\n}\n","import { useRef } from 'react';\nimport { deprecationWarning } from '../service/utils';\n\nexport function useDeprecationWarning() {\n\tconst fired = useRef<string[]>([]);\n\n\treturn (message: string) => {\n\t\tif (fired.current.indexOf(message) === -1) {\n\t\t\tdeprecationWarning(message);\n\t\t\tfired.current.push(message);\n\t\t}\n\t};\n}\n","import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\n\nexport const useUpdateEffect: typeof useEffect = (effect, deps) => {\n\tconst isFirstMount = useFirstMountState();\n\n\tuseEffect(() => {\n\t\tif (!isFirstMount) {\n\t\t\treturn effect();\n\t\t}\n\t}, deps);\n};\n","import { useRef } from 'react';\n\nexport function useFirstMountState(): boolean {\n\tconst isFirst = useRef(true);\n\n\tif (isFirst.current) {\n\t\tisFirst.current = false;\n\n\t\treturn true;\n\t}\n\n\treturn isFirst.current;\n}\n","import {\n\tAbstractCropperInstance,\n\tAbstractCropperInstanceData,\n\tAbstractCropperInstanceProps,\n\tAbstractCropperInstanceSettings,\n\tgetEmptyInteractions,\n} from 'advanced-cropper';\n\nexport interface CropperInstanceProps<Settings extends AbstractCropperInstanceSettings, Instance> {\n\tgetProps: () => AbstractCropperInstanceProps<Settings, Instance>;\n\tsetData?: (data: AbstractCropperInstanceData) => void;\n}\n\nexport class CropperInstance<\n\tSettings extends AbstractCropperInstanceSettings,\n\tInstance = unknown,\n> extends AbstractCropperInstance<Settings, Instance> {\n\tdata: AbstractCropperInstanceData;\n\tnotify: () => void;\n\tprops: () => AbstractCropperInstanceProps<Settings, Instance>;\n\n\tconstructor(props: () => AbstractCropperInstanceProps<Settings, Instance>, onChange: () => void) {\n\t\tsuper();\n\t\tthis.props = props;\n\t\tthis.notify = onChange;\n\t\tthis.data = {\n\t\t\tstate: null,\n\t\t\ttransitions: false,\n\t\t\tinteractions: getEmptyInteractions(),\n\t\t};\n\t}\n\n\tprotected getProps() {\n\t\treturn this.props();\n\t}\n\n\tprotected setData(data: AbstractCropperInstanceData) {\n\t\tthis.data = data;\n\t\tthis.notify();\n\t}\n\n\tprotected getData(): AbstractCropperInstanceData {\n\t\treturn this.data;\n\t}\n}\n","import { useState } from 'react';\n\nexport function useForceRerender() {\n\tconst [tick, setTick] = useState({});\n\n\treturn () => {\n\t\tsetTick({});\n\t};\n}\n","import { useRef } from 'react';\nimport {\n\tImageRestriction,\n\tcreateDefaultSettings,\n\tAbstractCropperInstanceParameters,\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceSettings,\n\tDefaultSettings,\n} from 'advanced-cropper';\nimport { CropperInstance } from '../instance/CropperInstance';\nimport { useForceRerender } from './useForceRerender';\nimport { usePersistentFunction } from './usePersistentFunction';\n\nexport type CropperInstanceSettings = DefaultSettings & AbstractCropperInstanceSettings;\n\nexport type CropperInstanceSettingsProp<Settings extends CropperInstanceSettings> = Partial<\n\tPick<Settings, keyof CropperInstanceSettings>\n> &\n\tOmit<Settings, keyof CropperInstanceSettings>;\n\nexport function useCropperInstance<Settings extends CropperInstanceSettings, Instance = unknown>(\n\tprops: () => AbstractCropperInstanceParameters<Settings> &\n\t\tAbstractCropperInstanceCallbacks<Instance> & {\n\t\t\tsettings?: CropperInstanceSettingsProp<Settings>;\n\t\t},\n) {\n\tconst rerender = useForceRerender();\n\n\tconst getProps = usePersistentFunction(() => {\n\t\tconst { settings, ...parameters } = props();\n\n\t\tconst extendedSettings = {\n\t\t\timageRestriction: ImageRestriction.fitArea,\n\t\t\ttransformImage: {\n\t\t\t\tadjustStencil: true,\n\t\t\t},\n\t\t\t...settings,\n\t\t};\n\n\t\tconst extendedParameters = {\n\t\t\ttransitions: true,\n\t\t\t...parameters,\n\t\t};\n\n\t\treturn {\n\t\t\tsettings: {\n\t\t\t\t...extendedSettings,\n\t\t\t\t...createDefaultSettings<Settings>(extendedSettings),\n\t\t\t\t// It's needed because of the nature of the settings field\n\t\t\t} as Settings,\n\t\t\t...extendedParameters,\n\t\t};\n\t});\n\n\tconst cropper = useRef(new CropperInstance<Settings, Instance>(getProps, rerender));\n\n\treturn cropper.current;\n}\nexport type CropperStateHook = ReturnType<typeof useCropperInstance>;\n","import { useRef } from 'react';\n\nexport function usePersistentFunction<Props, Arguments extends any[]>(props: (...args: Arguments) => Props) {\n\tconst propsRef = useRef(props);\n\n\tpropsRef.current = props;\n\n\treturn (...args: Arguments) => propsRef.current(...args);\n}\n","import { useEffect, useRef } from 'react';\n\nexport const useWindowResize = (callback: (...args: unknown[]) => void) => {\n\tconst callbackRef = useRef<Function>(callback);\n\n\tconst internalCallback = () => {\n\t\tif (callbackRef.current) {\n\t\t\tcallbackRef.current();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tcallbackRef.current = callback;\n\t}, [callback]);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', internalCallback);\n\t\twindow.addEventListener('orientationchange', internalCallback);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', internalCallback);\n\t\t\twindow.removeEventListener('orientationchange', internalCallback);\n\t\t};\n\t}, []);\n};\n","import { useImperativeHandle, useRef } from 'react';\nimport {\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceParameters,\n\tCropperImage,\n\tDrawOptions,\n} from 'advanced-cropper';\nimport { StretchableBoundaryMethods } from '../components/service/StretchableBoundary';\nimport { CropperCanvasMethods } from '../components/service/CropperCanvas';\nimport { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperRef, AbstractCropperSettings } from '../components/AbstractCropper';\nimport { useStateWithCallback } from './useStateWithCallback';\nimport { CropperInstanceSettingsProp, useCropperInstance } from './useCropperInstance';\nimport { useCropperImage } from './useCropperImage';\nimport { useWindowResize } from './useWindowResize';\nimport { useUpdateEffect } from './useUpdateEffect';\nimport { useCropperAutoReconcile } from './useCropperAutoReconcile';\n\nexport interface AbstractCropperHookProps<Settings extends AbstractCropperSettings>\n\textends AbstractCropperInstanceParameters<Settings>,\n\t\tAbstractCropperInstanceCallbacks<AbstractCropperRef<Settings>> {\n\tsrc?: string | null;\n\tcheckOrientation?: boolean;\n\tcanvas?: boolean;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tonReady?: (cropper: AbstractCropperRef<Settings>) => void;\n\tonError?: (cropper: AbstractCropperRef<Settings>) => void;\n\tunloadTime?: number;\n\tautoReconcileState?: boolean;\n\tsettings?: CropperInstanceSettingsProp<Settings>;\n}\n\nexport function useAbstractCropper<Extension extends SettingsExtension = {}>(\n\tprops: () => AbstractCropperHookProps<ExtendedSettings<Extension>>,\n) {\n\tconst {\n\t\tsrc,\n\t\tonReady,\n\t\tonError,\n\t\tonUpdate,\n\t\tcanvas = true,\n\t\tunloadTime = 500,\n\t\tcrossOrigin = true,\n\t\tcheckOrientation = true,\n\t\tautoReconcileState = true,\n\t} = props();\n\n\tconst imageRef = useRef<HTMLElement>(null);\n\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\tconst canvasRef = useRef<CropperCanvasMethods>(null);\n\tconst cropperRef = useRef<AbstractCropperRef<ExtendedSettings<Extension>>>(null);\n\n\tconst [currentImage, setCurrentImage] = useStateWithCallback<CropperImage | null>(null);\n\n\tconst cropper = useCropperInstance(() => ({\n\t\t...props(),\n\t\tgetInstance() {\n\t\t\treturn cropperRef.current;\n\t\t},\n\t}));\n\n\tconst cropperImage = useCropperImage({\n\t\tsrc,\n\t\tcrossOrigin,\n\t\tcheckOrientation,\n\t\tunloadTime,\n\t\tcanvas,\n\t\tonLoad() {\n\t\t\tif (cropperRef.current) {\n\t\t\t\tonReady?.(cropperRef.current);\n\t\t\t}\n\t\t},\n\t\tonError() {\n\t\t\tif (cropperRef.current) {\n\t\t\t\tonError?.(cropperRef.current);\n\t\t\t}\n\t\t},\n\t});\n\n\tconst autoReconcile = useCropperAutoReconcile(cropper, autoReconcileState);\n\n\tconst resetCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tsetCurrentImage(image, () => {\n\t\t\t\tif (boundary && image) {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t} else {\n\t\t\t\t\tcropper.clear();\n\t\t\t\t}\n\t\t\t});\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\n\tconst refreshCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tif (boundary && image) {\n\t\t\t\tconst state = cropper.getState();\n\t\t\t\tif (state) {\n\t\t\t\t\tif (boundary.width !== state.boundary.width || boundary.height !== state.boundary.height) {\n\t\t\t\t\t\tcropper.setBoundary(boundary);\n\t\t\t\t\t\t// It's important because, probably, after the boundary reset\n\t\t\t\t\t\t// the cropper can meet some restrictions that were broken before\n\t\t\t\t\t\tcropper.reconcileState();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcropper.clear();\n\t\t\t}\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\tconst cropperInterface = {\n\t\treset: () => resetCropper(),\n\t\trefresh: () => refreshCropper(),\n\t\tsetImage: (image: CropperImage) => setCurrentImage(image),\n\t\treconcileState: cropper.reconcileState,\n\t\tmoveCoordinates: cropper.moveCoordinates,\n\t\tmoveCoordinatesEnd: cropper.moveCoordinatesEnd,\n\t\tresizeCoordinates: cropper.resizeCoordinates,\n\t\tclear: cropper.clear,\n\t\tresizeCoordinatesEnd: cropper.resizeCoordinatesEnd,\n\t\tmoveImage: cropper.moveImage,\n\t\tflipImage: cropper.flipImage,\n\t\tzoomImage: cropper.zoomImage,\n\t\trotateImage: cropper.rotateImage,\n\t\ttransformImage: cropper.transformImage,\n\t\ttransformImageEnd: cropper.transformImageEnd,\n\t\tsetCoordinates: cropper.setCoordinates,\n\t\tsetVisibleArea: cropper.setVisibleArea,\n\t\tstartTransitions: cropper.startTransitions,\n\t\tsetState: cropper.setState,\n\t\thasInteractions: cropper.hasInteractions,\n\t\tgetStencilCoordinates: cropper.getStencilCoordinates,\n\t\tgetCoordinates: cropper.getCoordinates,\n\t\tgetVisibleArea: cropper.getVisibleArea,\n\t\tgetTransforms: cropper.getTransforms,\n\t\tgetTransitions: cropper.getTransitions,\n\t\tgetInteractions: cropper.getInteractions,\n\t\tgetSettings: cropper.getSettings,\n\t\tgetState: cropper.getState,\n\t\tgetDefaultState() {\n\t\t\tconst state = cropper.getState();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tif (state && image) {\n\t\t\t\treturn cropper.createDefaultState(state.boundary, image);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetCanvas: (options?: DrawOptions) => {\n\t\t\tconst state = cropper.getState();\n\t\t\tif (imageRef.current && canvasRef.current && state) {\n\t\t\t\treturn canvasRef.current.draw(state, imageRef.current, options);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetImage: () => {\n\t\t\treturn currentImage ? { ...currentImage } : null;\n\t\t},\n\t\tisLoading: cropperImage.isLoading,\n\t\tisLoaded: cropperImage.isLoaded,\n\t};\n\n\tuseWindowResize(() => {\n\t\trefreshCropper();\n\t});\n\n\tuseUpdateEffect(() => {\n\t\tresetCropper();\n\t}, [cropperImage.getImage()]);\n\n\tuseUpdateEffect(() => {\n\t\tif (cropperRef.current) {\n\t\t\tonUpdate?.(cropperRef.current);\n\t\t}\n\t}, [cropperImage.isLoaded(), cropperImage.isLoading()]);\n\n\tuseImperativeHandle(cropperRef, () => cropperInterface);\n\n\treturn {\n\t\tcropper: cropperInterface,\n\t\trefs: {\n\t\t\timage: imageRef,\n\t\t\tboundary: boundaryRef,\n\t\t\tcanvas: canvasRef,\n\t\t},\n\t\timage: currentImage,\n\t};\n}\n","import { SetStateAction, useRef, useState } from \"react\";\nimport { useUpdateEffect } from \"./useUpdateEffect\";\n\ntype DispatchWithCallback<S> = (value: SetStateAction<S>, callback?: Function) => void;\n\nexport function useStateWithCallback<S>(initialState?: S | (() => S)): [S, DispatchWithCallback<S>];\nexport function useStateWithCallback<S = undefined>(): [S | undefined, DispatchWithCallback<S  | undefined>];\nexport function useStateWithCallback<S = undefined>(initialState?: S | (() => S)): [S | undefined, DispatchWithCallback<S | undefined>]  {\n\tconst [state, setState] = useState(initialState);\n\tconst [callback, setCallback] = useState<Function | null | undefined>(null);\n\tconst previousState = useRef(initialState);\n\n\tuseUpdateEffect(() => {\n\t\tif (callback) {\n\t\t\tcallback(state, previousState.current);\n\t\t}\n\t}, [callback])\n\n\treturn [\n\t\tstate,\n\t\t(value: SetStateAction<S | undefined>, callback?: Function) => {\n\t\t\tpreviousState.current = state;\n\t\t\tsetState(value);\n\t\t\tsetCallback(() => callback);\n\t\t}\n\t]\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { CropperImage, isUndefined, promiseTimeout, loadImage } from 'advanced-cropper';\n\nexport interface CropperImageHookSettings {\n\tsrc?: string | null;\n\tonLoadingStart?: () => void;\n\tonLoadingEnd?: () => void;\n\tonError?: () => void;\n\tonLoad?: (image?: CropperImage) => void;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tcheckOrientation?: boolean;\n\tcanvas?: string | boolean;\n\tunloadTime?: number;\n}\n\nexport function useCropperImage(options: CropperImageHookSettings) {\n\tconst { src, onLoadingStart, onLoadingEnd, onError, onLoad, crossOrigin, checkOrientation, canvas, unloadTime } = options;\n\tconst [loading, setLoading] = useState(false);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [image, setImage] = useState<CropperImage | null>(null);\n\n\tconst currentSrc = useRef<string | null>(null);\n\n\tuseEffect(() => {\n\t\tif (currentSrc.current !== src) {\n\t\t\tcurrentSrc.current = src || null;\n\t\t\tsetLoaded(false);\n\t\t\tif (src) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tonLoadingStart?.();\n\t\t\t\tconst promises: Promise<unknown>[] = [\n\t\t\t\t\tloadImage(src, {\n\t\t\t\t\t\tcrossOrigin: isUndefined(crossOrigin) ? canvas : crossOrigin,\n\t\t\t\t\t\tcheckOrientation,\n\t\t\t\t\t}),\n\t\t\t\t];\n\n\t\t\t\tif (loaded && unloadTime) {\n\t\t\t\t\tpromises.push(promiseTimeout(unloadTime));\n\t\t\t\t}\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then((responses) => {\n\t\t\t\t\t\tconst [image] = responses as [CropperImage];\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tsetImage(image);\n\t\t\t\t\t\t\tonLoad?.(image);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonError?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonLoadingEnd?.();\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (unloadTime) {\n\t\t\t\t\tpromiseTimeout(unloadTime).then(() => {\n\t\t\t\t\t\tsetImage(null)\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tsetImage(null)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [src]);\n\n\tuseEffect(() => {\n\t\tif (image) {\n\t\t\tsetLoaded(true)\n\t\t}\n\t}, [image])\n\n\treturn {\n\t\tisLoading() {\n\t\t\treturn loading;\n\t\t},\n\t\tisLoaded() {\n\t\t\treturn loaded\n\t\t},\n\t\tgetImage() {\n\t\t\treturn image;\n\t\t},\n\t\tsetImage,\n\t};\n}\n","import { useLayoutEffect, useState } from 'react';\n\ninterface CropperInstance {\n\thasInteractions: () => boolean;\n\treconcileState: () => void;\n}\n\nexport function useCropperAutoReconcile(cropper: CropperInstance, enabled = true) {\n\tconst [active, setActive] = useState(enabled);\n\n\tuseLayoutEffect(() => {\n\t\tif (active && !cropper.hasInteractions()) {\n\t\t\tcropper.reconcileState();\n\t\t}\n\t});\n\n\treturn {\n\t\tpause() {\n\t\t\tsetActive(false);\n\t\t},\n\t\tresume() {\n\t\t\tsetActive(true);\n\t\t},\n\t};\n}\n","import React, { ReactNode, forwardRef, useImperativeHandle, useRef, CSSProperties } from 'react';\nimport cn from 'classnames';\nimport {\n\tBoundarySizeAlgorithm,\n\tSize,\n\tstretchCropperBoundary,\n\tBoundaryStretchAlgorithm,\n\tfillBoundary,\n} from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tstretcherClassName?: string;\n\tcontentClassName?: string;\n\tstretchAlgorithm?: BoundaryStretchAlgorithm;\n\tsizeAlgorithm?: BoundarySizeAlgorithm;\n\tchildren?: ReactNode;\n}\n\nexport interface StretchableBoundaryMethods {\n\tstretchTo: (size: Size | null) => Promise<Size | null>;\n\treset: () => void;\n}\n\nexport const StretchableBoundary = forwardRef(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tstyle,\n\t\t\tstretcherClassName,\n\t\t\tcontentClassName,\n\t\t\tstretchAlgorithm = stretchCropperBoundary,\n\t\t\tsizeAlgorithm = fillBoundary,\n\t\t\tchildren,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst stretcherRef = useRef<HTMLDivElement>(null);\n\t\tconst boundaryRef = useRef<HTMLDivElement>(null);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\treset: () => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tif (stretcher) {\n\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\tstretchTo: (size: Size | null) => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tconst boundary = boundaryRef.current;\n\n\t\t\t\tif (size?.width && size?.height && stretcher && boundary) {\n\t\t\t\t\tstretchAlgorithm(boundary, stretcher, size);\n\t\t\t\t\tconst result = sizeAlgorithm(boundary, size);\n\t\t\t\t\treturn Promise.resolve(result.width && result.height ? result : null);\n\t\t\t\t} else {\n\t\t\t\t\tif (stretcher) {\n\t\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\t\t\t},\n\t\t}));\n\n\t\treturn (\n\t\t\t<div ref={boundaryRef} style={style} className={cn('advanced-cropper-boundary', className)}>\n\t\t\t\t<div ref={stretcherRef} className={cn(['advanced-cropper-boundary__stretcher', stretcherClassName])} />\n\t\t\t\t<div className={cn(['advanced-cropper-boundary__content', contentClassName])}>{children}</div>\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nStretchableBoundary.displayName = 'StretchableBoundary';\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\n\ninterface Props {\n\tvisible?: unknown;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperFade: FC<Props> = ({ visible, className, style, children }) => {\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={cn(className, 'advanced-cropper-fade', Boolean(visible) && 'advanced-cropper-fade--visible')}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperState } from 'advanced-cropper';\nimport { CropperFade } from './CropperFade';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperWrapper: FC<CropperWrapperProps> = ({ cropper, children, className, style }) => {\n\tconst state = cropper ? cropper.getState() : null;\n\tconst loaded = cropper ? cropper.isLoaded() : false;\n\treturn (\n\t\t<div className={cn(className, 'advanced-cropper-wrapper')} style={style}>\n\t\t\t<CropperFade visible={state && loaded} className={'advanced-cropper-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n","import { MouseEvent } from 'react';\n\nexport function preventDefault(e: MouseEvent) {\n\te.preventDefault();\n}\n","import React, { CSSProperties, forwardRef } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, getBackgroundStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperBackgroundImageProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperBackgroundImage = forwardRef<HTMLImageElement, CropperBackgroundImageProps>(\n\t({ className, style, cropper, crossOrigin = true }: CropperBackgroundImageProps, ref) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst image = cropper.getImage();\n\n\t\tconst transformStyles = image && state ? getBackgroundStyle(image, state, transitions) : {};\n\n\t\tconst src = image ? image.src : undefined;\n\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\t\tsrc={src}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\tstyle={{\n\t\t\t\t\t...transformStyles,\n\t\t\t\t\t...style,\n\t\t\t\t}}\n\t\t\t\tonMouseDown={preventDefault}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperBackgroundImage.displayName = 'CropperBackgroundImage';\n","import React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { CropperState, DrawOptions, drawCroppedArea } from 'advanced-cropper';\n\nexport interface CropperCanvasMethods {\n\tdraw: (state: CropperState, image: HTMLElement, options?: DrawOptions) => HTMLCanvasElement | null;\n}\n\nexport const CropperCanvas = forwardRef((_, ref) => {\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\tconst spareCanvasRef = useRef<HTMLCanvasElement>(null);\n\n\tuseImperativeHandle(ref, () => ({\n\t\tdraw: (state: CropperState, image: HTMLElement, options: DrawOptions = {}) => {\n\t\t\tif (image && canvasRef.current && spareCanvasRef.current) {\n\t\t\t\treturn drawCroppedArea(\n\t\t\t\t\tstate,\n\t\t\t\t\timage as HTMLImageElement | HTMLCanvasElement,\n\t\t\t\t\tcanvasRef.current,\n\t\t\t\t\tspareCanvasRef.current,\n\t\t\t\t\toptions,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t}));\n\n\treturn (\n\t\t<>\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={canvasRef} />\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={spareCanvasRef} />\n\t\t</>\n\t);\n});\n\nCropperCanvas.displayName = 'CropperCanvas';\n","import React, { ReactNode, Component, RefObject, createRef } from 'react';\nimport cn from 'classnames';\nimport { MoveDirections, Point, SimpleTouch, distance } from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => void;\n\tonMoveEnd?: () => void;\n\tonMoveStart?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tuseAnchor?: boolean;\n\tactivationDistance?: number;\n}\n\nexport class DraggableElement extends Component<Props> {\n\ttouches: SimpleTouch[];\n\tstarted: boolean;\n\thovered: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tactivationDistance: 30,\n\t\tuseAnchor: true,\n\t\trerender: true,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.touches = [];\n\t\tthis.hovered = false;\n\t\tthis.started = false;\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t}\n\n\tprocessMove = (e: MouseEvent | TouchEvent, newTouches: SimpleTouch[]) => {\n\t\tconst container = this.container.current;\n\n\t\tif (container && this.touches.length) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\n\t\t\t\tif (this.props.onMove) {\n\t\t\t\t\tconst movingToAnchor = {\n\t\t\t\t\t\tleft:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientX - this.anchor.left - left) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientX - this.anchor.left - left),\n\t\t\t\t\t\ttop:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientY - this.anchor.top - top) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientY - this.anchor.top - top),\n\t\t\t\t\t};\n\n\t\t\t\t\tconst direction = {\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.left) {\n\t\t\t\t\t\tdirection.left = newTouches[0].clientX - this.touches[0].clientX;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.top) {\n\t\t\t\t\t\tdirection.top = newTouches[0].clientY - this.touches[0].clientY;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.props?.onMove(direction, e);\n\n\t\t\t\t\tthis.touches = [...newTouches];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onMoveEnd, onLeave } = this.props;\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tonMoveEnd?.();\n\t\t}\n\t\tif (this.hovered) {\n\t\t\tonLeave?.();\n\t\t\tthis.hovered = false;\n\t\t}\n\t\tthis.touches = [];\n\t};\n\n\tinitAnchor = (touch: SimpleTouch) => {\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tthis.anchor = {\n\t\t\t\tleft: touch.clientX - left,\n\t\t\t\ttop: touch.clientY - top,\n\t\t\t};\n\t\t}\n\t};\n\n\tonMouseOver = () => {\n\t\tconst { onEnter, disabled } = this.props;\n\t\tif (!this.hovered && !disabled) {\n\t\t\tthis.hovered = true;\n\t\t\tonEnter?.();\n\t\t}\n\t};\n\n\tonMouseLeave = () => {\n\t\tconst { onLeave } = this.props;\n\t\tif (this.hovered && !this.touches.length) {\n\t\t\tthis.hovered = false;\n\t\t\tonLeave?.();\n\t\t}\n\t};\n\n\tonTouchStart = (e: TouchEvent) => {\n\t\tconst { onEnter, onMoveStart, disabled } = this.props;\n\t\tif (e.cancelable) {\n\t\t\tthis.touches = Array.from(e.touches);\n\n\t\t\tconst shouldStartMove = !disabled && e.touches.length === 1;\n\t\t\tif (shouldStartMove) {\n\t\t\t\tthis.touches = Array.from(e.touches);\n\t\t\t\tonMoveStart?.();\n\t\t\t}\n\n\t\t\tif (!this.hovered && !disabled) {\n\t\t\t\tthis.hovered = true;\n\t\t\t\tonEnter?.();\n\t\t\t}\n\n\t\t\tif (this.started || shouldStartMove) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}\n\t};\n\n\tonTouchEnd = () => {\n\t\tthis.started = false;\n\t\tthis.processEnd();\n\t};\n\n\tonTouchMove = (e: TouchEvent) => {\n\t\tif (this.touches.length >= 1) {\n\t\t\tif (this.started) {\n\t\t\t\tthis.processMove(e, Array.from(e.touches));\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t} else if (\n\t\t\t\tdistance(\n\t\t\t\t\t{ left: this.touches[0].clientX, top: this.touches[0].clientY },\n\t\t\t\t\t{ left: e.touches[0].clientX, top: e.touches[0].clientY },\n\t\t\t\t) > (this.props.activationDistance || 0)\n\t\t\t) {\n\t\t\t\tthis.initAnchor({\n\t\t\t\t\tclientX: e.touches[0].clientX,\n\t\t\t\t\tclientY: e.touches[0].clientY,\n\t\t\t\t});\n\t\t\t\tthis.started = true;\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (e: MouseEvent) => {\n\t\tconst { onMoveStart, disabled } = this.props;\n\t\tif (!disabled && e.button === 0) {\n\t\t\tconst touch = {\n\t\t\t\tclientX: e.clientX,\n\t\t\t\tclientY: e.clientY,\n\t\t\t};\n\t\t\tthis.touches = [touch];\n\t\t\tthis.initAnchor(touch);\n\t\t\te.stopPropagation();\n\t\t\tonMoveStart?.();\n\t\t}\n\t};\n\n\tonMouseMove = (e: MouseEvent) => {\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tthis.processMove(e, [\n\t\t\t\t{\n\t\t\t\t\tclientX: e.clientX,\n\t\t\t\t\tclientY: e.clientY,\n\t\t\t\t},\n\t\t\t]);\n\t\t\tif (e.preventDefault && e.cancelable) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.processEnd();\n\t};\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: Readonly<Props>) {\n\t\tif (this.props.disabled && !prevProps.disabled) {\n\t\t\tthis.touches = [];\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children, className } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={cn('advanced-cropper-draggable-element', className)}\n\t\t\t\tref={this.container}\n\t\t\t\tonMouseOver={this.onMouseOver}\n\t\t\t\tonMouseLeave={this.onMouseLeave}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { ReactNode } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tonDrag?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\tposition?: HorizontalCardinalDirection | VerticalCardinalDirection;\n}\n\nexport const LineWrapper = ({\n\tposition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n}: Props) => {\n\treturn (\n\t\t<DraggableElement\n\t\t\tclassName={cn([\n\t\t\t\t'advanced-cropper-line-wrapper',\n\t\t\t\tposition && `advanced-cropper-line-wrapper--${position}`,\n\t\t\t\tdisabled && `advanced-cropper-line-wrapper--disabled`,\n\t\t\t\tclassName,\n\t\t\t])}\n\t\t\tdisabled={disabled}\n\t\t\tonMove={onDrag}\n\t\t\tonMoveEnd={onDragEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t\tactivationDistance={0}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn([\n\t\t\t\t\t'advanced-cropper-line-wrapper__content',\n\t\t\t\t\tposition && `advanced-cropper-line-wrapper__content--${position}`,\n\t\t\t\t])}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</DraggableElement>\n\t);\n};\n","import React, { useState } from 'react';\nimport cn from 'classnames';\nimport { CardinalDirection, MoveDirections } from 'advanced-cropper';\nimport { LineWrapper } from '../service/LineWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\tposition?: CardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleLine = ({\n\tposition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<LineWrapper\n\t\t\tclassName={cn('advanced-cropper-simple-line-wrapper', wrapperClassName, {\n\t\t\t\t[`advanced-cropper-simple-line-wrapper--${position}`]: !!position,\n\t\t\t})}\n\t\t\tposition={position}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-line',\n\t\t\t\t\thover && 'advanced-cropper-simple-line--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-line--${position}`]: !!position,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</LineWrapper>\n\t);\n};\n","import React, { CSSProperties, ReactNode } from 'react';\nimport classnames from 'classnames';\nimport {\n\tHorizontalCardinalDirection,\n\tMoveDirections,\n\tVerticalCardinalDirection,\n\tgetDirectionNames,\n} from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n\tonDrag?: (shift: MoveDirections, event: MouseEvent | TouchEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tverticalPosition?: VerticalCardinalDirection;\n}\n\nexport const HandlerWrapper = ({\n\thorizontalPosition,\n\tverticalPosition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n\tstyle,\n}: Props) => {\n\tconst position =\n\t\thorizontalPosition || verticalPosition\n\t\t\t? getDirectionNames(horizontalPosition, verticalPosition).snakeCase\n\t\t\t: null;\n\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={classnames(\n\t\t\t\tclassName,\n\t\t\t\t'advanced-cropper-handler-wrapper',\n\t\t\t\tposition && `advanced-cropper-handler-wrapper--${position}`,\n\t\t\t\tdisabled && 'advanced-cropper-handler-wrapper--disabled',\n\t\t\t)}\n\t\t>\n\t\t\t<DraggableElement\n\t\t\t\tclassName={'advanced-cropper-handler-wrapper__draggable'}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMove={onDrag}\n\t\t\t\tonMoveEnd={onDragEnd}\n\t\t\t\tonLeave={onLeave}\n\t\t\t\tonEnter={onEnter}\n\t\t\t\tactivationDistance={0}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</DraggableElement>\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties, useState } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { HandlerWrapper } from '../service/HandlerWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\twrapperStyle?: CSSProperties;\n\tverticalPosition?: VerticalCardinalDirection;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (shift: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleHandler = ({\n\tverticalPosition,\n\thorizontalPosition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\twrapperStyle,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<HandlerWrapper\n\t\t\tstyle={wrapperStyle}\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-simple-handler-wrapper',\n\t\t\t\twrapperClassName,\n\t\t\t\tverticalPosition && `advanced-cropper-simple-handler-wrapper--${verticalPosition}`,\n\t\t\t\thorizontalPosition && `advanced-cropper-simple-handler-wrapper--${horizontalPosition}`,\n\t\t\t\thorizontalPosition &&\n\t\t\t\t\tverticalPosition &&\n\t\t\t\t\t`advanced-cropper-simple-handler-wrapper--${horizontalPosition}-${verticalPosition}`,\n\t\t\t\thover && 'advanced-cropper-simple-handler-wrapper--hover',\n\t\t\t)}\n\t\t\tverticalPosition={verticalPosition}\n\t\t\thorizontalPosition={horizontalPosition}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-handler',\n\t\t\t\t\thover && 'advanced-cropper-simple-handler--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${verticalPosition}`]: !!verticalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}`]: !!horizontalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}-${verticalPosition}`]:\n\t\t\t\t\t\t\thorizontalPosition && verticalPosition,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</HandlerWrapper>\n\t);\n};\n","import React, { useMemo, ReactNode, CSSProperties, useState, FC } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tHorizontalCardinalDirection,\n\tVerticalCardinalDirection,\n\tMoveDirections,\n\tResizeOptions,\n\tgetDirectionNames,\n\tisCardinalDirection,\n\tisObject,\n\tCoordinates,\n\tResizeAnchor,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\n\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null] as const;\nconst VERTICAL_DIRECTIONS = ['south', 'north', null] as const;\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface Props {\n\tstyle?: CSSProperties;\n\tclassName?: string;\n\thandlerComponent?: HandlerComponent;\n\thandlers?: boolean | Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: boolean | Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tdisabled?: boolean;\n\tonResize?: (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => void;\n\tonResizeEnd?: () => void;\n\tchildren?: ReactNode;\n\treference?: Coordinates | null;\n}\n\ninterface HandlerNode {\n\tname: OrdinalDirection;\n\tcomponent: HandlerComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\tcontainerClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface LineNode {\n\tname: CardinalDirection;\n\tcomponent: LineComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface PointNode {\n\tname: OrdinalDirection;\n\tclassName: string;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n}\n\nexport const BoundingBox = ({\n\tstyle,\n\tclassName,\n\tchildren,\n\tonResize,\n\tonResizeEnd,\n\thandlerComponent = SimpleHandler,\n\thandlers = {\n\t\teastNorth: true,\n\t\tnorth: true,\n\t\twestNorth: true,\n\t\twest: true,\n\t\twestSouth: true,\n\t\tsouth: true,\n\t\teastSouth: true,\n\t\teast: true,\n\t},\n\thandlerClassNames = {},\n\thandlerWrapperClassNames = {},\n\tlines = {\n\t\twest: true,\n\t\tnorth: true,\n\t\teast: true,\n\t\tsouth: true,\n\t},\n\tlineComponent = SimpleLine,\n\tlineClassNames = {},\n\tlineWrapperClassNames = {},\n\tdisabled = false,\n\treference = null,\n}: Props) => {\n\tconst [lastReference, setLastReference] = useState<Coordinates | null>(null);\n\n\tconst points = useMemo(() => {\n\t\tconst result: PointNode[] = [];\n\t\tHORIZONTAL_DIRECTIONS.forEach((hDirection) => {\n\t\t\tVERTICAL_DIRECTIONS.forEach((vDirection) => {\n\t\t\t\tif (hDirection !== vDirection) {\n\t\t\t\t\tlet { snakeCase, camelCase } = getDirectionNames(hDirection, vDirection);\n\t\t\t\t\tif (snakeCase && camelCase) {\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\tname: camelCase,\n\t\t\t\t\t\t\tclassName: snakeCase,\n\t\t\t\t\t\t\tverticalPosition: vDirection,\n\t\t\t\t\t\t\thorizontalPosition: hDirection,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn result;\n\t}, []);\n\n\tconst lineNodes = useMemo(() => {\n\t\tconst result: LineNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isCardinalDirection(point.name) && (isObject(lines) ? lines[point.name] : lines)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: lineComponent,\n\t\t\t\t\tclassName: cn(\n\t\t\t\t\t\tlineClassNames.default,\n\t\t\t\t\t\tlineClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line--${point.name}`,\n\t\t\t\t\t\tlineWrapperClassNames.default,\n\t\t\t\t\t\tlineWrapperClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineWrapperClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: lineClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, lines, lineComponent, lineClassNames, lineWrapperClassNames, disabled]);\n\n\tconst handlerNodes = useMemo(() => {\n\t\tconst result: HandlerNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isObject(handlers) ? handlers[point.name] : handlers) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: handlerComponent,\n\t\t\t\t\tclassName: cn(handlerClassNames.default, handlerClassNames[point.name]),\n\t\t\t\t\tcontainerClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper--${point.className}`,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler--${point.className}`,\n\t\t\t\t\t\thandlerWrapperClassNames.default,\n\t\t\t\t\t\thandlerWrapperClassNames[point.name],\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: handlerClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, handlers, handlerComponent, handlerClassNames, handlerWrapperClassNames, disabled]);\n\n\tconst onHandlerMove =\n\t\t(horizontalPosition: HorizontalCardinalDirection | null, verticalPosition: VerticalCardinalDirection | null) =>\n\t\t({ left, top }: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => {\n\t\t\tconst directions = {\n\t\t\t\tleft,\n\t\t\t\ttop,\n\t\t\t};\n\n\t\t\tlet respectDirection: 'width' | 'height' | undefined;\n\t\t\tif (!verticalPosition && horizontalPosition) {\n\t\t\t\trespectDirection = 'width';\n\t\t\t} else if (verticalPosition && !horizontalPosition) {\n\t\t\t\trespectDirection = 'height';\n\t\t\t}\n\n\t\t\tif (!disabled) {\n\t\t\t\tif (onResize) {\n\t\t\t\t\tconst anchor = getDirectionNames(horizontalPosition, verticalPosition).camelCase;\n\t\t\t\t\tif (anchor) {\n\t\t\t\t\t\tonResize(anchor, directions, {\n\t\t\t\t\t\t\treference: lastReference || reference,\n\t\t\t\t\t\t\tpreserveAspectRatio: nativeEvent && nativeEvent.shiftKey,\n\t\t\t\t\t\t\trespectDirection,\n\t\t\t\t\t\t\tcompensate: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!lastReference) {\n\t\t\t\t\tsetLastReference(reference);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\tconst onHandlerMoveEnd = () => {\n\t\tonResizeEnd?.();\n\t\tsetLastReference(null);\n\t};\n\n\treturn (\n\t\t<div className={cn('advanced-cropper-bounding-box', className)} style={style}>\n\t\t\t{children}\n\t\t\t<div>\n\t\t\t\t{lineNodes.map((line) => (\n\t\t\t\t\t<line.component\n\t\t\t\t\t\tkey={line.name}\n\t\t\t\t\t\tdefaultClassName={line.className}\n\t\t\t\t\t\thoverClassName={line.hoverClassName}\n\t\t\t\t\t\twrapperClassName={line.wrapperClassName}\n\t\t\t\t\t\tposition={line.name}\n\t\t\t\t\t\tdisabled={line.disabled}\n\t\t\t\t\t\tonMove={onHandlerMove(line.horizontalPosition, line.verticalPosition)}\n\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{handlerNodes.map((handler) => {\n\t\t\t\t\tconst handlerElement = (\n\t\t\t\t\t\t<handler.component\n\t\t\t\t\t\t\tdefaultClassName={handler.className}\n\t\t\t\t\t\t\thoverClassName={handler.hoverClassName}\n\t\t\t\t\t\t\twrapperClassName={handler.wrapperClassName}\n\t\t\t\t\t\t\thorizontalPosition={handler.horizontalPosition}\n\t\t\t\t\t\t\tverticalPosition={handler.verticalPosition}\n\t\t\t\t\t\t\tdisabled={handler.disabled}\n\t\t\t\t\t\t\tonMove={onHandlerMove(handler.horizontalPosition, handler.verticalPosition)}\n\t\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={handler.name} className={handler.containerClassName}>\n\t\t\t\t\t\t\t{handlerElement}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React, { FC } from 'react';\nimport classnames from 'classnames';\n\ninterface Props {\n\tclassName?: string;\n}\n\nexport const StencilOverlay: FC<Props> = ({ className, children }) => {\n\treturn <div className={classnames('advanced-cropper-stencil-overlay', className)}>{children}</div>;\n};\n","import React, { FC, ReactNode, useLayoutEffect, useRef, useState } from 'react';\nimport { Coordinates, CropperTransitions, deepCompare, isNumber } from 'advanced-cropper';\nimport classnames from 'classnames';\nimport { useTransition } from '../../hooks/useTransition';\n\ninterface Props {\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft?: number;\n\ttop?: number;\n\tchildren?: ReactNode;\n}\n\nexport const ArtificialTransition: FC<Props> = ({ className, transitions, children, ...values }) => {\n\tconst root = useRef<HTMLDivElement>(null);\n\n\tconst transitionValues = useRef<Partial<Coordinates>>(values);\n\n\tconst [rememberedValues, setRememberedValues] = useState(values);\n\n\tconst [runTransitions, transitionsActive] = useTransition(transitions);\n\n\tuseLayoutEffect(() => {\n\t\tif (!deepCompare(rememberedValues, values)) {\n\t\t\tsetRememberedValues(values);\n\n\t\t\tconst startValues = transitionsActive\n\t\t\t\t? {\n\t\t\t\t\t\t...transitionValues.current,\n\t\t\t\t  }\n\t\t\t\t: rememberedValues;\n\n\t\t\trunTransitions((progress) => {\n\t\t\t\tconst properties = ['left', 'top', 'height', 'width'] as const;\n\n\t\t\t\tproperties.forEach((property) => {\n\t\t\t\t\tconst desiredValue = values[property];\n\t\t\t\t\tconst startValue = startValues[property];\n\n\t\t\t\t\ttransitionValues.current[property] =\n\t\t\t\t\t\tisNumber(startValue) && isNumber(desiredValue)\n\t\t\t\t\t\t\t? startValue + (desiredValue - startValue) * progress\n\t\t\t\t\t\t\t: desiredValue;\n\t\t\t\t});\n\n\t\t\t\tif (root.current) {\n\t\t\t\t\troot.current.style.width = `${transitionValues.current.width}px`;\n\t\t\t\t\troot.current.style.height = `${transitionValues.current.height}px`;\n\t\t\t\t\troot.current.style.transform = `translate3d(${transitionValues.current.left}px, ${transitionValues.current.top}px, 0px)`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [rememberedValues, transitionsActive, values.width, values.height, values.top, values.left]);\n\n\tconst currentValues = transitionsActive ? transitionValues.current : values;\n\n\tconst rootStyle = {\n\t\tleft: 0,\n\t\ttop: 0,\n\t\twidth: `${currentValues.width}px`,\n\t\theight: `${currentValues.height}px`,\n\t\ttransform: `translate3d(${currentValues.left}px, ${currentValues.top}px, 0px)`,\n\t};\n\n\treturn (\n\t\t<div ref={root} className={classnames('advanced-cropper-artificial-transition', className)} style={rootStyle}>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import { CropperTransitions, Animation } from 'advanced-cropper';\nimport { useRef, useState } from 'react';\n\nexport function useTransition<T>(transitions: CropperTransitions | null = null): [(callback: (progress: number) => void) => void, boolean] {\n\tconst animation = useRef(new Animation());\n\tconst [active, setActive] = useState(false);\n\n\treturn [\n\t\t(callback: (progress: number) => void) => {\n\t\t\tif (transitions && transitions.active) {\n\t\t\t\t\tanimation.current.start({\n\t\t\t\t\t\t...transitions,\n\t\t\t\t\t\tonStart() {\n\t\t\t\t\t\t\tsetActive(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonProgress(progress) {\n\t\t\t\t\t\t\tcallback(progress);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonStop() {\n\t\t\t\t\t\t\tsetActive(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n \t\t\t} else if (!animation.current.active) {\n\t\t\t\tcallback(1);\n\t\t\t}\n\t\t},\n\t\tactive,\n\t];\n}\n","import React, { FC, ReactNode } from 'react';\nimport { CropperTransitions } from 'advanced-cropper';\nimport classnames from 'classnames';\n\nimport { ArtificialTransition } from './ArtificialTransition';\n\ninterface Props {\n\tchildren?: ReactNode;\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft: number;\n\ttop: number;\n}\n\nexport const StencilWrapper: FC<Props> = ({ className, transitions, width, height, left, top, children }) => {\n\treturn (\n\t\t<ArtificialTransition\n\t\t\tclassName={classnames('advanced-cropper-stencil-wrapper', className)}\n\t\t\ttransitions={transitions}\n\t\t\twidth={width}\n\t\t\theight={height}\n\t\t\ttop={top}\n\t\t\tleft={left}\n\t\t>\n\t\t\t{children}\n\t\t</ArtificialTransition>\n\t);\n};\n","import React, { FC, ReactNode, useState } from 'react';\nimport cn from 'classnames';\nimport { useUpdateEffect } from '../../hooks/useUpdateEffect';\n\nexport interface StencilGridProps {\n\tvisible?: boolean;\n\tcolumns?: number;\n\trows?: number;\n\tclassName?: string;\n}\n\nexport const StencilGrid: FC<StencilGridProps> = ({ columns = 3, rows = 3, visible = false, className }) => {\n\tconst nodes: ReactNode[] = [];\n\n\tconst [currentColumns, setCurrentColumns] = useState(columns);\n\tconst [currentRows, setCurrentRows] = useState(rows);\n\n\tuseUpdateEffect(() => {\n\t\tif (visible) {\n\t\t\tsetCurrentRows(rows);\n\t\t\tsetCurrentColumns(columns);\n\t\t}\n\t}, [visible, columns, rows]);\n\n\tfor (let i = 0; i < currentRows; i++) {\n\t\tconst cells: ReactNode[] = [];\n\t\tfor (let j = 0; j < currentColumns; j++) {\n\t\t\tcells.push(\n\t\t\t\t<div\n\t\t\t\t\tkey={j}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-stencil-grid__cell',\n\t\t\t\t\t\ti === 0 && 'advanced-cropper-stencil-grid__cell--top',\n\t\t\t\t\t\ti === currentRows - 1 && 'advanced-cropper-stencil-grid__cell--bottom',\n\t\t\t\t\t\tj === 0 && 'advanced-cropper-stencil-grid__cell--left',\n\t\t\t\t\t\tj === currentColumns - 1 && 'advanced-cropper-stencil-grid__cell--right',\n\t\t\t\t\t)}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\t\tnodes.push(\n\t\t\t<div key={i} className={'advanced-cropper-stencil-grid__row'}>\n\t\t\t\t{cells}\n\t\t\t</div>,\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-stencil-grid',\n\t\t\t\tvisible && 'advanced-cropper-stencil-grid--visible',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{nodes}\n\t\t</div>\n\t);\n};\n","import React, { FC, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n\tcreateAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tminAspectRatio?: number;\n\tmaxAspectRatio?: number;\n\taspectRatio?: RawAspectRatio;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tgrid?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const RectangleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\taspectRatio,\n\t\t\tminAspectRatio,\n\t\t\tmaxAspectRatio,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\tnorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twest: true,\n\t\t\t\twestSouth: true,\n\t\t\t\tsouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t\teast: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: createAspectRatio(\n\t\t\t\taspectRatio || {\n\t\t\t\t\tminimum: minAspectRatio,\n\t\t\t\t\tmaximum: maxAspectRatio,\n\t\t\t\t},\n\t\t\t),\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && movable) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizable) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-rectangle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--movable': movable,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizable': resizable,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-rectangle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizable}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!movable}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-rectangle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nRectangleStencil.displayName = 'RectangleStencil';\n","import React, { ReactNode, CSSProperties, Component, RefObject, createRef } from 'react';\nimport {\n\tdebounce,\n\tDebouncedFunction,\n\tImageTransform,\n\tPoint,\n\tSimpleTouch,\n\ttouchesToImageTransform,\n\twheelEventToImageTransform,\n} from 'advanced-cropper';\n\ninterface Props {\n\tonTransform?: (transform: ImageTransform) => void;\n\tonTransformEnd?: () => void;\n\tonEvent?: (transformEvent: TransformableImageEvent, nativeEvent: Event) => unknown;\n\tdisabled?: boolean;\n\ttouchMove?: boolean;\n\tmouseMove?: boolean;\n\ttouchScale?: boolean;\n\ttouchRotate?: boolean;\n\twheelScale?:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n\ttimeout?: number;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n}\n\nexport class TransformableImageEvent {\n\tconstructor({ active }: { active: boolean }) {\n\t\tthis.active = active;\n\t\tthis.defaultPrevented = false;\n\t}\n\tpreventDefault() {\n\t\tthis.defaultPrevented = true;\n\t}\n\tdefaultPrevented: boolean;\n\tactive: boolean;\n}\n\nexport class TransformableImage extends Component<Props> {\n\ttouches: (SimpleTouch & { identifier?: number })[];\n\ttransforming: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\tdebouncedProcessEnd: DebouncedFunction<TransformableImage['processEnd']>;\n\n\tstatic defaultProps = {\n\t\ttouchMove: true,\n\t\tmouseMove: true,\n\t\ttouchScale: true,\n\t\ttouchRotate: false,\n\t\twheelScale: true,\n\t\ttimeout: 500,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.transforming = false;\n\t\tthis.touches = [];\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t\tthis.debouncedProcessEnd = debounce(this.processEnd, props.timeout);\n\t}\n\n\tprocessMove = (newTouches: SimpleTouch[]) => {\n\t\tconst { onTransform, touchScale, touchMove, touchRotate } = this.props;\n\t\tconst container = this.container.current;\n\t\tif (container && onTransform) {\n\t\t\tonTransform(\n\t\t\t\ttouchesToImageTransform(newTouches, this.touches, container, {\n\t\t\t\t\tscale: touchScale,\n\t\t\t\t\trotate: touchRotate,\n\t\t\t\t\tmove: touchMove,\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis.touches = newTouches;\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onTransformEnd } = this.props;\n\t\tif (this.transforming) {\n\t\t\tthis.transforming = false;\n\t\t\tif (onTransformEnd) {\n\t\t\t\tonTransformEnd();\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessStart = () => {\n\t\tthis.transforming = true;\n\t\tthis.debouncedProcessEnd.clear();\n\t};\n\n\tprocessEvent = (nativeEvent: Event) => {\n\t\tconst { onEvent, disabled } = this.props;\n\t\tconst transformEvent = new TransformableImageEvent({ active: this.transforming });\n\n\t\tif (onEvent) {\n\t\t\tonEvent(transformEvent, nativeEvent);\n\t\t} else {\n\t\t\tnativeEvent.preventDefault();\n\t\t\tnativeEvent.stopPropagation();\n\t\t}\n\n\t\treturn !disabled && !transformEvent.defaultPrevented;\n\t};\n\n\tonWheel = (event: WheelEvent) => {\n\t\tconst { onTransform, wheelScale } = this.props;\n\t\tconst container = this.container.current;\n\n\t\tif (wheelScale) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processStart();\n\t\t\t\tif (onTransform && container) {\n\t\t\t\t\tonTransform(\n\t\t\t\t\t\twheelEventToImageTransform(event, container, wheelScale === true ? 0.1 : wheelScale.ratio),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (!this.touches.length) {\n\t\t\t\t\tthis.debouncedProcessEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchStart = (event: TouchEvent) => {\n\t\tconst { touchMove, touchScale, touchRotate } = this.props;\n\t\tif (event.cancelable && (touchMove || ((touchScale || touchRotate) && event.touches.length > 1))) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst container = this.container.current;\n\t\t\t\tif (container) {\n\t\t\t\t\tconst { left, top, bottom, right } = container.getBoundingClientRect();\n\t\t\t\t\tthis.touches = Array.from(event.touches).filter(\n\t\t\t\t\t\t(touch) =>\n\t\t\t\t\t\t\ttouch.clientX > left &&\n\t\t\t\t\t\t\ttouch.clientX < right &&\n\t\t\t\t\t\t\ttouch.clientY > top &&\n\t\t\t\t\t\t\ttouch.clientY < bottom,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchEnd = (event: TouchEvent) => {\n\t\tif (event.touches.length === 0) {\n\t\t\tthis.touches = [];\n\t\t\tthis.processEnd();\n\t\t}\n\t};\n\n\tonTouchMove = (event: TouchEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tconst touches = [...event.touches].filter(\n\t\t\t\t(touch) =>\n\t\t\t\t\t!touch.identifier ||\n\t\t\t\t\tthis.touches.find((anotherTouch) => anotherTouch.identifier === touch.identifier),\n\t\t\t);\n\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove(touches);\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (event: MouseEvent) => {\n\t\tconst { mouseMove } = this.props;\n\t\tif (mouseMove && 'buttons' in event && event.buttons === 1) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst touch = {\n\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t};\n\t\t\t\tthis.touches = [touch];\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseMove = (event: MouseEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove([\n\t\t\t\t\t{\n\t\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.touches = [];\n\t\tthis.processEnd();\n\t};\n\n\tshouldComponentUpdate(): boolean {\n\t\treturn true;\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t\tcontainer.removeEventListener('wheel', this.onWheel);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('wheel', this.onWheel, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { className, children, style } = this.props;\n\t\treturn (\n\t\t\t<div className={className} style={style} ref={this.container}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { forwardRef, PropsWithoutRef } from 'react';\n\nexport function createCropper<T, P = {}>(\n\trender: (props: P, ref: React.Ref<T>) => React.ReactElement | null,\n): (props: PropsWithoutRef<P> & React.RefAttributes<T>) => React.ReactElement | null {\n\treturn forwardRef<T, P>(render);\n}\n","import React, { CSSProperties, ReactNode } from 'react';\nimport { CropperTransitions, ImageTransform } from 'advanced-cropper';\nimport { useRotateImageOptions } from '../../hooks/useRotateImageOptions';\nimport { useScaleImageOptions } from '../../hooks/useScaleImageOptions';\nimport { useMoveImageOptions } from '../../hooks/useMoveImageOptions';\nimport { MoveImageOptions, RotateImageOptions, ScaleImageOptions } from '../../types';\nimport { TransformableImage } from './TransformableImage';\n\ninterface DesiredCropperRef {\n\ttransformImage: (transform: ImageTransform) => void;\n\ttransformImageEnd: () => void;\n\tgetTransitions: () => CropperTransitions;\n}\n\nexport interface CropperBackgroundWrapperProps {\n\tcropper: DesiredCropperRef;\n\trotateImage?: boolean | RotateImageOptions;\n\tscaleImage?: boolean | ScaleImageOptions;\n\tmoveImage?: boolean | MoveImageOptions;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\ttimeout?: number;\n}\n\nexport const CropperBackgroundWrapper = ({\n\tscaleImage = true,\n\tmoveImage = true,\n\trotateImage = false,\n\tchildren,\n\tclassName,\n\tstyle,\n\tcropper,\n\ttimeout,\n}: CropperBackgroundWrapperProps) => {\n\tconst transitions = cropper.getTransitions();\n\n\tconst rotateImageOptions = useRotateImageOptions(rotateImage);\n\tconst scaleImageOptions = useScaleImageOptions(scaleImage);\n\tconst moveImageOptions = useMoveImageOptions(moveImage);\n\n\treturn (\n\t\t<TransformableImage\n\t\t\tclassName={className}\n\t\t\tstyle={style}\n\t\t\tonTransform={cropper.transformImage}\n\t\t\tonTransformEnd={cropper.transformImageEnd}\n\t\t\ttouchMove={moveImageOptions.touch}\n\t\t\tmouseMove={moveImageOptions.mouse}\n\t\t\ttouchScale={scaleImageOptions.touch}\n\t\t\twheelScale={scaleImageOptions.wheel}\n\t\t\ttouchRotate={rotateImageOptions.touch}\n\t\t\tdisabled={transitions.active}\n\t\t\ttimeout={timeout}\n\t\t>\n\t\t\t{children}\n\t\t</TransformableImage>\n\t);\n};\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { RotateImageOptions } from '../types';\n\ninterface DefinedRotateImageOptions {\n\ttouch: boolean;\n}\n\nexport function useRotateImageOptions(rotateImage: RotateImageOptions | boolean): DefinedRotateImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\trotateImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[rotateImage],\n\t);\n}\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { ScaleImageOptions } from '../types';\n\ninterface DefinedScaleImageOptions {\n\ttouch: boolean;\n\twheel:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n}\n\nexport function useScaleImageOptions(scaleImage: ScaleImageOptions | boolean): DefinedScaleImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tscaleImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\twheel: {\n\t\t\t\t\t\tratio: 0.1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\twheel: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[scaleImage],\n\t);\n}\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { MoveImageOptions } from '../types';\n\ninterface DefinedMoveImageOptions {\n\ttouch: boolean;\n\tmouse: boolean;\n}\n\nexport function useMoveImageOptions(moveImage: MoveImageOptions | boolean): DefinedMoveImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tmoveImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\tmouse: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\tmouse: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[moveImage],\n\t);\n}\n","import React, { useImperativeHandle, useRef, CSSProperties, Ref } from 'react';\nimport cn from 'classnames';\nimport {\n\tDrawOptions,\n\tDefaultSettings,\n\tdefaultStencilConstraints,\n\tCoreSettings,\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tModifierSettings,\n\tInitializeSettings,\n} from 'advanced-cropper';\n\nimport {\n\tCropperBackgroundWrapperComponent,\n\tCropperWrapperComponent,\n\tStencilComponent,\n\tCropperBackgroundComponent,\n\tArbitraryProps,\n\tStencilConstraints,\n\tSettingsExtension,\n\tExtendedSettings,\n\tCustomCropperRef,\n\tCropperBoundaryComponent,\n} from '../types';\nimport { CropperStateHook, CropperInstanceSettings, CropperInstanceSettingsProp } from '../hooks/useCropperInstance';\nimport { createCropper } from '../service/cropper';\nimport { AbstractCropperHookProps, useAbstractCropper } from '../hooks/useAbstractCropper';\nimport { StretchableBoundary } from './service/StretchableBoundary';\nimport { CropperWrapper } from './service/CropperWrapper';\nimport { CropperBackgroundImage } from './service/CropperBackgroundImage';\nimport { CropperCanvas } from './service/CropperCanvas';\nimport { RectangleStencil } from './stencils/RectangleStencil';\nimport { CropperBackgroundWrapper } from './service/CropperBackgroundWrapper';\n\nexport type AbstractCropperSettingsProp<Settings extends CropperInstanceSettings> =\n\tCropperInstanceSettingsProp<Settings>;\n\nexport type AbstractCropperSettings = DefaultSettings & CoreSettings & ModifierSettings & InitializeSettings;\n\nexport interface AbstractCropperRef<Settings extends AbstractCropperSettings = AbstractCropperSettings> {\n\treset: () => void;\n\trefresh: () => void;\n\tclear: () => void;\n\tsetCoordinates: CropperStateHook['setCoordinates'];\n\tsetState: CropperStateHook['setState'];\n\tsetImage: (image: CropperImage) => void;\n\tflipImage: CropperStateHook['flipImage'];\n\tzoomImage: CropperStateHook['zoomImage'];\n\trotateImage: CropperStateHook['rotateImage'];\n\treconcileState: CropperStateHook['reconcileState'];\n\tmoveImage: CropperStateHook['moveImage'];\n\tmoveCoordinates: CropperStateHook['moveCoordinates'];\n\tmoveCoordinatesEnd: CropperStateHook['moveCoordinatesEnd'];\n\tresizeCoordinates: CropperStateHook['resizeCoordinates'];\n\tresizeCoordinatesEnd: CropperStateHook['resizeCoordinatesEnd'];\n\ttransformImage: CropperStateHook['transformImage'];\n\ttransformImageEnd: CropperStateHook['transformImageEnd'];\n\tgetCoordinates: CropperStateHook['getCoordinates'];\n\tgetVisibleArea: CropperStateHook['getVisibleArea'];\n\tgetTransforms: CropperStateHook['getTransforms'];\n\tgetStencilCoordinates: CropperStateHook['getStencilCoordinates'];\n\tgetDefaultState: () => CropperState | null;\n\tgetCanvas: (options?: DrawOptions) => HTMLCanvasElement | null;\n\tgetSettings: () => Settings;\n\tgetImage: () => CropperImage | null;\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface AbstractCropperProps<Settings extends AbstractCropperSettings>\n\textends Omit<AbstractCropperHookProps<Settings>, 'settings'> {\n\tbackgroundComponent?: CropperBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tbackgroundClassName?: string;\n\tbackgroundWrapperComponent?: CropperBackgroundWrapperComponent;\n\tbackgroundWrapperProps?: ArbitraryProps;\n\tbackgroundWrapperClassName?: string;\n\twrapperComponent?: CropperWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstencilComponent?: StencilComponent;\n\tstencilProps?: ArbitraryProps;\n\tstencilConstraints?: StencilConstraints<AbstractCropperSettingsProp<Settings>>;\n\tclassName?: string;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\tstyle?: CSSProperties;\n\tsettings: CropperInstanceSettingsProp<Settings>;\n}\n\nexport type AbstractCropperIntrinsicProps<Settings extends AbstractCropperSettings> = Omit<\n\tAbstractCropperProps<Settings>,\n\t'settings'\n>;\n\nconst AbstractCropperComponent = <Extension extends SettingsExtension = {}>(\n\tprops: AbstractCropperProps<ExtendedSettings<Extension>>,\n\tref: Ref<CustomCropperRef<Extension>>,\n) => {\n\tconst {\n\t\tstyle,\n\t\tclassName,\n\t\tstencilComponent = RectangleStencil,\n\t\tstencilConstraints = defaultStencilConstraints,\n\t\tstencilProps = {},\n\t\twrapperComponent = CropperWrapper,\n\t\twrapperProps = {},\n\t\tbackgroundComponent = CropperBackgroundImage,\n\t\tbackgroundProps = {},\n\t\tbackgroundClassName,\n\t\tbackgroundWrapperComponent = CropperBackgroundWrapper,\n\t\tbackgroundWrapperProps = {},\n\t\tboundaryComponent = StretchableBoundary,\n\t\tboundaryProps,\n\t\tboundaryClassName,\n\t\tcanvas = true,\n\t\tcrossOrigin = true,\n\t\tsettings,\n\t\t...parameters\n\t} = props;\n\n\tconst stencilRef = useRef<StencilComponent>(null);\n\n\tconst { cropper, image, refs } = useAbstractCropper(() => ({\n\t\t...parameters,\n\t\tcrossOrigin,\n\t\tstencilProps,\n\t\tcanvas,\n\t\tsettings: {\n\t\t\t...settings,\n\t\t\t...stencilConstraints(settings, {\n\t\t\t\t...stencilProps,\n\t\t\t\t...stencilRef.current,\n\t\t\t}),\n\t\t},\n\t}));\n\n\tconst StencilComponent = stencilComponent;\n\n\tconst WrapperComponent = wrapperComponent;\n\n\tconst BackgroundWrapperComponent = backgroundWrapperComponent;\n\n\tconst BackgroundComponent = backgroundComponent;\n\n\tconst BoundaryComponent = boundaryComponent;\n\n\tuseImperativeHandle(ref, () => cropper);\n\n\tconst deprecatedWrapperProps = {\n\t\tloading: cropper.isLoading(),\n\t\tloaded: cropper.isLoaded(),\n\t};\n\n\treturn (\n\t\t<WrapperComponent\n\t\t\t{...wrapperProps}\n\t\t\tclassName={cn('advanced-cropper', className)}\n\t\t\tcropper={cropper}\n\t\t\tstyle={style}\n\t\t\t{...deprecatedWrapperProps}\n\t\t>\n\t\t\t<BoundaryComponent\n\t\t\t\t{...boundaryProps}\n\t\t\t\tref={refs.boundary}\n\t\t\t\tclassName={cn('advanced-cropper__boundary', boundaryClassName)}\n\t\t\t>\n\t\t\t\t<BackgroundWrapperComponent\n\t\t\t\t\t{...backgroundWrapperProps}\n\t\t\t\t\tcropper={cropper}\n\t\t\t\t\tclassName={'advanced-cropper__background-wrapper'}\n\t\t\t\t>\n\t\t\t\t\t{cropper.getState() && (\n\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\tref={refs.image}\n\t\t\t\t\t\t\tcrossOrigin={crossOrigin}\n\t\t\t\t\t\t\tcropper={cropper}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper__background', backgroundClassName)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<StencilComponent {...stencilProps} ref={stencilRef} cropper={cropper} image={image} />\n\t\t\t\t</BackgroundWrapperComponent>\n\t\t\t\t{canvas && <CropperCanvas ref={refs.canvas} />}\n\t\t\t</BoundaryComponent>\n\t\t</WrapperComponent>\n\t);\n};\n\nexport const AbstractCropper = createCropper(AbstractCropperComponent);\n","export const defaultSettings = [\n\t'transformImage',\n\t'moveCoordinates',\n\t'resizeCoordinates',\n\t'defaultCoordinates',\n\t'defaultVisibleArea',\n\t'areaPositionRestrictions',\n\t'areaSizeRestrictions',\n\t'sizeRestrictions',\n\t'positionRestrictions',\n\t'aspectRatio',\n\t'minWidth',\n\t'minHeight',\n\t'maxWidth',\n\t'maxHeight',\n\t'defaultSize',\n\t'defaultPosition',\n\t'defaultTransforms',\n\t'imageRestriction',\n\t'priority',\n];\n","import { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperIntrinsicProps } from '../components/AbstractCropper';\nimport { defaultSettings } from '../service/constants';\nimport { CoreSettings, DefaultSettings, ModifierSettings } from '../../../../Advanced Cropper/advanced-cropper/dist';\n\ntype Props<Extension extends SettingsExtension> = AbstractCropperIntrinsicProps<ExtendedSettings<Extension>>;\n\nexport function useAbstractCropperProps<Extension extends SettingsExtension>(\n\tprops: Props<Extension>,\n\tsettings: string[] = defaultSettings,\n) {\n\tconst result: any = { settings: {}, props: {} };\n\n\t(Object.keys(props) as (keyof typeof props)[]).forEach((key) => {\n\t\tif (settings.some((setting) => setting === key)) {\n\t\t\tresult.settings[key] = props[key];\n\t\t} else {\n\t\t\tresult.props[key] = props[key];\n\t\t}\n\t});\n\n\treturn result as {\n\t\tsettings: Extension & Partial<DefaultSettings & CoreSettings & ModifierSettings>;\n\t\tprops: Props<Extension>;\n\t};\n}\n","import React, { forwardRef, Ref } from 'react';\nimport {\n\tdefaultSize,\n\tsizeRestrictions,\n\taspectRatio,\n\tfixedStencil,\n\tStencilSize,\n\tfixedStencilConstraints,\n} from 'advanced-cropper/extensions/stencil-size';\nimport { withDefaultSizeRestrictions } from 'advanced-cropper/defaults';\nimport { CustomCropperProps, CustomCropperRef } from '../../types';\nimport { AbstractCropper } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { defaultSettings } from '../../service/constants';\n\ntype UnavailableProps = 'sizeRestrictions' | 'aspectRatio';\n\nexport interface FixedCropperSettings {\n\tstencilSize: StencilSize<this>;\n}\n\nexport type FixedCropperProps = Omit<CustomCropperProps<FixedCropperSettings>, UnavailableProps>;\n\nexport type FixedCropperRef = CustomCropperRef<FixedCropperSettings>;\n\nexport const FixedCropper = forwardRef((props: FixedCropperProps, ref?: Ref<FixedCropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props, [...defaultSettings, 'stencilSize']);\n\treturn (\n\t\t<AbstractCropper<FixedCropperSettings>\n\t\t\tpostProcess={fixedStencil}\n\t\t\tstencilConstraints={fixedStencilConstraints}\n\t\t\t{...cropperProps.props}\n\t\t\tsettings={{\n\t\t\t\tdefaultSize,\n\t\t\t\taspectRatio,\n\t\t\t\tsizeRestrictions: withDefaultSizeRestrictions(sizeRestrictions),\n\t\t\t\t...cropperProps.settings,\n\t\t\t\ttransformImage: {\n\t\t\t\t\t...cropperProps.settings.transformImage,\n\t\t\t\t\tadjustStencil: false,\n\t\t\t\t},\n\t\t\t}}\n\t\t\tref={ref}\n\t\t/>\n\t);\n});\n\nFixedCropper.displayName = 'FixedCropper';\n","import React, { forwardRef, Ref } from 'react';\nimport { isUndefined } from 'advanced-cropper';\nimport { StencilSize } from 'advanced-cropper/extensions/stencil-size';\nimport { CustomCropperProps, CustomCropperRef, ExtendedSettings, SettingsExtension } from '../../types';\nimport { hybridStencilAutoZoom } from '../../deprecated/hybridAutoZoom';\nimport { useDeprecationWarning } from '../../hooks/useDeprecationWarning';\nimport { AbstractCropper, AbstractCropperIntrinsicProps } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { FixedCropper, FixedCropperRef, FixedCropperSettings } from './FixedCropper';\n\ninterface DeprecatedCropperSettings {\n\tstencilSize?: StencilSize;\n\tautoZoom?: boolean;\n}\n\nexport type CropperProps<Extension extends SettingsExtension = {}> = CustomCropperProps<Extension>;\n\nexport type CropperRef<Extension extends SettingsExtension = {}> = CustomCropperRef<Extension>;\n\nexport const Cropper = forwardRef((props: CropperProps, ref?: Ref<CropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props);\n\n\tconst intrinsicProps = cropperProps.props;\n\n\t// Process the deprecated properties\n\tconst { stencilSize, autoZoom, ...actualSettings } = cropperProps.settings as DeprecatedCropperSettings;\n\n\tconst deprecationWarning = useDeprecationWarning();\n\n\tif (!isUndefined(autoZoom)) {\n\t\tif (intrinsicProps.postProcess || stencilSize) {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function.`,\n\t\t\t);\n\t\t} else {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'`,\n\t\t\t);\n\t\t\tintrinsicProps.postProcess = hybridStencilAutoZoom;\n\t\t}\n\t}\n\n\tif (!isUndefined(stencilSize)) {\n\t\tdeprecationWarning(\n\t\t\t`prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead.`,\n\t\t);\n\t\treturn (\n\t\t\t<FixedCropper\n\t\t\t\tref={ref as Ref<FixedCropperRef>}\n\t\t\t\tstencilSize={stencilSize}\n\t\t\t\t{...actualSettings}\n\t\t\t\t{...(intrinsicProps as AbstractCropperIntrinsicProps<ExtendedSettings<FixedCropperSettings>>)}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <AbstractCropper {...intrinsicProps} ref={ref} settings={actualSettings} />;\n});\n\nCropper.displayName = 'CropperComponent';\n","import React, { ComponentType, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = ComponentType<any>;\n\ntype LineComponent = ComponentType<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tgrid?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const CircleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twestSouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: 1,\n\t\t\tboundingBox: 'circle',\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && movable) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizable) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-circle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--movable': movable,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizable': resizable,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-circle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizable}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!movable}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-circle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nCircleStencil.displayName = 'CircleStencil';\n","import React, { forwardRef, HTMLAttributes, RefObject } from 'react';\nimport cn from 'classnames';\n\ninterface Props extends HTMLAttributes<HTMLImageElement> {\n\tsrc?: string | null;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n}\n\nexport const CropperSource = forwardRef<HTMLImageElement, Props>(\n\t({ src, crossOrigin = true, ...props }: Props, ref) => {\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref as RefObject<HTMLImageElement>}\n\t\t\t\tsrc={src}\n\t\t\t\tclassName={cn('advanced-cropper-source')}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperSource.displayName = 'CropperSource';\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperFade } from '../service/CropperFade';\n\ninterface DesiredCropperRef {\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperPreviewWrapper: FC<CropperPreviewWrapperProps> = ({ children, cropper, className, style }) => {\n\treturn (\n\t\t<div className={cn(className, 'cropper-preview-wrapper')} style={style}>\n\t\t\t<CropperFade visible={cropper?.isLoaded()} className={'cropper-preview-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, Size, getPreviewStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperPreviewBackgroundProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tsize?: Size | null;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperPreviewBackground = ({\n\tclassName,\n\tcropper,\n\tcrossOrigin = true,\n\tsize,\n\tstyle,\n}: CropperPreviewBackgroundProps) => {\n\tconst state = cropper.getState();\n\tconst transitions = cropper.getTransitions();\n\tconst image = cropper.getImage();\n\n\tconst transformStyles = size && image && state?.coordinates ? getPreviewStyle(image, state, size, transitions) : {};\n\n\tconst src = image ? image.src : undefined;\n\n\treturn src ? (\n\t\t<img\n\t\t\tkey={src}\n\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\tsrc={src}\n\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\tstyle={{\n\t\t\t\t...transformStyles,\n\t\t\t\t...style,\n\t\t\t}}\n\t\t\tonMouseDown={preventDefault}\n\t\t/>\n\t) : null;\n};\n","import React, {\n\tRefObject,\n\tComponentType,\n\tCSSProperties,\n\tforwardRef,\n\tuseImperativeHandle,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from 'react';\nimport cn from 'classnames';\nimport {\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tSize,\n\tratio,\n\tisGreater,\n\tstretchPreviewBoundary,\n} from 'advanced-cropper';\nimport { StretchableBoundary, StretchableBoundaryMethods } from '../service/StretchableBoundary';\nimport { useWindowResize } from '../../hooks/useWindowResize';\nimport { ArbitraryProps, CropperBoundaryComponent } from '../../types';\nimport { useForceRerender } from '../../hooks/useForceRerender';\nimport { CropperPreviewWrapper } from './CropperPreviewWrapper';\nimport { CropperPreviewBackground } from './CropperPreviewBackground';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetImage: () => CropperImage | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewRef {\n\trefresh: () => void;\n}\n\ntype PreviewWrapperComponent = ComponentType<{\n\tcropper: any;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tloading?: boolean;\n\tloaded?: boolean;\n}>;\n\ntype PreviewBackgroundComponent = ComponentType<{\n\tcropper: any;\n\tsize: Size | null;\n\tclassName?: string;\n}>;\n\ninterface Props {\n\tstate?: CropperState | null;\n\timage?: CropperImage | null;\n\ttransitions?: CropperTransitions | null;\n\tloading?: boolean;\n\tloaded?: boolean;\n\tclassName?: string;\n\tcontentClassName?: string;\n\tbackgroundClassName?: string;\n\tbackgroundComponent?: PreviewBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\twrapperComponent?: PreviewWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstyle?: CSSProperties;\n\tcropper?: RefObject<DesiredCropperRef | null>;\n}\n\nexport const CropperPreview = forwardRef<CropperPreviewRef, Props>(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tcontentClassName,\n\t\t\tstate = null,\n\t\t\timage = null,\n\t\t\ttransitions = null,\n\t\t\tbackgroundComponent = CropperPreviewBackground,\n\t\t\tbackgroundProps,\n\t\t\tbackgroundClassName,\n\t\t\tboundaryComponent = StretchableBoundary,\n\t\t\tboundaryProps,\n\t\t\tboundaryClassName,\n\t\t\twrapperComponent = CropperPreviewWrapper,\n\t\t\twrapperProps,\n\t\t\tloaded = true,\n\t\t\tloading = false,\n\t\t\tstyle,\n\t\t\tcropper,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst rerender = useForceRerender();\n\n\t\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\n\t\tconst instance = cropper || {\n\t\t\tcurrent: {\n\t\t\t\tgetState: () => state,\n\t\t\t\tgetTransitions: () => transitions,\n\t\t\t\tgetImage: () => image,\n\t\t\t\tisLoaded: () => loaded,\n\t\t\t\tisLoading: () => loading,\n\t\t\t},\n\t\t};\n\n\t\tconst [size, setSize] = useState<Size | null>(null);\n\n\t\tconst coordinates = instance.current?.getState()?.coordinates;\n\n\t\tconst src = instance.current?.getImage()?.src;\n\n\t\tconst contentStyle = size\n\t\t\t? {\n\t\t\t\t\twidth: `${size.width}px`,\n\t\t\t\t\theight: `${size.height}px`,\n\t\t\t  }\n\t\t\t: {};\n\n\t\tconst refresh = () => {\n\t\t\tif (boundaryRef.current && coordinates) {\n\t\t\t\tboundaryRef.current.stretchTo(coordinates).then((size) => {\n\t\t\t\t\tif (size && coordinates) {\n\t\t\t\t\t\tif (isGreater(ratio(coordinates), ratio(size))) {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.width,\n\t\t\t\t\t\t\t\theight: size.width / ratio(coordinates),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.height * ratio(coordinates),\n\t\t\t\t\t\t\t\theight: size.height,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetSize(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\trerender();\n\t\t};\n\n\t\tuseWindowResize(refresh);\n\n\t\tuseLayoutEffect(refresh, [coordinates?.height, coordinates?.width]);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\trefresh: rerender,\n\t\t}));\n\n\t\tconst WrapperComponent = wrapperComponent;\n\n\t\tconst BackgroundComponent = backgroundComponent;\n\n\t\tconst BoundaryComponent = boundaryComponent;\n\n\t\treturn (\n\t\t\t<WrapperComponent\n\t\t\t\t{...wrapperProps}\n\t\t\t\tclassName={cn(className, 'advanced-cropper-preview')}\n\t\t\t\tcropper={instance.current}\n\t\t\t\tstyle={style}\n\t\t\t>\n\t\t\t\t<BoundaryComponent\n\t\t\t\t\tref={boundaryRef}\n\t\t\t\t\tstretchAlgorithm={stretchPreviewBoundary}\n\t\t\t\t\t{...boundaryProps}\n\t\t\t\t\tclassName={cn('advanced-cropper-preview__boundary', boundaryClassName)}\n\t\t\t\t>\n\t\t\t\t\t<div className={cn(contentClassName, 'advanced-cropper-preview__content')} style={contentStyle}>\n\t\t\t\t\t\t{instance.current && (\n\t\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\t\tcropper={instance.current}\n\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\tbackgroundClassName,\n\t\t\t\t\t\t\t\t\t'advanced-cropper-preview__image',\n\t\t\t\t\t\t\t\t\tsrc && 'advanced-cropper-preview__image--visible',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</BoundaryComponent>\n\t\t\t</WrapperComponent>\n\t\t);\n\t},\n);\n"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","includes","key","call","join","module","exports","default","hasInteractions","interactions","moveCoordinates","resizeCoordinates","transformImage","move","rotate","flip","scale","getDirectionNames","hDirection","vDirection","camelCase","snakeCase","toUpperCase","slice","isBlob","url","test","isLocal","isDataUrl","isCrossOriginURL","pageLocation","window","location","urlMatch","exec","urlparts","protocol","host","port","portOf","Boolean","isFunction","value","isUndefined","obj","undefined","isObject","term","getOptions","options","defaultScheme","falseScheme","result","keys","forEach","parseNumber","number","parsedNumber","Number","isNaN","isBoolean","isNumber","isNumeric","isString","parseFloat","isFinite","distance","firstPoint","secondPoint","Math","sqrt","pow","left","top","isRoughlyEqual","a","b","tolerance","abs","isGreater","isLower","promiseTimeout","timeout","Promise","resolve","setTimeout","deepClone","map","item","deepCompare","constructor","length_1","valueOf","isCardinalDirection","debounce","callback","delay","timestamp","later","args","_i","last","Date","now","delayValue","clear","clearTimeout","SetCoordinatesMode","ImageRestriction","Priority","ALL_DIRECTIONS","HORIZONTAL_DIRECTIONS","VERTICAL_DIRECTIONS","diff","firstObject","secondObject","getCenter","object","width","height","sizeDistance","applyDirections","coordinates","directions","right","bottom","inverseMove","applyMove","__assign","coordinatesToPositionRestrictions","applyScale","factor","center","progress","currentCenter","ratio","maxScale","size","restrictions","min","maxWidth","Infinity","maxHeight","getBrokenRatio","currentAspectRatio","aspectRatio","ratioBroken","minimum","maximum","fitToSizeRestrictions","sizeRestrictions","minWidth","minHeight","getIntersections","positionRestrictions","intersections","direction","areaLimit","objectLimit","max","resizeToSizeRestrictions","rotateSize","angle","radians","PI","cos","sin","rotatePoint","point","anchor","positionToSizeRestrictions","mergePositionRestrictions","firstDirection","secondDirection","fitToPositionRestrictions","intersection","moveToPositionRestrictions","createAspectRatio","isConsistentSize","isConsistentPosition","reconcileSizeRestrictions","mergeSizeRestrictions","first","second","isInitializedState","state","visibleArea","getAreaSizeRestrictions","settings","areaSizeRestrictions","boundary","calculateAreaSizeRestrictions","getAreaPositionRestrictions","areaPositionRestrictions","getSizeRestrictions","getPositionRestrictions","calculateSizeRestrictions","getCoefficient","getStencilCoordinates","_a","top_1","coefficient","getAspectRatio","getDefaultCoordinates","defaultCoordinates","getDefaultVisibleArea","defaultVisibleArea","getTransformedImageSize","imageSize","transforms","isConsistentState","copyState","approximateSize","params","candidates","reference","traverse","ignoreMinimum","reduce","preparedAspectRatio","getCloserSize","candidate","fitVisibleArea","moveCoordinatesAlgorithm","movedCoordinates","setCoordinates","transform","mode","currentMode","unsafe","zoom","limit","prevCoordinates","newCoordinates","changes","resize","widthIntersections","heightIntersections","fitCoordinates","setVisibleArea","safe","createState","_b","_c","_d","_e","image","horizontal","vertical","defaultTransforms","getDefaultTransforms","priority","fitDirections","preserveRatio","allowedDirections","compensate","fittedDirections","currentWidth","currentHeight","breaks","canBeCompensated","every","side","maxResize","multiplier_1","multiplier_2","distributeOverlap","overlap","anchorToMassPoint","plainAnchor","toLowerCase","indexOf","anchorToAllowedDirections","anchoredResizeCoordinatesAlgorithm","limitations","resizeDirections","normalizedDirections","el","anchorMoveToResizeDirections","actualCoordinates","preserveAspectRatio","respectDirection","overlapHeight","overlapWidth","resizeCoordinatesAlgorithm","minimumSize","getMinimumSize","setBoundary","imageCenter","shift","rotateImageAlgorithm","changed","oldCenter","newCenter","flipImageAlgorithm","scaleFactor","scaleCenter","isAllowedScale","areaScale","stencilScale","scaleRestrictions","stencil","area","relativeCoordinates","adjustStencil","transformImageAlgorithm","reconcileState","brokenRatio","desiredSize","scaleModifier","normalizeCenter","normalizeFlip","normalizedAngle","normalizeMoveDirections","runCallback","getInstance","instance","runCallbacks","callbacks","AbstractCropperInstance","_this","this","getTransitions","data","getData","transitions","getProps","timingFunction","duration","active","getInteractions","startTransitions","onTransitionsStart","onUpdate","__rest","setData","endTransitions","onTransitionsEnd","applyPostProcess","action","postProcess","name","interaction","immediately","preparedAction","processedState","p","updateState","modifier","onChange","previousData","somethingChanged","affectTransitionProperties","some","property","currentData","__spreadArrays","setInteractions","onInteractionStart","onInteractionEnd","previousInteractions","currentInteractions","state_1","resetState","createDefaultState","reconcileStateAlgorithm","reconciledState","normalize","onTransformImage","onTransformImageEnd","normalizeImageTransform","transformImageEnd","zoomImage","moveImage","flipImage","getState","rotateImage","reset","setState","getSettings","postprocess","newState","setCoordinatesAlgorithm","setVisibleAreaAlgorithm","setBoundaryAlgorithm","onMove","onMoveEnd","fillMoveDirections","moveCoordinatesEnd","parameters","onResize","onResizeEnd","normalizeResizeDirections","fillResizeDirections","resizeCoordinatesEnd","getCoordinates","round","roundCoordinates","floor","ceil","getRoundedCoordinates","getVisibleArea","getTransforms","createStateAlgorithm","isConsistent","defaultSize","sizeRestrictions_1","optimalRatio","pixelsRestrictions","retrieveSizeRestrictions","defaultPosition","withDefaultSizeRestrictions","basicSettings","createDefaultSettings","imageRestriction","fillArea","fitArea","defaultAreaPositionRestrictions","defaultAreaSizeRestrictions","limits","defaultPositionRestrictions","defaultSizeAlgorithm","defaultPositionAlgorithm_1","boundaryRatio","coordinatesIntersection","imageRatio","areaProperties","XHR_DONE","getImageData","img","reject","base64","replace","binary","atob","len","buffer","ArrayBuffer","view","Uint8Array","charCodeAt","base64ToArrayBuffer","fileReader_1","FileReader","onload","e","target","http","XMLHttpRequest","open","responseType","status","response","send","objectURLToBlob","blob","readAsArrayBuffer","http_1","onreadystatechange","readyState","onprogress","getResponseHeader","abort","withCredentials","getStyleTransforms","resetAndGetOrientation","arrayBuffer","orientation_1","dataView","DataView","tiffOffset","littleEndian","app1Start","ifdStart","getUint8","byteLength","offset","start","str","String","fromCharCode","getStringFromCharCode","endianness","getUint16","firstIFDOffset","getUint32","length_2","setUint16","error","getImage","src","orientation","revoke","URL","createObjectURL","Blob","chunks","uint8","subarray","from","btoa","arrayBufferToDataURL","loadImage","checkOrientation","parse","then","catch","console","warn","parseImage","crossOrigin","document","createElement","style","visibility","position","body","appendChild","complete","removeChild","addEventListener","createImage","naturalWidth","naturalHeight","getImageStyle","optimalImageSize","actualImageSize","imageTransforms","translateX","translateY","compensations","transition","willChange","stretchCropperBoundary","stretcher","clientWidth","clientHeight","stretchPreviewBoundary","getBoundingClientRect","fillBoundary","drawCroppedArea","resultCanvas","spareCanvas","source","canvas","originalSize","transformedSize","ctx","getContext","save","canvasCenter","translate","drawImage","restore","prepareSource","maxArea","imageSmoothingEnabled","imageSmoothingQuality","fillColor","firstNumeric","array","find","resultSize","clearRect","fillStyle","fillRect","offsetX","offsetY","updateCanvas","timingFunctions","linear","t","Animation","animation","onStart","onProgress","onStop","id","cancelAnimationFrame","startTime","performance","endTime","animate","percent","requestAnimationFrame","stop","calculateGeometricProperties","touches","container","centerMass","spread","touch","clientX","clientY","count","wheelEventToImageTransform","event","sign","deltaY","detail","wheelDelta","defaultStencilConstraints","rawSettings","stencilProps","fixedStencilConstraints","stencilOptions","defaultConstraints","stencilSize","main","subset","previousSize","getStencilSize","areaRestrictions","fixedStencil","fixedStencilAlgorithm","hybridStencilAutoZoom","hybridStencilAutoZoomAlgorithm","useDeprecationWarning","fired","useRef","message","current","useUpdateEffect","effect","deps","isFirstMount","isFirst","useFirstMountState","useEffect","CropperInstance","_super","props","notify","__extends","useForceRerender","__read","useState","setTick","useCropperInstance","rerender","propsRef","__spreadArray","usePersistentFunction","extendedSettings","extendedParameters","useWindowResize","callbackRef","internalCallback","removeEventListener","useAbstractCropper","onReady","onError","unloadTime","_f","autoReconcileState","imageRef","boundaryRef","canvasRef","cropperRef","_g","initialState","setCallback","previousState","useStateWithCallback","currentImage","setCurrentImage","cropper","cropperImage","onLoadingStart","onLoadingEnd","onLoad","loading","setLoading","loaded","setLoaded","setImage","currentSrc","promises","all","responses","finally","isLoading","isLoaded","useCropperImage","autoReconcile","enabled","setActive","useLayoutEffect","pause","resume","useCropperAutoReconcile","resetCropper","__awaiter","image_1","stretchTo","boundary_1","sent","refreshCropper","cropperInterface","refresh","getDefaultState","getCanvas","draw","useImperativeHandle","refs","StretchableBoundary","forwardRef","ref","className","stretcherClassName","contentClassName","stretchAlgorithm","sizeAlgorithm","children","stretcherRef","React","cn","displayName","CropperFade","visible","CropperWrapper","preventDefault","CropperBackgroundImage","transformStyles","getBackgroundStyle","onMouseDown","CropperCanvas","_","spareCanvasRef","DraggableElement","processMove","newTouches","movingToAnchor","useAnchor","processEnd","onLeave","disabled","hovered","initAnchor","top_2","onMouseOver","onEnter","onMouseLeave","onTouchStart","onMoveStart","cancelable","shouldStartMove","started","stopPropagation","onTouchEnd","onTouchMove","activationDistance","button","onMouseMove","onMouseUp","createRef","componentWillUnmount","componentDidMount","passive","componentDidUpdate","prevProps","render","defaultProps","Component","LineWrapper","onDrag","onDragEnd","concat","SimpleLine","hoverClassName","wrapperClassName","defaultClassName","hover","setHover","HandlerWrapper","horizontalPosition","verticalPosition","SimpleHandler","wrapperStyle","BoundingBox","handlerComponent","handlers","eastNorth","north","westNorth","west","westSouth","south","eastSouth","east","handlerClassNames","handlerWrapperClassNames","lines","lineComponent","_h","lineClassNames","_j","lineWrapperClassNames","_k","_l","_m","lastReference","setLastReference","points","useMemo","lineNodes","component","handlerNodes","containerClassName","onHandlerMove","nativeEvent","shiftKey","onHandlerMoveEnd","line","handler","handlerElement","StencilOverlay","ArtificialTransition","values","root","transitionValues","rememberedValues","setRememberedValues","useTransition","runTransitions","transitionsActive","startValues_1","desiredValue","startValue","currentValues","rootStyle","StencilWrapper","StencilGrid","columns","rows","nodes","currentColumns","setCurrentColumns","currentRows","setCurrentRows","cells","j","RectangleStencil","minAspectRatio","maxAspectRatio","resizable","movable","grid","gridClassName","movingClassName","resizingClassName","previewClassName","boundingBoxClassName","overlayClassName","draggableAreaClassName","TransformableImageEvent","defaultPrevented","TransformableImage","onTransform","touchScale","touchMove","touchRotate","previousTouches","previousProperties","properties","diffs","y","x","atan2","touchesToImageTransform","onTransformEnd","transforming","processStart","debouncedProcessEnd","processEvent","onEvent","transformEvent","onWheel","wheelScale","left_1","bottom_1","right_1","filter","identifier","anotherTouch","mouseMove","buttons","shouldComponentUpdate","CropperBackgroundWrapper","scaleImage","rotateImageOptions","useRotateImageOptions","scaleImageOptions","wheel","useScaleImageOptions","moveImageOptions","mouse","useMoveImageOptions","AbstractCropper","stencilComponent","stencilConstraints","wrapperComponent","wrapperProps","backgroundComponent","backgroundProps","backgroundClassName","backgroundWrapperComponent","backgroundWrapperProps","boundaryComponent","boundaryProps","boundaryClassName","stencilRef","_o","StencilComponent","WrapperComponent","BackgroundWrapperComponent","BackgroundComponent","BoundaryComponent","deprecatedWrapperProps","defaultSettings","useAbstractCropperProps","setting","FixedCropper","cropperProps","Cropper","intrinsicProps","autoZoom","actualSettings","deprecationWarning","CircleStencil","boundingBox","CropperPreviewWrapper","CropperPreviewBackground","getPreviewStyle","_p","setSize","contentStyle","ratio$1"],"sourceRoot":""}