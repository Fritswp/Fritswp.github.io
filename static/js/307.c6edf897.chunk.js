"use strict";(self.webpackChunkmy_react=self.webpackChunkmy_react||[]).push([[307],{5307:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var n=s(4165),r=s(3433),a=s(5861),c=s(9439),i=s(673),o=s(2481),l=s(5372),u=s(2383),d=s(2791),h=s(184),m=function(e){var t=e.isOpen,s=e.toggleOpen,r=(0,d.useState)(!1),l=(0,c.Z)(r,2),u=l[0],m=l[1],x=(0,d.useState)(!1),f=(0,c.Z)(x,2),v=f[0],p=f[1],j=(0,d.useRef)(null),b=(0,d.useState)([]),g=(0,c.Z)(b,2),w=g[0],N=g[1],k=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s,r,a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=i.I8.currentUser)){e.next=13;break}return s=t.uid,r=(0,o.IO)((0,o.hJ)(i.RZ,"users",s,"discussions")),e.next=7,(0,o.PL)(r);case 7:a=e.sent,c=a.docs.map((function(e){return e.id})),N(c),console.log("Fetched sessions:",c),e.next=14;break;case 13:console.error("User not authenticated");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error fetching sessions from Firestore:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){t&&k()}),[t]);var L=function(e){j.current&&!j.current.contains(e.target)&&(s(),m(!1),p(!1))};return(0,d.useEffect)((function(){var e=window.innerWidth<=768;return t&&e?document.addEventListener("mousedown",L):document.removeEventListener("mousedown",L),function(){document.removeEventListener("mousedown",L)}}),[t]),(0,h.jsxs)("div",{ref:j,className:"chatbot-history ".concat(t?"chatbot-history-open":""),children:[(0,h.jsx)("span",{className:"svg-chatbot-history ".concat(t?"svg-chatbot-history-rotate-icon":""),"aria-hidden":"true",onClick:function(){s(),m(!u),p(!v)},children:(0,h.jsx)("svg",{width:"8",height:"16",viewBox:"0 0 8 16",children:(0,h.jsx)("path",{d:"M0.772126 1.19065L0.153407 1.80934C0.00696973 1.95578 0.00696973 2.19322 0.153407 2.33969L5.80025 8L0.153407 13.6603C0.00696973 13.8067 0.00696973 14.0442 0.153407 14.1907L0.772126 14.8094C0.918563 14.9558 1.156 14.9558 1.30247 14.8094L7.84666 8.26519C7.99309 8.11875 7.99309 7.88131 7.84666 7.73484L1.30247 1.19065C1.156 1.04419 0.918563 1.04419 0.772126 1.19065Z"})})}),u&&(0,h.jsxs)("div",{className:"chatbot-previous",children:[(0,h.jsxs)("button",{className:"chat-history-btn",children:[(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,h.jsx)("img",{src:"".concat("","/images/arts/TIO.webp"),alt:"TIO illustration",className:"me-1 very-small-avatar rounded-circle"}),(0,h.jsx)("p",{className:"font-weight-bold mb-0",style:{color:"white",marginLeft:"5px"},children:"Let's Chat"})]}),(0,h.jsx)("div",{className:"ms-auto ",children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"white",width:"18",height:"18",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})})]}),(0,h.jsx)("p",{className:"text-sm text-muted",children:"Sessions:"}),w.length>0&&(0,h.jsx)("ul",{className:"fade-ulist",children:w.map((function(e){return(0,h.jsx)("li",{className:"fade-list",children:e},e)}))})]})]})},x=function(e){var t=e.isOpen,s=e.toggleOpen,n=(0,d.useState)(!1),r=(0,c.Z)(n,2),a=r[0],i=r[1],o=(0,d.useState)(!1),l=(0,c.Z)(o,2),u=l[0],m=l[1],x=(0,d.useRef)(null),f=function(e){x.current&&!x.current.contains(e.target)&&(s(),i(!1),m(!1))};return(0,d.useEffect)((function(){var e=window.innerWidth<=768;return t&&e?document.addEventListener("mousedown",f):document.removeEventListener("mousedown",f),function(){document.removeEventListener("mousedown",f)}}),[t]),(0,h.jsxs)("div",{ref:x,className:"chatbot-expert ".concat(t?"chatbot-expert-open":""),children:[(0,h.jsx)("span",{className:"svg-chatbot-expert ".concat(t?"svg-chatbot-expert-rotate-icon":""),"aria-hidden":"true",onClick:function(){i(!a),m(!u),s()},children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",style:{marginLeft:"auto"},children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})})}),(0,h.jsx)("div",{children:(0,h.jsx)("h4",{children:"Experts"})}),(0,h.jsxs)("button",{className:"chat-btn d-flex ",children:[(0,h.jsx)("img",{src:"".concat("","/images/arts/user.webp"),alt:"Avatar",className:"very-small-avatar rounded-circle"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"font-weight-bold mb-0 text-start",children:"name"}),(0,h.jsx)("p",{className:"text-sm text-muted text-start"})]})]})]})},f=function(){var e=(0,d.useState)(""),t=(0,c.Z)(e,2),s=t[0],f=t[1],v=(0,d.useState)("52px"),p=(0,c.Z)(v,2),j=p[0],b=p[1],g=(0,d.useRef)(null),w=(0,d.useState)([]),N=(0,c.Z)(w,2),k=N[0],L=N[1],y=(0,d.useState)(!1),Z=(0,c.Z)(y,2),S=Z[0],C=Z[1],E=(0,d.useState)(!1),I=(0,c.Z)(E,2),O=I[0],T=I[1],J=(0,d.useState)(!1),M=(0,c.Z)(J,2),B=M[0],W=M[1],H=(0,d.useState)(!1),U=(0,c.Z)(H,2),D=U[0],F=U[1],R=(0,d.useRef)(null),A=(0,d.useRef)(null),P=(0,d.useState)(!1),K=(0,c.Z)(P,2),G=K[0],V=K[1],_=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,c,u,d,m,x,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(!0),""===s.trim()){e.next=31;break}if(t=i.I8.currentUser.uid,e.prev=3,c=sessionStorage.getItem("currentDiscussionId")){e.next=17;break}return c=s.split(" ")[0],sessionStorage.setItem("currentDiscussionId",c),e.next=10,(0,o.pl)((0,o.JU)(i.db,"users/".concat(t)),{});case 10:return u=(0,o.JU)(i.db,"users/".concat(t,"/discussions/").concat(c)),e.next=13,(0,o.QT)(u);case 13:if(e.sent.exists()){e.next=17;break}return e.next=17,(0,o.pl)(u,{});case 17:return d=(0,o.JU)(i.db,"users/".concat(t,"/discussions/").concat(c)),m=(0,o.hJ)(d,"messages"),e.next=21,(0,o.ET)(m,{prompt:s});case 21:x=e.sent,f(""),Q(),L((function(e){return[].concat((0,r.Z)(e),[{text:s,user:"user"},{text:"",user:"bot",isTyping:!0}])})),v=(0,o.cf)(x,function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s,a,c,i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null===(s=t.data())||void 0===s?void 0:s.response)){e.next=15;break}v(),20,.1,c=a,i=(0,n.Z)().mark((function e(t){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Math.max(5,20-.1*t),e.next=3,new Promise((function(e){return setTimeout(e,s)}));case 3:L((function(e){return[].concat((0,r.Z)(e.slice(0,-1)),[{text:(0,h.jsx)(l.U,{children:c.slice(0,t+1)}),user:"bot"}])}));case 4:case"end":return e.stop()}}),e)})),o=0;case 8:if(!(o<c.length)){e.next=13;break}return e.delegateYield(i(o),"t0",10);case 10:o++,e.next=8;break;case 13:V(!1),window.innerWidth<768&&g.current&&g.current.blur();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(3),console.error("Error handling and sending message:",e.t0);case 31:case"end":return e.stop()}}),e,null,[[3,28]])})));return function(){return e.apply(this,arguments)}}();window.addEventListener("beforeunload",(function(){sessionStorage.removeItem("currentDiscussionId")}));var Q=function(){var e=g.current;if(e){e.style.height="52px";var t=Math.min(e.scrollHeight,200);e.style.height="".concat(t,"px")}},Y=function(e){R.current&&!R.current.contains(e.target)&&(C(!1),T(!1))};return(0,d.useEffect)((function(){Q();var e=function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},t=g.current;return t&&t.addEventListener("keydown",e),function(){t&&t.removeEventListener("keydown",e)}}),[k]),(0,d.useEffect)((function(){""===s&&b("52px")}),[s]),(0,d.useEffect)((function(){return window.addEventListener("click",Y),function(){window.removeEventListener("click",Y)}}),[]),(0,d.useEffect)((function(){A.current&&(A.current.scrollTop=A.current.scrollHeight)}),[k]),(0,h.jsxs)("div",{className:"Chatcontainer-model",children:[(0,h.jsx)(m,{isOpen:B,toggleOpen:function(){W(!B),F(!1)}}),(0,h.jsxs)("div",{className:"chat-display",children:[(0,h.jsxs)("div",{className:"pick-model",children:[(0,h.jsx)("h4",{children:"Pick a Model"}),(0,h.jsx)("span",{className:"svg-chatbot-model ".concat(O?"svg-chatbot-model-rotate-icon":""),"aria-hidden":"true",onClick:function(){C(!S),T(!O)},children:(0,h.jsx)("svg",{width:"8",height:"16",viewBox:"0 0 8 16",children:(0,h.jsx)("path",{d:"M0.772126 1.19065L0.153407 1.80934C0.00696973 1.95578 0.00696973 2.19322 0.153407 2.33969L5.80025 8L0.153407 13.6603C0.00696973 13.8067 0.00696973 14.0442 0.153407 14.1907L0.772126 14.8094C0.918563 14.9558 1.156 14.9558 1.30247 14.8094L7.84666 8.26519C7.99309 8.11875 7.99309 7.88131 7.84666 7.73484L1.30247 1.19065C1.156 1.04419 0.918563 1.04419 0.772126 1.19065Z"})})}),(0,h.jsxs)("div",{className:"chat-dropdown-model no-scroll  ".concat(S?"show":""),children:[(0,h.jsxs)("button",{className:"chat-dropdown-model-button",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})}),(0,h.jsxs)("div",{className:"d-flex flex-column align-items-start",children:[(0,h.jsx)("h5",{className:"m-0",children:"GPT 3.5"}),(0,h.jsx)("h6",{className:"text-muted text-start m-0",children:"Our most familiar model"})]})]}),(0,h.jsxs)("div",{className:"flex-grow-1 d-flex justify-content-end",children:[(0,h.jsx)("input",{type:"radio",className:"form-check-input listboxes",id:"anyJobSuccess",name:"jobSuccess"}),(0,h.jsx)("label",{className:"form-check-label label-with-svg",htmlFor:"anyJobSuccess"})]})]}),(0,h.jsxs)("button",{className:"chat-dropdown-model-button",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})}),(0,h.jsxs)("div",{className:"d-flex flex-column align-items-start",children:[(0,h.jsx)("h5",{className:"m-0",children:"Bard"}),(0,h.jsx)("h6",{className:"text-muted text-start m-0",children:"Google's AI solution"})]})]}),(0,h.jsxs)("div",{className:"flex-grow-1 d-flex justify-content-end",children:[(0,h.jsx)("input",{type:"radio",className:"form-check-input listboxes",id:"anyJobSuccess",name:"jobSuccess"}),(0,h.jsx)("label",{className:"form-check-label label-with-svg",htmlFor:"anyJobSuccess"})]})]}),(0,h.jsxs)("button",{className:"chat-dropdown-model-button",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",color:"#212529",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",height:"25",width:"25",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})}),(0,h.jsxs)("div",{className:"d-flex flex-column align-items-start",children:[(0,h.jsx)("h5",{className:"m-0",children:"Claude-2"}),(0,h.jsx)("h6",{className:"text-muted text-start m-0",children:"Focused on ethics"})]})]}),(0,h.jsxs)("div",{className:"flex-grow-1 d-flex justify-content-end",children:[(0,h.jsx)("input",{type:"radio",className:"form-check-input listboxes",id:"anyJobSuccess",name:"jobSuccess"}),(0,h.jsx)("label",{className:"form-check-label label-with-svg",htmlFor:"anyJobSuccess"})]})]})]})]}),(0,h.jsxs)("div",{className:"chat-column chat-bot-upper-section",children:[(0,h.jsx)("div",{className:"chat-box chat-bot-section",ref:A,children:k.map((function(e,t){return(0,h.jsxs)("div",{className:"chat-bubble-bot ".concat("user"===e.user?"user-sent-bot":"bot"),children:["bot"===e.user&&(0,h.jsxs)("div",{className:"bot-message",children:[(0,h.jsx)("div",{className:"bot-avatar",children:(0,h.jsx)("img",{className:"bot-avatar",src:"".concat("","/images/arts/TIO.webp"),alt:"TIO-bot"})}),(0,h.jsxs)("div",{className:"bot-details",children:[(0,h.jsx)("div",{className:"bot-name",children:"TIO-bot"}),e.isTyping?(0,h.jsx)(u.Z,{}):(0,h.jsx)("div",{className:"chat-text",children:e.text})]})]}),"bot"!==e.user&&(0,h.jsx)("div",{className:"chat-text",children:e.text})]},t)}))}),(0,h.jsx)("div",{className:"chatui-container",children:(0,h.jsxs)("div",{className:"userui-input",children:[(0,h.jsx)("textarea",{value:s,onChange:function(e){f(e.target.value),Q()},className:"scroll-col textarea-chat",style:{height:j},ref:g,placeholder:"Type a message...",autoComplete:"off",inputMode:"text",onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},disabled:G}),(0,h.jsx)("button",{"aria-label":"Send Message",className:"svg-container send-btn",disabled:G,onClick:_,children:(0,h.jsx)("i",{className:"fas fa-paper-plane"})})]})})]})]}),(0,h.jsx)(x,{isOpen:D,toggleOpen:function(){F(!D),W(!1)}})]})}}}]);
//# sourceMappingURL=307.c6edf897.chunk.js.map