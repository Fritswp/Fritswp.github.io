"use strict";(self.webpackChunkmy_react=self.webpackChunkmy_react||[]).push([[416],{5416:function(e,t,r){r.a(e,(async function(e,s){try{r.r(t);var n=r(3433),a=r(4165),l=r(5861),o=r(9439),c=r(2791),i=r(5063),d=r(2481),u=r(6635),m=r(276),p=r(7689),h=r(184),x=e([i]);function v(){(0,p.UO)().customURL;var e=(0,c.useState)(null),t=(0,o.Z)(e,2),r=t[0],s=t[1],x=(0,c.useState)(""),f=(0,o.Z)(x,2),v=f[0],g=f[1],y=(0,c.useState)(""),j=(0,o.Z)(y,2),b=j[0],N=j[1],w=(0,c.useState)(null),k=(0,o.Z)(w,2),Z=k[0],C=k[1],E=(0,c.useState)(null),S=(0,o.Z)(E,2),L=S[0],R=S[1],F=(0,c.useState)({text:"",type:""}),U=(0,o.Z)(F,2),M=U[0],P=U[1],B=(0,c.useState)({text:"",type:""}),I=(0,o.Z)(B,2),z=I[0],A=I[1],T=(0,c.useState)(!1),J=(0,o.Z)(T,2),D=J[0],K=J[1],O=(0,c.useState)(""),_=(0,o.Z)(O,2),G=_[0],H=_[1],Q=(0,c.useState)(""),W=(0,o.Z)(Q,2),q=W[0],V=W[1],Y=(0,c.useState)(""),X=(0,o.Z)(Y,2),$=X[0],ee=X[1],te=(0,c.useState)(""),re=(0,o.Z)(te,2),se=re[0],ne=re[1],ae=(0,c.useState)(""),le=(0,o.Z)(ae,2),oe=le[0],ce=le[1],ie=(0,c.useState)(""),de=(0,o.Z)(ie,2),ue=de[0],me=de[1],pe=(0,c.useState)(""),he=(0,o.Z)(pe,2),xe=(he[0],he[1]),fe=(0,c.useState)(""),ve=(0,o.Z)(fe,2),ge=ve[0],ye=ve[1],je=(0,c.useState)(""),be=(0,o.Z)(je,2),Ne=be[0],we=be[1],ke=(0,c.useState)([]),Ze=(0,o.Z)(ke,2),Ce=Ze[0],Ee=Ze[1],Se=(0,c.useState)([]),Le=(0,o.Z)(Se,2),Re=Le[0],Fe=Le[1],Ue=(0,c.useState)(!1),Me=(0,o.Z)(Ue,2),Pe=(Me[0],Me[1],(0,c.useState)([])),Be=(0,o.Z)(Pe,2),Ie=Be[0],ze=Be[1];(0,c.useEffect)((function(){var e=i.I8.onAuthStateChanged(function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return s(t),r=(0,d.JU)(i.RZ,"expertApplications",t.uid),e.next=5,(0,d.QT)(r);case 5:(n=e.sent).exists()?((l=n.data()).photoURL?C(l.photoURL):C(t.photoURL),g(l.first_name||t.displayName.split(" ")[0]||""),N(l.last_name||t.displayName.split(" ")[1]||""),H(l.address||""),V(l.city||""),ee(l.county||""),ne(l.postcode||""),ce(l.mobileNumber||""),me(l.occupation||""),xe(t.email),ye(l.description)):C(t.photoURL),e.next=18;break;case 9:H(""),V(""),ee(""),ne(""),ce(""),C(null),xe(""),me(""),ye("");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){e()}}),[]);var Ae=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var s,n,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=t.target.files[0])){e.next=22;break}if(!(s.size>5242880)){e.next=6;break}return P({text:"File size is too big, max 500kb. Please select a smaller file.",type:"error"}),setTimeout((function(){return P({text:"",type:""})}),3e3),e.abrupt("return");case 6:if(n={contentType:s.type},!L){e.next=19;break}return e.prev=8,e.next=11,(0,m.oq)(L);case 11:P({text:"Profile photo removed",type:"progress"}),console.log("Profile photo removed"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),P({text:"Error deleting previous photo: ".concat(e.t0.message),type:"error"}),console.error("Error deleting previous photo:",e.t0);case 19:o=(0,m.iH)(i.tO,"profileImages/".concat(s.name)),(c=(0,m.B0)(o,s,n)).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;P({text:"Upload is ".concat(t.toFixed(2),"% done"),type:"progress"})}),(function(e){P({text:"Error uploading image: ".concat(e.message),type:"error"}),console.error("Error uploading image:",e),K(!0),setTimeout((function(){return P({text:"",type:""})}),3e3)}),(function(){(0,m.Jt)(c.snapshot.ref).then(function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("File available at",t),(0,u.ck)(r,{photoURL:t}).then((0,l.Z)((0,a.Z)().mark((function e(){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P({text:"Profile photo updated successfully",type:"success"}),console.log("Profile photo updated successfully"),C(t),R(c.snapshot.ref),K(!1),s=(0,d.JU)(i.RZ,"expertApplications",r.uid),e.next=8,(0,d.r7)(s,{photoURL:t});case 8:setTimeout((function(){return P({text:"",type:""})}),3e3);case 9:case"end":return e.stop()}}),e)})))).catch((function(e){P({text:"Error updating profile photo: ".concat(e.message),type:"error"}),console.error("Error updating profile photo:",e),setTimeout((function(){return P({text:"",type:""})}),3e3)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 22:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(){A({text:"",type:""})},Je=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,s,n,l,o,c,u,m,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=(0,d.JU)(i.RZ,"expertApplications",r.uid),e.next=6,(0,d.QT)(t);case 6:if(!(s=e.sent).exists()){e.next=22;break}return n=s.data(),l=n.approved||!1,o=n.customURL||!1,c=n.points||0,u=(0,d.JU)(i.RZ,"userProfiles",r.uid),e.next=15,(0,d.oe)(u);case 15:return m=i.I8.currentUser,p=m.photoURL,e.next=19,(0,d.pl)(t,{displayName:"".concat(v," ").concat(b),email:r.email,mobileNumber:document.getElementById("inputMobileNumber").value,occupation:document.getElementById("inputExpertise").value,address:document.getElementById("inputAddress").value,city:document.getElementById("inputCity").value,county:document.getElementById("inputCounty").value,postcode:document.getElementById("inputPostcode").value,description:document.getElementById("inputDescription").value,photoURL:p,approved:l,customURL:o,keywords:Re,points:c});case 19:R(null),A({text:"Profile updated successfully",type:"success"}),setTimeout((function(){return Te()}),3e3);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(2),A({text:"Error updating profile: ".concat(e.t0.message),type:"error"}),setTimeout((function(){return Te()}),3e3);case 28:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=i.I8.onAuthStateChanged(function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var r,n,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return s(t),r=(0,d.JU)(i.RZ,"expertApplications",t.uid),e.next=5,(0,d.QT)(r);case 5:(n=e.sent).exists()&&(l=n.data(),Ee(l.keywords||[]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){e()}}),[]);var De=function(e){var t=(0,n.Z)(Re);t.splice(e,1),Fe(t),ze([].concat((0,n.Z)(Ie),[e]))};return(0,h.jsxs)("div",{className:"profile-container",children:[(0,h.jsx)("div",{className:"profile-intro-section",children:(0,h.jsx)("div",{className:"container",children:(0,h.jsx)("div",{className:"row align-items-center text-white",children:r&&(0,h.jsx)("div",{className:"welcome-text",children:(0,h.jsxs)("h1",{className:"display-3 fw-bold text-capitalize",children:["Welcome, ",(0,h.jsx)("span",{className:"email-h3",children:r.email}),"!"]})})})})}),(0,h.jsx)("div",{className:"profile-section",children:(0,h.jsx)("div",{className:"content profile-content ",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"my-4",children:[(0,h.jsx)("h3",{children:"My Profile"}),(0,h.jsx)("hr",{})]}),(0,h.jsxs)("form",{className:"file-upload",children:[(0,h.jsxs)("div",{className:"row mb-4 gx-4",children:[(0,h.jsx)("div",{className:"col-xl-8 col-12",children:(0,h.jsx)("div",{className:"bg-white shadow-sm mb-4 card border-light",children:(0,h.jsxs)("div",{className:"card-body card-profile",children:[(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("h4",{className:"mb-4",children:"General information"}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{className:"form-label",children:"First Name *"}),(0,h.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"","aria-label":"First name",value:v,onChange:function(e){return g(e.target.value)},readOnly:!0,style:{pointerEvents:"none"}})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,h.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"","aria-label":"Last name",value:b,onChange:function(e){return N(e.target.value)},readOnly:!0,style:{pointerEvents:"none"}})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{htmlFor:"inputEmail4",className:"form-label",children:"Email *"}),(0,h.jsx)("input",{type:"email",className:"form-control form-control-lg",id:"inputEmail4",value:r?r.email:"",readOnly:!0,style:{pointerEvents:"none"}})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{className:"form-label",children:"Mobile number *"}),(0,h.jsx)("input",{id:"inputMobileNumber",type:"text",className:"form-control form-control-lg",placeholder:"Enter your Phone number","aria-label":"Phone number",value:oe,onChange:function(e){return ce(e.target.value)}})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("label",{className:"form-label",children:"Role/Expertise *"}),(0,h.jsx)("input",{id:"inputExpertise",type:"text",className:"form-control form-control-lg",placeholder:"Enter your role/expertise","aria-label":"your Role",value:ue,onChange:function(e){return me(e.target.value)},readOnly:!0,style:{pointerEvents:"none"}})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("label",{className:"form-label",children:"Description of Expertise"}),(0,h.jsx)("textarea",{id:"inputDescription",type:"text",className:"form-control",rows:"4",placeholder:"Enter a brief description of your expertise or how you can help",value:ge,onChange:function(e){return ye(e.target.value)},style:{resize:"none"}})]})]}),(0,h.jsx)("div",{className:"py-5 rounded mt-4",children:(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("h4",{className:"mb-4 mt-0",children:"Address"}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{className:"form-label",children:"Address"}),(0,h.jsx)("input",{id:"inputAddress",type:"text",className:"form-control form-control-lg",placeholder:"Enter your home address",value:G,onChange:function(e){return H(e.target.value)}})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{className:"form-label",children:"City"}),(0,h.jsx)("input",{id:"inputCity",type:"text",className:"form-control form-control-lg",placeholder:"Enter City",value:q,onChange:function(e){return V(e.target.value)}})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{className:"form-label",children:"County"}),(0,h.jsx)("input",{id:"inputCounty",type:"text",className:"form-control form-control-lg",placeholder:"County",value:$,onChange:function(e){return ee(e.target.value)}})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{className:"form-label",children:"Postcode"}),(0,h.jsx)("input",{id:"inputPostcode",type:"text",className:"form-control form-control-lg",placeholder:"Postcode",value:se,onChange:function(e){return ne(e.target.value)}})]})]})}),(0,h.jsxs)("div",{className:"mt-3",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-primary btn-lg mb-4",onClick:Je,children:"Update profile"}),(0,h.jsxs)("div",{children:["error"===z.type&&(0,h.jsx)("p",{className:"fw-light",style:{color:"red"},children:z.text}),"success"===z.type&&(0,h.jsx)("p",{className:"fw-light",style:{color:"green"},children:z.text})]})]})]})})}),(0,h.jsxs)("div",{className:"col-xl-4 col-12",children:[(0,h.jsx)("div",{className:"bg-white shadow-sm mb-4 card border-light",children:(0,h.jsxs)("div",{className:"card-profile",children:[(0,h.jsx)("div",{className:"profile-cover rounded-top"}),(0,h.jsx)("div",{className:"row g-3 ",children:(0,h.jsx)("div",{className:"text-center",children:(0,h.jsxs)("div",{className:"pb-5 card-body",children:[!D&&Z&&(0,h.jsx)("img",{src:Z,alt:"User Profile",className:"card-img user-avatar large-avatar rounded-circle mx-auto mt-n7 mb-5",onError:function(){return K(!0)},onChange:function(e){return C(e.target.value)}}),D&&(0,h.jsx)("img",{src:"".concat("","/images/arts/user.webp"),alt:"Custom 404 Image",className:"card-img user-avatar large-avatar rounded-circle mx-auto mt-n7 mb-5",onChange:function(e){return C(e.target.value)}}),(0,h.jsxs)("div",{children:["error"===M.type&&(0,h.jsx)("p",{className:"fw-light",style:{color:"red"},children:M.text}),"success"===M.type&&(0,h.jsx)("p",{className:"fw-light",style:{color:"green"},children:M.text}),"progress"===M.type&&(0,h.jsx)("p",{className:"fw-light",style:{color:"gray"},children:M.text})]}),(0,h.jsxs)("div",{className:"card-title h5",children:["".concat(v," ").concat(b)," "]}),(0,h.jsx)("div",{className:"fw-normal card-subtitle mb-4 h6",children:ue}),(0,h.jsxs)("button",{type:"button",className:"me-4 btn btn-primary btn-sm rounded-pill pt-2 pb-2",children:[(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"25",className:"me-2 svg-inline--fa ",children:(0,h.jsx)("path",{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"})}),(0,h.jsx)("span",{className:"me-2",children:"Connect"})]}),(0,h.jsxs)("button",{type:"button",className:"btn btn-secondary btn-sm rounded-pill pt-2 pb-2",children:[(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"25",className:"me-2 svg-inline--fa ",children:(0,h.jsx)("path",{fillRule:"evenodd",d:"M4.804 21.644A6.707 6.707 0 006 21.75a6.721 6.721 0 003.583-1.029c.774.182 1.584.279 2.417.279 5.322 0 9.75-3.97 9.75-9 0-5.03-4.428-9-9.75-9s-9.75 3.97-9.75 9c0 2.409 1.025 4.587 2.674 6.192.232.226.277.428.254.543a3.73 3.73 0 01-.814 1.686.75.75 0 00.44 1.223zM8.25 10.875a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25zM10.875 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875-1.125a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z",clipRule:"evenodd"})}),(0,h.jsx)("span",{className:"me-2",children:"Message"})]})]})})})]})}),(0,h.jsx)("div",{className:"bg-white shadow-sm mb-4 card border-light",children:(0,h.jsx)("div",{className:"card-body card-profile",children:(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("h5",{className:"mb-4",children:"Select profile photo"}),(0,h.jsx)("div",{className:"d-xl-flex align-items-center",children:(0,h.jsx)("div",{className:"file-field",children:(0,h.jsx)("div",{className:"d-flex justify-content-xl-center",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)("span",{className:"icon icon-md",onClick:function(){document.getElementById("customFile").click()},style:{cursor:"pointer"},children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"45",className:"w-6 h-6 me-3",children:(0,h.jsx)("path",{fillRule:"evenodd",d:"M18.97 3.659a2.25 2.25 0 00-3.182 0l-10.94 10.94a3.75 3.75 0 105.304 5.303l7.693-7.693a.75.75 0 011.06 1.06l-7.693 7.693a5.25 5.25 0 11-7.424-7.424l10.939-10.94a3.75 3.75 0 115.303 5.304L9.097 18.835l-.008.008-.007.007-.002.002-.003.002A2.25 2.25 0 015.91 15.66l7.81-7.81a.75.75 0 011.061 1.06l-7.81 7.81a.75.75 0 001.054 1.068L18.97 6.84a2.25 2.25 0 000-3.182z",clipRule:"evenodd"})})}),(0,h.jsx)("input",{type:"file",accept:"image/*",id:"customFile",onChange:Ae,style:{display:"none"}}),(0,h.jsxs)("div",{className:"d-md-block text-start",children:[(0,h.jsx)("div",{className:"fw-normal text-dark mb-1",children:"Choose Image"}),(0,h.jsx)("div",{className:"text-gray small",children:"JPG, GIF or PNG. Max size of 800K"})]})]})})})})]})})}),(0,h.jsx)("div",{className:"bg-white shadow-sm mb-4 card border-light",children:(0,h.jsx)("div",{className:"card-body card-profile",children:(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("h5",{className:"mb-2",children:"Choose 5 Keywords"}),(0,h.jsx)("p",{children:"we recommend choosing keywords that you think will get you highest in the search results"}),(0,h.jsx)("div",{className:"me-3",children:(0,h.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Type a keyword and press Space to add",value:Ne,onChange:function(e){return we(e.target.value)},onKeyDown:function(e){" "===e.key&&""!==Ne.trim()&&(e.preventDefault(),function(){if(""!==Ne.trim()&&Re.length<5){var e=[].concat((0,n.Z)(Re),[Ne.trim()]);Fe(e),we("")}}())},disabled:Ce.length>=5})}),(0,h.jsxs)("div",{className:"keywords-list",children:[Re.map((function(e,t){return(0,h.jsxs)("div",{onClick:function(){return De(t)},className:"btn btn-primary rounded-pill d-inline-flex align-items-center me-2 mb-2",children:[e,(0,h.jsx)("svg",{onClick:function(){return De(t)},xmlns:"http://www.w3.org/2000/svg",color:"#FFFFFF",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",height:"25",width:"25",style:{marginLeft:"auto"},children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]},t)})),Ce.map((function(e,t){return(0,h.jsxs)("div",{onClick:function(){return removeKeyword(t)},className:"btn btn-primary rounded-pill d-inline-flex align-items-center me-2 mb-2",children:[e,(0,h.jsx)("svg",{onClick:function(){return removeKeyword(t)},xmlns:"http://www.w3.org/2000/svg",color:"#FFFFFF",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",height:"25",width:"25",style:{marginLeft:"auto"},children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]},t)})),Re.length+Ce.length>=5&&(0,h.jsx)("p",{className:"error-message",children:"Keyword limit reached. You cannot add more keywords."})]})]})})})]})]}),(0,h.jsx)("div",{className:"gap-3 d-md-flex justify-content-md-end text-center",children:(0,h.jsx)("button",{type:"button",className:"btn btn-danger btn-lg",children:"Delete profile"})})]})]})})})]})}i=(x.then?(await x)():x)[0],t.default=v,s()}catch(f){s(f)}}))}}]);
//# sourceMappingURL=416.1d5684f3.chunk.js.map