{"version":3,"file":"static/js/559.30c9c2b1.chunk.js","mappings":"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","sources":["../node_modules/advanced-cropper/service/interactions.js","../node_modules/advanced-cropper/utils/index.js","../node_modules/advanced-cropper/constants/index.js","../node_modules/advanced-cropper/state/setCoordinates.js","../node_modules/advanced-cropper/types/index.js","../node_modules/advanced-cropper/service/utils.js","../node_modules/advanced-cropper/service/sizeRestrictions.js","../node_modules/advanced-cropper/service/helpers.js","../node_modules/advanced-cropper/state/copyState.js","../node_modules/advanced-cropper/service/approximateSize.js","../node_modules/advanced-cropper/service/fitVisibleArea.js","../node_modules/advanced-cropper/algorithms/moveCoordinatesAlgorithm.js","../node_modules/advanced-cropper/service/fitCoordinates.js","../node_modules/advanced-cropper/state/setVisibleArea.js","../node_modules/advanced-cropper/state/createState.js","../node_modules/advanced-cropper/state/moveCoordinates.js","../node_modules/advanced-cropper/algorithms/resizeCoordinatesAlgorithm.js","../node_modules/advanced-cropper/state/resizeCoordinates.js","../node_modules/advanced-cropper/state/setBoundary.js","../node_modules/advanced-cropper/state/transformImage.js","../node_modules/advanced-cropper/algorithms/rotateImageAlgorithm.js","../node_modules/advanced-cropper/algorithms/flipImageAlgorithm.js","../node_modules/advanced-cropper/algorithms/transformImageAlgorithm.js","../node_modules/advanced-cropper/state/reconcileState.js","../node_modules/advanced-cropper/service/normalize.js","../node_modules/advanced-cropper/instance/AbstractCropperInstance.js","../node_modules/advanced-cropper/defaults/defaultSize.js","../node_modules/advanced-cropper/defaults/defaultSizeRestrictions.js","../node_modules/advanced-cropper/defaults/defaultPosition.js","../node_modules/advanced-cropper/defaults/index.js","../node_modules/advanced-cropper/defaults/defaultAreaPositionRestrictions.js","../node_modules/advanced-cropper/defaults/defaultAreaSizeRestrictions.js","../node_modules/advanced-cropper/defaults/defaultPositionRestrictions.js","../node_modules/advanced-cropper/defaults/defaultVisibleArea.js","../node_modules/advanced-cropper/image/index.js","../node_modules/advanced-cropper/boundary/index.js","../node_modules/advanced-cropper/defaults/defaultBoundary.js","../node_modules/advanced-cropper/canvas/index.js","../node_modules/advanced-cropper/animation/index.js","../node_modules/advanced-cropper/service/imageTransforms.js","../node_modules/advanced-cropper/defaults/defaultStencilConstraints.js","../node_modules/advanced-cropper/extensions/stencil-size/index.js","../node_modules/react-advanced-cropper/src/deprecated/hybridAutoZoom.ts","../node_modules/react-advanced-cropper/src/hooks/useDeprecationWarning.ts","../node_modules/react-advanced-cropper/src/hooks/useUpdateEffect.ts","../node_modules/react-advanced-cropper/src/hooks/useFirstMountState.ts","../node_modules/react-advanced-cropper/src/instance/CropperInstance.ts","../node_modules/react-advanced-cropper/src/hooks/useForceRerender.ts","../node_modules/react-advanced-cropper/src/hooks/useCropperInstance.ts","../node_modules/react-advanced-cropper/src/hooks/usePersistentFunction.ts","../node_modules/react-advanced-cropper/src/hooks/useWindowResize.ts","../node_modules/react-advanced-cropper/src/hooks/useAbstractCropper.ts","../node_modules/react-advanced-cropper/src/hooks/useStateWithCallback.ts","../node_modules/react-advanced-cropper/src/hooks/useCropperImage.ts","../node_modules/react-advanced-cropper/src/hooks/useCropperAutoReconcile.ts","../node_modules/react-advanced-cropper/src/components/service/StretchableBoundary.tsx","../node_modules/react-advanced-cropper/src/components/service/CropperFade.tsx","../node_modules/react-advanced-cropper/src/components/service/CropperWrapper.tsx","../node_modules/react-advanced-cropper/src/service/events.ts","../node_modules/react-advanced-cropper/src/components/service/CropperBackgroundImage.tsx","../node_modules/react-advanced-cropper/src/components/service/CropperCanvas.tsx","../node_modules/react-advanced-cropper/src/components/service/DraggableElement.tsx","../node_modules/react-advanced-cropper/src/components/service/LineWrapper.tsx","../node_modules/react-advanced-cropper/src/components/lines/SimpleLine.tsx","../node_modules/react-advanced-cropper/src/components/service/HandlerWrapper.tsx","../node_modules/react-advanced-cropper/src/components/handlers/SimpleHandler.tsx","../node_modules/react-advanced-cropper/src/components/service/BoundingBox.tsx","../node_modules/react-advanced-cropper/src/components/service/StencilOverlay.tsx","../node_modules/react-advanced-cropper/src/components/service/ArtificialTransition.tsx","../node_modules/react-advanced-cropper/src/hooks/useTransition.ts","../node_modules/react-advanced-cropper/src/components/service/StencilWrapper.tsx","../node_modules/react-advanced-cropper/src/components/service/StencilGrid.tsx","../node_modules/react-advanced-cropper/src/components/stencils/RectangleStencil.tsx","../node_modules/react-advanced-cropper/src/components/service/TransformableImage.tsx","../node_modules/react-advanced-cropper/src/service/cropper.ts","../node_modules/react-advanced-cropper/src/components/service/CropperBackgroundWrapper.tsx","../node_modules/react-advanced-cropper/src/hooks/useRotateImageOptions.ts","../node_modules/react-advanced-cropper/src/hooks/useScaleImageOptions.ts","../node_modules/react-advanced-cropper/src/hooks/useMoveImageOptions.ts","../node_modules/react-advanced-cropper/src/components/AbstractCropper.tsx","../node_modules/react-advanced-cropper/src/service/constants.ts","../node_modules/react-advanced-cropper/src/hooks/useAbstractCropperProps.ts","../node_modules/react-advanced-cropper/src/components/croppers/FixedCropper.tsx","../node_modules/react-advanced-cropper/src/components/croppers/Cropper.tsx","../node_modules/react-advanced-cropper/src/components/stencils/CircleStencil.tsx","../node_modules/react-advanced-cropper/src/components/service/CropperSource.tsx","../node_modules/react-advanced-cropper/src/components/helpers/CropperPreviewWrapper.tsx","../node_modules/react-advanced-cropper/src/components/helpers/CropperPreviewBackground.tsx","../node_modules/react-advanced-cropper/src/components/helpers/CropperPreview.tsx"],"sourcesContent":["function hasInteractions(interactions) {\n    return (interactions.moveCoordinates ||\n        interactions.resizeCoordinates ||\n        interactions.transformImage.move ||\n        interactions.transformImage.rotate ||\n        interactions.transformImage.flip ||\n        interactions.transformImage.scale);\n}\nfunction getEmptyInteractions() {\n    return {\n        moveCoordinates: false,\n        resizeCoordinates: false,\n        transformImage: {\n            rotate: false,\n            move: false,\n            scale: false,\n            flip: false,\n        },\n    };\n}\n\nexport { getEmptyInteractions, hasInteractions };\n","function getDirectionNames(hDirection, vDirection) {\n    var camelCase, snakeCase;\n    if (hDirection && vDirection) {\n        camelCase = \"\" + hDirection + vDirection[0].toUpperCase() + vDirection.slice(1);\n        snakeCase = hDirection + \"-\" + vDirection;\n    }\n    else {\n        camelCase = hDirection || vDirection;\n        snakeCase = hDirection || vDirection;\n    }\n    return { camelCase: camelCase, snakeCase: snakeCase };\n}\nfunction isBlob(url) {\n    return /^blob:/.test(url);\n}\nfunction isDataUrl(url) {\n    return /^data:/.test(url);\n}\nfunction isLocal(url) {\n    return isBlob(url) || isDataUrl(url);\n}\nfunction isCrossOriginURL(url) {\n    if (isLocal(url)) {\n        return false;\n    }\n    var pageLocation = window.location;\n    var URL_HOST_PATTERN = /(\\w+:)?(?:\\/\\/)([\\w.-]+)?(?::(\\d+))?\\/?/;\n    var urlMatch = URL_HOST_PATTERN.exec(url) || [];\n    var urlparts = {\n        protocol: urlMatch[1] || '',\n        host: urlMatch[2] || '',\n        port: urlMatch[3] || '',\n    };\n    var defaultPort = function (protocol) {\n        if (protocol === 'http') {\n            return 80;\n        }\n        else {\n            return 433;\n        }\n    };\n    var portOf = function (location) {\n        return location.port || defaultPort((location.protocol || pageLocation.protocol));\n    };\n    return !((!urlparts.protocol && !urlparts.host && !urlparts.port) ||\n        Boolean(urlparts.protocol &&\n            urlparts.protocol == pageLocation.protocol &&\n            urlparts.host &&\n            urlparts.host == pageLocation.host &&\n            urlparts.host &&\n            portOf(urlparts) == portOf(pageLocation)));\n}\nfunction isArray(value) {\n    return Array.isArray(value);\n}\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\nfunction isUndefined(obj) {\n    return obj === undefined;\n}\nvar isObject = function (term) {\n    return term !== null && typeof term === 'object';\n};\n// TODO: add the typing\nfunction getOptions(options, defaultScheme, falseScheme) {\n    if (falseScheme === void 0) { falseScheme = {}; }\n    var result = {};\n    if (isObject(options)) {\n        Object.keys(defaultScheme).forEach(function (key) {\n            if (isUndefined(options[key])) {\n                result[key] = defaultScheme[key];\n            }\n            else if (isObject(defaultScheme[key])) {\n                if (isObject(options[key])) {\n                    result[key] = getOptions(options[key], defaultScheme[key], falseScheme[key]);\n                }\n                else {\n                    result[key] = options[key] ? defaultScheme[key] : falseScheme[key];\n                }\n            }\n            else if (defaultScheme[key] === true || defaultScheme[key] === false) {\n                result[key] = Boolean(options[key]);\n            }\n            else {\n                result[key] = options[key];\n            }\n        });\n        return result;\n    }\n    else {\n        if (options) {\n            return defaultScheme;\n        }\n        else {\n            return falseScheme;\n        }\n    }\n}\nfunction parseNumber(number) {\n    var parsedNumber = Number(number);\n    if (Number.isNaN(parsedNumber)) {\n        return number;\n    }\n    else {\n        return parsedNumber;\n    }\n}\nfunction isBoolean(value) {\n    return value === true || value === false;\n}\nfunction isNumber(value) {\n    return typeof value === 'number';\n}\nfunction isString(value) {\n    return typeof value === 'string';\n}\nfunction isNaN(value) {\n    return value !== value;\n}\nfunction isNumeric(value) {\n    return ((isNumber(value) && !isNaN(value)) ||\n        (isString(value) && !Number.isNaN(parseFloat(value)) && isFinite(parseFloat(value))));\n}\nfunction distance(firstPoint, secondPoint) {\n    return Math.sqrt(Math.pow(firstPoint.left - secondPoint.left, 2) + Math.pow(firstPoint.top - secondPoint.top, 2));\n}\nfunction isRoughlyEqual(a, b, tolerance) {\n    if (tolerance === void 0) { tolerance = 1e-3; }\n    return Math.abs(b - a) < tolerance;\n}\nfunction isGreater(a, b, tolerance) {\n    return isRoughlyEqual(a, b, tolerance) ? false : a > b;\n}\nfunction isLower(a, b, tolerance) {\n    return isRoughlyEqual(a, b, tolerance) ? false : a < b;\n}\nfunction isArrayBufferLike(value) {\n    return value instanceof ArrayBuffer;\n}\nfunction getCloserAngle(reference, angle) {\n    var turnsCount = Math.floor(reference / 360);\n    var firstCandidate = turnsCount * 360 + angle;\n    var secondCandidate = (turnsCount + 1) * 360 + angle;\n    if (Math.abs(firstCandidate - reference) < Math.abs(secondCandidate - reference)) {\n        return firstCandidate;\n    }\n    else {\n        return secondCandidate;\n    }\n}\nfunction sign(value) {\n    var number = +value;\n    if (number === 0 || isNaN(number)) {\n        return number;\n    }\n    return number > 0 ? 1 : -1;\n}\nfunction promiseTimeout(timeout) {\n    return new Promise(function (resolve) {\n        setTimeout(function () {\n            resolve();\n        }, timeout);\n    });\n}\n// Not performant, small function to reduce the code amount\nfunction deepClone(obj) {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    var result = {};\n    if (Array.isArray(obj)) {\n        result = obj.map(function (item) { return deepClone(item); });\n    }\n    else {\n        Object.keys(obj).forEach(function (key) {\n            return (result[key] = deepClone(obj[key]));\n        });\n    }\n    return result;\n}\nfunction deepCompare(a, b, tolerance) {\n    if (tolerance === void 0) { tolerance = 1e-3; }\n    if (isNumber(a) && isNumber(b) && isRoughlyEqual(a, b, tolerance))\n        return true;\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        if (a.constructor !== b.constructor)\n            return false;\n        var length_1, i = void 0;\n        if (Array.isArray(a)) {\n            length_1 = a.length;\n            if (length_1 != b.length)\n                return false;\n            for (i = length_1; i-- !== 0;)\n                if (!deepCompare(a[i], b[i], tolerance))\n                    return false;\n            return true;\n        }\n        if (a.valueOf !== Object.prototype.valueOf)\n            return a.valueOf() === b.valueOf();\n        if (a.toString !== Object.prototype.toString)\n            return a.toString() === b.toString();\n        var keys = Object.keys(a);\n        length_1 = keys.length;\n        if (length_1 !== Object.keys(b).length)\n            return false;\n        for (i = length_1; i-- !== 0;)\n            if (!Object.prototype.hasOwnProperty.call(b, keys[i]))\n                return false;\n        for (i = length_1; i-- !== 0;) {\n            var key = keys[i];\n            if (!deepCompare(a[key], b[key], tolerance))\n                return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\nfunction isWheelEvent(event) {\n    return 'deltaX' in event;\n}\nfunction isTouchEvent(event) {\n    return 'touches' in event;\n}\nfunction isMouseEvent(event) {\n    return 'buttons' in event;\n}\nfunction emptyCoordinates() {\n    return {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0,\n    };\n}\nfunction isCardinalDirection(value) {\n    return value === 'west' || value === 'south' || value === 'north' || value === 'east';\n}\nfunction isOrdinalDirection(value) {\n    return (isCardinalDirection(value) ||\n        value === 'westNorth' ||\n        value === 'westSouth' ||\n        value === 'eastNorth' ||\n        value === 'eastSouth');\n}\nfunction debounce(callback, delay) {\n    var timestamp;\n    var timeout;\n    function later() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var last = Date.now() - timestamp;\n        var delayValue = isFunction(delay) ? delay() : delay || 0;\n        if (last < delayValue && last >= 0) {\n            timeout = setTimeout(function () { return later.apply(void 0, args); }, delayValue - last);\n        }\n        else {\n            callback.apply(void 0, args);\n        }\n    }\n    function result() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        timestamp = Date.now();\n        timeout = setTimeout(function () { return later.apply(void 0, args); }, isFunction(delay) ? delay() : delay || 0);\n    }\n    result.clear = function () {\n        clearTimeout(timeout);\n    };\n    return result;\n}\n\nexport { debounce, deepClone, deepCompare, distance, emptyCoordinates, getCloserAngle, getDirectionNames, getOptions, isArray, isArrayBufferLike, isBlob, isBoolean, isCardinalDirection, isCrossOriginURL, isDataUrl, isFunction, isGreater, isLocal, isLower, isMouseEvent, isNaN, isNumber, isNumeric, isObject, isOrdinalDirection, isRoughlyEqual, isString, isTouchEvent, isUndefined, isWheelEvent, parseNumber, promiseTimeout, sign };\n","var ALL_DIRECTIONS = ['left', 'right', 'top', 'bottom'];\nvar HORIZONTAL_DIRECTIONS = ['left', 'right'];\nvar VERTICAL_DIRECTIONS = ['top', 'bottom'];\n\nexport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS };\n","import { __assign } from 'tslib';\nimport { emptyCoordinates, isUndefined } from '../utils/index.js';\nimport { mergePositionRestrictions, coordinatesToPositionRestrictions, applyScale, maxScale, applyMove, inverseMove, fitToPositionRestrictions } from '../service/utils.js';\nimport { getAspectRatio, getSizeRestrictions, getPositionRestrictions, getAreaSizeRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport { approximateSize } from '../service/approximateSize.js';\nimport { fitVisibleArea } from '../service/fitVisibleArea.js';\nimport { moveCoordinatesAlgorithm } from '../algorithms/moveCoordinatesAlgorithm.js';\n\nvar SetCoordinatesMode;\n(function (SetCoordinatesMode) {\n    SetCoordinatesMode[\"limit\"] = \"limit\";\n    SetCoordinatesMode[\"zoom\"] = \"zoom\";\n    SetCoordinatesMode[\"unsafe\"] = \"unsafe\";\n})(SetCoordinatesMode || (SetCoordinatesMode = {}));\nfunction setCoordinates(state, settings, transform, \n// If you set mode to `false`, the coordinates can leave the visible area\nmode) {\n    if (mode === void 0) { mode = true; }\n    var currentMode = mode === false ? SetCoordinatesMode.unsafe : mode === true ? SetCoordinatesMode.zoom : mode;\n    var aspectRatio = getAspectRatio(state, settings);\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    if (state.visibleArea && currentMode === SetCoordinatesMode.limit) {\n        sizeRestrictions = __assign(__assign({}, sizeRestrictions), { minWidth: Math.min(state.visibleArea.width, sizeRestrictions.minWidth), minHeight: Math.min(state.visibleArea.height, sizeRestrictions.minHeight), maxWidth: Math.min(state.visibleArea.width, sizeRestrictions.maxWidth), maxHeight: Math.min(state.visibleArea.height, sizeRestrictions.maxHeight) });\n    }\n    var positionRestrictions = getPositionRestrictions(state, settings);\n    if (state.visibleArea && currentMode === SetCoordinatesMode.limit) {\n        positionRestrictions = mergePositionRestrictions(positionRestrictions, coordinatesToPositionRestrictions(state.visibleArea));\n    }\n    var move = function (prevCoordinates, newCoordinates) {\n        return moveCoordinatesAlgorithm(prevCoordinates, {\n            left: newCoordinates.left - (prevCoordinates.left || 0),\n            top: newCoordinates.top - (prevCoordinates.top || 0),\n        }, positionRestrictions);\n    };\n    var resize = function (prevCoordinates, newCoordinates) {\n        var coordinates = __assign(__assign(__assign({}, prevCoordinates), approximateSize({\n            width: newCoordinates.width,\n            height: newCoordinates.height,\n            sizeRestrictions: sizeRestrictions,\n            aspectRatio: aspectRatio,\n        })), { left: 0, top: 0 });\n        return move(coordinates, {\n            left: prevCoordinates.left || 0,\n            top: prevCoordinates.top || 0,\n        });\n    };\n    var coordinates = state.coordinates ? __assign({}, state.coordinates) : emptyCoordinates();\n    var transforms = Array.isArray(transform) ? transform : [transform];\n    transforms.forEach(function (transform) {\n        var changes;\n        if (typeof transform === 'function') {\n            changes = transform(__assign(__assign({}, state), { coordinates: coordinates }), settings);\n        }\n        else {\n            changes = transform;\n        }\n        if (changes) {\n            if (!isUndefined(changes.width) || !isUndefined(changes.height)) {\n                coordinates = resize(coordinates, __assign(__assign({}, coordinates), changes));\n            }\n            if (!isUndefined(changes.left) || !isUndefined(changes.top)) {\n                coordinates = move(coordinates, __assign(__assign({}, coordinates), changes));\n            }\n        }\n    });\n    var result = __assign(__assign({}, copyState(state)), { coordinates: coordinates });\n    if (result.visibleArea && currentMode === SetCoordinatesMode.zoom) {\n        var widthIntersections = Math.max(0, result.coordinates.width - result.visibleArea.width);\n        var heightIntersections = Math.max(0, result.coordinates.height - result.visibleArea.height);\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        var scale = widthIntersections > heightIntersections\n            ? result.coordinates.width / result.visibleArea.width\n            : result.coordinates.height / result.visibleArea.height;\n        if (scale > 1) {\n            result.visibleArea = applyScale(result.visibleArea, Math.min(scale, maxScale(result.visibleArea, areaSizeRestrictions)));\n        }\n        result.visibleArea = applyMove(result.visibleArea, inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea))));\n        return fitVisibleArea(result, settings);\n    }\n    else {\n        return result;\n    }\n}\n\nexport { SetCoordinatesMode, setCoordinates };\n","var ImageRestriction;\n(function (ImageRestriction) {\n    ImageRestriction[\"fillArea\"] = \"fillArea\";\n    ImageRestriction[\"fitArea\"] = \"fitArea\";\n    ImageRestriction[\"stencil\"] = \"stencil\";\n    ImageRestriction[\"none\"] = \"none\";\n})(ImageRestriction || (ImageRestriction = {}));\nvar Priority;\n(function (Priority) {\n    Priority[\"coordinates\"] = \"coordinates\";\n    Priority[\"visibleArea\"] = \"visibleArea\";\n})(Priority || (Priority = {}));\n\nexport { ImageRestriction, Priority };\n","import { __assign } from 'tslib';\nimport { ALL_DIRECTIONS } from '../constants/index.js';\nimport { isLower, isGreater, isNumber, isNumeric, isUndefined, isFunction } from '../utils/index.js';\n\nfunction diff(firstObject, secondObject) {\n    return {\n        left: firstObject.left - secondObject.left,\n        top: firstObject.top - secondObject.top,\n    };\n}\nfunction getCenter(object) {\n    return {\n        left: object.left + object.width / 2,\n        top: object.top + object.height / 2,\n    };\n}\nfunction getOppositeSide(side) {\n    return {\n        left: 'right',\n        top: 'bottom',\n        right: 'left',\n        bottom: 'top',\n    }[side];\n}\nfunction sizeDistance(a, b) {\n    return Math.pow(a.width - b.width, 2) + Math.pow(a.height - b.height, 2);\n}\nfunction applyDirections(coordinates, directions) {\n    return {\n        left: coordinates.left - directions.left,\n        top: coordinates.top - directions.top,\n        width: coordinates.width + directions.left + directions.right,\n        height: coordinates.height + directions.top + directions.bottom,\n    };\n}\nfunction inverseMove(directions) {\n    return {\n        left: -directions.left,\n        top: -directions.top,\n    };\n}\nfunction applyMove(object, move) {\n    return __assign(__assign({}, object), { left: object.left + move.left, top: object.top + move.top });\n}\nfunction coordinatesToPositionRestrictions(coordinates) {\n    return {\n        left: coordinates.left,\n        top: coordinates.top,\n        right: coordinates.left + coordinates.width,\n        bottom: coordinates.top + coordinates.height,\n    };\n}\nfunction applyScale(object, factor, center, progress) {\n    if (factor !== 1) {\n        if ('left' in object || 'top' in object) {\n            if (center) {\n                var currentCenter = getCenter(object);\n                return {\n                    width: object.width * factor,\n                    height: object.height * factor,\n                    left: object.left +\n                        (object.width * (1 - factor)) / 2 +\n                        (center.left - currentCenter.left) * (progress || 1 - factor),\n                    top: object.top +\n                        (object.height * (1 - factor)) / 2 +\n                        (center.top - currentCenter.top) * (progress || 1 - factor),\n                };\n            }\n            else {\n                return {\n                    width: object.width * factor,\n                    height: object.height * factor,\n                    left: object.left + (object.width * (1 - factor)) / 2,\n                    top: object.top + (object.height * (1 - factor)) / 2,\n                };\n            }\n        }\n        else {\n            return {\n                width: object.width * factor,\n                height: object.height * factor,\n            };\n        }\n    }\n    else {\n        return object;\n    }\n}\nfunction ratio(object) {\n    return object.width / object.height;\n}\nfunction maxScale(size, restrictions) {\n    return Math.min(restrictions.maxWidth ? restrictions.maxWidth / size.width : Infinity, restrictions.maxHeight ? restrictions.maxHeight / size.height : Infinity);\n}\nfunction minScale(size, restrictions) {\n    return Math.max(restrictions.minWidth ? restrictions.minWidth / size.width : 0, restrictions.minHeight ? restrictions.minHeight / size.height : 0);\n}\nfunction getBrokenRatio(currentAspectRatio, aspectRatio) {\n    var ratioBroken;\n    if (aspectRatio.minimum && isLower(currentAspectRatio, aspectRatio.minimum)) {\n        ratioBroken = aspectRatio.minimum;\n    }\n    else if (aspectRatio.maximum && isGreater(currentAspectRatio, aspectRatio.maximum)) {\n        ratioBroken = aspectRatio.maximum;\n    }\n    return ratioBroken;\n}\nfunction fitToSizeRestrictions(coordinates, sizeRestrictions) {\n    var aspectRatio = ratio(coordinates);\n    var scale = 1;\n    if (sizeRestrictions.minWidth > 0 && sizeRestrictions.minHeight > 0) {\n        if (aspectRatio > sizeRestrictions.minWidth / sizeRestrictions.minHeight) {\n            if (coordinates.height < sizeRestrictions.minHeight) {\n                scale = sizeRestrictions.minHeight / coordinates.height;\n            }\n        }\n        else {\n            if (coordinates.width < sizeRestrictions.minWidth) {\n                scale = sizeRestrictions.minWidth / coordinates.width;\n            }\n        }\n    }\n    else if (sizeRestrictions.minWidth > 0) {\n        if (coordinates.width < sizeRestrictions.minWidth) {\n            scale = sizeRestrictions.minWidth / coordinates.width;\n        }\n    }\n    else if (sizeRestrictions.minHeight > 0) {\n        if (coordinates.height < sizeRestrictions.minHeight) {\n            scale = sizeRestrictions.minHeight / coordinates.height;\n        }\n    }\n    if (sizeRestrictions.maxWidth < Infinity && sizeRestrictions.maxHeight < Infinity) {\n        if (aspectRatio > sizeRestrictions.maxWidth / sizeRestrictions.maxHeight) {\n            if (coordinates.width > sizeRestrictions.maxWidth) {\n                scale = sizeRestrictions.maxWidth / coordinates.width;\n            }\n        }\n        else {\n            if (coordinates.height > sizeRestrictions.maxHeight) {\n                scale = sizeRestrictions.maxHeight / coordinates.height;\n            }\n        }\n    }\n    else if (sizeRestrictions.maxWidth < Infinity) {\n        if (coordinates.width > sizeRestrictions.maxWidth) {\n            scale = sizeRestrictions.maxWidth / coordinates.width;\n        }\n    }\n    else if (sizeRestrictions.maxHeight < Infinity) {\n        if (coordinates.height > sizeRestrictions.maxHeight) {\n            scale = sizeRestrictions.maxHeight / coordinates.height;\n        }\n    }\n    return scale;\n}\nfunction getIntersections(object, positionRestrictions) {\n    var intersections = {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n    };\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var areaLimit = positionRestrictions[direction];\n        var objectLimit = coordinatesToPositionRestrictions(object)[direction];\n        if (areaLimit !== undefined && objectLimit !== undefined) {\n            if (direction === 'left' || direction === 'top') {\n                intersections[direction] = Math.max(0, areaLimit - objectLimit);\n            }\n            else {\n                intersections[direction] = Math.max(0, objectLimit - areaLimit);\n            }\n        }\n        else {\n            intersections[direction] = 0;\n        }\n    });\n    return intersections;\n}\nfunction resizeToSizeRestrictions(coordinates, sizeRestrictions) {\n    return applyScale(coordinates, fitToSizeRestrictions(coordinates, sizeRestrictions));\n}\nfunction rotateSize(size, angle) {\n    var radians = (angle * Math.PI) / 180;\n    return {\n        width: Math.abs(size.width * Math.cos(radians)) + Math.abs(size.height * Math.sin(radians)),\n        height: Math.abs(size.width * Math.sin(radians)) + Math.abs(size.height * Math.cos(radians)),\n    };\n}\nfunction rotatePoint(point, angle, anchor) {\n    var radians = (angle * Math.PI) / 180;\n    if (anchor) {\n        return {\n            left: (point.left - anchor.left) * Math.cos(radians) -\n                (point.top - anchor.top) * Math.sin(radians) +\n                anchor.left,\n            top: (point.left - anchor.left) * Math.sin(radians) +\n                (point.top - anchor.top) * Math.cos(radians) +\n                anchor.top,\n        };\n    }\n    else {\n        return {\n            left: point.left * Math.cos(radians) - point.top * Math.sin(radians),\n            top: point.left * Math.sin(radians) + point.top * Math.cos(radians),\n        };\n    }\n}\nfunction positionToSizeRestrictions(positionRestrictions) {\n    return {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: positionRestrictions.right !== undefined && positionRestrictions.left !== undefined\n            ? positionRestrictions.right - positionRestrictions.left\n            : Infinity,\n        maxHeight: positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined\n            ? positionRestrictions.bottom - positionRestrictions.top\n            : Infinity,\n    };\n}\nfunction mergePositionRestrictions(a, b) {\n    var restrictions = {};\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var firstDirection = a[direction];\n        var secondDirection = b[direction];\n        if (firstDirection !== undefined && secondDirection !== undefined) {\n            if (direction === 'left' || direction === 'top') {\n                restrictions[direction] = Math.max(firstDirection, secondDirection);\n            }\n            else {\n                restrictions[direction] = Math.min(firstDirection, secondDirection);\n            }\n        }\n        else if (secondDirection !== undefined) {\n            restrictions[direction] = secondDirection;\n        }\n        else if (firstDirection !== undefined) {\n            restrictions[direction] = firstDirection;\n        }\n    });\n    return restrictions;\n}\nfunction fitToPositionRestrictions(coordinates, positionRestrictions) {\n    var directions = {\n        left: 0,\n        top: 0,\n    };\n    var intersection = getIntersections(coordinates, positionRestrictions);\n    if (intersection.left && intersection.left > 0) {\n        directions.left = intersection.left;\n    }\n    else if (intersection.right && intersection.right > 0) {\n        directions.left = -intersection.right;\n    }\n    if (intersection.top && intersection.top > 0) {\n        directions.top = intersection.top;\n    }\n    else if (intersection.bottom && intersection.bottom > 0) {\n        directions.top = -intersection.bottom;\n    }\n    return directions;\n}\nfunction moveToPositionRestrictions(coordinates, positionRestrictions) {\n    return applyMove(coordinates, fitToPositionRestrictions(coordinates, positionRestrictions));\n}\nfunction aspectRatioIntersection(main, subset) {\n    if (!subset) {\n        return main;\n    }\n    else if (!main) {\n        return subset;\n    }\n    else {\n        return {\n            minimum: Math.min(main.maximum, Math.max(main.minimum, subset.minimum)),\n            maximum: Math.max(main.minimum, Math.min(main.maximum, subset.maximum)),\n        };\n    }\n}\nfunction createAspectRatio(aspectRatio) {\n    if (aspectRatio === void 0) { aspectRatio = {}; }\n    if (isNumber(aspectRatio)) {\n        return {\n            minimum: aspectRatio,\n            maximum: aspectRatio,\n        };\n    }\n    else {\n        return {\n            minimum: isNumeric(aspectRatio.minimum) ? aspectRatio.minimum : 0,\n            maximum: isNumeric(aspectRatio.maximum) ? aspectRatio.maximum : Infinity,\n        };\n    }\n}\nfunction getTransitionStyle(transitions) {\n    return transitions ? transitions.timingFunction + \" \" + (transitions.active ? transitions.duration : 0) + \"ms\" : 'none';\n}\nfunction isConsistentSize(size, restrictions) {\n    return ((isUndefined(restrictions.maxWidth) || !isGreater(size.width, restrictions.maxWidth)) &&\n        (isUndefined(restrictions.maxHeight) || !isGreater(size.height, restrictions.maxHeight)) &&\n        (isUndefined(restrictions.minHeight) || !isLower(size.height, restrictions.minHeight)) &&\n        (isUndefined(restrictions.minWidth) || !isLower(size.width, restrictions.minWidth)));\n}\nfunction isConsistentPosition(coordinates, restrictions) {\n    return ((isUndefined(restrictions.left) || !isLower(coordinates.left, restrictions.left)) &&\n        (isUndefined(restrictions.top) || !isLower(coordinates.top, restrictions.top)) &&\n        (isUndefined(restrictions.right) || !isGreater(coordinates.left + coordinates.width, restrictions.right)) &&\n        (isUndefined(restrictions.bottom) || !isGreater(coordinates.top + coordinates.height, restrictions.bottom)));\n}\nfunction getCloserSize(candidates, reference, sizeRestrictions, aspectRatio) {\n    var traverse = function (ignoreMinimum) {\n        return candidates.reduce(function (minimum, size) {\n            var _a = isFunction(sizeRestrictions)\n                ? sizeRestrictions(size)\n                : sizeRestrictions, maxHeight = _a.maxHeight, maxWidth = _a.maxWidth, minWidth = _a.minWidth, minHeight = _a.minHeight;\n            var preparedAspectRatio = createAspectRatio(isFunction(aspectRatio) ? aspectRatio(size) : aspectRatio);\n            var preparedSizeRestrictions = ignoreMinimum\n                ? { maxWidth: maxWidth, maxHeight: maxHeight }\n                : { maxWidth: maxWidth, maxHeight: maxHeight, minWidth: minWidth, minHeight: minHeight };\n            if (isConsistentSize(size, preparedSizeRestrictions) &&\n                !getBrokenRatio(ratio(size), preparedAspectRatio) &&\n                size.width &&\n                size.height) {\n                return !minimum || isLower(sizeDistance(size, reference), sizeDistance(minimum, reference))\n                    ? size\n                    : minimum;\n            }\n            else {\n                return minimum;\n            }\n        }, null);\n    };\n    return traverse() || traverse(true);\n}\n\nexport { applyDirections, applyMove, applyScale, aspectRatioIntersection, coordinatesToPositionRestrictions, createAspectRatio, diff, fitToPositionRestrictions, fitToSizeRestrictions, getBrokenRatio, getCenter, getCloserSize, getIntersections, getOppositeSide, getTransitionStyle, inverseMove, isConsistentPosition, isConsistentSize, maxScale, mergePositionRestrictions, minScale, moveToPositionRestrictions, positionToSizeRestrictions, ratio, resizeToSizeRestrictions, rotatePoint, rotateSize, sizeDistance };\n","import { __assign } from 'tslib';\nimport { isFunction, isNumeric, parseNumber } from '../utils/index.js';\nimport { ratio } from './utils.js';\nimport { getPositionRestrictions } from './helpers.js';\n\nfunction reconcileSizeRestrictions(sizeRestrictions) {\n    var restrictions = __assign({}, sizeRestrictions);\n    // Process the border cases when minimum height / width larger than maximum height / width\n    if (restrictions.minWidth > restrictions.maxWidth) {\n        restrictions.minWidth = restrictions.maxWidth;\n    }\n    if (restrictions.minHeight > restrictions.maxHeight) {\n        restrictions.minHeight = restrictions.maxHeight;\n    }\n    return restrictions;\n}\nfunction mergeSizeRestrictions(a, b) {\n    var first = a;\n    var second = __assign({ minWidth: 0, minHeight: 0, maxWidth: Infinity, maxHeight: Infinity }, b);\n    return reconcileSizeRestrictions({\n        maxHeight: Math.min(first.maxHeight, second.maxHeight),\n        minHeight: Math.max(first.minHeight, second.minHeight),\n        maxWidth: Math.min(first.maxWidth, second.maxWidth),\n        minWidth: Math.max(first.minWidth, second.minWidth),\n    });\n}\nfunction calculateSizeRestrictions(state, settings) {\n    var sizeRestrictions = isFunction(settings.sizeRestrictions)\n        ? settings.sizeRestrictions(state, settings)\n        : settings.sizeRestrictions;\n    var positionRestrictions = getPositionRestrictions(state, settings);\n    // User can forget to set some of restrictions, so we should initialize them by default values\n    var restrictions = {\n        minWidth: isNumeric(sizeRestrictions.minWidth) ? parseNumber(sizeRestrictions.minWidth) : 0,\n        minHeight: isNumeric(sizeRestrictions.minHeight) ? parseNumber(sizeRestrictions.minHeight) : 0,\n        maxWidth: isNumeric(sizeRestrictions.maxWidth) ? parseNumber(sizeRestrictions.maxWidth) : Infinity,\n        maxHeight: isNumeric(sizeRestrictions.maxHeight) ? parseNumber(sizeRestrictions.maxHeight) : Infinity,\n    };\n    // The situation, when stencil can't be positioned in cropper due to positionRestrictions should be avoided\n    if (positionRestrictions.left !== undefined && positionRestrictions.right !== undefined) {\n        restrictions.maxWidth = Math.min(restrictions.maxWidth, positionRestrictions.right - positionRestrictions.left);\n    }\n    if (positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined) {\n        restrictions.maxHeight = Math.min(restrictions.maxHeight, positionRestrictions.bottom - positionRestrictions.top);\n    }\n    return reconcileSizeRestrictions(restrictions);\n}\nfunction calculateAreaSizeRestrictions(state, settings) {\n    var sizeRestrictions = isFunction(settings.areaSizeRestrictions)\n        ? settings.areaSizeRestrictions(state, settings)\n        : settings.areaSizeRestrictions;\n    if (sizeRestrictions.maxWidth < Infinity && sizeRestrictions.maxHeight < Infinity) {\n        if (ratio(state.boundary) > sizeRestrictions.maxWidth / sizeRestrictions.maxHeight) {\n            sizeRestrictions.maxHeight = sizeRestrictions.maxWidth / ratio(state.boundary);\n        }\n        else {\n            sizeRestrictions.maxWidth = sizeRestrictions.maxHeight * ratio(state.boundary);\n        }\n    }\n    return reconcileSizeRestrictions(sizeRestrictions);\n}\n\nexport { calculateAreaSizeRestrictions, calculateSizeRestrictions, mergeSizeRestrictions, reconcileSizeRestrictions };\n","import { __assign } from 'tslib';\nimport { isFunction, emptyCoordinates, isNumber, isBoolean } from '../utils/index.js';\nimport { createAspectRatio, rotateSize, moveToPositionRestrictions, getBrokenRatio, ratio, isConsistentSize, isConsistentPosition } from './utils.js';\nimport { calculateAreaSizeRestrictions, calculateSizeRestrictions } from './sizeRestrictions.js';\n\nfunction isInitializedState(state) {\n    return Boolean(state && state.visibleArea && state.coordinates);\n}\nfunction getAreaSizeRestrictions(state, settings) {\n    return calculateAreaSizeRestrictions(state, settings);\n}\nfunction getAreaPositionRestrictions(state, settings) {\n    return isFunction(settings.areaPositionRestrictions)\n        ? settings.areaPositionRestrictions(state, settings)\n        : settings.areaPositionRestrictions;\n}\nfunction getSizeRestrictions(state, settings) {\n    return calculateSizeRestrictions(state, settings);\n}\nfunction getPositionRestrictions(state, settings) {\n    return isFunction(settings.positionRestrictions)\n        ? settings.positionRestrictions(state, settings)\n        : settings.positionRestrictions;\n}\nfunction getCoefficient(state) {\n    return state.visibleArea ? state.visibleArea.width / state.boundary.width : 0;\n}\nfunction getStencilCoordinates(state) {\n    if (isInitializedState(state)) {\n        var _a = state.coordinates, width = _a.width, height = _a.height, left = _a.left, top_1 = _a.top;\n        var coefficient = getCoefficient(state);\n        return {\n            width: width / coefficient,\n            height: height / coefficient,\n            left: (left - state.visibleArea.left) / coefficient,\n            top: (top_1 - state.visibleArea.top) / coefficient,\n        };\n    }\n    else {\n        return emptyCoordinates();\n    }\n}\nfunction getAspectRatio(state, settings) {\n    return createAspectRatio(isFunction(settings.aspectRatio) ? settings.aspectRatio(state, settings) : settings.aspectRatio);\n}\nfunction getDefaultCoordinates(state, settings) {\n    return isFunction(settings.defaultCoordinates)\n        ? settings.defaultCoordinates(state, settings)\n        : settings.defaultCoordinates;\n}\nfunction getDefaultVisibleArea(state, settings) {\n    return isFunction(settings.defaultVisibleArea)\n        ? settings.defaultVisibleArea(state, settings)\n        : settings.defaultVisibleArea;\n}\nfunction getDefaultTransforms(state, settings) {\n    var transforms = __assign(__assign({}, state.transforms), { flip: __assign({}, state.transforms.flip) });\n    if (settings.defaultTransforms) {\n        var defaultTransforms = isFunction(settings.defaultTransforms)\n            ? settings.defaultTransforms(state, settings)\n            : settings.defaultTransforms;\n        if (isNumber(defaultTransforms.rotate)) {\n            transforms.rotate = defaultTransforms.rotate;\n        }\n        if (defaultTransforms.flip) {\n            if (isBoolean(defaultTransforms.flip.horizontal)) {\n                transforms.flip.horizontal = defaultTransforms.flip.horizontal;\n            }\n            if (isBoolean(defaultTransforms.flip.vertical)) {\n                transforms.flip.vertical = defaultTransforms.flip.vertical;\n            }\n        }\n    }\n    return transforms;\n}\nfunction getTransformedImageSize(state) {\n    if (state.imageSize && state.imageSize.width && state.imageSize.height) {\n        return rotateSize(state.imageSize, state.transforms.rotate);\n    }\n    else {\n        return {\n            width: 0,\n            height: 0,\n        };\n    }\n}\nfunction getMinimumSize(state) {\n    // The magic number is the approximation of the handler size\n    // Temporary solution that should be improved in the future\n    return state.coordinates\n        ? Math.min(state.coordinates.width, state.coordinates.height, 20 * getCoefficient(state))\n        : 1;\n}\nfunction getRoundedCoordinates(state, settings) {\n    if (isInitializedState(state)) {\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        var positionRestrictions = getPositionRestrictions(state, settings);\n        var roundCoordinates = {\n            width: Math.round(state.coordinates.width),\n            height: Math.round(state.coordinates.height),\n            left: Math.round(state.coordinates.left),\n            top: Math.round(state.coordinates.top),\n        };\n        if (roundCoordinates.width > sizeRestrictions.maxWidth) {\n            roundCoordinates.width = Math.floor(state.coordinates.width);\n        }\n        else if (roundCoordinates.width < sizeRestrictions.minWidth) {\n            roundCoordinates.width = Math.ceil(state.coordinates.width);\n        }\n        if (roundCoordinates.height > sizeRestrictions.maxHeight) {\n            roundCoordinates.height = Math.floor(state.coordinates.height);\n        }\n        else if (roundCoordinates.height < sizeRestrictions.minHeight) {\n            roundCoordinates.height = Math.ceil(state.coordinates.height);\n        }\n        return moveToPositionRestrictions(roundCoordinates, positionRestrictions);\n    }\n    else {\n        return null;\n    }\n}\nfunction isConsistentState(state, settings) {\n    if (isInitializedState(state)) {\n        return (!getBrokenRatio(ratio(state.coordinates), getAspectRatio(state, settings)) &&\n            isConsistentSize(state.visibleArea, getAreaSizeRestrictions(state, settings)) &&\n            isConsistentSize(state.coordinates, getSizeRestrictions(state, settings)) &&\n            isConsistentPosition(state.visibleArea, getAreaPositionRestrictions(state, settings)) &&\n            isConsistentPosition(state.coordinates, getPositionRestrictions(state, settings)));\n    }\n    else {\n        return true;\n    }\n}\n\nexport { getAreaPositionRestrictions, getAreaSizeRestrictions, getAspectRatio, getCoefficient, getDefaultCoordinates, getDefaultTransforms, getDefaultVisibleArea, getMinimumSize, getPositionRestrictions, getRoundedCoordinates, getSizeRestrictions, getStencilCoordinates, getTransformedImageSize, isConsistentState, isInitializedState };\n","import { deepClone } from '../utils/index.js';\n\nfunction copyState(state) {\n    return deepClone(state);\n}\n\nexport { copyState };\n","import { getCloserSize, createAspectRatio, resizeToSizeRestrictions } from './utils.js';\n\n// Limitations:\n// 1. Assume that maximum width and height always larger than minimum width and height\n// 2. Assume that aspectRatio.minimum < aspectRatio.maximum\n// If you break this limitations function could return null!\nfunction approximateSize(params) {\n    var width = params.width, height = params.height;\n    var sizeRestrictions = params.sizeRestrictions || {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: Infinity,\n        maxHeight: Infinity,\n    };\n    var aspectRatio = createAspectRatio(params.aspectRatio);\n    var coordinates = {\n        width: Math.max(sizeRestrictions.minWidth, Math.min(sizeRestrictions.maxWidth, width)),\n        height: Math.max(sizeRestrictions.minHeight, Math.min(sizeRestrictions.maxHeight, height)),\n    };\n    var candidates = [coordinates];\n    if (aspectRatio) {\n        [aspectRatio.minimum, aspectRatio.maximum].forEach(function (ratio) {\n            if (ratio) {\n                candidates.push({ width: coordinates.width, height: coordinates.width / ratio }, { width: coordinates.height * ratio, height: coordinates.height });\n            }\n        });\n    }\n    // Resize the candidates as much as possible to prevent breaking minimum size\n    candidates = candidates.map(function (candidate) { return resizeToSizeRestrictions(candidate, sizeRestrictions); });\n    // TODO: fix the type of return value\n    return getCloserSize(candidates, { width: width, height: height }, sizeRestrictions, aspectRatio);\n}\n\nexport { approximateSize };\n","import { __assign } from 'tslib';\nimport { ratio, applyMove, diff, getCenter, moveToPositionRestrictions } from './utils.js';\nimport { getAreaSizeRestrictions, getAreaPositionRestrictions } from './helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from './approximateSize.js';\n\nfunction fitVisibleArea(state, settings) {\n    var result = copyState(state);\n    if (state.visibleArea) {\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        // Fit the visible area to its size restrictions and boundary aspect ratio:\n        result.visibleArea = __assign(__assign({}, state.visibleArea), approximateSize({\n            width: state.visibleArea.width,\n            height: state.visibleArea.height,\n            aspectRatio: {\n                minimum: ratio(result.boundary),\n                maximum: ratio(result.boundary),\n            },\n            sizeRestrictions: areaSizeRestrictions,\n        }));\n        // Return the visible area to previous center\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(state.visibleArea), getCenter(result.visibleArea)));\n        // Fit the visible area to positions restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n    }\n    return result;\n}\n\nexport { fitVisibleArea };\n","import 'tslib';\nimport { moveToPositionRestrictions, applyMove } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction moveCoordinatesAlgorithm(coordinates, directions, positionRestrictions) {\n    var movedCoordinates = applyMove(coordinates, directions);\n    return positionRestrictions ? moveToPositionRestrictions(movedCoordinates, positionRestrictions) : movedCoordinates;\n}\n\nexport { moveCoordinatesAlgorithm };\n","import { __assign } from 'tslib';\nimport { applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from './utils.js';\nimport { getAspectRatio, getSizeRestrictions, getPositionRestrictions } from './helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from './approximateSize.js';\n\nfunction fitCoordinates(state, settings) {\n    if (state.coordinates) {\n        var result = copyState(state);\n        var aspectRatio = getAspectRatio(state, settings);\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        // Fit the size of coordinates to existing size restrictions and visible area\n        result.coordinates = __assign(__assign({}, state.coordinates), approximateSize({\n            width: state.coordinates.width,\n            height: state.coordinates.height,\n            aspectRatio: aspectRatio,\n            sizeRestrictions: state.visibleArea\n                ? {\n                    maxWidth: Math.min(state.visibleArea.width, sizeRestrictions.maxWidth),\n                    maxHeight: Math.min(state.visibleArea.height, sizeRestrictions.maxHeight),\n                    minHeight: Math.min(state.visibleArea.height, sizeRestrictions.minHeight),\n                    minWidth: Math.min(state.visibleArea.width, sizeRestrictions.minWidth),\n                }\n                : sizeRestrictions,\n        }));\n        // Return the coordinates to the previous center\n        result.coordinates = applyMove(result.coordinates, diff(getCenter(state.coordinates), getCenter(result.coordinates)));\n        // Fit the coordinates to position restrictions and visible area\n        result.coordinates = moveToPositionRestrictions(result.coordinates, state.visibleArea\n            ? mergePositionRestrictions(coordinatesToPositionRestrictions(state.visibleArea), getPositionRestrictions(result, settings))\n            : getPositionRestrictions(result, settings));\n        return result;\n    }\n    return state;\n}\n\nexport { fitCoordinates };\n","import { __assign } from 'tslib';\nimport { copyState } from './copyState.js';\nimport { fitCoordinates } from '../service/fitCoordinates.js';\nimport { fitVisibleArea } from '../service/fitVisibleArea.js';\n\nfunction setVisibleArea(state, settings, visibleArea, \n// If you set safe to `false`, the coordinates will be able to leave the visible area\nsafe) {\n    if (safe === void 0) { safe = true; }\n    var result = __assign(__assign({}, copyState(state)), { visibleArea: visibleArea });\n    // There is no possibility to break visible area limitations.\n    result = fitVisibleArea(result, settings);\n    if (safe) {\n        result = fitCoordinates(result, settings);\n    }\n    return result;\n}\n\nexport { setVisibleArea };\n","import 'tslib';\nimport { getDefaultTransforms, getDefaultVisibleArea, getDefaultCoordinates } from '../service/helpers.js';\nimport { Priority } from '../types/index.js';\nimport { setCoordinates, SetCoordinatesMode } from './setCoordinates.js';\nimport { setVisibleArea } from './setVisibleArea.js';\n\nfunction createState(options, settings) {\n    var _a, _b, _c, _d, _e;\n    var boundary = options.boundary, image = options.image;\n    var state = {\n        boundary: {\n            width: boundary.width,\n            height: boundary.height,\n        },\n        imageSize: {\n            width: image.width,\n            height: image.height,\n        },\n        transforms: {\n            rotate: ((_a = image.transforms) === null || _a === void 0 ? void 0 : _a.rotate) || 0,\n            flip: {\n                horizontal: ((_c = (_b = image.transforms) === null || _b === void 0 ? void 0 : _b.flip) === null || _c === void 0 ? void 0 : _c.horizontal) || false,\n                vertical: ((_e = (_d = image.transforms) === null || _d === void 0 ? void 0 : _d.flip) === null || _e === void 0 ? void 0 : _e.vertical) || false,\n            },\n        },\n        visibleArea: null,\n        coordinates: null,\n    };\n    if (settings.defaultTransforms) {\n        state.transforms = getDefaultTransforms(state, settings);\n    }\n    if (settings.priority === Priority.visibleArea) {\n        state = setVisibleArea(state, settings, getDefaultVisibleArea(state, settings), false);\n        state = setCoordinates(state, settings, getDefaultCoordinates(state, settings), SetCoordinatesMode.limit);\n    }\n    else {\n        state = setCoordinates(state, settings, getDefaultCoordinates(state, settings), SetCoordinatesMode.unsafe);\n        state = setVisibleArea(state, settings, getDefaultVisibleArea(state, settings), true);\n    }\n    return state;\n}\n\nexport { createState };\n","import 'tslib';\nimport { applyMove, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\n\nfunction moveCoordinates(state, settings, directions) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        result.coordinates = applyMove(result.coordinates, directions);\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\n\nexport { moveCoordinates };\n","import { __assign } from 'tslib';\nimport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS } from '../constants/index.js';\nimport { isGreater, isRoughlyEqual } from '../utils/index.js';\nimport { moveToPositionRestrictions, applyDirections, getIntersections, getOppositeSide, ratio, getBrokenRatio, applyMove, diff } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { moveCoordinatesAlgorithm } from './moveCoordinatesAlgorithm.js';\n\nfunction fitDirections(_a) {\n    var coordinates = _a.coordinates, directions = _a.directions, positionRestrictions = _a.positionRestrictions, sizeRestrictions = _a.sizeRestrictions, preserveRatio = _a.preserveRatio, allowedDirections = _a.allowedDirections, _b = _a.compensate, compensate = _b === void 0 ? true : _b;\n    var fittedDirections = __assign({}, directions);\n    var currentWidth = applyDirections(coordinates, fittedDirections).width;\n    var currentHeight = applyDirections(coordinates, fittedDirections).height;\n    // Prevent strange resizes when the width or height of stencil becomes smaller than 0\n    if (currentWidth < 0) {\n        if (fittedDirections.left < 0 && fittedDirections.right < 0) {\n            fittedDirections.left =\n                -(coordinates.width - sizeRestrictions.minWidth) / (fittedDirections.left / fittedDirections.right);\n            fittedDirections.right =\n                -(coordinates.width - sizeRestrictions.minWidth) / (fittedDirections.right / fittedDirections.left);\n        }\n        else if (fittedDirections.left < 0) {\n            fittedDirections.left = -(coordinates.width - sizeRestrictions.minWidth);\n        }\n        else if (fittedDirections.right < 0) {\n            fittedDirections.right = -(coordinates.width - sizeRestrictions.minWidth);\n        }\n    }\n    if (currentHeight < 0) {\n        if (fittedDirections.top < 0 && fittedDirections.bottom < 0) {\n            fittedDirections.top =\n                -(coordinates.height - sizeRestrictions.minHeight) / (fittedDirections.top / fittedDirections.bottom);\n            fittedDirections.bottom =\n                -(coordinates.height - sizeRestrictions.minHeight) / (fittedDirections.bottom / fittedDirections.top);\n        }\n        else if (fittedDirections.top < 0) {\n            fittedDirections.top = -(coordinates.height - sizeRestrictions.minHeight);\n        }\n        else if (fittedDirections.bottom < 0) {\n            fittedDirections.bottom = -(coordinates.height - sizeRestrictions.minHeight);\n        }\n    }\n    // Prevent breaking limits\n    var breaks = getIntersections(applyDirections(coordinates, fittedDirections), positionRestrictions);\n    var canBeCompensated = ALL_DIRECTIONS.every(function (direction) {\n        return !isGreater(breaks[getOppositeSide(direction)], 0) || allowedDirections[direction];\n    });\n    if (compensate && canBeCompensated) {\n        if (breaks.left && breaks.left > 0 && breaks.right === 0) {\n            fittedDirections.right += breaks.left;\n            fittedDirections.left -= breaks.left;\n        }\n        else if (breaks.right && breaks.right > 0 && breaks.left === 0) {\n            fittedDirections.left += breaks.right;\n            fittedDirections.right -= breaks.right;\n        }\n        if (breaks.top && breaks.top > 0 && breaks.bottom === 0) {\n            fittedDirections.bottom += breaks.top;\n            fittedDirections.top -= breaks.top;\n        }\n        else if (breaks.bottom && breaks.bottom > 0 && breaks.top === 0) {\n            fittedDirections.top += breaks.bottom;\n            fittedDirections.bottom -= breaks.bottom;\n        }\n        breaks = getIntersections(applyDirections(coordinates, fittedDirections), positionRestrictions);\n    }\n    var maxResize = {\n        width: Infinity,\n        height: Infinity,\n        left: Infinity,\n        right: Infinity,\n        top: Infinity,\n        bottom: Infinity,\n    };\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var intersection = breaks[direction];\n        if (intersection && fittedDirections[direction]) {\n            maxResize[direction] = Math.max(0, 1 - intersection / fittedDirections[direction]);\n        }\n    });\n    if (preserveRatio) {\n        var multiplier_1 = Math.min.apply(Math, ALL_DIRECTIONS.map(function (direction) { return maxResize[direction]; }));\n        if (multiplier_1 !== Infinity) {\n            ALL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= multiplier_1;\n            });\n        }\n    }\n    else {\n        ALL_DIRECTIONS.forEach(function (direction) {\n            if (maxResize[direction] !== Infinity) {\n                fittedDirections[direction] *= maxResize[direction];\n            }\n        });\n    }\n    currentWidth = applyDirections(coordinates, fittedDirections).width;\n    currentHeight = applyDirections(coordinates, fittedDirections).height;\n    if (fittedDirections.right + fittedDirections.left) {\n        if (currentWidth > sizeRestrictions.maxWidth) {\n            maxResize.width =\n                (sizeRestrictions.maxWidth - coordinates.width) / (fittedDirections.right + fittedDirections.left);\n        }\n        else if (currentWidth < sizeRestrictions.minWidth) {\n            maxResize.width =\n                (sizeRestrictions.minWidth - coordinates.width) / (fittedDirections.right + fittedDirections.left);\n        }\n    }\n    if (fittedDirections.bottom + fittedDirections.top) {\n        if (currentHeight > sizeRestrictions.maxHeight) {\n            maxResize.height =\n                (sizeRestrictions.maxHeight - coordinates.height) / (fittedDirections.bottom + fittedDirections.top);\n        }\n        else if (currentHeight < sizeRestrictions.minHeight) {\n            maxResize.height =\n                (sizeRestrictions.minHeight - coordinates.height) / (fittedDirections.bottom + fittedDirections.top);\n        }\n    }\n    if (preserveRatio) {\n        var multiplier_2 = Math.min(maxResize.width, maxResize.height);\n        if (multiplier_2 !== Infinity) {\n            ALL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= multiplier_2;\n            });\n        }\n    }\n    else {\n        if (maxResize.width !== Infinity) {\n            HORIZONTAL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= maxResize.width;\n            });\n        }\n        if (maxResize.height !== Infinity) {\n            VERTICAL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= maxResize.height;\n            });\n        }\n    }\n    return fittedDirections;\n}\nfunction distributeOverlap(overlap, first, second) {\n    if (isRoughlyEqual(first + second, 0)) {\n        return overlap / 2;\n    }\n    else if (isRoughlyEqual(first, 0)) {\n        return 0;\n    }\n    else if (isRoughlyEqual(second, 0)) {\n        return overlap;\n    }\n    else {\n        return overlap * Math.abs(first / (first + second));\n    }\n}\nfunction resizeCoordinatesAlgorithm(coordinates, directions, options, limitations) {\n    var aspectRatio = limitations.aspectRatio, positionRestrictions = limitations.positionRestrictions, sizeRestrictions = limitations.sizeRestrictions;\n    var actualCoordinates = __assign({}, coordinates);\n    directions = __assign({}, directions);\n    var allowedDirections = options.allowedDirections || {\n        left: true,\n        right: true,\n        bottom: true,\n        top: true,\n    };\n    // It's possible that coordinates can be smaller than minimum width or minimum height. In this case\n    // corresponding resize should be blocked\n    if (coordinates.width < sizeRestrictions.minWidth) {\n        directions.left = 0;\n        directions.right = 0;\n    }\n    if (coordinates.height < sizeRestrictions.minHeight) {\n        directions.top = 0;\n        directions.bottom = 0;\n    }\n    ALL_DIRECTIONS.forEach(function (direction) {\n        if (!allowedDirections[direction]) {\n            directions[direction] = 0;\n        }\n    });\n    // 1. First step: determine the safe and desired area\n    directions = fitDirections({\n        coordinates: actualCoordinates,\n        directions: directions,\n        sizeRestrictions: sizeRestrictions,\n        positionRestrictions: positionRestrictions,\n        allowedDirections: allowedDirections,\n    });\n    // 2. Second step: fix desired box to correspondent to aspect ratio\n    var currentWidth = applyDirections(actualCoordinates, directions).width;\n    var currentHeight = applyDirections(actualCoordinates, directions).height;\n    // Checks ratio:\n    var ratioBroken = options.preserveAspectRatio\n        ? ratio(actualCoordinates)\n        : getBrokenRatio(currentWidth / currentHeight, aspectRatio);\n    if (ratioBroken) {\n        var respectDirection = options.respectDirection;\n        if (respectDirection !== 'width' && respectDirection !== 'height') {\n            if (actualCoordinates.width >= actualCoordinates.height || ratioBroken === 1) {\n                respectDirection = 'width';\n            }\n            else {\n                respectDirection = 'height';\n            }\n        }\n        if (respectDirection === 'width') {\n            var overlapHeight = currentWidth / ratioBroken - actualCoordinates.height;\n            if (allowedDirections.top && allowedDirections.bottom) {\n                var top_1 = directions.top, bottom = directions.bottom;\n                directions.bottom = distributeOverlap(overlapHeight, bottom, top_1);\n                directions.top = distributeOverlap(overlapHeight, top_1, bottom);\n            }\n            else if (allowedDirections.bottom) {\n                directions.bottom = overlapHeight;\n            }\n            else if (allowedDirections.top) {\n                directions.top = overlapHeight;\n            }\n            else if (allowedDirections.right) {\n                directions.right = 0;\n            }\n            else if (allowedDirections.left) {\n                directions.left = 0;\n            }\n        }\n        else if (respectDirection === 'height') {\n            var overlapWidth = actualCoordinates.width - currentHeight * ratioBroken;\n            if (allowedDirections.left && allowedDirections.right) {\n                var left = directions.left, right = directions.right;\n                directions.left = -distributeOverlap(overlapWidth, left, right);\n                directions.right = -distributeOverlap(overlapWidth, right, left);\n            }\n            else if (allowedDirections.left) {\n                directions.left = -overlapWidth;\n            }\n            else if (allowedDirections.right) {\n                directions.right = -overlapWidth;\n            }\n            else if (allowedDirections.top) {\n                directions.top = 0;\n            }\n            else if (allowedDirections.bottom) {\n                directions.bottom = 0;\n            }\n        }\n        // 3. Third step: check if desired box with correct aspect ratios break some limits and fit to this conditions\n        directions = fitDirections({\n            directions: directions,\n            coordinates: actualCoordinates,\n            sizeRestrictions: sizeRestrictions,\n            positionRestrictions: positionRestrictions,\n            preserveRatio: true,\n            compensate: options.compensate,\n            allowedDirections: allowedDirections,\n        });\n    }\n    // 4. Check if ratio broken (temporary):\n    currentWidth = applyDirections(actualCoordinates, directions).width;\n    currentHeight = applyDirections(actualCoordinates, directions).height;\n    ratioBroken = options.preserveAspectRatio\n        ? ratio(actualCoordinates)\n        : getBrokenRatio(currentWidth / currentHeight, aspectRatio);\n    if (ratioBroken && isGreater(Math.abs(ratioBroken - currentWidth / currentHeight), 0)) {\n        ALL_DIRECTIONS.forEach(function (direction) {\n            directions[direction] = 0;\n        });\n    }\n    return moveCoordinatesAlgorithm({\n        width: coordinates.width + directions.right + directions.left,\n        height: coordinates.height + directions.top + directions.bottom,\n        left: coordinates.left,\n        top: coordinates.top,\n    }, {\n        left: -directions.left,\n        top: -directions.top,\n    }, positionRestrictions);\n}\nfunction anchorToMassPoint(coordinates, anchor) {\n    var plainAnchor = anchor.toLowerCase();\n    return {\n        left: coordinates.left +\n            coordinates.width * (plainAnchor.indexOf('west') !== -1 ? 1 : plainAnchor.indexOf('east') !== -1 ? 0 : 0.5),\n        top: coordinates.top +\n            coordinates.height *\n                (plainAnchor.indexOf('north') !== -1 ? 1 : plainAnchor.indexOf('south') !== -1 ? 0 : 0.5),\n    };\n}\nfunction anchorToAllowedDirections(anchor) {\n    var plainAnchor = anchor.toLowerCase();\n    return {\n        left: plainAnchor.indexOf('east') === -1,\n        top: plainAnchor.indexOf('south') === -1,\n        right: plainAnchor.indexOf('west') === -1,\n        bottom: plainAnchor.indexOf('north') === -1,\n    };\n}\nfunction anchorMoveToResizeDirections(anchor, directions) {\n    var plainAnchor = anchor.toLowerCase();\n    var normalizedDirections = {\n        left: plainAnchor.indexOf('west') === -1 ? directions.left : -directions.left,\n        top:  -directions.top,\n        right: directions.left,\n        bottom: directions.top,\n    };\n    if (['north', 'south', 'center'].every(function (el) { return plainAnchor.indexOf(el) === -1; })) {\n        normalizedDirections.top = 0;\n        normalizedDirections.bottom = 0;\n    }\n    if (['west', 'east', 'center'].every(function (el) { return plainAnchor.indexOf(el) === -1; })) {\n        normalizedDirections.left = 0;\n        normalizedDirections.right = 0;\n    }\n    var allowedDirections = anchorToAllowedDirections(anchor);\n    ALL_DIRECTIONS.forEach(function (direction) {\n        if (!allowedDirections[direction]) {\n            normalizedDirections[direction] = 0;\n        }\n    });\n    return normalizedDirections;\n}\nfunction anchoredResizeCoordinatesAlgorithm(coordinates, anchor, directions, options, limitations) {\n    var reference = options.reference;\n    var resizeDirections = anchorMoveToResizeDirections(anchor, directions);\n    var allowedDirections = anchorToAllowedDirections(anchor);\n    var result = resizeCoordinatesAlgorithm(coordinates, resizeDirections, __assign(__assign({}, options), { allowedDirections: allowedDirections }), limitations);\n    if (reference) {\n        // Move the result to anchor\n        result = applyMove(result, diff(anchorToMassPoint(reference, anchor), anchorToMassPoint(result, anchor)));\n    }\n    return moveToPositionRestrictions(result, limitations.positionRestrictions);\n}\n\nexport { anchorMoveToResizeDirections, anchorToAllowedDirections, anchoredResizeCoordinatesAlgorithm, fitDirections, resizeCoordinatesAlgorithm };\n","import { __assign } from 'tslib';\nimport { mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { getMinimumSize, getSizeRestrictions, isInitializedState, getPositionRestrictions, getAspectRatio } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { anchoredResizeCoordinatesAlgorithm } from '../algorithms/resizeCoordinatesAlgorithm.js';\n\nfunction resizeCoordinates(state, settings, anchor, directions, options) {\n    var minimumSize = getMinimumSize(state);\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    return isInitializedState(state)\n        ? __assign(__assign({}, copyState(state)), { coordinates: anchoredResizeCoordinatesAlgorithm(state.coordinates, anchor, directions, options, {\n                positionRestrictions: mergePositionRestrictions(getPositionRestrictions(state, settings), coordinatesToPositionRestrictions(state.visibleArea)),\n                sizeRestrictions: {\n                    maxWidth: Math.min(sizeRestrictions.maxWidth, state.visibleArea.width),\n                    maxHeight: Math.min(sizeRestrictions.maxHeight, state.visibleArea.height),\n                    minWidth: Math.max(Math.min(sizeRestrictions.minWidth, state.visibleArea.width), minimumSize),\n                    minHeight: Math.max(Math.min(sizeRestrictions.minHeight, state.visibleArea.height), minimumSize),\n                },\n                aspectRatio: getAspectRatio(state, settings),\n            }) }) : state;\n}\n\nexport { resizeCoordinates };\n","import { __assign } from 'tslib';\nimport { ratio, applyScale, resizeToSizeRestrictions, inverseMove, fitToPositionRestrictions, coordinatesToPositionRestrictions, applyMove, moveToPositionRestrictions } from '../service/utils.js';\nimport { getSizeRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { fitCoordinates } from '../service/fitCoordinates.js';\n\nfunction setBoundary(state, settings, boundary) {\n    var result = __assign(__assign({}, copyState(state)), { boundary: boundary });\n    if (result.visibleArea && result.coordinates && state.visibleArea) {\n        // Scale visible area size to fit new boundary:\n        result.visibleArea.height = result.visibleArea.width / ratio(boundary);\n        result.visibleArea.top += (state.visibleArea.height - result.visibleArea.height) / 2;\n        // Scale visible area to prevent overlap coordinates (and its minimum size)\n        var sizeRestrictions = getSizeRestrictions(result, settings);\n        if (Math.max(sizeRestrictions.minHeight, result.coordinates.height) - result.visibleArea.height > 0 ||\n            Math.max(sizeRestrictions.minWidth, result.coordinates.width) - result.visibleArea.width > 0) {\n            result.visibleArea = applyScale(result.visibleArea, Math.max(Math.max(sizeRestrictions.minHeight, result.coordinates.height) / result.visibleArea.height, Math.max(sizeRestrictions.minWidth, result.coordinates.width) / result.visibleArea.width));\n        }\n        // Scale visible area to prevent overlap area restrictions\n        result.visibleArea = resizeToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n        // Move visible are to prevent moving of the coordinates:\n        var move = inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea)));\n        if (result.visibleArea.width < result.coordinates.width) {\n            move.left = 0;\n        }\n        if (result.visibleArea.height < result.coordinates.height) {\n            move.top = 0;\n        }\n        result.visibleArea = applyMove(result.visibleArea, move);\n        // Move visible area to prevent overlap the area restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        result = fitCoordinates(result, settings);\n    }\n    return result;\n}\n\nexport { setBoundary };\n","import 'tslib';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { rotateImageAlgorithm } from '../algorithms/rotateImageAlgorithm.js';\nimport { flipImageAlgorithm } from '../algorithms/flipImageAlgorithm.js';\nimport { transformImageAlgorithm } from '../algorithms/transformImageAlgorithm.js';\n\nfunction transformImage(state, settings, transform) {\n    if (transform.rotate) {\n        state = rotateImageAlgorithm(state, settings, transform.rotate);\n    }\n    if (transform.flip) {\n        state = flipImageAlgorithm(state, settings, transform.flip.horizontal, transform.flip.vertical);\n    }\n    if (transform.move || transform.scale) {\n        state = transformImageAlgorithm(state, settings, transform);\n    }\n    return state;\n}\n\nexport { transformImage };\n","import { __assign } from 'tslib';\nimport { isNumber } from '../utils/index.js';\nimport { rotatePoint, getCenter, diff, resizeToSizeRestrictions, moveToPositionRestrictions, applyMove } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport { isInitializedState, getTransformedImageSize, getSizeRestrictions, getAspectRatio, getAreaSizeRestrictions, getPositionRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction rotateImageAlgorithm(state, settings, rotate) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var angle = isNumber(rotate) ? rotate : rotate.angle;\n        var imageCenter = rotatePoint(getCenter(__assign({ left: 0, top: 0 }, getTransformedImageSize(state))), angle);\n        result.transforms.rotate += angle;\n        result.coordinates = __assign(__assign({}, approximateSize({\n            sizeRestrictions: getSizeRestrictions(result, settings),\n            aspectRatio: getAspectRatio(result, settings),\n            width: result.coordinates.width,\n            height: result.coordinates.height,\n        })), rotatePoint(getCenter(result.coordinates), angle));\n        var center = !isNumber(rotate) && rotate.center ? rotate.center : getCenter(state.coordinates);\n        var shift = diff(getCenter(state.coordinates), rotatePoint(getCenter(state.coordinates), angle, center));\n        var imageSize = getTransformedImageSize(result);\n        result.coordinates.left -= imageCenter.left - imageSize.width / 2 + result.coordinates.width / 2 - shift.left;\n        result.coordinates.top -= imageCenter.top - imageSize.height / 2 + result.coordinates.height / 2 - shift.top;\n        // Check that visible area doesn't break the area restrictions:\n        result.visibleArea = resizeToSizeRestrictions(result.visibleArea, mergeSizeRestrictions(getAreaSizeRestrictions(result, settings), {\n            minWidth: result.coordinates.width,\n            minHeight: result.coordinates.height,\n        }));\n        result.coordinates = moveToPositionRestrictions(result.coordinates, getPositionRestrictions(result, settings));\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(result.coordinates), getCenter(state.coordinates)));\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        return result;\n    }\n    return state;\n}\n\nexport { rotateImageAlgorithm };\n","import 'tslib';\nimport { rotatePoint, getCenter, applyMove, diff, moveToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getTransformedImageSize, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction flipImageAlgorithm(state, settings, horizontal, vertical) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var rotate = state.transforms.rotate;\n        var imageSize = getTransformedImageSize(state);\n        var changed = {\n            horizontal: horizontal,\n            vertical: vertical,\n        };\n        if (changed.horizontal || changed.vertical) {\n            var imageCenter = rotatePoint({\n                left: imageSize.width / 2,\n                top: imageSize.height / 2,\n            }, -rotate);\n            var oldCenter = rotatePoint(getCenter(result.coordinates), -rotate);\n            var newCenter = rotatePoint({\n                left: changed.horizontal ? imageCenter.left - (oldCenter.left - imageCenter.left) : oldCenter.left,\n                top: changed.vertical ? imageCenter.top - (oldCenter.top - imageCenter.top) : oldCenter.top,\n            }, rotate);\n            result.coordinates = applyMove(result.coordinates, diff(newCenter, getCenter(result.coordinates)));\n            oldCenter = rotatePoint(getCenter(result.visibleArea), -rotate);\n            newCenter = rotatePoint({\n                left: changed.horizontal ? imageCenter.left - (oldCenter.left - imageCenter.left) : oldCenter.left,\n                top: changed.vertical ? imageCenter.top - (oldCenter.top - imageCenter.top) : oldCenter.top,\n            }, rotate);\n            result.visibleArea = applyMove(result.visibleArea, diff(newCenter, getCenter(result.visibleArea)));\n            result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        }\n        if (changed.horizontal) {\n            result.transforms.flip.horizontal = !state.transforms.flip.horizontal;\n        }\n        if (changed.vertical) {\n            result.transforms.flip.vertical = !state.transforms.flip.vertical;\n        }\n        return result;\n    }\n    return state;\n}\n\nexport { flipImageAlgorithm };\n","import 'tslib';\nimport { isNumber, isRoughlyEqual } from '../utils/index.js';\nimport { applyMove, maxScale, positionToSizeRestrictions, minScale, applyScale, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions, getCenter, inverseMove, fitToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getSizeRestrictions, getPositionRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction transformImageAlgorithm(state, settings, transform) {\n    var _a;\n    var _b = transform.scale, scale = _b === void 0 ? 1 : _b, _c = transform.move, move = _c === void 0 ? {} : _c;\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        // It's reversed because zooming in the image is actually zooming out visible area\n        var scaleFactor = 1 / (isNumber(scale) ? scale : scale.factor);\n        var scaleCenter = !isNumber(scale) ? scale.center : undefined;\n        var isAllowedScale = !isRoughlyEqual(scaleFactor, 1);\n        var areaScale = 1;\n        var stencilScale = 1;\n        result.visibleArea = applyMove(result.visibleArea, {\n            left: move.left || 0,\n            top: move.top || 0,\n        });\n        var sizeRestrictions = getSizeRestrictions(result, settings);\n        var positionRestrictions = getPositionRestrictions(result, settings);\n        var areaSizeRestrictions = getAreaSizeRestrictions(result, settings);\n        var scaleRestrictions = {\n            stencil: {\n                minimum: Math.max(sizeRestrictions.minWidth ? sizeRestrictions.minWidth / result.coordinates.width : 0, sizeRestrictions.minHeight ? sizeRestrictions.minHeight / result.coordinates.height : 0),\n                maximum: Math.min(sizeRestrictions.maxWidth ? sizeRestrictions.maxWidth / result.coordinates.width : Infinity, sizeRestrictions.maxHeight ? sizeRestrictions.maxHeight / result.coordinates.height : Infinity, maxScale(result.coordinates, positionToSizeRestrictions(positionRestrictions))),\n            },\n            area: {\n                maximum: maxScale(result.visibleArea, areaSizeRestrictions),\n                minimum: minScale(result.visibleArea, areaSizeRestrictions),\n            },\n        };\n        // If there is scaling then begin scale\n        if (scaleFactor && isAllowedScale) {\n            // Determine scale factor\n            if (scaleFactor < 1) {\n                stencilScale = Math.max(scaleFactor, Math.max(scaleRestrictions.area.minimum, scaleRestrictions.stencil.minimum));\n                if (stencilScale > 1) {\n                    stencilScale = 1;\n                }\n            }\n            else if (scaleFactor > 1) {\n                stencilScale = Math.min(scaleFactor, Math.min(scaleRestrictions.area.maximum, scaleRestrictions.stencil.maximum));\n                if (stencilScale < 1) {\n                    stencilScale = 1;\n                }\n            }\n        }\n        if (stencilScale) {\n            // Resize stencil with area as much as possible\n            result.visibleArea = applyScale(result.visibleArea, stencilScale, scaleCenter);\n        }\n        var relativeCoordinates = {\n            left: state.coordinates.left - state.visibleArea.left,\n            right: state.visibleArea.width + state.visibleArea.left - (state.coordinates.width + state.coordinates.left),\n            top: state.coordinates.top - state.visibleArea.top,\n            bottom: state.visibleArea.height + state.visibleArea.top - (state.coordinates.height + state.coordinates.top),\n        };\n        // Move the area to fit to the coordinates limits:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, {\n            left: positionRestrictions.left !== undefined\n                ? positionRestrictions.left - relativeCoordinates.left * stencilScale\n                : undefined,\n            top: positionRestrictions.top !== undefined\n                ? positionRestrictions.top - relativeCoordinates.top * stencilScale\n                : undefined,\n            bottom: positionRestrictions.bottom !== undefined\n                ? positionRestrictions.bottom + relativeCoordinates.bottom * stencilScale\n                : undefined,\n            right: positionRestrictions.right !== undefined\n                ? positionRestrictions.right + relativeCoordinates.right * stencilScale\n                : undefined,\n        });\n        // But the more important to fit are to the area restrictions, so we should fit it to that restrictions:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        // Set the same coordinates of stencil inside visible area\n        result.coordinates.width = result.coordinates.width * stencilScale;\n        result.coordinates.height = result.coordinates.height * stencilScale;\n        result.coordinates.left = result.visibleArea.left + relativeCoordinates.left * stencilScale;\n        result.coordinates.top = result.visibleArea.top + relativeCoordinates.top * stencilScale;\n        // Move the coordinates to prevent the intersection with visible area and position restrictions\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), positionRestrictions));\n        // Resize only area if stencil can't be resized and stencil resize is disabled\n        if (isAllowedScale && scaleFactor && ((_a = settings.transformImage) === null || _a === void 0 ? void 0 : _a.adjustStencil)) {\n            if (scaleFactor > 1) {\n                areaScale = Math.min(scaleRestrictions.area.maximum, scaleFactor) / stencilScale;\n            }\n            else if (scaleFactor < 1) {\n                areaScale = Math.max(result.coordinates.height / result.visibleArea.height, result.coordinates.width / result.visibleArea.width, scaleFactor / stencilScale);\n            }\n            if (areaScale !== 1) {\n                result.visibleArea = applyScale(result.visibleArea, areaScale, scaleFactor > 1 ? scaleCenter : getCenter(result.coordinates));\n                // Move to prevent the breaking of the area restrictions:\n                result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n                // Move to prevent the intersection with coordinates:\n                result.visibleArea = applyMove(result.visibleArea, inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea))));\n            }\n        }\n        return result;\n    }\n    return state;\n}\n\nexport { transformImageAlgorithm };\n","import { __assign } from 'tslib';\nimport { getBrokenRatio, ratio, applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport { isInitializedState, getAspectRatio, getSizeRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions, getPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction reconcileState(state, settings) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var aspectRatio = getAspectRatio(state, settings);\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        // Fit the size of coordinates to existing size restrictions and visible area\n        var brokenRatio = getBrokenRatio(ratio(state.coordinates), aspectRatio);\n        var desiredSize = brokenRatio\n            ? {\n                height: state.coordinates.height,\n                width: state.coordinates.height * brokenRatio,\n            }\n            : state.coordinates;\n        result.coordinates = __assign(__assign({}, result.coordinates), approximateSize({\n            width: desiredSize.width,\n            height: desiredSize.height,\n            aspectRatio: aspectRatio,\n            sizeRestrictions: mergeSizeRestrictions(areaSizeRestrictions, sizeRestrictions),\n        }));\n        // Return the coordinates to the previous center\n        result.coordinates = applyMove(result.coordinates, diff(getCenter(state.coordinates), getCenter(result.coordinates)));\n        var scaleModifier = Math.max(result.coordinates.width / result.visibleArea.width, result.coordinates.height / result.visibleArea.height, 1);\n        // Fit the visible area to its size restrictions and boundary aspect ratio:\n        result.visibleArea = __assign(__assign({}, state.visibleArea), approximateSize({\n            width: state.visibleArea.width * scaleModifier,\n            height: state.visibleArea.height * scaleModifier,\n            aspectRatio: {\n                minimum: ratio(result.boundary),\n                maximum: ratio(result.boundary),\n            },\n            sizeRestrictions: areaSizeRestrictions,\n        }));\n        // Return the visible area to previous center\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(state.visibleArea), getCenter(result.visibleArea)));\n        // Fit the visible area to positions restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        // Fit the coordinates to position restrictions and visible area\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\n\nexport { reconcileState };\n","import { isNumber } from '../utils/index.js';\nimport { getCoefficient } from './helpers.js';\n\nfunction normalizeResizeDirections(state, directions) {\n    var coefficient = getCoefficient(state);\n    return {\n        left: isNumber(directions.left) ? directions.left * coefficient : 0,\n        top: isNumber(directions.top) ? directions.top * coefficient : 0,\n        right: isNumber(directions.right) ? directions.right * coefficient : 0,\n        bottom: isNumber(directions.bottom) ? directions.bottom * coefficient : 0,\n    };\n}\nfunction normalizeCenter(state, center) {\n    var coefficient = getCoefficient(state);\n    if (state.visibleArea) {\n        return {\n            left: center.left * coefficient + state.visibleArea.left,\n            top: center.top * coefficient + state.visibleArea.top,\n        };\n    }\n    return center;\n}\nfunction normalizeFlip(state, flip) {\n    if (state) {\n        var normalizedAngle = Math.abs(state.transforms.rotate % 180);\n        if (normalizedAngle <= 45 || normalizedAngle >= 135) {\n            return flip;\n        }\n        else {\n            return {\n                horizontal: flip.vertical,\n                vertical: flip.horizontal,\n            };\n        }\n    }\n    return flip;\n}\nfunction fillMoveDirections(directions) {\n    return {\n        left: isNumber(directions.left) ? directions.left : 0,\n        top: isNumber(directions.top) ? directions.top : 0,\n    };\n}\nfunction fillResizeDirections(directions) {\n    return {\n        left: isNumber(directions.left) ? directions.left : 0,\n        top: isNumber(directions.top) ? directions.top : 0,\n        right: isNumber(directions.right) ? directions.right : 0,\n        bottom: isNumber(directions.bottom) ? directions.bottom : 0,\n    };\n}\nfunction normalizeMoveDirections(state, directions) {\n    var coefficient = getCoefficient(state);\n    return {\n        left: isNumber(directions.left) ? directions.left * coefficient : 0,\n        top: isNumber(directions.top) ? directions.top * coefficient : 0,\n    };\n}\nfunction normalizeImageTransform(state, transform) {\n    if (transform.scale) {\n        transform.scale = {\n            factor: isNumber(transform.scale) ? transform.scale : transform.scale.factor,\n            center: !isNumber(transform.scale) && transform.scale.center\n                ? normalizeCenter(state, transform.scale.center)\n                : undefined,\n        };\n    }\n    if (transform.rotate) {\n        transform.rotate = {\n            angle: isNumber(transform.rotate) ? transform.rotate : transform.rotate.angle,\n            center: !isNumber(transform.rotate) && transform.rotate.center\n                ? normalizeCenter(state, transform.rotate.center)\n                : undefined,\n        };\n    }\n    if (transform.move) {\n        transform.move = normalizeMoveDirections(state, transform.move);\n    }\n    return transform;\n}\n\nexport { fillMoveDirections, fillResizeDirections, normalizeCenter, normalizeFlip, normalizeImageTransform, normalizeMoveDirections, normalizeResizeDirections };\n","import { __assign, __rest, __spreadArrays } from 'tslib';\nimport { getOptions, deepClone, debounce, isArray, isFunction, deepCompare, isUndefined, isObject } from '../utils/index.js';\nimport { getCoefficient, isConsistentState, getStencilCoordinates, getRoundedCoordinates } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport { setCoordinates, SetCoordinatesMode } from '../state/setCoordinates.js';\nimport { setVisibleArea } from '../state/setVisibleArea.js';\nimport { createState } from '../state/createState.js';\nimport { moveCoordinates } from '../state/moveCoordinates.js';\nimport { resizeCoordinates } from '../state/resizeCoordinates.js';\nimport { setBoundary } from '../state/setBoundary.js';\nimport { transformImage } from '../state/transformImage.js';\nimport { reconcileState } from '../state/reconcileState.js';\nimport { normalizeImageTransform, normalizeFlip, normalizeMoveDirections, fillMoveDirections, normalizeResizeDirections, fillResizeDirections } from '../service/normalize.js';\nimport { hasInteractions } from '../service/interactions.js';\n\nfunction runCallback(callback, getInstance) {\n    if (callback && getInstance) {\n        var instance = getInstance();\n        if (instance) {\n            callback(instance);\n        }\n    }\n}\nfunction runCallbacks(callbacks, getInstance) {\n    callbacks.forEach(function (callback) {\n        runCallback(callback, getInstance);\n    });\n}\nvar AbstractCropperInstance = /** @class */ (function () {\n    function AbstractCropperInstance() {\n        var _this = this;\n        this.getTransitions = function () {\n            var data = _this.getData();\n            var transitions = _this.getProps().transitions;\n            return __assign(__assign({}, getOptions(transitions, {\n                timingFunction: 'ease-in-out',\n                duration: 350,\n            })), { active: data.transitions });\n        };\n        this.getInteractions = function () {\n            var interactions = _this.getData().interactions;\n            return deepClone(interactions);\n        };\n        this.hasInteractions = function () {\n            var interactions = _this.getData().interactions;\n            return hasInteractions(interactions);\n        };\n        this.startTransitions = function () {\n            var _a = _this.getProps(), onTransitionsStart = _a.onTransitionsStart, onUpdate = _a.onUpdate, getInstance = _a.getInstance;\n            var _b = _this.getData(), transitions = _b.transitions, data = __rest(_b, [\"transitions\"]);\n            _this.setData(__assign(__assign({}, data), { transitions: true }));\n            if (!transitions) {\n                runCallbacks([onTransitionsStart, onUpdate], getInstance);\n            }\n            _this.endTransitions();\n        };\n        this.endTransitions = debounce(function () {\n            var _a = _this.getProps(), onTransitionsEnd = _a.onTransitionsEnd, onUpdate = _a.onUpdate, getInstance = _a.getInstance;\n            _this.setData(__assign(__assign({}, _this.getData()), { transitions: false }));\n            runCallbacks([onTransitionsEnd, onUpdate], getInstance);\n        }, function () {\n            return _this.getTransitions().duration;\n        });\n        this.applyPostProcess = function (action, state) {\n            var _a = _this.getProps(), settings = _a.settings, postProcess = _a.postProcess;\n            var name = action.name, _b = action.interaction, interaction = _b === void 0 ? false : _b, _c = action.transitions, transitions = _c === void 0 ? false : _c, _d = action.immediately, immediately = _d === void 0 ? false : _d;\n            var preparedAction = {\n                name: name,\n                interaction: interaction,\n                transitions: transitions,\n                immediately: immediately,\n            };\n            if (isArray(postProcess)) {\n                return postProcess.reduce(function (processedState, p) { return p(processedState, settings, preparedAction); }, state);\n            }\n            else if (isFunction(postProcess)) {\n                return postProcess(state, settings, preparedAction);\n            }\n            else {\n                return state;\n            }\n        };\n        this.updateState = function (modifier, options, callbacks) {\n            if (options === void 0) { options = {}; }\n            if (callbacks === void 0) { callbacks = []; }\n            var _a = options.transitions, transitions = _a === void 0 ? false : _a;\n            var _b = _this.getProps(), onTransitionsStart = _b.onTransitionsStart, getInstance = _b.getInstance, onChange = _b.onChange, onUpdate = _b.onUpdate, settings = _b.settings;\n            var previousData = _this.getData();\n            var state = isFunction(modifier) ? modifier(previousData.state, settings) : modifier;\n            var tolerance = state ? 1e-3 * getCoefficient(state) : 1e-3;\n            var somethingChanged = !deepCompare(previousData.state, state, tolerance);\n            var affectTransitionProperties = [\n                'coordinates',\n                'boundary',\n                'visibleArea',\n                'imageSize',\n                'transforms',\n            ].some(function (property) { var _a; return !deepCompare((_a = previousData.state) === null || _a === void 0 ? void 0 : _a[property], state === null || state === void 0 ? void 0 : state[property], tolerance); });\n            var currentData = previousData;\n            if (somethingChanged) {\n                if (transitions && affectTransitionProperties) {\n                    _this.endTransitions();\n                }\n                currentData = __assign(__assign({}, currentData), { state: copyState(state), transitions: transitions && affectTransitionProperties });\n                _this.setData(currentData);\n                runCallback(onChange, getInstance);\n            }\n            if (currentData.transitions && !previousData.transitions) {\n                runCallback(onTransitionsStart, getInstance);\n            }\n            runCallbacks(__spreadArrays(callbacks, [onUpdate]), getInstance);\n        };\n        this.setInteractions = function (interactions) {\n            var _a = _this.getProps(), onInteractionStart = _a.onInteractionStart, onInteractionEnd = _a.onInteractionEnd, getInstance = _a.getInstance;\n            var previousInteractions = _this.getInteractions();\n            var currentInteractions = __assign(__assign({}, previousInteractions), interactions);\n            if (!deepCompare(previousInteractions, currentInteractions)) {\n                _this.setData(__assign(__assign({}, _this.getData()), { interactions: currentInteractions }));\n            }\n            if (hasInteractions(previousInteractions) !== hasInteractions(currentInteractions)) {\n                if (!hasInteractions(previousInteractions)) {\n                    runCallback(onInteractionStart, getInstance);\n                }\n                else {\n                    var state_1 = _this.getData().state;\n                    _this.updateState(function () {\n                        return state_1 &&\n                            _this.applyPostProcess({\n                                name: 'interactionEnd',\n                                immediately: true,\n                                transitions: true,\n                            }, state_1);\n                    }, {\n                        transitions: true,\n                    }, [onInteractionEnd]);\n                }\n            }\n        };\n        this.resetState = function (boundary, image) {\n            _this.updateState(_this.createDefaultState(boundary, image));\n        };\n        this.clear = function () {\n            _this.updateState(null);\n        };\n        this.reconcileState = function (options) {\n            if (options === void 0) { options = {}; }\n            var _a = _this.getProps(), reconcileStateAlgorithm = _a.reconcileStateAlgorithm, settings = _a.settings;\n            var state = _this.getData().state;\n            var _b = options.transitions, transitions = _b === void 0 ? false : _b;\n            if (state && !isConsistentState(state, settings)) {\n                var reconciledState = (reconcileStateAlgorithm || reconcileState)(state, settings);\n                reconciledState = _this.applyPostProcess({\n                    name: 'reconcileState',\n                    immediately: true,\n                    transitions: transitions,\n                }, reconciledState);\n                _this.updateState(reconciledState, {\n                    transitions: transitions,\n                });\n            }\n        };\n        this.transformImage = function (transform, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.immediately, immediately = _c === void 0 ? false : _c, _d = options.normalize, normalize = _d === void 0 ? true : _d;\n            var _e = _this.getProps(), transformImageAlgorithm = _e.transformImageAlgorithm, onTransformImage = _e.onTransformImage, onTransformImageEnd = _e.onTransformImageEnd, settings = _e.settings;\n            var state = _this.getData().state;\n            var callbacks = [];\n            if (state) {\n                if (normalize) {\n                    transform = normalizeImageTransform(state, transform);\n                }\n                var result = _this.applyPostProcess({\n                    name: 'transformImage',\n                    transitions: transitions,\n                    immediately: immediately,\n                }, (transformImageAlgorithm || transformImage)(state, settings, transform));\n                callbacks.push(onTransformImage);\n                if (interaction) {\n                    _this.setInteractions({\n                        transformImage: {\n                            rotate: !isUndefined(transform.rotate),\n                            flip: !isUndefined(transform.flip),\n                            scale: !isUndefined(transform.scale),\n                            move: !isUndefined(transform.move),\n                        },\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({\n                        name: 'transformImageEnd',\n                        transitions: transitions,\n                        immediately: true,\n                    }, result);\n                    callbacks.push(onTransformImageEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.transformImageEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.immediately, immediately = _a === void 0 ? true : _a, _b = options.transitions, transitions = _b === void 0 ? true : _b;\n            var state = _this.getData().state;\n            var onTransformImageEnd = _this.getProps().onTransformImageEnd;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'transformImageEnd', immediately: immediately, transitions: transitions }, state); }, {\n                transitions: transitions,\n            }, [onTransformImageEnd]);\n            _this.setInteractions({\n                transformImage: {\n                    rotate: false,\n                    flip: false,\n                    scale: false,\n                    move: false,\n                },\n            });\n        };\n        this.zoomImage = function (scale, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                scale: scale,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.moveImage = function (left, top, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                move: {\n                    left: left,\n                    top: top,\n                },\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.flipImage = function (horizontal, vertical, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? true : _d;\n            var state = _this.getState();\n            var flip = {\n                horizontal: horizontal,\n                vertical: vertical,\n            };\n            _this.transformImage({\n                flip: state && normalize ? normalizeFlip(state, flip) : flip,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions });\n        };\n        this.rotateImage = function (rotate, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                rotate: rotate,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.reset = function (boundary, image) {\n            _this.resetState(boundary, image);\n        };\n        this.setState = function (modifier, options) {\n            if (options === void 0) { options = {}; }\n            var settings = _this.getSettings();\n            var state = _this.getData().state;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b, _c = options.interaction, interaction = _c === void 0 ? false : _c, _d = options.postprocess, postprocess = _d === void 0 ? false : _d;\n            var newState = modifier && (isFunction(modifier) ? modifier(state, settings) : __assign(__assign({}, state), modifier));\n            _this.updateState(function () {\n                return postprocess\n                    ? newState &&\n                        _this.applyPostProcess({\n                            name: 'setState',\n                            immediately: immediately,\n                            transitions: transitions,\n                            interaction: interaction,\n                        }, newState)\n                    : newState;\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setCoordinates = function (transforms, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), setCoordinatesAlgorithm = _a.setCoordinatesAlgorithm, settings = _a.settings;\n            var _b = options.transitions, transitions = _b === void 0 ? true : _b, _c = options.immediately, immediately = _c === void 0 ? true : _c;\n            _this.updateState(function () {\n                return state &&\n                    _this.applyPostProcess({\n                        name: 'setCoordinates',\n                        immediately: immediately,\n                        transitions: transitions,\n                    }, (setCoordinatesAlgorithm || setCoordinates)(state, settings, transforms, SetCoordinatesMode.zoom));\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setVisibleArea = function (visibleArea, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b;\n            var state = _this.getData().state;\n            var _c = _this.getProps(), setVisibleAreaAlgorithm = _c.setVisibleAreaAlgorithm, settings = _c.settings;\n            _this.updateState(function () {\n                return state &&\n                    _this.applyPostProcess({ name: 'setVisibleArea', immediately: immediately, transitions: transitions }, (setVisibleAreaAlgorithm || setVisibleArea)(state, settings, visibleArea));\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setBoundary = function (boundary, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), setBoundaryAlgorithm = _a.setBoundaryAlgorithm, settings = _a.settings;\n            var _b = options.transitions, transitions = _b === void 0 ? false : _b, _c = options.immediately, immediately = _c === void 0 ? true : _c;\n            if (boundary) {\n                _this.updateState(function () {\n                    return state &&\n                        _this.applyPostProcess({ name: 'setBoundary', immediately: immediately, transitions: transitions }, (setBoundaryAlgorithm || setBoundary)(state, settings, boundary));\n                });\n            }\n            else {\n                _this.updateState(null);\n            }\n        };\n        this.moveCoordinates = function (directions, options) {\n            if (options === void 0) { options = {}; }\n            var data = _this.getData();\n            var _a = _this.getProps(), moveCoordinatesAlgorithm = _a.moveCoordinatesAlgorithm, onMove = _a.onMove, onMoveEnd = _a.onMoveEnd, settings = _a.settings;\n            var _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? false : _c, _d = options.immediately, immediately = _d === void 0 ? false : _d, _e = options.normalize, normalize = _e === void 0 ? true : _e;\n            var callbacks = [];\n            if (!data.transitions && data.state) {\n                var normalizedDirections = normalize\n                    ? normalizeMoveDirections(data.state, directions)\n                    : fillMoveDirections(directions);\n                var result = _this.applyPostProcess({ name: 'moveCoordinates', interaction: interaction, immediately: immediately, transitions: transitions }, (moveCoordinatesAlgorithm || moveCoordinates)(data.state, settings, normalizedDirections));\n                callbacks.push(onMove);\n                if (interaction) {\n                    _this.setInteractions({\n                        moveCoordinates: true,\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({ name: 'moveCoordinatesEnd', interaction: interaction, immediately: immediately, transitions: transitions }, result);\n                    callbacks.push(onMoveEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.moveCoordinatesEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var onMoveEnd = _this.getProps().onMoveEnd;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'moveCoordinatesEnd', transitions: transitions, immediately: immediately }, state); }, {\n                transitions: transitions,\n            }, [onMoveEnd]);\n            _this.setInteractions({\n                moveCoordinates: false,\n            });\n        };\n        this.resizeCoordinates = function (anchor, directions, parameters, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), resizeCoordinatesAlgorithm = _a.resizeCoordinatesAlgorithm, onResize = _a.onResize, onResizeEnd = _a.onResizeEnd, settings = _a.settings;\n            var _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? false : _c, _d = options.immediately, immediately = _d === void 0 ? false : _d, _e = options.normalize, normalize = _e === void 0 ? true : _e;\n            var transitionsOptions = _this.getTransitions();\n            if (!transitionsOptions.active && state) {\n                var callbacks = [];\n                var normalizedDirections = normalize\n                    ? normalizeResizeDirections(state, directions)\n                    : fillResizeDirections(directions);\n                var result = _this.applyPostProcess({ name: 'resizeCoordinates', interaction: interaction, immediately: immediately, transitions: transitions }, (resizeCoordinatesAlgorithm || resizeCoordinates)(state, settings, anchor, normalizedDirections, isObject(parameters) ? parameters : {}));\n                callbacks.push(onResize);\n                if (interaction) {\n                    _this.setInteractions({\n                        resizeCoordinates: true,\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({ name: 'resizeCoordinatesEnd', interaction: interaction, immediately: immediately, transitions: transitions }, result);\n                    callbacks.push(onResizeEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.resizeCoordinatesEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var onResizeEnd = _this.getProps().onResizeEnd;\n            var state = _this.getData().state;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'resizeCoordinatesEnd', transitions: transitions, immediately: immediately }, state); }, {\n                transitions: transitions,\n            }, [onResizeEnd]);\n            _this.setInteractions({\n                resizeCoordinates: false,\n            });\n        };\n        this.getStencilCoordinates = function () {\n            var state = _this.getData().state;\n            return getStencilCoordinates(state);\n        };\n        this.getCoordinates = function (options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var settings = _this.getProps().settings;\n            if (state && state.coordinates) {\n                var _a = options.round, round = _a === void 0 ? true : _a;\n                if (round) {\n                    return getRoundedCoordinates(state, settings);\n                }\n                else {\n                    return __assign({}, state.coordinates);\n                }\n            }\n            else {\n                return null;\n            }\n        };\n        this.getVisibleArea = function () {\n            var state = _this.getData().state;\n            if (state === null || state === void 0 ? void 0 : state.visibleArea) {\n                return __assign({}, state.visibleArea);\n            }\n            else {\n                return null;\n            }\n        };\n        this.getSettings = function () {\n            var settings = _this.getProps().settings;\n            return __assign({}, settings);\n        };\n        this.getState = function () {\n            var state = _this.getData().state;\n            return copyState(state);\n        };\n        this.getTransforms = function () {\n            var state = _this.getData().state;\n            return state\n                ? deepClone(state.transforms)\n                : {\n                    rotate: 0,\n                    flip: {\n                        horizontal: false,\n                        vertical: false,\n                    },\n                };\n        };\n        this.createDefaultState = function (boundary, image) {\n            var _a = _this.getProps(), createStateAlgorithm = _a.createStateAlgorithm, settings = _a.settings;\n            return _this.applyPostProcess({\n                name: 'createState',\n                immediately: true,\n                transitions: false,\n            }, (createStateAlgorithm || createState)({\n                image: image,\n                boundary: boundary,\n            }, settings));\n        };\n        this.isConsistent = function () {\n            var state = _this.getData().state;\n            var settings = _this.getProps().settings;\n            return state ? isConsistentState(state, settings) : true;\n        };\n    }\n    return AbstractCropperInstance;\n}());\n\nexport { AbstractCropperInstance };\n","import { __assign } from 'tslib';\nimport { positionToSizeRestrictions, ratio } from '../service/utils.js';\nimport { getSizeRestrictions, getAspectRatio, getPositionRestrictions } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction defaultSize(state, settings) {\n    var imageSize = state.imageSize, visibleArea = state.visibleArea;\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    var aspectRatio = getAspectRatio(state, settings);\n    var area;\n    if (visibleArea) {\n        area = visibleArea;\n    }\n    else {\n        var sizeRestrictions_1 = positionToSizeRestrictions(getPositionRestrictions(state, settings));\n        area = {\n            width: Math.max(sizeRestrictions_1.minWidth, Math.min(sizeRestrictions_1.maxWidth, imageSize.width)),\n            height: Math.max(sizeRestrictions_1.minHeight, Math.min(sizeRestrictions_1.maxHeight, imageSize.height)),\n        };\n    }\n    var optimalRatio = Math.min(aspectRatio.maximum || Infinity, Math.max(aspectRatio.minimum || 0, ratio(area)));\n    var size = area.width < area.height\n        ? {\n            width: area.width * 0.8,\n            height: (area.width * 0.8) / optimalRatio,\n        }\n        : {\n            height: area.height * 0.8,\n            width: area.height * 0.8 * optimalRatio,\n        };\n    return approximateSize(__assign(__assign({}, size), { aspectRatio: aspectRatio, sizeRestrictions: sizeRestrictions }));\n}\n\nexport { defaultSize };\n","import { isNumeric, parseNumber } from '../utils/index.js';\n\nfunction retrieveSizeRestrictions(settings) {\n    return {\n        minWidth: isNumeric(settings.minWidth) ? parseNumber(settings.minWidth) : 0,\n        minHeight: isNumeric(settings.minHeight) ? parseNumber(settings.minHeight) : 0,\n        maxWidth: isNumeric(settings.maxWidth) ? parseNumber(settings.maxWidth) : Infinity,\n        maxHeight: isNumeric(settings.maxHeight) ? parseNumber(settings.maxHeight) : Infinity,\n    };\n}\nfunction pixelsRestrictions(state, settings) {\n    return retrieveSizeRestrictions(settings);\n}\n\nexport { pixelsRestrictions, retrieveSizeRestrictions };\n","import 'tslib';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultPosition(state) {\n    var visibleArea = state.visibleArea, coordinates = state.coordinates;\n    var area = visibleArea || getTransformedImageSize(state);\n    return {\n        left: (visibleArea ? visibleArea.left : 0) + area.width / 2 - (coordinates ? coordinates.width / 2 : 0),\n        top: (visibleArea ? visibleArea.top : 0) + area.height / 2 - (coordinates ? coordinates.height / 2 : 0),\n    };\n}\n\nexport { defaultPosition };\n","import { __assign } from 'tslib';\nimport { isFunction } from '../utils/index.js';\nimport { mergePositionRestrictions, createAspectRatio } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { defaultPositionRestrictions } from './defaultPositionRestrictions.js';\nexport { defaultPositionRestrictions } from './defaultPositionRestrictions.js';\nimport { defaultVisibleArea } from './defaultVisibleArea.js';\nexport { defaultVisibleArea } from './defaultVisibleArea.js';\nimport { defaultSize } from './defaultSize.js';\nexport { defaultSize } from './defaultSize.js';\nimport { pixelsRestrictions } from './defaultSizeRestrictions.js';\nexport { pixelsRestrictions, retrieveSizeRestrictions } from './defaultSizeRestrictions.js';\nimport { defaultPosition } from './defaultPosition.js';\nexport { defaultPosition } from './defaultPosition.js';\nimport { defaultAreaPositionRestrictions } from './defaultAreaPositionRestrictions.js';\nexport { defaultAreaPositionRestrictions } from './defaultAreaPositionRestrictions.js';\nimport { defaultAreaSizeRestrictions } from './defaultAreaSizeRestrictions.js';\nexport { defaultAreaSizeRestrictions } from './defaultAreaSizeRestrictions.js';\nexport { fillBoundary, fitBoundary } from './defaultBoundary.js';\nexport { defaultStencilConstraints } from './defaultStencilConstraints.js';\n\nfunction withDefaultSizeRestrictions(sizeRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(sizeRestrictions) ? sizeRestrictions(state, basicSettings) : sizeRestrictions;\n        return mergeSizeRestrictions(pixelsRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultPositionRestrictions(positionRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(positionRestrictions)\n            ? positionRestrictions(state, basicSettings)\n            : positionRestrictions;\n        return mergePositionRestrictions(defaultPositionRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultAreaPositionRestrictions(areaPositionRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(areaPositionRestrictions)\n            ? areaPositionRestrictions(state, basicSettings)\n            : areaPositionRestrictions;\n        return mergePositionRestrictions(defaultAreaPositionRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultAreaSizeRestrictions(areaSizeRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(areaSizeRestrictions)\n            ? areaSizeRestrictions(state, basicSettings)\n            : areaSizeRestrictions;\n        return mergeSizeRestrictions(defaultAreaSizeRestrictions(state, basicSettings), value);\n    };\n}\nfunction createDefaultSettings(params) {\n    return __assign(__assign({}, params), { sizeRestrictions: function (state, basicSettings) {\n            var restrictions;\n            if (params.sizeRestrictions) {\n                restrictions = isFunction(params.sizeRestrictions)\n                    ? params.sizeRestrictions(state, basicSettings)\n                    : params.sizeRestrictions;\n            }\n            else {\n                restrictions = pixelsRestrictions(state, basicSettings);\n            }\n            return restrictions;\n        }, areaPositionRestrictions: function (state, basicSettings) {\n            if (params.areaPositionRestrictions) {\n                return isFunction(params.areaPositionRestrictions)\n                    ? params.areaPositionRestrictions(state, basicSettings)\n                    : params.areaPositionRestrictions;\n            }\n            else {\n                return defaultAreaPositionRestrictions(state, basicSettings);\n            }\n        }, areaSizeRestrictions: function (state, basicSettings) {\n            if (params.areaSizeRestrictions) {\n                return isFunction(params.areaSizeRestrictions)\n                    ? params.areaSizeRestrictions(state, basicSettings)\n                    : params.areaSizeRestrictions;\n            }\n            else {\n                return defaultAreaSizeRestrictions(state, basicSettings);\n            }\n        }, positionRestrictions: function (state, basicSettings) {\n            if (params.positionRestrictions) {\n                return isFunction(params.positionRestrictions)\n                    ? params.positionRestrictions(state, basicSettings)\n                    : params.positionRestrictions;\n            }\n            else {\n                return defaultPositionRestrictions(state, basicSettings);\n            }\n        }, defaultCoordinates: function (state, basicSettings) {\n            if (params.defaultCoordinates) {\n                return isFunction(params.defaultCoordinates)\n                    ? params.defaultCoordinates(state, basicSettings)\n                    : params.defaultCoordinates;\n            }\n            else {\n                var defaultSizeAlgorithm = params.defaultSize;\n                if (!defaultSizeAlgorithm) {\n                    defaultSizeAlgorithm = defaultSize;\n                }\n                var size = isFunction(defaultSizeAlgorithm)\n                    ? defaultSizeAlgorithm(state, basicSettings)\n                    : defaultSizeAlgorithm;\n                var defaultPositionAlgorithm_1 = params.defaultPosition || defaultPosition;\n                return [\n                    size,\n                    function (state) { return (__assign({}, (isFunction(defaultPositionAlgorithm_1)\n                        ? defaultPositionAlgorithm_1(state, basicSettings)\n                        : defaultPositionAlgorithm_1))); },\n                ];\n            }\n        }, defaultVisibleArea: function (state, basicSettings) {\n            if (params.defaultVisibleArea) {\n                return isFunction(params.defaultVisibleArea)\n                    ? params.defaultVisibleArea(state, basicSettings)\n                    : params.defaultVisibleArea;\n            }\n            else {\n                return defaultVisibleArea(state, basicSettings);\n            }\n        }, aspectRatio: function (state, basicSettings) {\n            return createAspectRatio(isFunction(params.aspectRatio) ? params.aspectRatio(state, basicSettings) : params.aspectRatio);\n        } });\n}\n\nexport { createDefaultSettings, withDefaultAreaPositionRestrictions, withDefaultAreaSizeRestrictions, withDefaultPositionRestrictions, withDefaultSizeRestrictions };\n","import 'tslib';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport { ImageRestriction } from '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultAreaPositionRestrictions(state, settings) {\n    var visibleArea = state.visibleArea, boundary = state.boundary;\n    var imageRestriction = settings.imageRestriction;\n    var imageSize = getTransformedImageSize(state);\n    var restrictions = {};\n    if (imageRestriction === ImageRestriction.fillArea) {\n        restrictions = {\n            left: 0,\n            top: 0,\n            right: imageSize.width,\n            bottom: imageSize.height,\n        };\n    }\n    else if (imageRestriction === ImageRestriction.fitArea) {\n        if (ratio(boundary) > ratio(imageSize)) {\n            restrictions = {\n                top: 0,\n                bottom: imageSize.height,\n            };\n            if (visibleArea) {\n                if (visibleArea.width > imageSize.width) {\n                    restrictions.left = -(visibleArea.width - imageSize.width) / 2;\n                    restrictions.right = imageSize.width - restrictions.left;\n                }\n                else {\n                    restrictions.left = 0;\n                    restrictions.right = imageSize.width;\n                }\n            }\n        }\n        else {\n            restrictions = {\n                left: 0,\n                right: imageSize.width,\n            };\n            if (visibleArea) {\n                if (visibleArea.height > imageSize.height) {\n                    restrictions.top = -(visibleArea.height - imageSize.height) / 2;\n                    restrictions.bottom = imageSize.height - restrictions.top;\n                }\n                else {\n                    restrictions.top = 0;\n                    restrictions.bottom = imageSize.height;\n                }\n            }\n        }\n    }\n    return restrictions;\n}\n\nexport { defaultAreaPositionRestrictions };\n","import 'tslib';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport { ImageRestriction } from '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultAreaSizeRestrictions(state, settings) {\n    var boundary = state.boundary;\n    var imageRestriction = settings.imageRestriction;\n    var imageSize = getTransformedImageSize(state);\n    var restrictions = {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: Infinity,\n        maxHeight: Infinity,\n    };\n    if (imageRestriction === ImageRestriction.fillArea) {\n        restrictions.maxWidth = imageSize.width;\n        restrictions.maxHeight = imageSize.height;\n    }\n    else if (imageRestriction === ImageRestriction.fitArea) {\n        if (ratio(boundary) > ratio(imageSize)) {\n            restrictions.maxHeight = imageSize.height;\n            restrictions.maxWidth = imageSize.height * ratio(boundary);\n        }\n        else {\n            restrictions.maxWidth = imageSize.width;\n            restrictions.maxHeight = imageSize.width / ratio(boundary);\n        }\n    }\n    return restrictions;\n}\n\nexport { defaultAreaSizeRestrictions };\n","import 'tslib';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultPositionRestrictions(state, settings) {\n    var imageSize = getTransformedImageSize(state);\n    var limits = {};\n    if (settings.imageRestriction && settings.imageRestriction !== 'none') {\n        limits = {\n            left: 0,\n            top: 0,\n            right: imageSize.width,\n            bottom: imageSize.height,\n        };\n    }\n    return limits;\n}\n\nexport { defaultPositionRestrictions };\n","import { __assign } from 'tslib';\nimport { ratio, resizeToSizeRestrictions, getIntersections, coordinatesToPositionRestrictions, moveToPositionRestrictions } from '../service/utils.js';\nimport { getTransformedImageSize, getAreaSizeRestrictions } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultVisibleArea(state, settings) {\n    var coordinates = state.coordinates, boundary = state.boundary;\n    var imageSize = getTransformedImageSize(state);\n    var boundaryRatio = ratio(boundary);\n    if (coordinates) {\n        // Visible area will try to fit reference:\n        var reference = {\n            height: Math.max(coordinates.height, imageSize.height),\n            width: Math.max(coordinates.width, imageSize.width),\n        };\n        var visibleArea = {\n            left: 0,\n            top: 0,\n            width: ratio(reference) > boundaryRatio ? reference.width : reference.height * boundaryRatio,\n            height: ratio(reference) > boundaryRatio ? reference.width / boundaryRatio : reference.height,\n        };\n        // Visible area should correspond its restrictions:\n        visibleArea = resizeToSizeRestrictions(visibleArea, getAreaSizeRestrictions(state, settings));\n        // Visible area will try to center stencil:\n        visibleArea.left = coordinates.left + coordinates.width / 2 - visibleArea.width / 2;\n        visibleArea.top = coordinates.top + coordinates.height / 2 - visibleArea.height / 2;\n        // TODO: Controversial behavior:\n        // If the coordinates are beyond image visible area will be allowed to be beyond image alike:\n        var coordinatesIntersection = getIntersections(coordinates, coordinatesToPositionRestrictions(__assign({ left: 0, top: 0 }, imageSize)));\n        var restrictions = {};\n        if (!coordinatesIntersection.left && !coordinatesIntersection.right && visibleArea.width <= imageSize.width) {\n            restrictions.left = 0;\n            restrictions.right = imageSize.width;\n        }\n        if (!coordinatesIntersection.top && !coordinatesIntersection.bottom && visibleArea.height <= imageSize.height) {\n            restrictions.top = 0;\n            restrictions.bottom = imageSize.height;\n        }\n        return moveToPositionRestrictions(visibleArea, restrictions);\n    }\n    else {\n        var imageRatio = ratio(imageSize);\n        var areaProperties = {\n            height: imageRatio < boundaryRatio ? imageSize.height : imageSize.width / boundaryRatio,\n            width: imageRatio < boundaryRatio ? imageSize.height * boundaryRatio : imageSize.width,\n        };\n        return {\n            left: imageSize.width / 2 - areaProperties.width / 2,\n            top: imageSize.height / 2 - areaProperties.height / 2,\n            width: areaProperties.width,\n            height: areaProperties.height,\n        };\n    }\n}\n\nexport { defaultVisibleArea };\n","import { __assign } from 'tslib';\nimport { isCrossOriginURL, isBlob, isLocal } from '../utils/index.js';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize, getCoefficient } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nvar XHR_DONE = 4;\nfunction base64ToArrayBuffer(base64) {\n    base64 = base64.replace(/^data:([^;]+);base64,/gim, '');\n    var binary = atob(base64);\n    var len = binary.length;\n    var buffer = new ArrayBuffer(len);\n    var view = new Uint8Array(buffer);\n    for (var i = 0; i < len; i++) {\n        view[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n}\nfunction objectURLToBlob(url, callback) {\n    var http = new XMLHttpRequest();\n    http.open('GET', url, true);\n    http.responseType = 'blob';\n    http.onload = function () {\n        if (this.status == 200 || this.status === 0) {\n            callback(this.response);\n        }\n    };\n    http.send();\n}\nfunction getTransforms(orientation) {\n    var result = {\n        flip: {\n            horizontal: false,\n            vertical: false,\n        },\n        rotate: 0,\n    };\n    if (orientation) {\n        switch (orientation) {\n            case 2:\n                result.flip.horizontal = true;\n                break;\n            case 3:\n                result.rotate = -180;\n                break;\n            case 4:\n                result.flip.vertical = true;\n                break;\n            case 5:\n                result.rotate = 90;\n                result.flip.vertical = true;\n                break;\n            case 6:\n                result.rotate = 90;\n                break;\n            case 7:\n                result.rotate = 90;\n                result.flip.horizontal = true;\n                break;\n            case 8:\n                result.rotate = -90;\n                break;\n        }\n    }\n    return result;\n}\nfunction getImageData(img) {\n    return new Promise(function (resolve, reject) {\n        try {\n            if (img) {\n                if (/^data:/i.test(img)) {\n                    // Data URL\n                    resolve(base64ToArrayBuffer(img));\n                }\n                else if (/^blob:/i.test(img)) {\n                    // Blob\n                    var fileReader_1 = new FileReader();\n                    fileReader_1.onload = function (e) {\n                        var _a;\n                        resolve((_a = e.target) === null || _a === void 0 ? void 0 : _a.result);\n                    };\n                    objectURLToBlob(img, function (blob) {\n                        fileReader_1.readAsArrayBuffer(blob);\n                    });\n                }\n                else {\n                    // Simple URL\n                    var http_1 = new XMLHttpRequest();\n                    http_1.onreadystatechange = function () {\n                        if (http_1.readyState !== XHR_DONE)\n                            return;\n                        if (http_1.status === 200 || http_1.status === 0) {\n                            resolve(http_1.response);\n                        }\n                        else {\n                            reject('Warning: could not load an image to parse its orientation');\n                        }\n                    };\n                    http_1.onprogress = function () {\n                        // Abort the request directly if it not a JPEG image for better performance\n                        if (http_1.getResponseHeader('content-type') !== 'image/jpeg') {\n                            http_1.abort();\n                        }\n                    };\n                    http_1.withCredentials = false;\n                    http_1.open('GET', img, true);\n                    http_1.responseType = 'arraybuffer';\n                    http_1.send(null);\n                }\n            }\n            else {\n                reject('Error: the image is empty');\n            }\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n}\nfunction getStyleTransforms(transforms) {\n    var _a = transforms.rotate, rotate = _a === void 0 ? 0 : _a, _b = transforms.flip, flip = _b === void 0 ? { horizontal: false, vertical: false } : _b, _c = transforms.scale, scale = _c === void 0 ? 1 : _c;\n    return \" rotate(\" + rotate + \"deg) scaleX(\" + scale * (flip.horizontal ? -1 : 1) + \") scaleY(\" + scale * (flip.vertical ? -1 : 1) + \")\";\n}\nfunction getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    var i;\n    for (i = start, length += start; i < length; i++) {\n        str += String.fromCharCode(dataView.getUint8(i));\n    }\n    return str;\n}\nfunction resetAndGetOrientation(arrayBuffer) {\n    try {\n        var dataView = new DataView(arrayBuffer);\n        var orientation_1;\n        var exifIDCode = void 0;\n        var tiffOffset = void 0;\n        var littleEndian = void 0;\n        var app1Start = void 0;\n        var ifdStart = void 0;\n        // Only handle JPEG image (start by 0xFFD8)\n        if (dataView.getUint8(0) === 0xff && dataView.getUint8(1) === 0xd8) {\n            var length_1 = dataView.byteLength;\n            var offset = 2;\n            while (offset + 1 < length_1) {\n                if (dataView.getUint8(offset) === 0xff && dataView.getUint8(offset + 1) === 0xe1) {\n                    app1Start = offset;\n                    break;\n                }\n                offset++;\n            }\n        }\n        if (app1Start) {\n            exifIDCode = app1Start + 4;\n            tiffOffset = app1Start + 10;\n            if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n                var endianness = dataView.getUint16(tiffOffset);\n                littleEndian = endianness === 0x4949;\n                if (littleEndian || endianness === 0x4d4d /* bigEndian */) {\n                    if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002a) {\n                        var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n                        if (firstIFDOffset >= 0x00000008) {\n                            ifdStart = tiffOffset + firstIFDOffset;\n                        }\n                    }\n                }\n            }\n        }\n        if (ifdStart) {\n            var length_2 = dataView.getUint16(ifdStart, littleEndian);\n            for (var i = 0; i < length_2; i++) {\n                var offset = ifdStart + i * 12 + 2;\n                if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n                    // 8 is the offset of the current tag's value\n                    offset += 8;\n                    // Get the original orientation value\n                    orientation_1 = dataView.getUint16(offset, littleEndian);\n                    // Override the orientation with its default value\n                    dataView.setUint16(offset, 1, littleEndian);\n                    break;\n                }\n            }\n        }\n        return orientation_1;\n    }\n    catch (error) {\n        return null;\n    }\n}\nfunction arrayBufferToDataURL(arrayBuffer) {\n    var chunks = [];\n    // Chunk Typed Array for better performance\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n    while (uint8.length > 0) {\n        var value = uint8.subarray(0, chunkSize);\n        chunks.push(String.fromCharCode.apply(null, (Array.from ? Array.from(value) : value.slice())));\n        uint8 = uint8.subarray(chunkSize);\n    }\n    return \"data:image/jpeg;base64,\" + btoa(chunks.join(''));\n}\nfunction getImage(_a) {\n    var src = _a.src, _b = _a.arrayBuffer, arrayBuffer = _b === void 0 ? null : _b, _c = _a.orientation, orientation = _c === void 0 ? null : _c;\n    var options = {\n        src: src,\n        arrayBuffer: arrayBuffer,\n        revoke: false,\n        transforms: {\n            flip: {\n                horizontal: false,\n                vertical: false,\n            },\n            rotate: 0,\n        },\n    };\n    if (arrayBuffer && orientation && orientation > 1) {\n        if (isBlob(src) || !isLocal(src)) {\n            options.src = URL.createObjectURL(new Blob([arrayBuffer]));\n            options.revoke = true;\n        }\n        else {\n            options.src = arrayBufferToDataURL(arrayBuffer);\n        }\n    }\n    else {\n        options.src = src;\n    }\n    if (orientation) {\n        options.transforms = getTransforms(orientation);\n    }\n    return options;\n}\nfunction parseImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    var checkOrientation = settings.checkOrientation, parse = settings.parse;\n    return new Promise(function (resolve) {\n        if (checkOrientation || parse) {\n            getImageData(src)\n                .then(function (data) {\n                var orientation = resetAndGetOrientation(data);\n                resolve(getImage(data\n                    ? { src: src, arrayBuffer: data, orientation: orientation }\n                    : { src: src, arrayBuffer: null, orientation: null }));\n            })\n                .catch(function (error) {\n                console.warn(error);\n                resolve(getImage({ src: src }));\n            });\n        }\n        else {\n            resolve(getImage({ src: src }));\n        }\n    });\n}\nfunction createImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    return new Promise(function (resolve, reject) {\n        var image = document.createElement('img');\n        if (settings.crossOrigin) {\n            image.crossOrigin = settings.crossOrigin !== true ? settings.crossOrigin : 'anonymous';\n        }\n        image.src = src;\n        image.style.visibility = 'hidden';\n        image.style.position = 'fixed';\n        document.body.appendChild(image);\n        if (image.complete) {\n            resolve(image);\n            document.body.removeChild(image);\n        }\n        else {\n            image.addEventListener('load', function () {\n                resolve(image);\n                document.body.removeChild(image);\n            });\n            image.addEventListener('error', function () {\n                reject(null);\n                document.body.removeChild(image);\n            });\n        }\n    });\n}\nfunction loadImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    return parseImage(src, __assign(__assign({}, settings), { crossOrigin: isCrossOriginURL(src) && settings.crossOrigin })).then(function (options) {\n        return new Promise(function (resolve, reject) {\n            createImage(options.src, settings)\n                .then(function (image) {\n                resolve(__assign(__assign({}, options), { width: image.naturalWidth, height: image.naturalHeight }));\n            })\n                .catch(function () {\n                reject(null);\n            });\n        });\n    });\n}\nfunction getImageStyle(image, state, area, coefficient, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    var optimalImageSize = image.width > image.height\n        ? {\n            width: Math.min(512, image.width),\n            height: Math.min(512, image.width) / (image.width / image.height),\n        }\n        : {\n            height: Math.min(512, image.height),\n            width: Math.min(512, image.height) * (image.width / image.height),\n        };\n    var actualImageSize = getTransformedImageSize(state);\n    var imageTransforms = {\n        rotate: state.transforms.rotate,\n        flip: {\n            horizontal: state.transforms.flip.horizontal,\n            vertical: state.transforms.flip.vertical,\n        },\n        translateX: area.left / coefficient,\n        translateY: area.top / coefficient,\n        scale: 1 / coefficient,\n    };\n    var compensations = {\n        rotate: {\n            left: (optimalImageSize.width - actualImageSize.width) / (2 * coefficient),\n            top: (optimalImageSize.height - actualImageSize.height) / (2 * coefficient),\n        },\n        scale: {\n            left: ((1 - 1 / coefficient) * optimalImageSize.width) / 2,\n            top: ((1 - 1 / coefficient) * optimalImageSize.height) / 2,\n        },\n    };\n    var transforms = __assign(__assign({}, imageTransforms), { scale: imageTransforms.scale * (image.width / optimalImageSize.width) });\n    var result = {\n        width: optimalImageSize.width + \"px\",\n        height: optimalImageSize.height + \"px\",\n        left: '0px',\n        top: '0px',\n        transition: 'none',\n        transform: \"translate3d(\" + (-compensations.rotate.left - compensations.scale.left - imageTransforms.translateX) + \"px, \" + (-compensations.rotate.top - compensations.scale.top - imageTransforms.translateY) + \"px, 0px)\" + getStyleTransforms(transforms),\n        willChange: 'none',\n    };\n    if (transitions && transitions.active) {\n        result.willChange = 'transform';\n        result.transition = transitions.duration + \"ms \" + transitions.timingFunction;\n    }\n    return result;\n}\nfunction getBackgroundStyle(image, state, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    if (image && state && state.visibleArea) {\n        return getImageStyle(image, state, state.visibleArea, getCoefficient(state), transitions);\n    }\n    else {\n        return {};\n    }\n}\nfunction getPreviewStyle(image, state, size, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    if (image && state && state.visibleArea && state.coordinates) {\n        return getImageStyle(image, state, state.coordinates, ratio(state.coordinates) > ratio(size)\n            ? state.coordinates.width / size.width\n            : state.coordinates.height / size.height, transitions);\n    }\n    else {\n        return {};\n    }\n}\n\nexport { createImage, getBackgroundStyle, getImageStyle, getPreviewStyle, getStyleTransforms, loadImage };\n","function stretchCropperBoundary(boundary, stretcher, size) {\n    // Reset stretcher\n    stretcher.style.width = \"0px\";\n    stretcher.style.height = \"0px\";\n    // Try to fit the size by width:\n    stretcher.style.width = Math.max(boundary.clientWidth, size.width) + \"px\";\n    // After that try to fit the size by height and resulted width:\n    var ratio = size.width / size.height;\n    stretcher.style.height = Math.max(boundary.clientHeight, stretcher.clientWidth / ratio) + \"px\";\n    stretcher.style.width = stretcher.clientHeight * ratio + \"px\";\n}\nfunction stretchPreviewBoundary(boundary, stretcher, size) {\n    // Reset stretcher\n    stretcher.style.width = \"0px\";\n    stretcher.style.height = \"0px\";\n    // Try to fit the size by width:\n    stretcher.style.width = Math.max(boundary.getBoundingClientRect().width, size.width) + \"px\";\n    // After that try to fit the size by height and resulted width:\n    var ratio = size.width / size.height;\n    stretcher.style.height = Math.max(boundary.getBoundingClientRect().height, stretcher.getBoundingClientRect().width / ratio) + \"px\";\n    stretcher.style.width = stretcher.getBoundingClientRect().height * ratio + \"px\";\n    if (stretcher.clientWidth / stretcher.clientHeight > boundary.clientWidth / boundary.clientHeight) {\n        if (stretcher.clientWidth > boundary.clientWidth) {\n            stretcher.style.width = boundary.clientWidth + \"px\";\n            stretcher.style.height = boundary.clientWidth / ratio + \"px\";\n        }\n    }\n    else {\n        if (stretcher.clientHeight > boundary.clientHeight) {\n            stretcher.style.height = boundary.clientHeight + \"px\";\n            stretcher.style.width = boundary.clientHeight * ratio + \"px\";\n        }\n    }\n}\n\nexport { stretchCropperBoundary, stretchPreviewBoundary };\n","function fitBoundary(boundary, size) {\n    var areaHeight = boundary.clientHeight;\n    var areaWidth = boundary.clientWidth;\n    var currentHeight = areaHeight;\n    var currentWidth = (size.width * areaHeight) / size.height;\n    if (currentWidth > areaWidth) {\n        currentWidth = areaWidth;\n        currentHeight = (size.height * areaWidth) / size.width;\n    }\n    return {\n        width: currentWidth,\n        height: currentHeight,\n    };\n}\nfunction fillBoundary(boundary) {\n    var _a = boundary.getBoundingClientRect(), width = _a.width, height = _a.height;\n    return {\n        width: width,\n        height: height,\n    };\n}\n\nexport { fillBoundary, fitBoundary };\n","import { __assign } from 'tslib';\nimport { isNumeric } from '../utils/index.js';\nimport { rotateSize, rotatePoint, getCenter } from '../service/utils.js';\nimport { isInitializedState } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction prepareSource(canvas, image, _a) {\n    var rotate = _a.rotate, flip = _a.flip;\n    var originalSize = {\n        width: 'naturalWidth' in image ? image.naturalWidth : image.width,\n        height: 'naturalHeight' in image ? image.naturalHeight : image.height,\n    };\n    var transformedSize = rotateSize(originalSize, rotate);\n    var ctx = canvas.getContext('2d');\n    canvas.height = transformedSize.height;\n    canvas.width = transformedSize.width;\n    if (ctx) {\n        ctx.save();\n        // Rotation:\n        var canvasCenter = rotatePoint(getCenter(__assign({ left: 0, top: 0 }, originalSize)), rotate);\n        ctx.translate(-(canvasCenter.left - transformedSize.width / 2), -(canvasCenter.top - transformedSize.height / 2));\n        ctx.rotate((rotate * Math.PI) / 180);\n        // Reflection;\n        ctx.translate(flip.horizontal ? originalSize.width : 0, flip.vertical ? originalSize.height : 0);\n        ctx.scale(flip.horizontal ? -1 : 1, flip.vertical ? -1 : 1);\n        ctx.drawImage(image, 0, 0, originalSize.width, originalSize.height);\n        ctx.restore();\n    }\n    return canvas;\n}\nfunction updateCanvas(canvas, source, coordinates, resultSize, options) {\n    canvas.width = resultSize ? resultSize.width : coordinates.width;\n    canvas.height = resultSize ? resultSize.height : coordinates.height;\n    var ctx = canvas.getContext('2d');\n    if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if (options) {\n            if (options.imageSmoothingEnabled) {\n                ctx.imageSmoothingEnabled = options.imageSmoothingEnabled;\n            }\n            if (options.imageSmoothingQuality) {\n                ctx.imageSmoothingQuality = options.imageSmoothingQuality;\n            }\n            if (options.fillColor) {\n                ctx.fillStyle = options.fillColor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n                ctx.save();\n            }\n        }\n        var offsetX = coordinates.left < 0 ? -coordinates.left : 0;\n        var offsetY = coordinates.top < 0 ? -coordinates.top : 0;\n        ctx.drawImage(source, coordinates.left + offsetX, coordinates.top + offsetY, coordinates.width, coordinates.height, offsetX, offsetY, canvas.width, canvas.height);\n    }\n    return canvas;\n}\nfunction drawCroppedArea(state, image, resultCanvas, spareCanvas, options) {\n    if (isInitializedState(state)) {\n        var transforms = state.transforms, coordinates = state.coordinates;\n        var imageTransformed = transforms.rotate !== 0 || transforms.flip.horizontal || transforms.flip.vertical;\n        var source = imageTransformed ? prepareSource(spareCanvas, image, transforms) : image;\n        var params = __assign({ minWidth: 0, minHeight: 0, maxWidth: Infinity, maxHeight: Infinity, maxArea: Infinity, imageSmoothingEnabled: true, imageSmoothingQuality: 'high', fillColor: 'transparent' }, options);\n        var firstNumeric = function (array) { return array.find(function (el) { return isNumeric(el); }); };\n        var size = approximateSize({\n            sizeRestrictions: {\n                minWidth: firstNumeric([params.width, params.minWidth]) || 0,\n                minHeight: firstNumeric([params.height, params.minHeight]) || 0,\n                maxWidth: firstNumeric([params.width, params.maxWidth]) || Infinity,\n                maxHeight: firstNumeric([params.height, params.maxHeight]) || Infinity,\n            },\n            width: coordinates.width,\n            height: coordinates.height,\n            aspectRatio: {\n                minimum: coordinates.width / coordinates.height,\n                maximum: coordinates.width / coordinates.height,\n            },\n        });\n        if (params.maxArea && size.width * size.height > params.maxArea) {\n            var scale = Math.sqrt(params.maxArea / (size.width * size.height));\n            size = {\n                width: Math.round(scale * size.width),\n                height: Math.round(scale * size.height),\n            };\n        }\n        return updateCanvas(resultCanvas, source, coordinates, size, params);\n    }\n    else {\n        return null;\n    }\n}\n\nexport { drawCroppedArea, prepareSource, updateCanvas };\n","var timingFunctions = {\n    linear: function (t) {\n        return t;\n    },\n    'ease-in': function (t) {\n        return Math.pow(t, 1.675);\n    },\n    'ease-out': function (t) {\n        return 1 - Math.pow(1 - t, 1.675);\n    },\n    'ease-in-out': function (t) {\n        return 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1);\n    },\n};\nvar Animation = /** @class */ (function () {\n    function Animation() {\n        this.active = false;\n    }\n    Animation.prototype.start = function (animation) {\n        var _a;\n        this.onStart = animation.onStart;\n        this.onProgress = animation.onProgress;\n        this.onStop = animation.onStop;\n        if (!this.active) {\n            (_a = this.onStart) === null || _a === void 0 ? void 0 : _a.call(this);\n        }\n        if (this.id) {\n            window.cancelAnimationFrame(this.id);\n        }\n        this.startTime = performance.now();\n        this.timingFunction = animation.timingFunction;\n        this.endTime = this.startTime + animation.duration;\n        this.active = true;\n        this.animate();\n    };\n    Animation.prototype.animate = function () {\n        var _this = this;\n        if (this.startTime && this.endTime) {\n            var timingFunction = timingFunctions[this.timingFunction];\n            if (!timingFunction) {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.warn(\"[Animation] The timing function '\" + timingFunction + \"' is not supported. Available timing function: 'linear', 'ease-in', 'ease-in-out', 'ease-out'. Reset to 'ease-out'.\");\n                }\n                timingFunction = timingFunctions['ease-out'];\n            }\n            var percent = 1 - (this.endTime - performance.now()) / (this.endTime - this.startTime);\n            var progress = Math.min(1, timingFunction(percent));\n            if (this.onProgress) {\n                this.onProgress(progress);\n            }\n            if (percent < 1) {\n                this.id = window.requestAnimationFrame(function () { return _this.animate(); });\n            }\n            else {\n                this.stop();\n            }\n        }\n        else {\n            this.stop();\n        }\n    };\n    Animation.prototype.stop = function () {\n        this.active = false;\n        if (this.id) {\n            window.cancelAnimationFrame(this.id);\n        }\n        if (this.onStop) {\n            this.onStop();\n        }\n    };\n    return Animation;\n}());\n\nexport { Animation };\n","import { isRoughlyEqual, sign, distance } from '../utils/index.js';\n\nfunction calculateGeometricProperties(touches, container) {\n    var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top;\n    var centerMass = { left: 0, top: 0 };\n    var spread = 0;\n    touches.forEach(function (touch) {\n        centerMass.left += (touch.clientX - left) / touches.length;\n        centerMass.top += (touch.clientY - top) / touches.length;\n    });\n    touches.forEach(function (touch) {\n        spread += distance({ left: centerMass.left, top: centerMass.top }, { left: touch.clientX - left, top: touch.clientY - top });\n    });\n    return { centerMass: centerMass, spread: spread, count: touches.length };\n}\nfunction touchesToImageTransform(touches, previousTouches, container, options) {\n    if (options === void 0) { options = {}; }\n    var move, scale, rotate;\n    if (previousTouches.length === 1 && touches.length === 1) {\n        if (options.move) {\n            move = {\n                left: previousTouches[0].clientX - touches[0].clientX,\n                top: previousTouches[0].clientY - touches[0].clientY,\n            };\n        }\n    }\n    else if (touches.length > 1) {\n        var previousProperties = calculateGeometricProperties(previousTouches, container);\n        var properties = calculateGeometricProperties(touches, container);\n        if (options.rotate && previousTouches.length === 2 && touches.length === 2) {\n            var diffs = {\n                left: [\n                    touches[0].clientX - touches[1].clientX,\n                    previousTouches[0].clientX - previousTouches[1].clientX,\n                ],\n                top: [touches[0].clientY - touches[1].clientY, previousTouches[0].clientY - previousTouches[1].clientY],\n            };\n            var y = diffs.left[0] * diffs.top[1] - diffs.left[1] * diffs.top[0];\n            var x = diffs.left[0] * diffs.left[1] + diffs.top[0] * diffs.top[1];\n            if (!isRoughlyEqual(x, 0) && !isRoughlyEqual(y, 0)) {\n                var radians = Math.atan2(y, x);\n                var angle = -(radians * 180) / Math.PI;\n                rotate = {\n                    center: properties.centerMass,\n                    angle: angle,\n                };\n            }\n        }\n        if (options.move) {\n            move = {\n                left: previousProperties.centerMass.left - properties.centerMass.left,\n                top: previousProperties.centerMass.top - properties.centerMass.top,\n            };\n        }\n        if (options.scale) {\n            scale = {\n                factor: properties.spread / previousProperties.spread,\n                center: properties.centerMass,\n            };\n        }\n    }\n    return {\n        move: move,\n        scale: scale,\n        rotate: rotate,\n    };\n}\nfunction wheelEventToImageTransform(event, container, ratio) {\n    if (ratio === void 0) { ratio = 0.1; }\n    var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top;\n    var factor = 1 - ratio * sign((event.deltaY || event.detail || event.wheelDelta));\n    var center = {\n        left: event.clientX - left,\n        top: event.clientY - top,\n    };\n    return { scale: { factor: factor, center: center } };\n}\n\nexport { touchesToImageTransform, wheelEventToImageTransform };\n","import 'tslib';\nimport { isFunction } from '../utils/index.js';\nimport { createAspectRatio } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultStencilConstraints(rawSettings, stencilProps) {\n    if (!rawSettings.aspectRatio) {\n        return {\n            aspectRatio: createAspectRatio(isFunction(stencilProps.aspectRatio) ? stencilProps.aspectRatio() : stencilProps.aspectRatio),\n        };\n    }\n    return {};\n}\n\nexport { defaultStencilConstraints };\n","import { __assign } from 'tslib';\nimport { isFunction } from '../../utils/index.js';\nimport { aspectRatioIntersection, createAspectRatio, ratio, applyScale, fitToSizeRestrictions, applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../../service/utils.js';\nimport { getAreaSizeRestrictions, getSizeRestrictions, getAspectRatio, isInitializedState, getAreaPositionRestrictions } from '../../service/helpers.js';\nimport { copyState } from '../../state/copyState.js';\nimport '../../types/index.js';\nimport '../../state/setCoordinates.js';\nimport { approximateSize } from '../../service/approximateSize.js';\nimport { defaultStencilConstraints } from '../../defaults/defaultStencilConstraints.js';\n\nfunction fixedStencilConstraints(rawSettings, stencilOptions) {\n    var defaultConstraints = defaultStencilConstraints({}, stencilOptions);\n    return {\n        stencilSize: function (state, settings) {\n            var previousSize = isFunction(rawSettings.stencilSize)\n                ? rawSettings.stencilSize(state, settings)\n                : rawSettings.stencilSize;\n            return approximateSize(__assign(__assign({}, previousSize), { aspectRatio: aspectRatioIntersection(defaultConstraints.aspectRatio, createAspectRatio(ratio(previousSize))) }));\n        },\n    };\n}\nfunction getStencilSize(state, settings) {\n    var boundary = state.boundary;\n    var size = isFunction(settings.stencilSize) ? settings.stencilSize(state, settings) : settings.stencilSize;\n    if (size.width > boundary.width || size.height > boundary.height) {\n        size = approximateSize({\n            sizeRestrictions: {\n                maxWidth: boundary.width,\n                maxHeight: boundary.height,\n                minWidth: 0,\n                minHeight: 0,\n            },\n            width: size.width,\n            height: size.height,\n            aspectRatio: {\n                minimum: ratio(size),\n                maximum: ratio(size),\n            },\n        });\n    }\n    return size;\n}\nfunction sizeRestrictions(state, settings) {\n    var stencilSize = getStencilSize(state, __assign(__assign({}, settings), { stencilSize: settings.stencilSize }));\n    var areaRestrictions = getAreaSizeRestrictions(state, settings);\n    return {\n        maxWidth: (areaRestrictions.maxWidth * stencilSize.width) / state.boundary.width,\n        maxHeight: (areaRestrictions.maxHeight * stencilSize.height) / state.boundary.height,\n        minWidth: 0,\n        minHeight: 0,\n    };\n}\nfunction defaultSize(state, settings) {\n    var imageSize = state.imageSize, visibleArea = state.visibleArea, boundary = state.boundary;\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    var aspectRatio = getAspectRatio(state, settings);\n    var stencilSize = isFunction(settings.stencilSize) ? settings.stencilSize(state, settings) : settings.stencilSize;\n    var area = (visibleArea || imageSize);\n    var height, width;\n    if (ratio(area) > ratio(boundary)) {\n        height = (stencilSize.height * area.height) / boundary.height;\n        width = height * ratio(stencilSize);\n    }\n    else {\n        width = (stencilSize.width * area.width) / boundary.width;\n        height = width / ratio(stencilSize);\n    }\n    return approximateSize({\n        width: width,\n        height: height,\n        aspectRatio: aspectRatio,\n        sizeRestrictions: sizeRestrictions,\n    });\n}\nfunction aspectRatio(state, settings) {\n    var value = ratio(getStencilSize(state, settings));\n    return {\n        minimum: value,\n        maximum: value,\n    };\n}\nfunction fixedStencilAlgorithm(state, settings) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var stencil = getStencilSize(state, settings);\n        // First of all try to resize visible area as much as possible:\n        result.visibleArea = applyScale(result.visibleArea, (result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width));\n        // Check that visible area doesn't break the area restrictions:\n        var scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n        if (scale !== 1) {\n            result.visibleArea = applyScale(result.visibleArea, scale);\n            result.coordinates = applyScale(result.coordinates, scale);\n        }\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(result.coordinates), getCenter(result.visibleArea)));\n        // Center stencil in visible area:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getAreaPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\nfunction fixedStencil(state, settings, action) {\n    if (action && action.immediately) {\n        return fixedStencilAlgorithm(state, settings);\n    }\n    return state;\n}\n\nexport { aspectRatio, defaultSize, fixedStencil, fixedStencilAlgorithm, fixedStencilConstraints, getStencilSize, sizeRestrictions };\n","import {\n\tapplyMove,\n\tapplyScale,\n\tdiff,\n\tfitToSizeRestrictions,\n\tgetAreaPositionRestrictions,\n\tgetAreaSizeRestrictions,\n\tgetCenter,\n\tgetPositionRestrictions,\n\tisInitializedState,\n\tmergePositionRestrictions,\n\tmoveToPositionRestrictions,\n\tratio,\n\tcoordinatesToPositionRestrictions,\n} from 'advanced-cropper/service';\nimport { CoreSettings, CropperState, PostprocessAction, Size } from 'advanced-cropper';\nimport { copyState } from 'advanced-cropper/state';\n\nexport function hybridStencilAutoZoomAlgorithm(state: CropperState, settings: CoreSettings): CropperState {\n\tif (isInitializedState(state)) {\n\t\tconst result = copyState(state);\n\n\t\t// Checks that coordinates has the same ratio that coordinates:\n\t\tconst stencil: Size = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\n\t\tif (ratio(result.boundary) > ratio(result.coordinates)) {\n\t\t\tstencil.height = result.boundary.height * 0.8;\n\t\t\tstencil.width = stencil.height * ratio(result.coordinates);\n\t\t} else {\n\t\t\tstencil.width = result.boundary.width * 0.8;\n\t\t\tstencil.height = stencil.width * ratio(result.coordinates);\n\t\t}\n\n\t\t// First of all try to resize visible area as much as possible:\n\t\tresult.visibleArea = applyScale(\n\t\t\tresult.visibleArea,\n\t\t\t(result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width),\n\t\t);\n\n\t\t// Check that visible area doesn't break the area restrictions:\n\t\tconst scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n\n\t\tresult.visibleArea = applyScale(result.visibleArea, scale);\n\n\t\tif (scale !== 1) {\n\t\t\tstencil.height /= scale;\n\t\t\tstencil.width /= scale;\n\t\t}\n\n\t\tresult.visibleArea = applyMove(\n\t\t\tresult.visibleArea,\n\t\t\tdiff(getCenter(result.coordinates), getCenter(result.visibleArea)),\n\t\t);\n\n\t\t// Center stencil in visible area:\n\t\tresult.visibleArea = moveToPositionRestrictions(\n\t\t\tresult.visibleArea,\n\t\t\tgetAreaPositionRestrictions(result, settings),\n\t\t);\n\n\t\tresult.coordinates = moveToPositionRestrictions(\n\t\t\tresult.coordinates,\n\t\t\tmergePositionRestrictions(\n\t\t\t\tcoordinatesToPositionRestrictions(result.visibleArea),\n\t\t\t\tgetPositionRestrictions(result, settings),\n\t\t\t),\n\t\t);\n\n\t\treturn result;\n\t}\n\treturn state;\n}\n\nexport function hybridStencilAutoZoom(\n\tstate: CropperState,\n\tsettings: CoreSettings,\n\taction: PostprocessAction,\n): CropperState {\n\tif (action.immediately) {\n\t\treturn hybridStencilAutoZoomAlgorithm(state, settings);\n\t}\n\treturn state;\n}\n","import { useRef } from 'react';\nimport { deprecationWarning } from '../service/utils';\n\nexport function useDeprecationWarning() {\n\tconst fired = useRef<string[]>([]);\n\n\treturn (message: string) => {\n\t\tif (fired.current.indexOf(message) === -1) {\n\t\t\tdeprecationWarning(message);\n\t\t\tfired.current.push(message);\n\t\t}\n\t};\n}\n","import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\n\nexport const useUpdateEffect: typeof useEffect = (effect, deps) => {\n\tconst isFirstMount = useFirstMountState();\n\n\tuseEffect(() => {\n\t\tif (!isFirstMount) {\n\t\t\treturn effect();\n\t\t}\n\t}, deps);\n};\n","import { useRef } from 'react';\n\nexport function useFirstMountState(): boolean {\n\tconst isFirst = useRef(true);\n\n\tif (isFirst.current) {\n\t\tisFirst.current = false;\n\n\t\treturn true;\n\t}\n\n\treturn isFirst.current;\n}\n","import {\n\tAbstractCropperInstance,\n\tAbstractCropperInstanceData,\n\tAbstractCropperInstanceProps,\n\tAbstractCropperInstanceSettings,\n\tgetEmptyInteractions,\n} from 'advanced-cropper';\n\nexport interface CropperInstanceProps<Settings extends AbstractCropperInstanceSettings, Instance> {\n\tgetProps: () => AbstractCropperInstanceProps<Settings, Instance>;\n\tsetData?: (data: AbstractCropperInstanceData) => void;\n}\n\nexport class CropperInstance<\n\tSettings extends AbstractCropperInstanceSettings,\n\tInstance = unknown,\n> extends AbstractCropperInstance<Settings, Instance> {\n\tdata: AbstractCropperInstanceData;\n\tnotify: () => void;\n\tprops: () => AbstractCropperInstanceProps<Settings, Instance>;\n\n\tconstructor(props: () => AbstractCropperInstanceProps<Settings, Instance>, onChange: () => void) {\n\t\tsuper();\n\t\tthis.props = props;\n\t\tthis.notify = onChange;\n\t\tthis.data = {\n\t\t\tstate: null,\n\t\t\ttransitions: false,\n\t\t\tinteractions: getEmptyInteractions(),\n\t\t};\n\t}\n\n\tprotected getProps() {\n\t\treturn this.props();\n\t}\n\n\tprotected setData(data: AbstractCropperInstanceData) {\n\t\tthis.data = data;\n\t\tthis.notify();\n\t}\n\n\tprotected getData(): AbstractCropperInstanceData {\n\t\treturn this.data;\n\t}\n}\n","import { useState } from 'react';\n\nexport function useForceRerender() {\n\tconst [tick, setTick] = useState({});\n\n\treturn () => {\n\t\tsetTick({});\n\t};\n}\n","import { useRef } from 'react';\nimport {\n\tImageRestriction,\n\tcreateDefaultSettings,\n\tAbstractCropperInstanceParameters,\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceSettings,\n\tDefaultSettings,\n} from 'advanced-cropper';\nimport { CropperInstance } from '../instance/CropperInstance';\nimport { useForceRerender } from './useForceRerender';\nimport { usePersistentFunction } from './usePersistentFunction';\n\nexport type CropperInstanceSettings = DefaultSettings & AbstractCropperInstanceSettings;\n\nexport type CropperInstanceSettingsProp<Settings extends CropperInstanceSettings> = Partial<\n\tPick<Settings, keyof CropperInstanceSettings>\n> &\n\tOmit<Settings, keyof CropperInstanceSettings>;\n\nexport function useCropperInstance<Settings extends CropperInstanceSettings, Instance = unknown>(\n\tprops: () => AbstractCropperInstanceParameters<Settings> &\n\t\tAbstractCropperInstanceCallbacks<Instance> & {\n\t\t\tsettings?: CropperInstanceSettingsProp<Settings>;\n\t\t},\n) {\n\tconst rerender = useForceRerender();\n\n\tconst getProps = usePersistentFunction(() => {\n\t\tconst { settings, ...parameters } = props();\n\n\t\tconst extendedSettings = {\n\t\t\timageRestriction: ImageRestriction.fitArea,\n\t\t\ttransformImage: {\n\t\t\t\tadjustStencil: true,\n\t\t\t},\n\t\t\t...settings,\n\t\t};\n\n\t\tconst extendedParameters = {\n\t\t\ttransitions: true,\n\t\t\t...parameters,\n\t\t};\n\n\t\treturn {\n\t\t\tsettings: {\n\t\t\t\t...extendedSettings,\n\t\t\t\t...createDefaultSettings<Settings>(extendedSettings),\n\t\t\t\t// It's needed because of the nature of the settings field\n\t\t\t} as Settings,\n\t\t\t...extendedParameters,\n\t\t};\n\t});\n\n\tconst cropper = useRef(new CropperInstance<Settings, Instance>(getProps, rerender));\n\n\treturn cropper.current;\n}\nexport type CropperStateHook = ReturnType<typeof useCropperInstance>;\n","import { useRef } from 'react';\n\nexport function usePersistentFunction<Props, Arguments extends any[]>(props: (...args: Arguments) => Props) {\n\tconst propsRef = useRef(props);\n\n\tpropsRef.current = props;\n\n\treturn (...args: Arguments) => propsRef.current(...args);\n}\n","import { useEffect, useRef } from 'react';\n\nexport const useWindowResize = (callback: (...args: unknown[]) => void) => {\n\tconst callbackRef = useRef<Function>(callback);\n\n\tconst internalCallback = () => {\n\t\tif (callbackRef.current) {\n\t\t\tcallbackRef.current();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tcallbackRef.current = callback;\n\t}, [callback]);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', internalCallback);\n\t\twindow.addEventListener('orientationchange', internalCallback);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', internalCallback);\n\t\t\twindow.removeEventListener('orientationchange', internalCallback);\n\t\t};\n\t}, []);\n};\n","import { useImperativeHandle, useRef } from 'react';\nimport {\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceParameters,\n\tCropperImage,\n\tDrawOptions,\n} from 'advanced-cropper';\nimport { StretchableBoundaryMethods } from '../components/service/StretchableBoundary';\nimport { CropperCanvasMethods } from '../components/service/CropperCanvas';\nimport { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperRef, AbstractCropperSettings } from '../components/AbstractCropper';\nimport { useStateWithCallback } from './useStateWithCallback';\nimport { CropperInstanceSettingsProp, useCropperInstance } from './useCropperInstance';\nimport { useCropperImage } from './useCropperImage';\nimport { useWindowResize } from './useWindowResize';\nimport { useUpdateEffect } from './useUpdateEffect';\nimport { useCropperAutoReconcile } from './useCropperAutoReconcile';\n\nexport interface AbstractCropperHookProps<Settings extends AbstractCropperSettings>\n\textends AbstractCropperInstanceParameters<Settings>,\n\t\tAbstractCropperInstanceCallbacks<AbstractCropperRef<Settings>> {\n\tsrc?: string | null;\n\tcheckOrientation?: boolean;\n\tcanvas?: boolean;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tonReady?: (cropper: AbstractCropperRef<Settings>) => void;\n\tonError?: (cropper: AbstractCropperRef<Settings>) => void;\n\tunloadTime?: number;\n\tautoReconcileState?: boolean;\n\tsettings?: CropperInstanceSettingsProp<Settings>;\n}\n\nexport function useAbstractCropper<Extension extends SettingsExtension = {}>(\n\tprops: () => AbstractCropperHookProps<ExtendedSettings<Extension>>,\n) {\n\tconst {\n\t\tsrc,\n\t\tonReady,\n\t\tonError,\n\t\tonUpdate,\n\t\tcanvas = true,\n\t\tunloadTime = 500,\n\t\tcrossOrigin = true,\n\t\tcheckOrientation = true,\n\t\tautoReconcileState = true,\n\t} = props();\n\n\tconst imageRef = useRef<HTMLElement>(null);\n\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\tconst canvasRef = useRef<CropperCanvasMethods>(null);\n\tconst cropperRef = useRef<AbstractCropperRef<ExtendedSettings<Extension>>>(null);\n\n\tconst [currentImage, setCurrentImage] = useStateWithCallback<CropperImage | null>(null);\n\n\tconst cropper = useCropperInstance(() => ({\n\t\t...props(),\n\t\tgetInstance() {\n\t\t\treturn cropperRef.current;\n\t\t},\n\t}));\n\n\tconst cropperImage = useCropperImage({\n\t\tsrc,\n\t\tcrossOrigin,\n\t\tcheckOrientation,\n\t\tunloadTime,\n\t\tcanvas,\n\t\tonLoad() {\n\t\t\tif (cropperRef.current) {\n\t\t\t\tonReady?.(cropperRef.current);\n\t\t\t}\n\t\t},\n\t\tonError() {\n\t\t\tif (cropperRef.current) {\n\t\t\t\tonError?.(cropperRef.current);\n\t\t\t}\n\t\t},\n\t});\n\n\tconst autoReconcile = useCropperAutoReconcile(cropper, autoReconcileState);\n\n\tconst resetCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tsetCurrentImage(image, () => {\n\t\t\t\tif (boundary && image) {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t} else {\n\t\t\t\t\tcropper.clear();\n\t\t\t\t}\n\t\t\t});\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\n\tconst refreshCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tif (boundary && image) {\n\t\t\t\tconst state = cropper.getState();\n\t\t\t\tif (state) {\n\t\t\t\t\tif (boundary.width !== state.boundary.width || boundary.height !== state.boundary.height) {\n\t\t\t\t\t\tcropper.setBoundary(boundary);\n\t\t\t\t\t\t// It's important because, probably, after the boundary reset\n\t\t\t\t\t\t// the cropper can meet some restrictions that were broken before\n\t\t\t\t\t\tcropper.reconcileState();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcropper.clear();\n\t\t\t}\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\tconst cropperInterface = {\n\t\treset: () => resetCropper(),\n\t\trefresh: () => refreshCropper(),\n\t\tsetImage: (image: CropperImage) => setCurrentImage(image),\n\t\treconcileState: cropper.reconcileState,\n\t\tmoveCoordinates: cropper.moveCoordinates,\n\t\tmoveCoordinatesEnd: cropper.moveCoordinatesEnd,\n\t\tresizeCoordinates: cropper.resizeCoordinates,\n\t\tclear: cropper.clear,\n\t\tresizeCoordinatesEnd: cropper.resizeCoordinatesEnd,\n\t\tmoveImage: cropper.moveImage,\n\t\tflipImage: cropper.flipImage,\n\t\tzoomImage: cropper.zoomImage,\n\t\trotateImage: cropper.rotateImage,\n\t\ttransformImage: cropper.transformImage,\n\t\ttransformImageEnd: cropper.transformImageEnd,\n\t\tsetCoordinates: cropper.setCoordinates,\n\t\tsetVisibleArea: cropper.setVisibleArea,\n\t\tstartTransitions: cropper.startTransitions,\n\t\tsetState: cropper.setState,\n\t\thasInteractions: cropper.hasInteractions,\n\t\tgetStencilCoordinates: cropper.getStencilCoordinates,\n\t\tgetCoordinates: cropper.getCoordinates,\n\t\tgetVisibleArea: cropper.getVisibleArea,\n\t\tgetTransforms: cropper.getTransforms,\n\t\tgetTransitions: cropper.getTransitions,\n\t\tgetInteractions: cropper.getInteractions,\n\t\tgetSettings: cropper.getSettings,\n\t\tgetState: cropper.getState,\n\t\tgetDefaultState() {\n\t\t\tconst state = cropper.getState();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tif (state && image) {\n\t\t\t\treturn cropper.createDefaultState(state.boundary, image);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetCanvas: (options?: DrawOptions) => {\n\t\t\tconst state = cropper.getState();\n\t\t\tif (imageRef.current && canvasRef.current && state) {\n\t\t\t\treturn canvasRef.current.draw(state, imageRef.current, options);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetImage: () => {\n\t\t\treturn currentImage ? { ...currentImage } : null;\n\t\t},\n\t\tisLoading: cropperImage.isLoading,\n\t\tisLoaded: cropperImage.isLoaded,\n\t};\n\n\tuseWindowResize(() => {\n\t\trefreshCropper();\n\t});\n\n\tuseUpdateEffect(() => {\n\t\tresetCropper();\n\t}, [cropperImage.getImage()]);\n\n\tuseUpdateEffect(() => {\n\t\tif (cropperRef.current) {\n\t\t\tonUpdate?.(cropperRef.current);\n\t\t}\n\t}, [cropperImage.isLoaded(), cropperImage.isLoading()]);\n\n\tuseImperativeHandle(cropperRef, () => cropperInterface);\n\n\treturn {\n\t\tcropper: cropperInterface,\n\t\trefs: {\n\t\t\timage: imageRef,\n\t\t\tboundary: boundaryRef,\n\t\t\tcanvas: canvasRef,\n\t\t},\n\t\timage: currentImage,\n\t};\n}\n","import { SetStateAction, useRef, useState } from \"react\";\nimport { useUpdateEffect } from \"./useUpdateEffect\";\n\ntype DispatchWithCallback<S> = (value: SetStateAction<S>, callback?: Function) => void;\n\nexport function useStateWithCallback<S>(initialState?: S | (() => S)): [S, DispatchWithCallback<S>];\nexport function useStateWithCallback<S = undefined>(): [S | undefined, DispatchWithCallback<S  | undefined>];\nexport function useStateWithCallback<S = undefined>(initialState?: S | (() => S)): [S | undefined, DispatchWithCallback<S | undefined>]  {\n\tconst [state, setState] = useState(initialState);\n\tconst [callback, setCallback] = useState<Function | null | undefined>(null);\n\tconst previousState = useRef(initialState);\n\n\tuseUpdateEffect(() => {\n\t\tif (callback) {\n\t\t\tcallback(state, previousState.current);\n\t\t}\n\t}, [callback])\n\n\treturn [\n\t\tstate,\n\t\t(value: SetStateAction<S | undefined>, callback?: Function) => {\n\t\t\tpreviousState.current = state;\n\t\t\tsetState(value);\n\t\t\tsetCallback(() => callback);\n\t\t}\n\t]\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { CropperImage, isUndefined, promiseTimeout, loadImage } from 'advanced-cropper';\n\nexport interface CropperImageHookSettings {\n\tsrc?: string | null;\n\tonLoadingStart?: () => void;\n\tonLoadingEnd?: () => void;\n\tonError?: () => void;\n\tonLoad?: (image?: CropperImage) => void;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tcheckOrientation?: boolean;\n\tcanvas?: string | boolean;\n\tunloadTime?: number;\n}\n\nexport function useCropperImage(options: CropperImageHookSettings) {\n\tconst { src, onLoadingStart, onLoadingEnd, onError, onLoad, crossOrigin, checkOrientation, canvas, unloadTime } = options;\n\tconst [loading, setLoading] = useState(false);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [image, setImage] = useState<CropperImage | null>(null);\n\n\tconst currentSrc = useRef<string | null>(null);\n\n\tuseEffect(() => {\n\t\tif (currentSrc.current !== src) {\n\t\t\tcurrentSrc.current = src || null;\n\t\t\tsetLoaded(false);\n\t\t\tif (src) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tonLoadingStart?.();\n\t\t\t\tconst promises: Promise<unknown>[] = [\n\t\t\t\t\tloadImage(src, {\n\t\t\t\t\t\tcrossOrigin: isUndefined(crossOrigin) ? canvas : crossOrigin,\n\t\t\t\t\t\tcheckOrientation,\n\t\t\t\t\t}),\n\t\t\t\t];\n\n\t\t\t\tif (loaded && unloadTime) {\n\t\t\t\t\tpromises.push(promiseTimeout(unloadTime));\n\t\t\t\t}\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then((responses) => {\n\t\t\t\t\t\tconst [image] = responses as [CropperImage];\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tsetImage(image);\n\t\t\t\t\t\t\tonLoad?.(image);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonError?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonLoadingEnd?.();\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (unloadTime) {\n\t\t\t\t\tpromiseTimeout(unloadTime).then(() => {\n\t\t\t\t\t\tsetImage(null)\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tsetImage(null)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [src]);\n\n\tuseEffect(() => {\n\t\tif (image) {\n\t\t\tsetLoaded(true)\n\t\t}\n\t}, [image])\n\n\treturn {\n\t\tisLoading() {\n\t\t\treturn loading;\n\t\t},\n\t\tisLoaded() {\n\t\t\treturn loaded\n\t\t},\n\t\tgetImage() {\n\t\t\treturn image;\n\t\t},\n\t\tsetImage,\n\t};\n}\n","import { useLayoutEffect, useState } from 'react';\n\ninterface CropperInstance {\n\thasInteractions: () => boolean;\n\treconcileState: () => void;\n}\n\nexport function useCropperAutoReconcile(cropper: CropperInstance, enabled = true) {\n\tconst [active, setActive] = useState(enabled);\n\n\tuseLayoutEffect(() => {\n\t\tif (active && !cropper.hasInteractions()) {\n\t\t\tcropper.reconcileState();\n\t\t}\n\t});\n\n\treturn {\n\t\tpause() {\n\t\t\tsetActive(false);\n\t\t},\n\t\tresume() {\n\t\t\tsetActive(true);\n\t\t},\n\t};\n}\n","import React, { ReactNode, forwardRef, useImperativeHandle, useRef, CSSProperties } from 'react';\nimport cn from 'classnames';\nimport {\n\tBoundarySizeAlgorithm,\n\tSize,\n\tstretchCropperBoundary,\n\tBoundaryStretchAlgorithm,\n\tfillBoundary,\n} from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tstretcherClassName?: string;\n\tcontentClassName?: string;\n\tstretchAlgorithm?: BoundaryStretchAlgorithm;\n\tsizeAlgorithm?: BoundarySizeAlgorithm;\n\tchildren?: ReactNode;\n}\n\nexport interface StretchableBoundaryMethods {\n\tstretchTo: (size: Size | null) => Promise<Size | null>;\n\treset: () => void;\n}\n\nexport const StretchableBoundary = forwardRef(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tstyle,\n\t\t\tstretcherClassName,\n\t\t\tcontentClassName,\n\t\t\tstretchAlgorithm = stretchCropperBoundary,\n\t\t\tsizeAlgorithm = fillBoundary,\n\t\t\tchildren,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst stretcherRef = useRef<HTMLDivElement>(null);\n\t\tconst boundaryRef = useRef<HTMLDivElement>(null);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\treset: () => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tif (stretcher) {\n\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\tstretchTo: (size: Size | null) => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tconst boundary = boundaryRef.current;\n\n\t\t\t\tif (size?.width && size?.height && stretcher && boundary) {\n\t\t\t\t\tstretchAlgorithm(boundary, stretcher, size);\n\t\t\t\t\tconst result = sizeAlgorithm(boundary, size);\n\t\t\t\t\treturn Promise.resolve(result.width && result.height ? result : null);\n\t\t\t\t} else {\n\t\t\t\t\tif (stretcher) {\n\t\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\t\t\t},\n\t\t}));\n\n\t\treturn (\n\t\t\t<div ref={boundaryRef} style={style} className={cn('advanced-cropper-boundary', className)}>\n\t\t\t\t<div ref={stretcherRef} className={cn(['advanced-cropper-boundary__stretcher', stretcherClassName])} />\n\t\t\t\t<div className={cn(['advanced-cropper-boundary__content', contentClassName])}>{children}</div>\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nStretchableBoundary.displayName = 'StretchableBoundary';\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\n\ninterface Props {\n\tvisible?: unknown;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperFade: FC<Props> = ({ visible, className, style, children }) => {\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={cn(className, 'advanced-cropper-fade', Boolean(visible) && 'advanced-cropper-fade--visible')}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperState } from 'advanced-cropper';\nimport { CropperFade } from './CropperFade';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperWrapper: FC<CropperWrapperProps> = ({ cropper, children, className, style }) => {\n\tconst state = cropper ? cropper.getState() : null;\n\tconst loaded = cropper ? cropper.isLoaded() : false;\n\treturn (\n\t\t<div className={cn(className, 'advanced-cropper-wrapper')} style={style}>\n\t\t\t<CropperFade visible={state && loaded} className={'advanced-cropper-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n","import { MouseEvent } from 'react';\n\nexport function preventDefault(e: MouseEvent) {\n\te.preventDefault();\n}\n","import React, { CSSProperties, forwardRef } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, getBackgroundStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperBackgroundImageProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperBackgroundImage = forwardRef<HTMLImageElement, CropperBackgroundImageProps>(\n\t({ className, style, cropper, crossOrigin = true }: CropperBackgroundImageProps, ref) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst image = cropper.getImage();\n\n\t\tconst transformStyles = image && state ? getBackgroundStyle(image, state, transitions) : {};\n\n\t\tconst src = image ? image.src : undefined;\n\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\t\tsrc={src}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\tstyle={{\n\t\t\t\t\t...transformStyles,\n\t\t\t\t\t...style,\n\t\t\t\t}}\n\t\t\t\tonMouseDown={preventDefault}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperBackgroundImage.displayName = 'CropperBackgroundImage';\n","import React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { CropperState, DrawOptions, drawCroppedArea } from 'advanced-cropper';\n\nexport interface CropperCanvasMethods {\n\tdraw: (state: CropperState, image: HTMLElement, options?: DrawOptions) => HTMLCanvasElement | null;\n}\n\nexport const CropperCanvas = forwardRef((_, ref) => {\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\tconst spareCanvasRef = useRef<HTMLCanvasElement>(null);\n\n\tuseImperativeHandle(ref, () => ({\n\t\tdraw: (state: CropperState, image: HTMLElement, options: DrawOptions = {}) => {\n\t\t\tif (image && canvasRef.current && spareCanvasRef.current) {\n\t\t\t\treturn drawCroppedArea(\n\t\t\t\t\tstate,\n\t\t\t\t\timage as HTMLImageElement | HTMLCanvasElement,\n\t\t\t\t\tcanvasRef.current,\n\t\t\t\t\tspareCanvasRef.current,\n\t\t\t\t\toptions,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t}));\n\n\treturn (\n\t\t<>\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={canvasRef} />\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={spareCanvasRef} />\n\t\t</>\n\t);\n});\n\nCropperCanvas.displayName = 'CropperCanvas';\n","import React, { ReactNode, Component, RefObject, createRef } from 'react';\nimport cn from 'classnames';\nimport { MoveDirections, Point, SimpleTouch, distance } from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => void;\n\tonMoveEnd?: () => void;\n\tonMoveStart?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tuseAnchor?: boolean;\n\tactivationDistance?: number;\n}\n\nexport class DraggableElement extends Component<Props> {\n\ttouches: SimpleTouch[];\n\tstarted: boolean;\n\thovered: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tactivationDistance: 30,\n\t\tuseAnchor: true,\n\t\trerender: true,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.touches = [];\n\t\tthis.hovered = false;\n\t\tthis.started = false;\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t}\n\n\tprocessMove = (e: MouseEvent | TouchEvent, newTouches: SimpleTouch[]) => {\n\t\tconst container = this.container.current;\n\n\t\tif (container && this.touches.length) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\n\t\t\t\tif (this.props.onMove) {\n\t\t\t\t\tconst movingToAnchor = {\n\t\t\t\t\t\tleft:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientX - this.anchor.left - left) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientX - this.anchor.left - left),\n\t\t\t\t\t\ttop:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientY - this.anchor.top - top) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientY - this.anchor.top - top),\n\t\t\t\t\t};\n\n\t\t\t\t\tconst direction = {\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.left) {\n\t\t\t\t\t\tdirection.left = newTouches[0].clientX - this.touches[0].clientX;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.top) {\n\t\t\t\t\t\tdirection.top = newTouches[0].clientY - this.touches[0].clientY;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.props?.onMove(direction, e);\n\n\t\t\t\t\tthis.touches = [...newTouches];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onMoveEnd, onLeave } = this.props;\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tonMoveEnd?.();\n\t\t}\n\t\tif (this.hovered) {\n\t\t\tonLeave?.();\n\t\t\tthis.hovered = false;\n\t\t}\n\t\tthis.touches = [];\n\t};\n\n\tinitAnchor = (touch: SimpleTouch) => {\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tthis.anchor = {\n\t\t\t\tleft: touch.clientX - left,\n\t\t\t\ttop: touch.clientY - top,\n\t\t\t};\n\t\t}\n\t};\n\n\tonMouseOver = () => {\n\t\tconst { onEnter, disabled } = this.props;\n\t\tif (!this.hovered && !disabled) {\n\t\t\tthis.hovered = true;\n\t\t\tonEnter?.();\n\t\t}\n\t};\n\n\tonMouseLeave = () => {\n\t\tconst { onLeave } = this.props;\n\t\tif (this.hovered && !this.touches.length) {\n\t\t\tthis.hovered = false;\n\t\t\tonLeave?.();\n\t\t}\n\t};\n\n\tonTouchStart = (e: TouchEvent) => {\n\t\tconst { onEnter, onMoveStart, disabled } = this.props;\n\t\tif (e.cancelable) {\n\t\t\tthis.touches = Array.from(e.touches);\n\n\t\t\tconst shouldStartMove = !disabled && e.touches.length === 1;\n\t\t\tif (shouldStartMove) {\n\t\t\t\tthis.touches = Array.from(e.touches);\n\t\t\t\tonMoveStart?.();\n\t\t\t}\n\n\t\t\tif (!this.hovered && !disabled) {\n\t\t\t\tthis.hovered = true;\n\t\t\t\tonEnter?.();\n\t\t\t}\n\n\t\t\tif (this.started || shouldStartMove) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}\n\t};\n\n\tonTouchEnd = () => {\n\t\tthis.started = false;\n\t\tthis.processEnd();\n\t};\n\n\tonTouchMove = (e: TouchEvent) => {\n\t\tif (this.touches.length >= 1) {\n\t\t\tif (this.started) {\n\t\t\t\tthis.processMove(e, Array.from(e.touches));\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t} else if (\n\t\t\t\tdistance(\n\t\t\t\t\t{ left: this.touches[0].clientX, top: this.touches[0].clientY },\n\t\t\t\t\t{ left: e.touches[0].clientX, top: e.touches[0].clientY },\n\t\t\t\t) > (this.props.activationDistance || 0)\n\t\t\t) {\n\t\t\t\tthis.initAnchor({\n\t\t\t\t\tclientX: e.touches[0].clientX,\n\t\t\t\t\tclientY: e.touches[0].clientY,\n\t\t\t\t});\n\t\t\t\tthis.started = true;\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (e: MouseEvent) => {\n\t\tconst { onMoveStart, disabled } = this.props;\n\t\tif (!disabled && e.button === 0) {\n\t\t\tconst touch = {\n\t\t\t\tclientX: e.clientX,\n\t\t\t\tclientY: e.clientY,\n\t\t\t};\n\t\t\tthis.touches = [touch];\n\t\t\tthis.initAnchor(touch);\n\t\t\te.stopPropagation();\n\t\t\tonMoveStart?.();\n\t\t}\n\t};\n\n\tonMouseMove = (e: MouseEvent) => {\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tthis.processMove(e, [\n\t\t\t\t{\n\t\t\t\t\tclientX: e.clientX,\n\t\t\t\t\tclientY: e.clientY,\n\t\t\t\t},\n\t\t\t]);\n\t\t\tif (e.preventDefault && e.cancelable) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.processEnd();\n\t};\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: Readonly<Props>) {\n\t\tif (this.props.disabled && !prevProps.disabled) {\n\t\t\tthis.touches = [];\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children, className } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={cn('advanced-cropper-draggable-element', className)}\n\t\t\t\tref={this.container}\n\t\t\t\tonMouseOver={this.onMouseOver}\n\t\t\t\tonMouseLeave={this.onMouseLeave}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { ReactNode } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tonDrag?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\tposition?: HorizontalCardinalDirection | VerticalCardinalDirection;\n}\n\nexport const LineWrapper = ({\n\tposition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n}: Props) => {\n\treturn (\n\t\t<DraggableElement\n\t\t\tclassName={cn([\n\t\t\t\t'advanced-cropper-line-wrapper',\n\t\t\t\tposition && `advanced-cropper-line-wrapper--${position}`,\n\t\t\t\tdisabled && `advanced-cropper-line-wrapper--disabled`,\n\t\t\t\tclassName,\n\t\t\t])}\n\t\t\tdisabled={disabled}\n\t\t\tonMove={onDrag}\n\t\t\tonMoveEnd={onDragEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t\tactivationDistance={0}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn([\n\t\t\t\t\t'advanced-cropper-line-wrapper__content',\n\t\t\t\t\tposition && `advanced-cropper-line-wrapper__content--${position}`,\n\t\t\t\t])}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</DraggableElement>\n\t);\n};\n","import React, { useState } from 'react';\nimport cn from 'classnames';\nimport { CardinalDirection, MoveDirections } from 'advanced-cropper';\nimport { LineWrapper } from '../service/LineWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\tposition?: CardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleLine = ({\n\tposition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<LineWrapper\n\t\t\tclassName={cn('advanced-cropper-simple-line-wrapper', wrapperClassName, {\n\t\t\t\t[`advanced-cropper-simple-line-wrapper--${position}`]: !!position,\n\t\t\t})}\n\t\t\tposition={position}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-line',\n\t\t\t\t\thover && 'advanced-cropper-simple-line--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-line--${position}`]: !!position,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</LineWrapper>\n\t);\n};\n","import React, { CSSProperties, ReactNode } from 'react';\nimport classnames from 'classnames';\nimport {\n\tHorizontalCardinalDirection,\n\tMoveDirections,\n\tVerticalCardinalDirection,\n\tgetDirectionNames,\n} from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n\tonDrag?: (shift: MoveDirections, event: MouseEvent | TouchEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tverticalPosition?: VerticalCardinalDirection;\n}\n\nexport const HandlerWrapper = ({\n\thorizontalPosition,\n\tverticalPosition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n\tstyle,\n}: Props) => {\n\tconst position =\n\t\thorizontalPosition || verticalPosition\n\t\t\t? getDirectionNames(horizontalPosition, verticalPosition).snakeCase\n\t\t\t: null;\n\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={classnames(\n\t\t\t\tclassName,\n\t\t\t\t'advanced-cropper-handler-wrapper',\n\t\t\t\tposition && `advanced-cropper-handler-wrapper--${position}`,\n\t\t\t\tdisabled && 'advanced-cropper-handler-wrapper--disabled',\n\t\t\t)}\n\t\t>\n\t\t\t<DraggableElement\n\t\t\t\tclassName={'advanced-cropper-handler-wrapper__draggable'}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMove={onDrag}\n\t\t\t\tonMoveEnd={onDragEnd}\n\t\t\t\tonLeave={onLeave}\n\t\t\t\tonEnter={onEnter}\n\t\t\t\tactivationDistance={0}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</DraggableElement>\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties, useState } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { HandlerWrapper } from '../service/HandlerWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\twrapperStyle?: CSSProperties;\n\tverticalPosition?: VerticalCardinalDirection;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (shift: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleHandler = ({\n\tverticalPosition,\n\thorizontalPosition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\twrapperStyle,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<HandlerWrapper\n\t\t\tstyle={wrapperStyle}\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-simple-handler-wrapper',\n\t\t\t\twrapperClassName,\n\t\t\t\tverticalPosition && `advanced-cropper-simple-handler-wrapper--${verticalPosition}`,\n\t\t\t\thorizontalPosition && `advanced-cropper-simple-handler-wrapper--${horizontalPosition}`,\n\t\t\t\thorizontalPosition &&\n\t\t\t\t\tverticalPosition &&\n\t\t\t\t\t`advanced-cropper-simple-handler-wrapper--${horizontalPosition}-${verticalPosition}`,\n\t\t\t\thover && 'advanced-cropper-simple-handler-wrapper--hover',\n\t\t\t)}\n\t\t\tverticalPosition={verticalPosition}\n\t\t\thorizontalPosition={horizontalPosition}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-handler',\n\t\t\t\t\thover && 'advanced-cropper-simple-handler--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${verticalPosition}`]: !!verticalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}`]: !!horizontalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}-${verticalPosition}`]:\n\t\t\t\t\t\t\thorizontalPosition && verticalPosition,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</HandlerWrapper>\n\t);\n};\n","import React, { useMemo, ReactNode, CSSProperties, useState, FC } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tHorizontalCardinalDirection,\n\tVerticalCardinalDirection,\n\tMoveDirections,\n\tResizeOptions,\n\tgetDirectionNames,\n\tisCardinalDirection,\n\tisObject,\n\tCoordinates,\n\tResizeAnchor,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\n\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null] as const;\nconst VERTICAL_DIRECTIONS = ['south', 'north', null] as const;\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface Props {\n\tstyle?: CSSProperties;\n\tclassName?: string;\n\thandlerComponent?: HandlerComponent;\n\thandlers?: boolean | Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: boolean | Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tdisabled?: boolean;\n\tonResize?: (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => void;\n\tonResizeEnd?: () => void;\n\tchildren?: ReactNode;\n\treference?: Coordinates | null;\n}\n\ninterface HandlerNode {\n\tname: OrdinalDirection;\n\tcomponent: HandlerComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\tcontainerClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface LineNode {\n\tname: CardinalDirection;\n\tcomponent: LineComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface PointNode {\n\tname: OrdinalDirection;\n\tclassName: string;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n}\n\nexport const BoundingBox = ({\n\tstyle,\n\tclassName,\n\tchildren,\n\tonResize,\n\tonResizeEnd,\n\thandlerComponent = SimpleHandler,\n\thandlers = {\n\t\teastNorth: true,\n\t\tnorth: true,\n\t\twestNorth: true,\n\t\twest: true,\n\t\twestSouth: true,\n\t\tsouth: true,\n\t\teastSouth: true,\n\t\teast: true,\n\t},\n\thandlerClassNames = {},\n\thandlerWrapperClassNames = {},\n\tlines = {\n\t\twest: true,\n\t\tnorth: true,\n\t\teast: true,\n\t\tsouth: true,\n\t},\n\tlineComponent = SimpleLine,\n\tlineClassNames = {},\n\tlineWrapperClassNames = {},\n\tdisabled = false,\n\treference = null,\n}: Props) => {\n\tconst [lastReference, setLastReference] = useState<Coordinates | null>(null);\n\n\tconst points = useMemo(() => {\n\t\tconst result: PointNode[] = [];\n\t\tHORIZONTAL_DIRECTIONS.forEach((hDirection) => {\n\t\t\tVERTICAL_DIRECTIONS.forEach((vDirection) => {\n\t\t\t\tif (hDirection !== vDirection) {\n\t\t\t\t\tlet { snakeCase, camelCase } = getDirectionNames(hDirection, vDirection);\n\t\t\t\t\tif (snakeCase && camelCase) {\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\tname: camelCase,\n\t\t\t\t\t\t\tclassName: snakeCase,\n\t\t\t\t\t\t\tverticalPosition: vDirection,\n\t\t\t\t\t\t\thorizontalPosition: hDirection,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn result;\n\t}, []);\n\n\tconst lineNodes = useMemo(() => {\n\t\tconst result: LineNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isCardinalDirection(point.name) && (isObject(lines) ? lines[point.name] : lines)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: lineComponent,\n\t\t\t\t\tclassName: cn(\n\t\t\t\t\t\tlineClassNames.default,\n\t\t\t\t\t\tlineClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line--${point.name}`,\n\t\t\t\t\t\tlineWrapperClassNames.default,\n\t\t\t\t\t\tlineWrapperClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineWrapperClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: lineClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, lines, lineComponent, lineClassNames, lineWrapperClassNames, disabled]);\n\n\tconst handlerNodes = useMemo(() => {\n\t\tconst result: HandlerNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isObject(handlers) ? handlers[point.name] : handlers) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: handlerComponent,\n\t\t\t\t\tclassName: cn(handlerClassNames.default, handlerClassNames[point.name]),\n\t\t\t\t\tcontainerClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper--${point.className}`,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler--${point.className}`,\n\t\t\t\t\t\thandlerWrapperClassNames.default,\n\t\t\t\t\t\thandlerWrapperClassNames[point.name],\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: handlerClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, handlers, handlerComponent, handlerClassNames, handlerWrapperClassNames, disabled]);\n\n\tconst onHandlerMove =\n\t\t(horizontalPosition: HorizontalCardinalDirection | null, verticalPosition: VerticalCardinalDirection | null) =>\n\t\t({ left, top }: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => {\n\t\t\tconst directions = {\n\t\t\t\tleft,\n\t\t\t\ttop,\n\t\t\t};\n\n\t\t\tlet respectDirection: 'width' | 'height' | undefined;\n\t\t\tif (!verticalPosition && horizontalPosition) {\n\t\t\t\trespectDirection = 'width';\n\t\t\t} else if (verticalPosition && !horizontalPosition) {\n\t\t\t\trespectDirection = 'height';\n\t\t\t}\n\n\t\t\tif (!disabled) {\n\t\t\t\tif (onResize) {\n\t\t\t\t\tconst anchor = getDirectionNames(horizontalPosition, verticalPosition).camelCase;\n\t\t\t\t\tif (anchor) {\n\t\t\t\t\t\tonResize(anchor, directions, {\n\t\t\t\t\t\t\treference: lastReference || reference,\n\t\t\t\t\t\t\tpreserveAspectRatio: nativeEvent && nativeEvent.shiftKey,\n\t\t\t\t\t\t\trespectDirection,\n\t\t\t\t\t\t\tcompensate: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!lastReference) {\n\t\t\t\t\tsetLastReference(reference);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\tconst onHandlerMoveEnd = () => {\n\t\tonResizeEnd?.();\n\t\tsetLastReference(null);\n\t};\n\n\treturn (\n\t\t<div className={cn('advanced-cropper-bounding-box', className)} style={style}>\n\t\t\t{children}\n\t\t\t<div>\n\t\t\t\t{lineNodes.map((line) => (\n\t\t\t\t\t<line.component\n\t\t\t\t\t\tkey={line.name}\n\t\t\t\t\t\tdefaultClassName={line.className}\n\t\t\t\t\t\thoverClassName={line.hoverClassName}\n\t\t\t\t\t\twrapperClassName={line.wrapperClassName}\n\t\t\t\t\t\tposition={line.name}\n\t\t\t\t\t\tdisabled={line.disabled}\n\t\t\t\t\t\tonMove={onHandlerMove(line.horizontalPosition, line.verticalPosition)}\n\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{handlerNodes.map((handler) => {\n\t\t\t\t\tconst handlerElement = (\n\t\t\t\t\t\t<handler.component\n\t\t\t\t\t\t\tdefaultClassName={handler.className}\n\t\t\t\t\t\t\thoverClassName={handler.hoverClassName}\n\t\t\t\t\t\t\twrapperClassName={handler.wrapperClassName}\n\t\t\t\t\t\t\thorizontalPosition={handler.horizontalPosition}\n\t\t\t\t\t\t\tverticalPosition={handler.verticalPosition}\n\t\t\t\t\t\t\tdisabled={handler.disabled}\n\t\t\t\t\t\t\tonMove={onHandlerMove(handler.horizontalPosition, handler.verticalPosition)}\n\t\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={handler.name} className={handler.containerClassName}>\n\t\t\t\t\t\t\t{handlerElement}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React, { FC } from 'react';\nimport classnames from 'classnames';\n\ninterface Props {\n\tclassName?: string;\n}\n\nexport const StencilOverlay: FC<Props> = ({ className, children }) => {\n\treturn <div className={classnames('advanced-cropper-stencil-overlay', className)}>{children}</div>;\n};\n","import React, { FC, ReactNode, useLayoutEffect, useRef, useState } from 'react';\nimport { Coordinates, CropperTransitions, deepCompare, isNumber } from 'advanced-cropper';\nimport classnames from 'classnames';\nimport { useTransition } from '../../hooks/useTransition';\n\ninterface Props {\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft?: number;\n\ttop?: number;\n\tchildren?: ReactNode;\n}\n\nexport const ArtificialTransition: FC<Props> = ({ className, transitions, children, ...values }) => {\n\tconst root = useRef<HTMLDivElement>(null);\n\n\tconst transitionValues = useRef<Partial<Coordinates>>(values);\n\n\tconst [rememberedValues, setRememberedValues] = useState(values);\n\n\tconst [runTransitions, transitionsActive] = useTransition(transitions);\n\n\tuseLayoutEffect(() => {\n\t\tif (!deepCompare(rememberedValues, values)) {\n\t\t\tsetRememberedValues(values);\n\n\t\t\tconst startValues = transitionsActive\n\t\t\t\t? {\n\t\t\t\t\t\t...transitionValues.current,\n\t\t\t\t  }\n\t\t\t\t: rememberedValues;\n\n\t\t\trunTransitions((progress) => {\n\t\t\t\tconst properties = ['left', 'top', 'height', 'width'] as const;\n\n\t\t\t\tproperties.forEach((property) => {\n\t\t\t\t\tconst desiredValue = values[property];\n\t\t\t\t\tconst startValue = startValues[property];\n\n\t\t\t\t\ttransitionValues.current[property] =\n\t\t\t\t\t\tisNumber(startValue) && isNumber(desiredValue)\n\t\t\t\t\t\t\t? startValue + (desiredValue - startValue) * progress\n\t\t\t\t\t\t\t: desiredValue;\n\t\t\t\t});\n\n\t\t\t\tif (root.current) {\n\t\t\t\t\troot.current.style.width = `${transitionValues.current.width}px`;\n\t\t\t\t\troot.current.style.height = `${transitionValues.current.height}px`;\n\t\t\t\t\troot.current.style.transform = `translate3d(${transitionValues.current.left}px, ${transitionValues.current.top}px, 0px)`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [rememberedValues, transitionsActive, values.width, values.height, values.top, values.left]);\n\n\tconst currentValues = transitionsActive ? transitionValues.current : values;\n\n\tconst rootStyle = {\n\t\tleft: 0,\n\t\ttop: 0,\n\t\twidth: `${currentValues.width}px`,\n\t\theight: `${currentValues.height}px`,\n\t\ttransform: `translate3d(${currentValues.left}px, ${currentValues.top}px, 0px)`,\n\t};\n\n\treturn (\n\t\t<div ref={root} className={classnames('advanced-cropper-artificial-transition', className)} style={rootStyle}>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","import { CropperTransitions, Animation } from 'advanced-cropper';\nimport { useRef, useState } from 'react';\n\nexport function useTransition<T>(transitions: CropperTransitions | null = null): [(callback: (progress: number) => void) => void, boolean] {\n\tconst animation = useRef(new Animation());\n\tconst [active, setActive] = useState(false);\n\n\treturn [\n\t\t(callback: (progress: number) => void) => {\n\t\t\tif (transitions && transitions.active) {\n\t\t\t\t\tanimation.current.start({\n\t\t\t\t\t\t...transitions,\n\t\t\t\t\t\tonStart() {\n\t\t\t\t\t\t\tsetActive(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonProgress(progress) {\n\t\t\t\t\t\t\tcallback(progress);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonStop() {\n\t\t\t\t\t\t\tsetActive(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n \t\t\t} else if (!animation.current.active) {\n\t\t\t\tcallback(1);\n\t\t\t}\n\t\t},\n\t\tactive,\n\t];\n}\n","import React, { FC, ReactNode } from 'react';\nimport { CropperTransitions } from 'advanced-cropper';\nimport classnames from 'classnames';\n\nimport { ArtificialTransition } from './ArtificialTransition';\n\ninterface Props {\n\tchildren?: ReactNode;\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft: number;\n\ttop: number;\n}\n\nexport const StencilWrapper: FC<Props> = ({ className, transitions, width, height, left, top, children }) => {\n\treturn (\n\t\t<ArtificialTransition\n\t\t\tclassName={classnames('advanced-cropper-stencil-wrapper', className)}\n\t\t\ttransitions={transitions}\n\t\t\twidth={width}\n\t\t\theight={height}\n\t\t\ttop={top}\n\t\t\tleft={left}\n\t\t>\n\t\t\t{children}\n\t\t</ArtificialTransition>\n\t);\n};\n","import React, { FC, ReactNode, useState } from 'react';\nimport cn from 'classnames';\nimport { useUpdateEffect } from '../../hooks/useUpdateEffect';\n\nexport interface StencilGridProps {\n\tvisible?: boolean;\n\tcolumns?: number;\n\trows?: number;\n\tclassName?: string;\n}\n\nexport const StencilGrid: FC<StencilGridProps> = ({ columns = 3, rows = 3, visible = false, className }) => {\n\tconst nodes: ReactNode[] = [];\n\n\tconst [currentColumns, setCurrentColumns] = useState(columns);\n\tconst [currentRows, setCurrentRows] = useState(rows);\n\n\tuseUpdateEffect(() => {\n\t\tif (visible) {\n\t\t\tsetCurrentRows(rows);\n\t\t\tsetCurrentColumns(columns);\n\t\t}\n\t}, [visible, columns, rows]);\n\n\tfor (let i = 0; i < currentRows; i++) {\n\t\tconst cells: ReactNode[] = [];\n\t\tfor (let j = 0; j < currentColumns; j++) {\n\t\t\tcells.push(\n\t\t\t\t<div\n\t\t\t\t\tkey={j}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-stencil-grid__cell',\n\t\t\t\t\t\ti === 0 && 'advanced-cropper-stencil-grid__cell--top',\n\t\t\t\t\t\ti === currentRows - 1 && 'advanced-cropper-stencil-grid__cell--bottom',\n\t\t\t\t\t\tj === 0 && 'advanced-cropper-stencil-grid__cell--left',\n\t\t\t\t\t\tj === currentColumns - 1 && 'advanced-cropper-stencil-grid__cell--right',\n\t\t\t\t\t)}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\t\tnodes.push(\n\t\t\t<div key={i} className={'advanced-cropper-stencil-grid__row'}>\n\t\t\t\t{cells}\n\t\t\t</div>,\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-stencil-grid',\n\t\t\t\tvisible && 'advanced-cropper-stencil-grid--visible',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{nodes}\n\t\t</div>\n\t);\n};\n","import React, { FC, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n\tcreateAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tminAspectRatio?: number;\n\tmaxAspectRatio?: number;\n\taspectRatio?: RawAspectRatio;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tgrid?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const RectangleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\taspectRatio,\n\t\t\tminAspectRatio,\n\t\t\tmaxAspectRatio,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\tnorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twest: true,\n\t\t\t\twestSouth: true,\n\t\t\t\tsouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t\teast: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: createAspectRatio(\n\t\t\t\taspectRatio || {\n\t\t\t\t\tminimum: minAspectRatio,\n\t\t\t\t\tmaximum: maxAspectRatio,\n\t\t\t\t},\n\t\t\t),\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && movable) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizable) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-rectangle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--movable': movable,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizable': resizable,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-rectangle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizable}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!movable}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-rectangle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nRectangleStencil.displayName = 'RectangleStencil';\n","import React, { ReactNode, CSSProperties, Component, RefObject, createRef } from 'react';\nimport {\n\tdebounce,\n\tDebouncedFunction,\n\tImageTransform,\n\tPoint,\n\tSimpleTouch,\n\ttouchesToImageTransform,\n\twheelEventToImageTransform,\n} from 'advanced-cropper';\n\ninterface Props {\n\tonTransform?: (transform: ImageTransform) => void;\n\tonTransformEnd?: () => void;\n\tonEvent?: (transformEvent: TransformableImageEvent, nativeEvent: Event) => unknown;\n\tdisabled?: boolean;\n\ttouchMove?: boolean;\n\tmouseMove?: boolean;\n\ttouchScale?: boolean;\n\ttouchRotate?: boolean;\n\twheelScale?:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n\ttimeout?: number;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n}\n\nexport class TransformableImageEvent {\n\tconstructor({ active }: { active: boolean }) {\n\t\tthis.active = active;\n\t\tthis.defaultPrevented = false;\n\t}\n\tpreventDefault() {\n\t\tthis.defaultPrevented = true;\n\t}\n\tdefaultPrevented: boolean;\n\tactive: boolean;\n}\n\nexport class TransformableImage extends Component<Props> {\n\ttouches: (SimpleTouch & { identifier?: number })[];\n\ttransforming: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\tdebouncedProcessEnd: DebouncedFunction<TransformableImage['processEnd']>;\n\n\tstatic defaultProps = {\n\t\ttouchMove: true,\n\t\tmouseMove: true,\n\t\ttouchScale: true,\n\t\ttouchRotate: false,\n\t\twheelScale: true,\n\t\ttimeout: 500,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.transforming = false;\n\t\tthis.touches = [];\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t\tthis.debouncedProcessEnd = debounce(this.processEnd, props.timeout);\n\t}\n\n\tprocessMove = (newTouches: SimpleTouch[]) => {\n\t\tconst { onTransform, touchScale, touchMove, touchRotate } = this.props;\n\t\tconst container = this.container.current;\n\t\tif (container && onTransform) {\n\t\t\tonTransform(\n\t\t\t\ttouchesToImageTransform(newTouches, this.touches, container, {\n\t\t\t\t\tscale: touchScale,\n\t\t\t\t\trotate: touchRotate,\n\t\t\t\t\tmove: touchMove,\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis.touches = newTouches;\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onTransformEnd } = this.props;\n\t\tif (this.transforming) {\n\t\t\tthis.transforming = false;\n\t\t\tif (onTransformEnd) {\n\t\t\t\tonTransformEnd();\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessStart = () => {\n\t\tthis.transforming = true;\n\t\tthis.debouncedProcessEnd.clear();\n\t};\n\n\tprocessEvent = (nativeEvent: Event) => {\n\t\tconst { onEvent, disabled } = this.props;\n\t\tconst transformEvent = new TransformableImageEvent({ active: this.transforming });\n\n\t\tif (onEvent) {\n\t\t\tonEvent(transformEvent, nativeEvent);\n\t\t} else {\n\t\t\tnativeEvent.preventDefault();\n\t\t\tnativeEvent.stopPropagation();\n\t\t}\n\n\t\treturn !disabled && !transformEvent.defaultPrevented;\n\t};\n\n\tonWheel = (event: WheelEvent) => {\n\t\tconst { onTransform, wheelScale } = this.props;\n\t\tconst container = this.container.current;\n\n\t\tif (wheelScale) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processStart();\n\t\t\t\tif (onTransform && container) {\n\t\t\t\t\tonTransform(\n\t\t\t\t\t\twheelEventToImageTransform(event, container, wheelScale === true ? 0.1 : wheelScale.ratio),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (!this.touches.length) {\n\t\t\t\t\tthis.debouncedProcessEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchStart = (event: TouchEvent) => {\n\t\tconst { touchMove, touchScale, touchRotate } = this.props;\n\t\tif (event.cancelable && (touchMove || ((touchScale || touchRotate) && event.touches.length > 1))) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst container = this.container.current;\n\t\t\t\tif (container) {\n\t\t\t\t\tconst { left, top, bottom, right } = container.getBoundingClientRect();\n\t\t\t\t\tthis.touches = Array.from(event.touches).filter(\n\t\t\t\t\t\t(touch) =>\n\t\t\t\t\t\t\ttouch.clientX > left &&\n\t\t\t\t\t\t\ttouch.clientX < right &&\n\t\t\t\t\t\t\ttouch.clientY > top &&\n\t\t\t\t\t\t\ttouch.clientY < bottom,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchEnd = (event: TouchEvent) => {\n\t\tif (event.touches.length === 0) {\n\t\t\tthis.touches = [];\n\t\t\tthis.processEnd();\n\t\t}\n\t};\n\n\tonTouchMove = (event: TouchEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tconst touches = [...event.touches].filter(\n\t\t\t\t(touch) =>\n\t\t\t\t\t!touch.identifier ||\n\t\t\t\t\tthis.touches.find((anotherTouch) => anotherTouch.identifier === touch.identifier),\n\t\t\t);\n\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove(touches);\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (event: MouseEvent) => {\n\t\tconst { mouseMove } = this.props;\n\t\tif (mouseMove && 'buttons' in event && event.buttons === 1) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst touch = {\n\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t};\n\t\t\t\tthis.touches = [touch];\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseMove = (event: MouseEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove([\n\t\t\t\t\t{\n\t\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.touches = [];\n\t\tthis.processEnd();\n\t};\n\n\tshouldComponentUpdate(): boolean {\n\t\treturn true;\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t\tcontainer.removeEventListener('wheel', this.onWheel);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('wheel', this.onWheel, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { className, children, style } = this.props;\n\t\treturn (\n\t\t\t<div className={className} style={style} ref={this.container}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { forwardRef, PropsWithoutRef } from 'react';\n\nexport function createCropper<T, P = {}>(\n\trender: (props: P, ref: React.Ref<T>) => React.ReactElement | null,\n): (props: PropsWithoutRef<P> & React.RefAttributes<T>) => React.ReactElement | null {\n\treturn forwardRef<T, P>(render);\n}\n","import React, { CSSProperties, ReactNode } from 'react';\nimport { CropperTransitions, ImageTransform } from 'advanced-cropper';\nimport { useRotateImageOptions } from '../../hooks/useRotateImageOptions';\nimport { useScaleImageOptions } from '../../hooks/useScaleImageOptions';\nimport { useMoveImageOptions } from '../../hooks/useMoveImageOptions';\nimport { MoveImageOptions, RotateImageOptions, ScaleImageOptions } from '../../types';\nimport { TransformableImage } from './TransformableImage';\n\ninterface DesiredCropperRef {\n\ttransformImage: (transform: ImageTransform) => void;\n\ttransformImageEnd: () => void;\n\tgetTransitions: () => CropperTransitions;\n}\n\nexport interface CropperBackgroundWrapperProps {\n\tcropper: DesiredCropperRef;\n\trotateImage?: boolean | RotateImageOptions;\n\tscaleImage?: boolean | ScaleImageOptions;\n\tmoveImage?: boolean | MoveImageOptions;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\ttimeout?: number;\n}\n\nexport const CropperBackgroundWrapper = ({\n\tscaleImage = true,\n\tmoveImage = true,\n\trotateImage = false,\n\tchildren,\n\tclassName,\n\tstyle,\n\tcropper,\n\ttimeout,\n}: CropperBackgroundWrapperProps) => {\n\tconst transitions = cropper.getTransitions();\n\n\tconst rotateImageOptions = useRotateImageOptions(rotateImage);\n\tconst scaleImageOptions = useScaleImageOptions(scaleImage);\n\tconst moveImageOptions = useMoveImageOptions(moveImage);\n\n\treturn (\n\t\t<TransformableImage\n\t\t\tclassName={className}\n\t\t\tstyle={style}\n\t\t\tonTransform={cropper.transformImage}\n\t\t\tonTransformEnd={cropper.transformImageEnd}\n\t\t\ttouchMove={moveImageOptions.touch}\n\t\t\tmouseMove={moveImageOptions.mouse}\n\t\t\ttouchScale={scaleImageOptions.touch}\n\t\t\twheelScale={scaleImageOptions.wheel}\n\t\t\ttouchRotate={rotateImageOptions.touch}\n\t\t\tdisabled={transitions.active}\n\t\t\ttimeout={timeout}\n\t\t>\n\t\t\t{children}\n\t\t</TransformableImage>\n\t);\n};\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { RotateImageOptions } from '../types';\n\ninterface DefinedRotateImageOptions {\n\ttouch: boolean;\n}\n\nexport function useRotateImageOptions(rotateImage: RotateImageOptions | boolean): DefinedRotateImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\trotateImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[rotateImage],\n\t);\n}\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { ScaleImageOptions } from '../types';\n\ninterface DefinedScaleImageOptions {\n\ttouch: boolean;\n\twheel:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n}\n\nexport function useScaleImageOptions(scaleImage: ScaleImageOptions | boolean): DefinedScaleImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tscaleImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\twheel: {\n\t\t\t\t\t\tratio: 0.1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\twheel: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[scaleImage],\n\t);\n}\n","import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { MoveImageOptions } from '../types';\n\ninterface DefinedMoveImageOptions {\n\ttouch: boolean;\n\tmouse: boolean;\n}\n\nexport function useMoveImageOptions(moveImage: MoveImageOptions | boolean): DefinedMoveImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tmoveImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\tmouse: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\tmouse: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[moveImage],\n\t);\n}\n","import React, { useImperativeHandle, useRef, CSSProperties, Ref } from 'react';\nimport cn from 'classnames';\nimport {\n\tDrawOptions,\n\tDefaultSettings,\n\tdefaultStencilConstraints,\n\tCoreSettings,\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tModifierSettings,\n\tInitializeSettings,\n} from 'advanced-cropper';\n\nimport {\n\tCropperBackgroundWrapperComponent,\n\tCropperWrapperComponent,\n\tStencilComponent,\n\tCropperBackgroundComponent,\n\tArbitraryProps,\n\tStencilConstraints,\n\tSettingsExtension,\n\tExtendedSettings,\n\tCustomCropperRef,\n\tCropperBoundaryComponent,\n} from '../types';\nimport { CropperStateHook, CropperInstanceSettings, CropperInstanceSettingsProp } from '../hooks/useCropperInstance';\nimport { createCropper } from '../service/cropper';\nimport { AbstractCropperHookProps, useAbstractCropper } from '../hooks/useAbstractCropper';\nimport { StretchableBoundary } from './service/StretchableBoundary';\nimport { CropperWrapper } from './service/CropperWrapper';\nimport { CropperBackgroundImage } from './service/CropperBackgroundImage';\nimport { CropperCanvas } from './service/CropperCanvas';\nimport { RectangleStencil } from './stencils/RectangleStencil';\nimport { CropperBackgroundWrapper } from './service/CropperBackgroundWrapper';\n\nexport type AbstractCropperSettingsProp<Settings extends CropperInstanceSettings> =\n\tCropperInstanceSettingsProp<Settings>;\n\nexport type AbstractCropperSettings = DefaultSettings & CoreSettings & ModifierSettings & InitializeSettings;\n\nexport interface AbstractCropperRef<Settings extends AbstractCropperSettings = AbstractCropperSettings> {\n\treset: () => void;\n\trefresh: () => void;\n\tclear: () => void;\n\tsetCoordinates: CropperStateHook['setCoordinates'];\n\tsetState: CropperStateHook['setState'];\n\tsetImage: (image: CropperImage) => void;\n\tflipImage: CropperStateHook['flipImage'];\n\tzoomImage: CropperStateHook['zoomImage'];\n\trotateImage: CropperStateHook['rotateImage'];\n\treconcileState: CropperStateHook['reconcileState'];\n\tmoveImage: CropperStateHook['moveImage'];\n\tmoveCoordinates: CropperStateHook['moveCoordinates'];\n\tmoveCoordinatesEnd: CropperStateHook['moveCoordinatesEnd'];\n\tresizeCoordinates: CropperStateHook['resizeCoordinates'];\n\tresizeCoordinatesEnd: CropperStateHook['resizeCoordinatesEnd'];\n\ttransformImage: CropperStateHook['transformImage'];\n\ttransformImageEnd: CropperStateHook['transformImageEnd'];\n\tgetCoordinates: CropperStateHook['getCoordinates'];\n\tgetVisibleArea: CropperStateHook['getVisibleArea'];\n\tgetTransforms: CropperStateHook['getTransforms'];\n\tgetStencilCoordinates: CropperStateHook['getStencilCoordinates'];\n\tgetDefaultState: () => CropperState | null;\n\tgetCanvas: (options?: DrawOptions) => HTMLCanvasElement | null;\n\tgetSettings: () => Settings;\n\tgetImage: () => CropperImage | null;\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface AbstractCropperProps<Settings extends AbstractCropperSettings>\n\textends Omit<AbstractCropperHookProps<Settings>, 'settings'> {\n\tbackgroundComponent?: CropperBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tbackgroundClassName?: string;\n\tbackgroundWrapperComponent?: CropperBackgroundWrapperComponent;\n\tbackgroundWrapperProps?: ArbitraryProps;\n\tbackgroundWrapperClassName?: string;\n\twrapperComponent?: CropperWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstencilComponent?: StencilComponent;\n\tstencilProps?: ArbitraryProps;\n\tstencilConstraints?: StencilConstraints<AbstractCropperSettingsProp<Settings>>;\n\tclassName?: string;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\tstyle?: CSSProperties;\n\tsettings: CropperInstanceSettingsProp<Settings>;\n}\n\nexport type AbstractCropperIntrinsicProps<Settings extends AbstractCropperSettings> = Omit<\n\tAbstractCropperProps<Settings>,\n\t'settings'\n>;\n\nconst AbstractCropperComponent = <Extension extends SettingsExtension = {}>(\n\tprops: AbstractCropperProps<ExtendedSettings<Extension>>,\n\tref: Ref<CustomCropperRef<Extension>>,\n) => {\n\tconst {\n\t\tstyle,\n\t\tclassName,\n\t\tstencilComponent = RectangleStencil,\n\t\tstencilConstraints = defaultStencilConstraints,\n\t\tstencilProps = {},\n\t\twrapperComponent = CropperWrapper,\n\t\twrapperProps = {},\n\t\tbackgroundComponent = CropperBackgroundImage,\n\t\tbackgroundProps = {},\n\t\tbackgroundClassName,\n\t\tbackgroundWrapperComponent = CropperBackgroundWrapper,\n\t\tbackgroundWrapperProps = {},\n\t\tboundaryComponent = StretchableBoundary,\n\t\tboundaryProps,\n\t\tboundaryClassName,\n\t\tcanvas = true,\n\t\tcrossOrigin = true,\n\t\tsettings,\n\t\t...parameters\n\t} = props;\n\n\tconst stencilRef = useRef<StencilComponent>(null);\n\n\tconst { cropper, image, refs } = useAbstractCropper(() => ({\n\t\t...parameters,\n\t\tcrossOrigin,\n\t\tstencilProps,\n\t\tcanvas,\n\t\tsettings: {\n\t\t\t...settings,\n\t\t\t...stencilConstraints(settings, {\n\t\t\t\t...stencilProps,\n\t\t\t\t...stencilRef.current,\n\t\t\t}),\n\t\t},\n\t}));\n\n\tconst StencilComponent = stencilComponent;\n\n\tconst WrapperComponent = wrapperComponent;\n\n\tconst BackgroundWrapperComponent = backgroundWrapperComponent;\n\n\tconst BackgroundComponent = backgroundComponent;\n\n\tconst BoundaryComponent = boundaryComponent;\n\n\tuseImperativeHandle(ref, () => cropper);\n\n\tconst deprecatedWrapperProps = {\n\t\tloading: cropper.isLoading(),\n\t\tloaded: cropper.isLoaded(),\n\t};\n\n\treturn (\n\t\t<WrapperComponent\n\t\t\t{...wrapperProps}\n\t\t\tclassName={cn('advanced-cropper', className)}\n\t\t\tcropper={cropper}\n\t\t\tstyle={style}\n\t\t\t{...deprecatedWrapperProps}\n\t\t>\n\t\t\t<BoundaryComponent\n\t\t\t\t{...boundaryProps}\n\t\t\t\tref={refs.boundary}\n\t\t\t\tclassName={cn('advanced-cropper__boundary', boundaryClassName)}\n\t\t\t>\n\t\t\t\t<BackgroundWrapperComponent\n\t\t\t\t\t{...backgroundWrapperProps}\n\t\t\t\t\tcropper={cropper}\n\t\t\t\t\tclassName={'advanced-cropper__background-wrapper'}\n\t\t\t\t>\n\t\t\t\t\t{cropper.getState() && (\n\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\tref={refs.image}\n\t\t\t\t\t\t\tcrossOrigin={crossOrigin}\n\t\t\t\t\t\t\tcropper={cropper}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper__background', backgroundClassName)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<StencilComponent {...stencilProps} ref={stencilRef} cropper={cropper} image={image} />\n\t\t\t\t</BackgroundWrapperComponent>\n\t\t\t\t{canvas && <CropperCanvas ref={refs.canvas} />}\n\t\t\t</BoundaryComponent>\n\t\t</WrapperComponent>\n\t);\n};\n\nexport const AbstractCropper = createCropper(AbstractCropperComponent);\n","export const defaultSettings = [\n\t'transformImage',\n\t'moveCoordinates',\n\t'resizeCoordinates',\n\t'defaultCoordinates',\n\t'defaultVisibleArea',\n\t'areaPositionRestrictions',\n\t'areaSizeRestrictions',\n\t'sizeRestrictions',\n\t'positionRestrictions',\n\t'aspectRatio',\n\t'minWidth',\n\t'minHeight',\n\t'maxWidth',\n\t'maxHeight',\n\t'defaultSize',\n\t'defaultPosition',\n\t'defaultTransforms',\n\t'imageRestriction',\n\t'priority',\n];\n","import { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperIntrinsicProps } from '../components/AbstractCropper';\nimport { defaultSettings } from '../service/constants';\nimport { CoreSettings, DefaultSettings, ModifierSettings } from '../../../../Advanced Cropper/advanced-cropper/dist';\n\ntype Props<Extension extends SettingsExtension> = AbstractCropperIntrinsicProps<ExtendedSettings<Extension>>;\n\nexport function useAbstractCropperProps<Extension extends SettingsExtension>(\n\tprops: Props<Extension>,\n\tsettings: string[] = defaultSettings,\n) {\n\tconst result: any = { settings: {}, props: {} };\n\n\t(Object.keys(props) as (keyof typeof props)[]).forEach((key) => {\n\t\tif (settings.some((setting) => setting === key)) {\n\t\t\tresult.settings[key] = props[key];\n\t\t} else {\n\t\t\tresult.props[key] = props[key];\n\t\t}\n\t});\n\n\treturn result as {\n\t\tsettings: Extension & Partial<DefaultSettings & CoreSettings & ModifierSettings>;\n\t\tprops: Props<Extension>;\n\t};\n}\n","import React, { forwardRef, Ref } from 'react';\nimport {\n\tdefaultSize,\n\tsizeRestrictions,\n\taspectRatio,\n\tfixedStencil,\n\tStencilSize,\n\tfixedStencilConstraints,\n} from 'advanced-cropper/extensions/stencil-size';\nimport { withDefaultSizeRestrictions } from 'advanced-cropper/defaults';\nimport { CustomCropperProps, CustomCropperRef } from '../../types';\nimport { AbstractCropper } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { defaultSettings } from '../../service/constants';\n\ntype UnavailableProps = 'sizeRestrictions' | 'aspectRatio';\n\nexport interface FixedCropperSettings {\n\tstencilSize: StencilSize<this>;\n}\n\nexport type FixedCropperProps = Omit<CustomCropperProps<FixedCropperSettings>, UnavailableProps>;\n\nexport type FixedCropperRef = CustomCropperRef<FixedCropperSettings>;\n\nexport const FixedCropper = forwardRef((props: FixedCropperProps, ref?: Ref<FixedCropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props, [...defaultSettings, 'stencilSize']);\n\treturn (\n\t\t<AbstractCropper<FixedCropperSettings>\n\t\t\tpostProcess={fixedStencil}\n\t\t\tstencilConstraints={fixedStencilConstraints}\n\t\t\t{...cropperProps.props}\n\t\t\tsettings={{\n\t\t\t\tdefaultSize,\n\t\t\t\taspectRatio,\n\t\t\t\tsizeRestrictions: withDefaultSizeRestrictions(sizeRestrictions),\n\t\t\t\t...cropperProps.settings,\n\t\t\t\ttransformImage: {\n\t\t\t\t\t...cropperProps.settings.transformImage,\n\t\t\t\t\tadjustStencil: false,\n\t\t\t\t},\n\t\t\t}}\n\t\t\tref={ref}\n\t\t/>\n\t);\n});\n\nFixedCropper.displayName = 'FixedCropper';\n","import React, { forwardRef, Ref } from 'react';\nimport { isUndefined } from 'advanced-cropper';\nimport { StencilSize } from 'advanced-cropper/extensions/stencil-size';\nimport { CustomCropperProps, CustomCropperRef, ExtendedSettings, SettingsExtension } from '../../types';\nimport { hybridStencilAutoZoom } from '../../deprecated/hybridAutoZoom';\nimport { useDeprecationWarning } from '../../hooks/useDeprecationWarning';\nimport { AbstractCropper, AbstractCropperIntrinsicProps } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { FixedCropper, FixedCropperRef, FixedCropperSettings } from './FixedCropper';\n\ninterface DeprecatedCropperSettings {\n\tstencilSize?: StencilSize;\n\tautoZoom?: boolean;\n}\n\nexport type CropperProps<Extension extends SettingsExtension = {}> = CustomCropperProps<Extension>;\n\nexport type CropperRef<Extension extends SettingsExtension = {}> = CustomCropperRef<Extension>;\n\nexport const Cropper = forwardRef((props: CropperProps, ref?: Ref<CropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props);\n\n\tconst intrinsicProps = cropperProps.props;\n\n\t// Process the deprecated properties\n\tconst { stencilSize, autoZoom, ...actualSettings } = cropperProps.settings as DeprecatedCropperSettings;\n\n\tconst deprecationWarning = useDeprecationWarning();\n\n\tif (!isUndefined(autoZoom)) {\n\t\tif (intrinsicProps.postProcess || stencilSize) {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function.`,\n\t\t\t);\n\t\t} else {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'`,\n\t\t\t);\n\t\t\tintrinsicProps.postProcess = hybridStencilAutoZoom;\n\t\t}\n\t}\n\n\tif (!isUndefined(stencilSize)) {\n\t\tdeprecationWarning(\n\t\t\t`prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead.`,\n\t\t);\n\t\treturn (\n\t\t\t<FixedCropper\n\t\t\t\tref={ref as Ref<FixedCropperRef>}\n\t\t\t\tstencilSize={stencilSize}\n\t\t\t\t{...actualSettings}\n\t\t\t\t{...(intrinsicProps as AbstractCropperIntrinsicProps<ExtendedSettings<FixedCropperSettings>>)}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <AbstractCropper {...intrinsicProps} ref={ref} settings={actualSettings} />;\n});\n\nCropper.displayName = 'CropperComponent';\n","import React, { ComponentType, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = ComponentType<any>;\n\ntype LineComponent = ComponentType<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tgrid?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const CircleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twestSouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: 1,\n\t\t\tboundingBox: 'circle',\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && movable) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizable) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-circle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--movable': movable,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizable': resizable,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-circle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizable}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!movable}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-circle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nCircleStencil.displayName = 'CircleStencil';\n","import React, { forwardRef, HTMLAttributes, RefObject } from 'react';\nimport cn from 'classnames';\n\ninterface Props extends HTMLAttributes<HTMLImageElement> {\n\tsrc?: string | null;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n}\n\nexport const CropperSource = forwardRef<HTMLImageElement, Props>(\n\t({ src, crossOrigin = true, ...props }: Props, ref) => {\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref as RefObject<HTMLImageElement>}\n\t\t\t\tsrc={src}\n\t\t\t\tclassName={cn('advanced-cropper-source')}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperSource.displayName = 'CropperSource';\n","import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperFade } from '../service/CropperFade';\n\ninterface DesiredCropperRef {\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperPreviewWrapper: FC<CropperPreviewWrapperProps> = ({ children, cropper, className, style }) => {\n\treturn (\n\t\t<div className={cn(className, 'cropper-preview-wrapper')} style={style}>\n\t\t\t<CropperFade visible={cropper?.isLoaded()} className={'cropper-preview-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n","import React, { CSSProperties } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, Size, getPreviewStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperPreviewBackgroundProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tsize?: Size | null;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperPreviewBackground = ({\n\tclassName,\n\tcropper,\n\tcrossOrigin = true,\n\tsize,\n\tstyle,\n}: CropperPreviewBackgroundProps) => {\n\tconst state = cropper.getState();\n\tconst transitions = cropper.getTransitions();\n\tconst image = cropper.getImage();\n\n\tconst transformStyles = size && image && state?.coordinates ? getPreviewStyle(image, state, size, transitions) : {};\n\n\tconst src = image ? image.src : undefined;\n\n\treturn src ? (\n\t\t<img\n\t\t\tkey={src}\n\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\tsrc={src}\n\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\tstyle={{\n\t\t\t\t...transformStyles,\n\t\t\t\t...style,\n\t\t\t}}\n\t\t\tonMouseDown={preventDefault}\n\t\t/>\n\t) : null;\n};\n","import React, {\n\tRefObject,\n\tComponentType,\n\tCSSProperties,\n\tforwardRef,\n\tuseImperativeHandle,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from 'react';\nimport cn from 'classnames';\nimport {\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tSize,\n\tratio,\n\tisGreater,\n\tstretchPreviewBoundary,\n} from 'advanced-cropper';\nimport { StretchableBoundary, StretchableBoundaryMethods } from '../service/StretchableBoundary';\nimport { useWindowResize } from '../../hooks/useWindowResize';\nimport { ArbitraryProps, CropperBoundaryComponent } from '../../types';\nimport { useForceRerender } from '../../hooks/useForceRerender';\nimport { CropperPreviewWrapper } from './CropperPreviewWrapper';\nimport { CropperPreviewBackground } from './CropperPreviewBackground';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetImage: () => CropperImage | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewRef {\n\trefresh: () => void;\n}\n\ntype PreviewWrapperComponent = ComponentType<{\n\tcropper: any;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tloading?: boolean;\n\tloaded?: boolean;\n}>;\n\ntype PreviewBackgroundComponent = ComponentType<{\n\tcropper: any;\n\tsize: Size | null;\n\tclassName?: string;\n}>;\n\ninterface Props {\n\tstate?: CropperState | null;\n\timage?: CropperImage | null;\n\ttransitions?: CropperTransitions | null;\n\tloading?: boolean;\n\tloaded?: boolean;\n\tclassName?: string;\n\tcontentClassName?: string;\n\tbackgroundClassName?: string;\n\tbackgroundComponent?: PreviewBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\twrapperComponent?: PreviewWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstyle?: CSSProperties;\n\tcropper?: RefObject<DesiredCropperRef | null>;\n}\n\nexport const CropperPreview = forwardRef<CropperPreviewRef, Props>(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tcontentClassName,\n\t\t\tstate = null,\n\t\t\timage = null,\n\t\t\ttransitions = null,\n\t\t\tbackgroundComponent = CropperPreviewBackground,\n\t\t\tbackgroundProps,\n\t\t\tbackgroundClassName,\n\t\t\tboundaryComponent = StretchableBoundary,\n\t\t\tboundaryProps,\n\t\t\tboundaryClassName,\n\t\t\twrapperComponent = CropperPreviewWrapper,\n\t\t\twrapperProps,\n\t\t\tloaded = true,\n\t\t\tloading = false,\n\t\t\tstyle,\n\t\t\tcropper,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst rerender = useForceRerender();\n\n\t\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\n\t\tconst instance = cropper || {\n\t\t\tcurrent: {\n\t\t\t\tgetState: () => state,\n\t\t\t\tgetTransitions: () => transitions,\n\t\t\t\tgetImage: () => image,\n\t\t\t\tisLoaded: () => loaded,\n\t\t\t\tisLoading: () => loading,\n\t\t\t},\n\t\t};\n\n\t\tconst [size, setSize] = useState<Size | null>(null);\n\n\t\tconst coordinates = instance.current?.getState()?.coordinates;\n\n\t\tconst src = instance.current?.getImage()?.src;\n\n\t\tconst contentStyle = size\n\t\t\t? {\n\t\t\t\t\twidth: `${size.width}px`,\n\t\t\t\t\theight: `${size.height}px`,\n\t\t\t  }\n\t\t\t: {};\n\n\t\tconst refresh = () => {\n\t\t\tif (boundaryRef.current && coordinates) {\n\t\t\t\tboundaryRef.current.stretchTo(coordinates).then((size) => {\n\t\t\t\t\tif (size && coordinates) {\n\t\t\t\t\t\tif (isGreater(ratio(coordinates), ratio(size))) {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.width,\n\t\t\t\t\t\t\t\theight: size.width / ratio(coordinates),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.height * ratio(coordinates),\n\t\t\t\t\t\t\t\theight: size.height,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetSize(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\trerender();\n\t\t};\n\n\t\tuseWindowResize(refresh);\n\n\t\tuseLayoutEffect(refresh, [coordinates?.height, coordinates?.width]);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\trefresh: rerender,\n\t\t}));\n\n\t\tconst WrapperComponent = wrapperComponent;\n\n\t\tconst BackgroundComponent = backgroundComponent;\n\n\t\tconst BoundaryComponent = boundaryComponent;\n\n\t\treturn (\n\t\t\t<WrapperComponent\n\t\t\t\t{...wrapperProps}\n\t\t\t\tclassName={cn(className, 'advanced-cropper-preview')}\n\t\t\t\tcropper={instance.current}\n\t\t\t\tstyle={style}\n\t\t\t>\n\t\t\t\t<BoundaryComponent\n\t\t\t\t\tref={boundaryRef}\n\t\t\t\t\tstretchAlgorithm={stretchPreviewBoundary}\n\t\t\t\t\t{...boundaryProps}\n\t\t\t\t\tclassName={cn('advanced-cropper-preview__boundary', boundaryClassName)}\n\t\t\t\t>\n\t\t\t\t\t<div className={cn(contentClassName, 'advanced-cropper-preview__content')} style={contentStyle}>\n\t\t\t\t\t\t{instance.current && (\n\t\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\t\tcropper={instance.current}\n\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\tbackgroundClassName,\n\t\t\t\t\t\t\t\t\t'advanced-cropper-preview__image',\n\t\t\t\t\t\t\t\t\tsrc && 'advanced-cropper-preview__image--visible',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</BoundaryComponent>\n\t\t\t</WrapperComponent>\n\t\t);\n\t},\n);\n"],"names":["hasInteractions","interactions","moveCoordinates","resizeCoordinates","transformImage","move","rotate","flip","scale","getDirectionNames","hDirection","vDirection","camelCase","snakeCase","toUpperCase","slice","isBlob","url","test","isLocal","isDataUrl","isCrossOriginURL","pageLocation","window","location","urlMatch","exec","urlparts","protocol","host","port","portOf","Boolean","isFunction","value","isUndefined","obj","undefined","isObject","term","getOptions","options","defaultScheme","falseScheme","result","Object","keys","forEach","key","parseNumber","number","parsedNumber","Number","isNaN","isBoolean","isNumber","isNumeric","isString","parseFloat","isFinite","distance","firstPoint","secondPoint","Math","sqrt","pow","left","top","isRoughlyEqual","a","b","tolerance","abs","isGreater","isLower","promiseTimeout","timeout","Promise","resolve","setTimeout","deepClone","Array","isArray","map","item","deepCompare","constructor","length_1","i","length","valueOf","prototype","toString","hasOwnProperty","call","isCardinalDirection","debounce","callback","delay","timestamp","later","args","_i","arguments","last","Date","now","delayValue","apply","clear","clearTimeout","SetCoordinatesMode","ImageRestriction","Priority","ALL_DIRECTIONS","HORIZONTAL_DIRECTIONS","VERTICAL_DIRECTIONS","diff","firstObject","secondObject","getCenter","object","width","height","sizeDistance","applyDirections","coordinates","directions","right","bottom","inverseMove","applyMove","__assign","coordinatesToPositionRestrictions","applyScale","factor","center","progress","currentCenter","ratio","maxScale","size","restrictions","min","maxWidth","Infinity","maxHeight","getBrokenRatio","currentAspectRatio","aspectRatio","ratioBroken","minimum","maximum","fitToSizeRestrictions","sizeRestrictions","minWidth","minHeight","getIntersections","positionRestrictions","intersections","direction","areaLimit","objectLimit","max","resizeToSizeRestrictions","rotateSize","angle","radians","PI","cos","sin","rotatePoint","point","anchor","positionToSizeRestrictions","mergePositionRestrictions","firstDirection","secondDirection","fitToPositionRestrictions","intersection","moveToPositionRestrictions","createAspectRatio","isConsistentSize","isConsistentPosition","reconcileSizeRestrictions","mergeSizeRestrictions","first","second","isInitializedState","state","visibleArea","getAreaSizeRestrictions","settings","areaSizeRestrictions","boundary","calculateAreaSizeRestrictions","getAreaPositionRestrictions","areaPositionRestrictions","getSizeRestrictions","getPositionRestrictions","calculateSizeRestrictions","getCoefficient","getStencilCoordinates","_a","top_1","coefficient","getAspectRatio","getDefaultCoordinates","defaultCoordinates","getDefaultVisibleArea","defaultVisibleArea","getTransformedImageSize","imageSize","transforms","isConsistentState","copyState","approximateSize","params","candidates","push","reference","traverse","ignoreMinimum","reduce","preparedAspectRatio","getCloserSize","candidate","fitVisibleArea","moveCoordinatesAlgorithm","movedCoordinates","setCoordinates","transform","mode","currentMode","unsafe","zoom","limit","prevCoordinates","newCoordinates","changes","resize","widthIntersections","heightIntersections","fitCoordinates","setVisibleArea","safe","createState","_b","_c","_d","_e","image","horizontal","vertical","defaultTransforms","getDefaultTransforms","priority","fitDirections","preserveRatio","allowedDirections","compensate","fittedDirections","currentWidth","currentHeight","breaks","canBeCompensated","every","side","maxResize","multiplier_1","multiplier_2","distributeOverlap","overlap","anchorToMassPoint","plainAnchor","toLowerCase","indexOf","anchorToAllowedDirections","anchoredResizeCoordinatesAlgorithm","limitations","resizeDirections","normalizedDirections","el","anchorMoveToResizeDirections","actualCoordinates","preserveAspectRatio","respectDirection","overlapHeight","overlapWidth","resizeCoordinatesAlgorithm","minimumSize","getMinimumSize","setBoundary","imageCenter","shift","rotateImageAlgorithm","changed","oldCenter","newCenter","flipImageAlgorithm","scaleFactor","scaleCenter","isAllowedScale","areaScale","stencilScale","scaleRestrictions","stencil","area","relativeCoordinates","adjustStencil","transformImageAlgorithm","reconcileState","brokenRatio","desiredSize","scaleModifier","normalizeCenter","normalizeFlip","normalizedAngle","normalizeMoveDirections","runCallback","getInstance","instance","runCallbacks","callbacks","AbstractCropperInstance","_this","this","getTransitions","data","getData","transitions","getProps","timingFunction","duration","active","getInteractions","startTransitions","onTransitionsStart","onUpdate","__rest","setData","endTransitions","onTransitionsEnd","applyPostProcess","action","postProcess","name","interaction","immediately","preparedAction","processedState","p","updateState","modifier","onChange","previousData","somethingChanged","affectTransitionProperties","some","property","currentData","__spreadArrays","setInteractions","onInteractionStart","onInteractionEnd","previousInteractions","currentInteractions","state_1","resetState","createDefaultState","reconcileStateAlgorithm","reconciledState","normalize","onTransformImage","onTransformImageEnd","normalizeImageTransform","transformImageEnd","zoomImage","moveImage","flipImage","getState","rotateImage","reset","setState","getSettings","postprocess","newState","setCoordinatesAlgorithm","setVisibleAreaAlgorithm","setBoundaryAlgorithm","onMove","onMoveEnd","fillMoveDirections","moveCoordinatesEnd","parameters","onResize","onResizeEnd","normalizeResizeDirections","fillResizeDirections","resizeCoordinatesEnd","getCoordinates","round","roundCoordinates","floor","ceil","getRoundedCoordinates","getVisibleArea","getTransforms","createStateAlgorithm","isConsistent","defaultSize","sizeRestrictions_1","optimalRatio","pixelsRestrictions","retrieveSizeRestrictions","defaultPosition","withDefaultSizeRestrictions","basicSettings","createDefaultSettings","imageRestriction","fillArea","fitArea","defaultAreaPositionRestrictions","defaultAreaSizeRestrictions","limits","defaultPositionRestrictions","defaultSizeAlgorithm","defaultPositionAlgorithm_1","boundaryRatio","coordinatesIntersection","imageRatio","areaProperties","XHR_DONE","getImageData","img","reject","base64","replace","binary","atob","len","buffer","ArrayBuffer","view","Uint8Array","charCodeAt","base64ToArrayBuffer","fileReader_1","FileReader","onload","e","target","http","XMLHttpRequest","open","responseType","status","response","send","objectURLToBlob","blob","readAsArrayBuffer","http_1","onreadystatechange","readyState","onprogress","getResponseHeader","abort","withCredentials","getStyleTransforms","resetAndGetOrientation","arrayBuffer","orientation_1","dataView","DataView","tiffOffset","littleEndian","app1Start","ifdStart","getUint8","byteLength","offset","start","str","String","fromCharCode","getStringFromCharCode","endianness","getUint16","firstIFDOffset","getUint32","length_2","setUint16","error","getImage","src","orientation","revoke","URL","createObjectURL","Blob","chunks","uint8","subarray","from","btoa","join","arrayBufferToDataURL","loadImage","checkOrientation","parse","then","catch","console","warn","parseImage","crossOrigin","document","createElement","style","visibility","position","body","appendChild","complete","removeChild","addEventListener","createImage","naturalWidth","naturalHeight","getImageStyle","optimalImageSize","actualImageSize","imageTransforms","translateX","translateY","compensations","transition","willChange","stretchCropperBoundary","stretcher","clientWidth","clientHeight","stretchPreviewBoundary","getBoundingClientRect","fillBoundary","drawCroppedArea","resultCanvas","spareCanvas","source","canvas","originalSize","transformedSize","ctx","getContext","save","canvasCenter","translate","drawImage","restore","prepareSource","maxArea","imageSmoothingEnabled","imageSmoothingQuality","fillColor","firstNumeric","array","find","resultSize","clearRect","fillStyle","fillRect","offsetX","offsetY","updateCanvas","timingFunctions","linear","t","Animation","animation","onStart","onProgress","onStop","id","cancelAnimationFrame","startTime","performance","endTime","animate","percent","requestAnimationFrame","stop","calculateGeometricProperties","touches","container","centerMass","spread","touch","clientX","clientY","count","wheelEventToImageTransform","event","sign","deltaY","detail","wheelDelta","defaultStencilConstraints","rawSettings","stencilProps","fixedStencilConstraints","stencilOptions","defaultConstraints","stencilSize","main","subset","previousSize","getStencilSize","areaRestrictions","fixedStencil","fixedStencilAlgorithm","hybridStencilAutoZoom","hybridStencilAutoZoomAlgorithm","useDeprecationWarning","fired","useRef","message","current","useUpdateEffect","effect","deps","isFirstMount","isFirst","useFirstMountState","useEffect","CropperInstance","_super","props","notify","__extends","useForceRerender","__read","useState","setTick","useCropperInstance","rerender","propsRef","__spreadArray","usePersistentFunction","extendedSettings","extendedParameters","useWindowResize","callbackRef","internalCallback","removeEventListener","useAbstractCropper","onReady","onError","unloadTime","_f","autoReconcileState","imageRef","boundaryRef","canvasRef","cropperRef","_g","initialState","setCallback","previousState","useStateWithCallback","currentImage","setCurrentImage","cropper","cropperImage","onLoadingStart","onLoadingEnd","onLoad","loading","setLoading","loaded","setLoaded","setImage","currentSrc","promises","all","responses","finally","isLoading","isLoaded","useCropperImage","autoReconcile","enabled","setActive","useLayoutEffect","pause","resume","useCropperAutoReconcile","resetCropper","__awaiter","image_1","stretchTo","boundary_1","sent","refreshCropper","cropperInterface","refresh","getDefaultState","getCanvas","draw","useImperativeHandle","refs","StretchableBoundary","forwardRef","ref","className","stretcherClassName","contentClassName","stretchAlgorithm","sizeAlgorithm","children","stretcherRef","React","cn","displayName","CropperFade","visible","CropperWrapper","preventDefault","CropperBackgroundImage","transformStyles","getBackgroundStyle","onMouseDown","CropperCanvas","_","spareCanvasRef","DraggableElement","processMove","newTouches","movingToAnchor","useAnchor","processEnd","onLeave","disabled","hovered","initAnchor","top_2","onMouseOver","onEnter","onMouseLeave","onTouchStart","onMoveStart","cancelable","shouldStartMove","started","stopPropagation","onTouchEnd","onTouchMove","activationDistance","button","onMouseMove","onMouseUp","createRef","componentWillUnmount","componentDidMount","passive","componentDidUpdate","prevProps","render","defaultProps","Component","LineWrapper","onDrag","onDragEnd","concat","SimpleLine","hoverClassName","wrapperClassName","defaultClassName","hover","setHover","HandlerWrapper","horizontalPosition","verticalPosition","SimpleHandler","wrapperStyle","BoundingBox","handlerComponent","handlers","eastNorth","north","westNorth","west","westSouth","south","eastSouth","east","handlerClassNames","handlerWrapperClassNames","lines","lineComponent","_h","lineClassNames","_j","lineWrapperClassNames","_k","_l","_m","lastReference","setLastReference","points","useMemo","lineNodes","component","default","handlerNodes","containerClassName","onHandlerMove","nativeEvent","shiftKey","onHandlerMoveEnd","line","handler","handlerElement","StencilOverlay","ArtificialTransition","values","root","transitionValues","rememberedValues","setRememberedValues","useTransition","runTransitions","transitionsActive","startValues_1","desiredValue","startValue","currentValues","rootStyle","StencilWrapper","StencilGrid","columns","rows","nodes","currentColumns","setCurrentColumns","currentRows","setCurrentRows","cells","j","RectangleStencil","minAspectRatio","maxAspectRatio","resizable","movable","grid","gridClassName","movingClassName","resizingClassName","previewClassName","boundingBoxClassName","overlayClassName","draggableAreaClassName","TransformableImageEvent","defaultPrevented","TransformableImage","onTransform","touchScale","touchMove","touchRotate","previousTouches","previousProperties","properties","diffs","y","x","atan2","touchesToImageTransform","onTransformEnd","transforming","processStart","debouncedProcessEnd","processEvent","onEvent","transformEvent","onWheel","wheelScale","left_1","bottom_1","right_1","filter","identifier","anotherTouch","mouseMove","buttons","shouldComponentUpdate","CropperBackgroundWrapper","scaleImage","rotateImageOptions","useRotateImageOptions","scaleImageOptions","wheel","useScaleImageOptions","moveImageOptions","mouse","useMoveImageOptions","AbstractCropper","stencilComponent","stencilConstraints","wrapperComponent","wrapperProps","backgroundComponent","backgroundProps","backgroundClassName","backgroundWrapperComponent","backgroundWrapperProps","boundaryComponent","boundaryProps","boundaryClassName","stencilRef","_o","StencilComponent","WrapperComponent","BackgroundWrapperComponent","BackgroundComponent","BoundaryComponent","deprecatedWrapperProps","defaultSettings","useAbstractCropperProps","setting","FixedCropper","cropperProps","Cropper","intrinsicProps","autoZoom","actualSettings","deprecationWarning","CircleStencil","boundingBox","CropperPreviewWrapper","CropperPreviewBackground","getPreviewStyle","_p","setSize","contentStyle","ratio$1"],"sourceRoot":""}